if(!this.JSON){JSON=function(){function f(n){return n<10?'0'+n:n;}
Date.prototype.toJSON=function(){return this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z';};var m={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case'string':return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c;}
c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+
(c%16).toString(16);})+'"':'"'+value+'"';case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
if(typeof value.toJSON==='function'){return stringify(value.toJSON());}
a=[];if(typeof value.length==='number'&&!(value.propertyIsEnumerable('length'))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||'null');}
return'['+a.join(',')+']';} 
if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==='string'){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+':'+v);}}}}else{for(k in value){if(typeof k==='string'){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+':'+v);}}}}
return'{'+a.join(',')+'}';}}
return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==='object'){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n;}}}}
return filter(k,v);}
if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof filter==='function'?walk('',j):j;}
throw new SyntaxError('parseJSON');}};}();}
window.require=function(e,t){var n=require.resolve(e,t||"/"),r=require.modules[n];if(!r)throw new Error("Failed to resolve module "+e+", tried "+n);var i=r._cached?r._cached:r();return i},require.paths=[],require.modules={},require.extensions=[".js",".coffee",".ls"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(){return function(e,t){function o(e){if(require.modules[e])return e;for(var t=0;t<require.extensions.length;t++){var n=require.extensions[t];if(require.modules[e+n])return e+n}}function u(e){return e=e.replace(/\/+$/,""),o(e+"/index")}function a(e,t){var n=f(t);for(var r=0;r<n.length;r++){var i=n[r],s=o(i+"/"+e);if(s)return s;var a=u(i+"/"+e);if(a)return a}var s=o(e);if(s)return s}function f(e){var t;e==="/"?t=[""]:t=n.normalize(e).split("/");var r=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";r.push(s)}return r}t||(t="/");if(require._core[e])return e;var n=require.modules.path();t=n.resolve("/",t);var r=t||"/";if(e.match(/^(?:\.\.?\/|\/)/)){var i=o(n.resolve(r,e))||u(n.resolve(r,e));if(i)return i}var s=a(e,r);if(s)return s;throw new Error("Cannot find module '"+e+"'")}}(),require.alias=function(e,t){var n=require.modules.path(),r=null;try{r=require.resolve(e+"/package.json","/")}catch(i){r=require.resolve(e,"/")}var s=n.dirname(r),o=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(require.modules);for(var u=0;u<o.length;u++){var a=o[u];if(a.slice(0,s.length+1)===s+"/"){var f=a.slice(s.length);require.modules[t+f]=require.modules[s+f]}else a===s&&(require.modules[t]=require.modules[s])}},require.define=function(e,t){var n=require._core[e]?"":require.modules.path().dirname(e),r=function(e){return require(e,n)};r.resolve=function(e){return require.resolve(e,n)},r.modules=require.modules,r.define=require.define;var i={exports:{}};require.modules[e]=function(){return require.modules[e]._cached=i.exports,t.call(i.exports,r,i,i.exports,n,e),require.modules[e]._cached=i.exports,i.exports}},typeof process=="undefined"&&(process={}),process.nextTick||(process.nextTick=function(){var e=[],t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;return t&&window.addEventListener("message",function(t){if(t.source===window&&t.data==="browserify-tick"){t.stopPropagation();if(e.length>0){var n=e.shift();n()}}},!0),function(n){t?(e.push(n),window.postMessage("browserify-tick","*")):setTimeout(n,0)}}()),process.title||(process.title="browser"),process.binding||(process.binding=function(e){if(e==="evals")return require("vm");throw new Error("No such module")}),process.cwd||(process.cwd=function(){return"."}),require.define("path",function(e,t,n,r,i){function s(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function o(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:process.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(s(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=u.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=u.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return u.exec(e)[3]||""}});
require.define("ciiatjs.js",function(e,t,n,r,i){var s,o,u,a,f;s=e("eventemitter2").EventEmitter2,a=n.server=new s,u=n.message=new s,n.tmpl={},f=null,n.assignTransport=function(t){return f=e("ciiatjs-transport")(a,u,t),f.send=f.connect()},n.registerApi=function(e,t){var r;return r=n[e],r?console.error("ciiatjs Error: Unable to register the 'ss."+e+"' responder as this name has already been taken"):n[e]=t},n.send=function(e){return function(t){return f.send(e+"|"+t)}},o={loaded:{},loading:new s},n.load={code:function(e,t){var n,r,i;e&&e.substr(0,1)==="/"&&(e=e.substr(1)),n="ciiatjs Error: The ss.load.code() command ";if(!jQuery)return console.error(n+"requires jQuery to be present");if(!e)return console.error(n+"requires a directory to load. Specify it as the first argument. E.g. The ss.load.code('/mail',cb) will load code in /client/code/mail");if(!t)return console.error(n+"requires a callback. Specify it as the last argument");if(o.loaded[e])return t();o.loading.once(e,t);if(o.loading.listeners(e).length===1)return r=function(){return console.error("ciiatjs Error: Could not asynchronously load "+e),console.log(arguments)},i=function(){return o.loaded[e]=!0,o.loading.emit(e)},$.ajax({url:"/_serve/code?"+e,type:"GET",cache:!1,dataType:"script",success:i,error:r})},worker:function(e){return new Worker("/_serve/worker?"+e)}},a.on("__ss:reload",function(){return window.location.reload()}),a.on("__ss:updateCSS",function(){var e,t,n,r,i;i=document.getElementsByTagName("link");for(n=0,r=i.length;n<r;n++)t=i[n],t.rel.toLowerCase().indexOf("stylesheet")>=0&&t.href&&(e=t.href.replace(/(&|%5C?)\d+/,""),t.href=e+(e.indexOf("?")>=0?"&":"?")+(new Date).valueOf());return console.log("CSS updated")})});
require.define("eventemitter2.js",function(e,t,n,r,i){!function(e,t){function i(){this._events=new Object}function s(e){e&&(this.wildcard=e.wildcard,this.delimiter=e.delimiter||".",this.wildcard&&(this.listenerTree=new Object))}function o(e){this._events=new Object,s.call(this,e)}function u(e,t,n,r){if(!n)return;var i;if(r===t.length&&n._listeners){if(typeof n._listeners=="function")return e&&e.push(n._listeners),n;for(var s=0,o=n._listeners.length;s<o;s++)e&&e.push(n._listeners[s]);return n}if(t[r]==="*"||n[t[r]]){if(t[r]==="*"){for(var a in n)a!=="_listeners"&&n.hasOwnProperty(a)&&(i=u(e,t,n[a],r+1));return i}i=u(e,t,n[t[r]],r+1)}return n["*"]&&u(e,t,n["*"],r+1),i}function a(e,t){e=typeof e=="string"?e.split(this.delimiter):e.slice();var i=this.listenerTree,s=e.shift();while(s){i[s]||(i[s]=new Object),i=i[s];if(e.length===0){if(!i._listeners)i._listeners=t;else if(typeof i._listeners=="function")i._listeners=[i._listeners,t];else if(n(i._listeners)){i._listeners.push(t);if(!i._listeners.warned){var o=r;o>0&&i._listeners.length>o&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace())}}return!0}s=e.shift()}return!0}var n=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},r=10;o.prototype.setMaxListeners=function(e){this._events||i.call(this),this._events.maxListeners=e},o.prototype.event="",o.prototype.once=function(e,t){return this.many(e,1,t),this},o.prototype.many=function(e,t,n){function i(){--t===0&&r.off(e,i),n.apply(null,arguments)}var r=this;if(typeof n!="function")throw new Error("many only accepts instances of Function");return i._origin=n,this.on(e,i),r},o.prototype.emit=function(){this._events||i.call(this);var e=arguments[0];if(e==="newListener"&&!this._events.newListener)return!1;if(this._all){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];for(r=0,t=this._all.length;r<t;r++)this.event=e,this._all[r].apply(this,n)}if(e==="error"&&!this._all&&!this._events.error&&(!this.wildcard||!this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var s;if(this.wildcard){s=[];var o=typeof e=="string"?e.split(this.delimiter):e.slice();u.call(this,s,o,this.listenerTree,0)}else s=this._events[e];if(typeof s=="function"){this.event=e;if(arguments.length===1)s.call(this);else if(arguments.length>1)switch(arguments.length){case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];s.apply(this,n)}return!0}if(s){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];var a=s.slice();for(var r=0,t=a.length;r<t;r++)this.event=e,a[r].apply(this,n);return!0}},o.prototype.on=function(e,s){this._events||i.call(this),this.emit("newListener",e,s);if(this.wildcard)return a.call(this,e,s),this;if(!this._events[e])this._events[e]=s;else if(typeof this._events[e]=="function")this._events[e]=[this._events[e],s];else if(n(this._events[e])){this._events[e].push(s);if(!this._events[e].warned){var o;this._events.maxListeners!==t?o=this._events.maxListeners:o=r,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}return this},o.prototype.onAny=function(e){this._all||(this._all=[]);if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all.push(e),this},o.prototype.addListener=o.prototype.on,o.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var r;if(this.wildcard){var i=typeof e=="string"?e.split(this.delimiter):e.slice(),s=u.call(this,null,i,this.listenerTree,0);if("undefined"==typeof s)return this;r=s._listeners}else{if(!this._events[e])return this;r=this._events[e]}if(n(r)){var o=-1;for(var a=0,f=r.length;a<f;a++)if(r[a]===t||r[a].listener&&r[a].listener===t||r[a]._origin&&r[a]._origin===t){o=a;break}if(o<0)return this;this.wildcard?s._listeners.splice(o,1):this._events[e].splice(o,1),r.length===0&&(this.wildcard?delete s._listeners:delete this._events[e])}else if(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)this.wildcard?delete s._listeners:delete this._events[e];return this},o.prototype.offAny=function(e){var t=0,n=0,r;if(e&&this._all&&this._all.length>0){r=this._all;for(t=0,n=r.length;t<n;t++)if(e===r[t])return r.splice(t,1),this}else this._all=[];return this},o.prototype.removeListener=o.prototype.off,o.prototype.removeAllListeners=function(e){if(arguments.length===0)return!this._events||i.call(this),this;if(this.wildcard){var t=typeof e=="string"?e.split(this.delimiter):e.slice(),n=u.call(this,null,t,this.listenerTree,0);if("undefined"==typeof n)return this;n._listeners=null}else{if(!this._events[e])return this;this._events[e]=null}return this},o.prototype.listeners=function(e){if(this.wildcard){var t=[],r=typeof e=="string"?e.split(this.delimiter):e.slice();return u.call(this,t,r,this.listenerTree,0),t}return this._events||i.call(this),this._events[e]||(this._events[e]=[]),n(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},o.prototype.listenersAny=function(){return this._all?this._all:[]},e.EventEmitter2=o}(typeof n=="undefined"?window:n)});(function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(!b.acceptData(e))return;var s,o,u=b.expando,a=typeof n=="string",f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if((!h||!c[h]||!i&&!c[h].data)&&a&&r===t)return;h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n);return s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[b.camelCase(n)])):o=s,o}function q(e,t,n){if(!b.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(!u[a])return;if(t){s=n?u[a]:u[a].data;if(s){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t in s?t=[t]:t=t.split(" "));for(r=0,i=t.length;r<i;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}}if(!n){delete u[a].data;if(!U(u[a]))return}o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null}function R(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(F,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e){if(t==="data"&&b.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){t=t||0;if(b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(typeof t=="string"){var r=b.grep(e,function(e){return e.nodeType===1});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!b.hasData(e))return;var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function Wt(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||qt.test(e)?r(e,i):Wt(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&b.type(t)==="object")for(i in t)Wt(e+"["+i+"]",t[i],n,r);else r(e,t)}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1 -css,-ajax,-ajax/script,-ajax/jsonp,-ajax/xhr,-effects,-offset,-dimensions",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){if(s.addEventListener||e.type==="load"||s.readyState==="complete")D(),b.ready()},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=x.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0));if(T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}o=s.getElementById(i[2]);if(o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!b.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r)}return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?--b.readyWait:b.isReady)return;if(!s.body)return setTimeout(b.ready);b.isReady=!0;if(e!==!0&&--b.readyWait>0)return;n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready")},isFunction:function(e){return b.type(e)==="function"},isArray:Array.isArray||function(e){return b.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||b.type(e)!=="object"||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=b.trim(t);if(t&&N.test(t.replace(k,"@").replace(L,"]").replace(C,"")))return(new Function("return "+t))()}b.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:y&&!y.call("﻿ ")?function(e){return e==null?"":y.call(e)}:function(e){return e==null?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(P(Object(e))?b.merge(n,typeof e=="string"?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(b.type(r)==="object"){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n){n=b.Deferred();if(s.readyState==="complete")setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=e.frameElement==null&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e=typeof e=="string"?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!i||f)&&(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=r!==1||e&&b.isFunction(e.promise)?r:0,s=i===1?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:p.className!=="t",leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:s.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:s.compatMode==="CSS1Compat",deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=o.getAttribute("value")==="",o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box",b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];if(!a)return;n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=o[0].offsetHeight===0,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&o[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=p.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length){u=b.data(s);if(s.nodeType===1&&!b._data(s,"parsedAttrs")){r=s.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){b.data(this,e)}):b.access(this,function(n){if(n===t)return s?R(s,e,b.data(s,e)):null;this.each(function(){b.data(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=b._data(e,t),n&&(!r||b.isArray(n)?r=b._data(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),s.cur=i,i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=b.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else if(n===i||n==="boolean")this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace(V,""):n==null?"":n);return}return i=b.isFunction(e),this.each(function(n){var s,o=b(this);if(this.nodeType!==1)return;i?s=e.call(this,n,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":b.isArray(s)&&(s=b.map(s,function(e){return e==null?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(b.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!b.nodeName(n.parentNode,"optgroup"))){t=b(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(typeof e.getAttribute===i)return b.prop(e,n,r);o=a!==1||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z));if(r===t)return s&&o&&"get"in s&&(u=s.get(e,n))!==null?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),u==null?t:u);if(r!==null)return s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r);b.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&e.nodeType===1)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&t==="radio"&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i=typeof r=="boolean"&&e.getAttribute(n),s=typeof r=="boolean"?Y&&G?i!=null:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}};if(!Y||!G)b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,t,n){if(!b.nodeName(e,"input"))return z&&z.set(e,t,n);e.defaultValue=t}};G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(n==="id"||n==="name"||n==="coords"?r.value!=="":r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,t===""?!1:t,n)}},b.each(["width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r==null?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,t){if(b.isArray(t))return e.checked=b.inArray(b(e).val(),t)>=0}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||!!e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(!m||!(l=m.events))return;t=(t||"").match(E)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)b.event.remove(e,p+t[f],n,r,!0);continue}c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&b.removeEvent(e,p,m.handle),delete l[p])}b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||s;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+b.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[b.expando]?n:new b.Event(v,typeof n=="object"&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{};if(!o&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!o&&!c.noBubble&&!b.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!o&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(i.ownerDocument,r)===!1)&&(v!=="click"||!b.nodeName(i,"a"))&&b.acceptData(i)&&a&&i[v]&&!b.isWindow(i)){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(b.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===s.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!b.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){if(b.nodeName(this,"form"))return!1;b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(b.nodeName(this,"form"))return!1;b.event.remove(this,"._submit")}}),b.support.changeBubbles||(b.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")b.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)});return!1}b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){n++===0&&s.addEventListener(e,r,!0)},teardown:function(){--n===0&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;(t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){h=!0,v=w,m=t,y=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=U.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=z.exec(u))n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length);for(o in i.filter)(r=V[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&i==="parentNode",o=T++;return t.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[i])if(t.nodeType===1||s){l=t[w]||(t[w]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else{f=l[i]=[c],f[1]=e(t,n,u)||r;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[w]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,a<r&&yt(e.slice(a,r)),r<s&&yt(e=e.slice(r)),r<s&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=S==null?1:Math.random()||.1;E&&(f=a!==c&&a,r=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!p&&i.relative[o[1].type]){t=i.find.ID(a.matches[0].replace(et,tt),t)[0];if(!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){a=o[s];if(i.relative[f=a.type])break;if(l=i.find[f])if(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t)){o.splice(s,1),e=r.length&&pt(o);if(!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;if(n===c||n.nodeType!==9||!n.documentElement)return c;c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},i.find.CLASS=S.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&!p)return t.getElementsByClassName(e)},v=[],d=[":focus"];if(S.qsa=rt(n.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=new RegExp(d.join("|")),v=new RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;if(e===t)return a=!0,0;if(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))return r&1||e.parentNode&&e.parentNode.nodeType===11?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']");if(S.matchesSelector&&!p&&(!v||!v.test(t))&&!d.test(t))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;a=!S.detectDuplicates,e.sort(y);if(a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=s(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[x,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(typeof e!="string")return r=this,this.pushStack(b(e).filter(function(){for(t=0;t<i;t++)if(b.contains(r[t],this))return!0}));n=[];for(t=0;t<i;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&(typeof e=="string"?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?b(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?typeof e=="string"?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&typeof r=="string"&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!b(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||b.filter(e,[n]).length>0)!t&&n.nodeType===1&&b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(b.support.htmlSerialize||!mt.test(e))&&(b.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return!t&&typeof e!="string"&&(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(c<=1||typeof v!="string"||b.support.checkClone||!Tt.test(v)))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c){f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,f.childNodes.length===1&&(f=i);if(i){n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;for(;l<c;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o){a=u[u.length-1].ownerDocument,b.map(u,Dt);for(l=0;l<o;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")))}f=i=null}}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!b.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(b.type(s)==="object")b.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!b.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&b.inArray(s,r)!==-1)continue;o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;(n=e[u])!=null;u++)if(t||b.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}}});var It=/%20/g,qt=/\[\]$/,Rt=/\r?\n/g,Ut=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&zt.test(this.nodeName)&&!Ut.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return n==null?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(Rt,"\r\n")}}):{name:t.name,value:n.replace(Rt,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional);if(b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)Wt(r,e[r],n,s);return i.join("&").replace(It,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)},e.jQuery=e.$=b,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})})(window);(function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.6.0";var T=x.each=x.forEach=function(e,t,r){if(e==null)return e;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}return e};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,x.property(t))},x.where=function(e,t){return x.filter(e,x.matches(t))},x.findWhere=function(e,t){return x.find(e,x.matches(t))},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-Infinity,i=-Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u>i&&(r=e,i=u)}),r},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=Infinity,i=Infinity;return T(e,function(e,s,o){var u=t?t.call(n,e,s,o):e;u<i&&(r=e,i=u)}),r},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return t==null||n?(e.length!==+e.length&&(e=x.values(e)),e[x.random(e.length-1)]):x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return e==null?x.identity:x.isFunction(e)?e:x.property(e)};x.sortBy=function(e,t,n){return t=k(t),x.pluck(x.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=k(n),T(t,function(s,o){var u=n.call(r,s,o,t);e(i,u,s)}),i}};x.groupBy=L(function(e,t,n){x.has(e,t)?e[t].push(n):e[t]=[n]}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:t<0?[]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.partition=function(e,t,n){t=k(t);var r=[],i=[];return T(e,function(e){(t.call(n,e)?r:i).push(e)}),[r,i]},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.contains(t,e)})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){var n=0,r=t.slice();for(var i=0,s=r.length;i<s;i++)r[i]===x&&(r[i]=arguments[n++]);while(n<arguments.length)r.push(arguments[n++]);return e.apply(this,r)}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:x.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=x.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u,a=function(){var f=x.now()-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=x.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return x.partial(t,e)},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=function(e){if(!x.isObject(e))return[];if(E)return E(e);var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.constant=function(e){return function(){return e}},x.property=function(e){return function(t){return t[e]}},x.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},x.now=Date.now||function(){return(new Date).getTime()};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),typeof define=="function"&&define.amd&&define("underscore",[],function(){return x})}).call(this);(function(e,t){if(typeof define=="function"&&define.amd)define(["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)})(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t});(function(e,t){typeof exports=="object"&&typeof require=="function"?module.exports=t(require("backbone")):typeof define=="function"&&define.amd?define(["backbone"],function(n){return t(n||e.Backbone)}):t(Backbone)})(this,function(e){function t(){return((1+Math.random())*65536|0).toString(16).substring(1)}function n(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}function r(e,t){var n=e.length;while(n--)if(e[n]===t)return!0;return!1}function i(e,t){for(var n in t)e[n]=t[n];return e}return e.LocalStorage=window.Store=function(e,t){if(!this.localStorage)throw"Backbone.localStorage: Environment does not support localStorage.";this.name=e,this.serializer=t||{serialize:function(e){return _.isObject(e)?JSON.stringify(e):e},deserialize:function(e){return e&&JSON.parse(e)}};if(this.localStorage()){var n=this.localStorage().getItem(this.name);this.records=n&&n.split(",")||[]}},i(e.LocalStorage.prototype,{save:function(){this.localStorage().setItem(this.name,this.records.join(","))},create:function(e){return e.id||(e.id=n(),e.set(e.idAttribute,e.id)),this.localStorage().setItem(this.name+"-"+e.id,this.serializer.serialize(e)),this.records.push(e.id.toString()),this.save(),this.find(e)!==!1},update:function(e){this.localStorage().setItem(this.name+"-"+e.id,this.serializer.serialize(e));var t=e.id.toString();return r(this.records,t)||(this.records.push(t),this.save()),this.find(e)!==!1},find:function(e){return this.serializer.deserialize(this.localStorage().getItem(this.name+"-"+e.id))},findAll:function(){var e=[];for(var t=0,n,r;t<this.records.length;t++)n=this.records[t],r=this.serializer.deserialize(this.localStorage().getItem(this.name+"-"+n)),r!=null&&e.push(r);return e},destroy:function(e){if(e.isNew())return!1;this.localStorage().removeItem(this.name+"-"+e.id);var t=e.id.toString();for(var n=0,r;n<this.records.length;n++)this.records[n]===t&&this.records.splice(n,1);return this.save(),e},localStorage:function(){return localStorage},_clear:function(){var e=this.localStorage(),t=new RegExp("^"+this.name+"-");e.removeItem(this.name);for(var n in e)t.test(n)&&e.removeItem(n);this.records.length=0},_storageSize:function(){return this.localStorage().length}}),e.LocalStorage.sync=window.Store.sync=e.localSync=function(t,n,r){var i=n.localStorage||n.collection.localStorage,s,o,u=e.$?e.$.Deferred&&e.$.Deferred():e.Deferred&&e.Deferred();try{switch(t){case"read":s=n.id!=undefined?i.find(n):i.findAll();break;case"create":s=i.create(n);break;case"update":s=i.update(n);break;case"delete":s=i.destroy(n)}}catch(a){a.code===22&&i._storageSize()===0?o="Private browsing is unsupported":o=a.message}return s?(r&&r.success&&(e.VERSION==="0.9.10"?r.success(n,s,r):r.success(s)),u&&u.resolve(s)):(o=o?o:"Record Not Found",r&&r.error&&(e.VERSION==="0.9.10"?r.error(n,o,r):r.error(o)),u&&u.reject(o)),r&&r.complete&&r.complete(s),u&&u.promise()},e.ajaxSync=e.sync,e.getSyncMethod=function(t){return t.localStorage||t.collection&&t.collection.localStorage?e.localSync:e.ajaxSync},e.sync=function(t,n,r){return e.getSyncMethod(n).apply(this,[t,n,r])},e.LocalStorage});(function(){var e="enyo.js";enyo=window.enyo||{options:{}},enyo.locateScript=function(e){for(var t,n,r=document.getElementsByTagName("script"),i=r.length-1,s=e.length;i>=0&&(t=r[i]);i--)if(!t.located&&(n=t.getAttribute("src")||"",n.slice(-s)==e))return t.located=!0,{path:n.slice(0,Math.max(0,n.lastIndexOf("/"))),node:t}},enyo.args=enyo.args||{};var t=enyo.locateScript(e);if(t){enyo.args.root=(enyo.args.root||t.path).replace("/source","");for(var n,r=0,i=t.node.attributes.length;i>r&&(n=t.node.attributes.item(r));r++)enyo.args[n.nodeName]=n.value}})(),enyo.version={enyo:"2.4.0"},function(e,t){var n,r,i,s,o,u=e.document,a=[],f="complete"===u.readyState,l=!1;t.ready=function(e,t){a.push([e,t]),f&&!l&&(setTimeout(o,0),l=!0)},n=function(e,n){e.call(n||t.global)},r=function(e){(f="interactive"===u.readyState)&&"DOMContentLoaded"!==e.type&&"readystatechange"!==e.type&&(i(e.type,r),o()),(f="complete"===u.readyState||"loaded"===u.readyState)&&(i(e.type,r),o())},s=function(e,t){var n=u.addEventListener?"addEventListener":"attachEvent",r="attachEvent"===n?"on":"";u[n](r+e,t,!1)},i=function(e,t){var n=u.addEventListener?"removeEventListener":"detachEvent",r="detachEvent"===n?"on":"";u[n](r+e,t,!1)},o=function(){if(f&&a.length)for(;a.length;)n.apply(e,a.shift());l=!1},s("DOMContentLoaded",r),s("readystatechange",r)}(window,enyo),function(e){var t=[],n=function(n){for(var r,i=0;r=t[i];i++)r[0].apply(r[1]||e.global,[n])};e.rendered=function(e,n){t.push([e,n])},e.addToRoots=function(t){e.exists(e.roots)?e.roots.push(t):e.roots=[t];var r=t.rendered;t.rendered=function(){r.apply(t,[]),n(t)},t._isRoot=!0}}(enyo),function(){enyo=window.enyo||{options:{}},enyo.pathResolverFactory=function(){this.paths={},this.pathNames=[]},enyo.pathResolverFactory.prototype={addPath:function(e,t){return this.paths[e]=t,this.pathNames.push(e),this.pathNames.sort(function(e,t){return t.length-e.length}),t},addPaths:function(e){if(e)for(var t in e)this.addPath(t,e[t])},includeTrailingSlash:function(e){return e&&"/"!==e.slice(-1)?e+"/":e},rewrite:function(e){var t,n=this.includeTrailingSlash,r=this.paths,i=function(e,i){return t=!0,n(r[i])||""},s=e;do{t=!1;for(var o=0;this.pathNames.length>o;o++){var u=RegExp("\\$("+this.pathNames[o]+")(\\/)?","g");s=s.replace(u,i)}}while(t);return s}},enyo.path=new enyo.pathResolverFactory,enyo.loaderFactory=function(e,t){this.machine=e,this.packages=[],this.modules=[],this.sheets=[],this.designs=[],this.stack=[],this.pathResolver=t||enyo.path,this.packageName="",this.packageFolder="",this.finishCallbacks={}},enyo.loaderFactory.prototype={verbose:!1,loadScript:function(e,t,n){this.machine.script(e,t,n)},loadSheet:function(e){this.machine.sheet(e)},loadPackage:function(e){this.machine.script(e)},report:function(){},load:function(){this.more({index:0,depends:arguments||[]})},more:function(e){if(!e||!this.continueBlock(e)){var t=this.stack.pop();t?(enyo.runtimeLoading&&e.failed&&(t.failed=t.failed||[],t.failed.push.apply(t.failed,e.failed)),this.verbose&&window.console.groupEnd("* finish package ("+(t.packageName||"anon")+")"),this.packageFolder=t.folder,this.packageName="",this.more(t)):this.finish(e)}},finish:function(e){this.packageFolder="",this.verbose&&window.console.log("-------------- fini");for(var t in this.finishCallbacks)if(this.finishCallbacks[t]){var n=this.finishCallbacks[t];this.finishCallbacks[t]=null,n(e)}},continueBlock:function(e){for(;e.index<e.depends.length;){var t=e.depends[e.index++];if(t)if("string"==typeof t){if(this.require(t,e))return!0}else this.pathResolver.addPaths(t)}},require:function(e,t){var n=this.pathResolver.rewrite(e),r=this.getPathPrefix(e);if(n=r+n,".css"==n.slice(-4).toLowerCase()||".less"==n.slice(-5).toLowerCase())this.verbose&&window.console.log("+ stylesheet: ["+r+"]["+e+"]"),this.requireStylesheet(n);else{if(".js"==n.slice(-3).toLowerCase()&&"package.js"!=n.slice(-10).toLowerCase())return this.verbose&&window.console.log("+ module: ["+r+"]["+e+"]"),this.requireScript(e,n,t);if(".design"!=n.slice(-7).toLowerCase())return this.requirePackage(n,t),!0;this.verbose&&window.console.log("+ design metadata: ["+r+"]["+e+"]"),this.requireDesign(n)}},getPathPrefix:function(e){var t=e.slice(0,1);return"/"==t||"\\"==t||"$"==t||/^https?:/i.test(e)?"":this.packageFolder},requireStylesheet:function(e){this.sheets.push(e),this.loadSheet(e)},requireScript:function(e,t,n){if(this.modules.push({packageName:this.packageName,rawPath:e,path:t}),enyo.runtimeLoading){var r=this,i=function(){r.more(n)},s=function(){n.failed=n.failed||[],n.failed.push(t),r.more(n)};this.loadScript(t,i,s)}else this.loadScript(t);return enyo.runtimeLoading},requireDesign:function(e){this.designs.push({packageName:this.packageName,path:e})},decodePackagePath:function(e){var t="",n="package.js";/^\/\//.test(e)&&(e=document.location.protocol+e);var r=e.replace(/\\/g,"/").replace(/\/\//g,"/").replace(/:\//,"://").split("/");if(r.length){var i=r.pop()||r.pop()||"";i.slice(-n.length)!==n?r.push(i):n=i,t=r.join("/"),t=t?t+"/":"",n=t+n}return{folder:t,manifest:n}},aliasPackage:function(e){var t=this.decodePackagePath(e);this.manifest=t.manifest},requirePackage:function(e,t){t.folder=this.packageFolder;var n=this.decodePackagePath(e);this.manifest=n.manifest,this.packageFolder=n.folder,t.packageName=this.packageName,this.stack.push(t),this.report("loading package",this.packageName),this.verbose&&window.console.group("* start package ["+this.packageName+"]"),this.loadPackage(this.manifest)}}}(),enyo.machine={sheet:function(e){var t="text/css",n="stylesheet",r=".less"==e.slice(-5);r&&(window.less?(t="text/less",n="stylesheet/less"):e=e.slice(0,e.length-4)+"css");var i;enyo.runtimeLoading||r?(i=document.createElement("link"),i.href=e,i.media="screen",i.rel=n,i.type=t,document.getElementsByTagName("head")[0].appendChild(i)):document.write('<link href="'+e+'" media="screen" rel="'+n+'" type="'+t+'" />'),r&&window.less&&(window.less.sheets.push(i),enyo.loader.finishCallbacks.lessRefresh||(enyo.loader.finishCallbacks.lessRefresh=function(){window.less.refresh(!0)}))},script:function(e,t,n){if(enyo.runtimeLoading){var r=document.createElement("script");r.src=e,r.onload=t,r.onerror=n,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}else document.write('<script src="'+e+'"'+(t?' onload="'+t+'"':"")+(n?' onerror="'+n+'"':"")+"></scri"+"pt>")},inject:function(e){document.write('<script type="text/javascript">'+e+"</scri"+"pt>")}},enyo.loader=new enyo.loaderFactory(enyo.machine),enyo.depends=function(){var e=enyo.loader;if(!e.packageFolder){var t=enyo.locateScript("package.js");t&&t.path&&(e.aliasPackage(t.path),e.packageFolder=t.path+"/")}e.load.apply(e,arguments)},function(){function e(r){if(r&&r(),n.length){var i=n.shift(),s=i[0],o=t.isArray(s)?s:[s],u=i[1];t.loader.finishCallbacks.runtimeLoader=function(t){e(function(){u&&u(t)})},t.loader.packageFolder="./",t.depends.apply(this,o)}else t.runtimeLoading=!1,t.loader.packageFolder=""}var t=window.enyo,n=[],r=!1;t.ready(function(){r=!0}),t.load=function(i){if(r)n.push(arguments),t.runtimeLoading||(t.runtimeLoading=!0,e());else if(t.isArray(i))for(var s=0;i.length>s;++s)t.loader.require(i[s]);else t.loader.require(i)}}(),enyo.path.addPaths({enyo:enyo.args.root,lib:"$enyo/../lib"}),enyo.logging={level:99,levels:{log:20,warn:10,error:0},shouldLog:function(e){var t=parseInt(this.levels[e],0);return this.level>=t},validateArgs:function(e){for(var t,n=0,r=e.length;(t=e[n])||r>n;n++)try{"object"==typeof t&&(e[n]=enyo.json.stringify(t))}catch(i){e[n]="Error: "+i.message}},_log:function(e,t){var n=window.console;if(void 0!==n){var r=enyo.isArray(t)?t:enyo.cloneArray(t);enyo.platform.androidFirefox&&enyo.logging.validateArgs(r),enyo.dumbConsole&&(r=[r.join(" ")]);var i=n[e];i&&i.apply?i.apply(n,r):n.log.apply?n.log.apply(n,r):n.log(r.join(" "))}},log:function(e,t){var n=window.console;n!==void 0&&this.shouldLog(e)&&this._log(e,t)}},enyo.setLogLevel=function(e){var t=parseInt(e,0);isFinite(t)&&(enyo.logging.level=t)},enyo.log=function(){enyo.logging.log("log",arguments)},enyo.warn=function(){enyo.logging.log("warn",arguments)},enyo.error=function(){enyo.logging.log("error",arguments)},function(){enyo.global=this;var e=0;enyo.exists=function(e){return void 0!==e};var t=enyo.exists;enyo.lastIndexOf=function(e,t,n){if(t.lastIndexOf)return t.lastIndexOf(e,n||t.length);var r,i="string"==typeof t,s=(i?t.split(""):t).reverse(),o=s.length-1,u=t.length;return i&&(s=s.join("")),r=enyo.indexOf(e,s,u-(n||u)),i||s.reverse(),-1===r?r:o-r};var n=enyo.lastIndexOf,r=function(e){return e&&"function"==typeof e&&(e._FinalCtor||e._finishKindCreation)};enyo.getPath=function(e){if(void 0===e||null===e)return e;var t=this===enyo?enyo.global:this,n="."==e[0]?e.replace(/^\.+/,""):e;if(!n)return t;for(var r,i,s,o=n.split("."),u=o.pop(),a=0;(s=o[a])&&(t&&(t._isObject?t=t._getters&&(i=t._getters[s])?t[i]():t.computed&&t.get&&null!=t.computed[s]?t[s]():t[s]:("function"==typeof t&&(t=enyo.checkConstructor(t)),t=t[s])),t);++a);return a==o.length?(r=t[u],"function"==typeof r&&enyo.checkConstructor(r)||r):void 0},enyo.getPath.fast=function(e){var t,n,r=this;return n=r._getters&&(t=r._getters[e])?r[t]():r.get&&r.computed&&null!=r.computed[e]?r[e]():r[e],"function"==typeof n&&enyo.checkConstructor(n)||n},enyo.setPath=function(e,t,n){var i=this===enyo?enyo.global:this,s=i;if(!e)return i;var o="."==e[0]?e.replace(/^\.+/,""):e;if(!o)return i;for(var u,a,f,l,c=o.split("."),h=c.pop(),p=0;l=c[p];++p)("enyo"!=l||enyo!==i)&&((u=i[l])?"object"==typeof u?i=u:"function"==typeof u&&(i=i._isObject&&i.computed&&null!=i.computed[l]?i.get(l):r(u)?enyo.checkConstructor(u):u):i=i[l]={});return a=i&&i._isObject&&i._getters&&(f=i._getters[h])?i[f]():i[h],i[h]=t,(i.notifyObservers&&a!==t||n)&&i.notifyObservers(h,a,t),s},enyo.setPath.fast=function(e,t){var n,r,i=this;return i.computed&&null!=i.computed[e]?i:(n=i._getters&&(r=i._getters[e])?i[r]():i[e],i[e]=t,n!==t&&i.notifyObservers(e,n,t),i)},enyo.uid=function(t){return(t?t:"")+e++ +""},enyo.irand=function(e){return Math.floor(Math.random()*e)},enyo.toUpperCase=function(e){return null!=e?(""+e).toUpperCase():e},enyo.toLowerCase=function(e){return null!=e?(""+e).toLowerCase():e},enyo.cap=function(e){return e.slice(0,1).toUpperCase()+e.slice(1)},enyo.uncap=function(e){return e.slice(0,1).toLowerCase()+e.slice(1)},enyo.format=function(e){var t=/\%./g,n=0,r=e,i=arguments,s=function(){return i[++n]};return r.replace(t,s)};var i=Object.prototype.toString;enyo.isString=function(e){return"[object String]"===i.call(e)},enyo.isFunction=function(e){return"[object Function]"===i.call(e)},enyo.isArray=Array.isArray||function(e){return"[object Array]"===i.call(e)},enyo.isObject=Object.isObject||function(e){return null!=e&&"[object Object]"===i.call(e)},enyo.isTrue=function(e){return"false"!==e&&e!==!1&&0!==e&&null!==e&&void 0!==e},enyo.find=function(e,t,n){var r,i,s,o=enyo.isArray(e)&&e,u=n||enyo.global,a=t,f=0;if(o&&a&&enyo.isFunction(a))for(i=enyo.clone(o),r=o.length;r>f;++f)if(s=a.call(u,o[f],f,i))return f;return!1},enyo.indexOf=function(e,t,n){if(t.indexOf)return t.indexOf(e,n);if(n&&(0>n&&(n=0),n>t.length))return-1;for(var r,i=n||0,s=t.length;(r=t[i])||s>i;i++)if(r==e)return i;return-1},enyo.remove=function(e,t){var n=enyo.indexOf(e,t);n>=0&&t.splice(n,1)},enyo.forEach=function(e,t,n){if(e){var r=n||this;if(enyo.isArray(e)&&e.forEach)e.forEach(t,r);else for(var i=Object(e),s=i.length>>>0,o=0;s>o;o++)o in i&&t.call(r,i[o],o,i)}},enyo.map=function(e,t,n){var r=n||this;if(enyo.isArray(e)&&e.map)return e.map(t,r);var i=[],s=function(e,n,s){i.push(t.call(r,e,n,s))};return enyo.forEach(e,s,r),i},enyo.merge=function(){for(var e,t=Array.prototype.concat.apply([],arguments),n=[],r=0;e=t[r];++r)~enyo.indexOf(e,n)||n.push(e);return n};var s=enyo.merge;enyo.values=function(e){if(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}},enyo.union=function(){for(var e,t=Array.prototype.concat.apply([],arguments),r=[],i=[],s=0,o=t.length;o>s;++s)e=t[s],~enyo.indexOf(e,r)||(r.push(e),s===n(e,t)&&i.push(e));return i};var o=enyo.union;enyo.unique=o;var u=enyo.unique;enyo.reduce=s,enyo.only=function(e,n,r){var i,s,o={},a=0;if(!(t(e)&&e instanceof Array))return o;if(!t(n)||"object"!=typeof n)return o;for(e=u(e),i=e.length;i>a;++a)if(s=e[a],s in n){if(!0===r&&!n[s])continue;o[s]=n[s]}return o},enyo.remap=function(e,t,n){var r,i,s=n?enyo.clone(t):{};for(r in e)i=e[r],r in t&&(s[i]=t.get?t.get(r):t[r]);return s},enyo.except=function(e,n){var r,i,s,u={},f=0;if(!(t(e)&&e instanceof Array))return u;if(!t(n)||"object"!=typeof n)return u;for(r=o(e,a(n)),i=r.length;i>f;++f)s=r[f],s in n&&(u[s]=n[s]);return u},enyo.indexBy=function(e,n,r){var i,s,o={},u=0;if(!(t(n)&&n instanceof Array))return o;if(!t(e)||"string"!=typeof e)return o;var a=enyo.clone(n);for(r=t(r)&&"function"==typeof r?r:void 0,s=n.length;s>u;++u)i=n[u],t(i)&&t(i[e])&&(r?r(e,i,o,a):o[i[e]]=i);return o},enyo.pluck=function(e,n){var r,i=[],s=0;if(!t(e)||!t(n))return i;if(n instanceof Array){if("string"!=typeof e)return i;for(r=n.length;r>s;++s)t(n[s])&&t(n[s][e])&&i.push(n[s][e]);return i}return i},enyo.filter=function(e,t,n){var r=n||this;if(enyo.isArray(e)&&e.filter)return e.filter(t,r);var i=[],s=function(e,n,s){var o=e;t.call(r,e,n,s)&&i.push(o)};return enyo.forEach(e,s,r),i},enyo.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);if(!{toString:null}.propertyIsEnumerable("toString"))for(var i,s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=0;i=s[o];o++)n.call(e,i)&&t.push(i);return t};var a=enyo.keys;enyo.cloneArray=function(e,t,n){for(var r=n||[],i=t||0,s=e.length;s>i;i++)r.push(e[i]);return r},enyo.toArray=enyo.cloneArray,enyo.clone=function(e){return enyo.isArray(e)?enyo.cloneArray(e):enyo.mixin({},e)};var f={};enyo.mixin=function(e,t,n){var r,i,s,o,u,a;if(enyo.isArray(e)?(r={},i=e,t&&enyo.isObject(t)&&(s=t)):(r=e||{},i=t,s=n),enyo.isObject(s)||(s={}),!0===n&&(s.ignore=!0,s.exists=!0),enyo.isArray(i))for(o=0;a=i[o];++o)enyo.mixin(r,a,s);else for(u in i)a=i[u],f[u]!==a&&(s.exists&&!a||s.ignore&&r[u]||(s.filter&&enyo.isFunction(s.filter)?!s.filter(u,a,i,r,s):0)||(r[u]=a));return r},enyo.bind=function(e,t){if(t||(t=e,e=null),e=e||enyo.global,enyo.isString(t)){if(!e[t])throw'enyo.bind: scope["'+t+'"] is null (scope="'+e+'")';t=e[t]}if(enyo.isFunction(t)){var n=enyo.cloneArray(arguments,2);return t.bind?t.bind.apply(t,[e].concat(n)):function(){var r=enyo.cloneArray(arguments);return t.apply(e,n.concat(r))}}throw'enyo.bind: scope["'+t+'"] is not a function (scope="'+e+'")'},enyo.bindSafely=function(e,t){if(enyo.isString(t)){if(!e[t])throw'enyo.bindSafely: scope["'+t+'"] is null (this="'+this+'")';t=e[t]}if(enyo.isFunction(t)){var n=enyo.cloneArray(arguments,2);return function(){if(!e.destroyed){var r=enyo.cloneArray(arguments);return t.apply(e,n.concat(r))}}}throw'enyo.bindSafely: scope["'+t+'"] is not a function (this="'+this+'")'},enyo.asyncMethod=function(e,t){return t?setTimeout(enyo.bind.apply(enyo,arguments),1):setTimeout(e,1)},enyo.call=function(e,t,n){var r=e||this;if(t){var i=r[t]||t;if(i&&i.apply)return i.apply(r,n||[])}},enyo.now=Date.now||function(){return(new Date).getTime()},enyo.perfNow=function(){var e=window.performance||{};return e.now=e.now||e.mozNow||e.msNow||e.oNow||e.webkitNow||enyo.now,function(){return e.now()}}(),enyo.nop=function(){},enyo.nob={},enyo.nar=[],enyo.instance=function(){},enyo.setPrototype||(enyo.setPrototype=function(e,t){e.prototype=t}),enyo.delegate=function(e){return enyo.setPrototype(enyo.instance,e),new enyo.instance},enyo.trim=function(e){return e&&e.replace?e.replace(/^\s+|\s+$/g,""):e},String.prototype.trim&&(enyo.trim=function(e){return e&&e.trim?e.trim():e}),enyo.uuid=function(){var e,t=Math.random().toString(16).substr(2,8)+"-"+(e=Math.random().toString(16).substr(2,8)).substr(0,4)+"-"+e.substr(4,4)+(e=Math.random().toString(16).substr(2,8)).substr(0,4)+"-"+e.substr(4,4)+Math.random().toString(16).substr(2,8);return t};var l=/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFE\u0590-\u05FF\uFB1D-\uFB4F]/;enyo.isRtl=function(e){return l.test(e)}}(),function(){"use strict";function e(e){enyo.mixin(this,e),t[this.name]=this,!0!==this.average||n[this.name]||(n[this.name]=[]),n[this.name]&&!1!==this.average&&(this._averaging=!0),!0===this.autoStart&&this.start()}enyo.bench=enyo.perfNow;var t={},n={},r="- - - - - - - - - - - - - - - - -\nBENCHMARK REPORT (%.): %.\nTOTAL TIME (ms): %.\nAVERAGE TIME (ms): %.\nMINIMUM TIME (ms): %.\nMAXIMUM TIME (ms): %.\nNUMBER OF ENTRIES: %.\n- - - - - - - - - - - - - - - - -\n",i=function(e){var t=0,n=1/0,r=-1/0,i=e.length,s={total:null,average:null,number:i,min:null,max:null};return enyo.forEach(e,function(e){t+=e,n=Math.min(e,n),r=Math.max(e,r)}),s.total=t,s.min=n,s.max=r,s.average=Math.abs(t/(i||1)),s};enyo.dev={enabled:!0,bench:function(t){if(!0!==this.enabled)return!1;var n=t||{name:enyo.uid("bench")};return new e(n)},report:function(e){var s=n[e]||t[e];if(!s)return!1;if(s.report&&"function"==typeof s.report)return s.report();var u=i(s);enyo.log(enyo.format(r,"averages",e,u.total,u.average,u.min,u.max,u.number))},clear:function(e){var r=t[e]?t:n[e]?n:null;return r?(r.complete&&r.complete(),r[e]instanceof Array?r[e]=[]:delete r[e],!0):!1}},e.prototype={logging:!0,autoStart:!0,_started:!1,_averaging:!1,_begin:null,_end:null,_time:null,start:function(){return!0===this._started?!1:(this._log("starting benchmark"),this._begin=enyo.bench(),this._started=!0,!0)},stop:function(){return this._started?(this._end=enyo.bench(),this._time=this._end-this._begin,this._log("benchmark complete: "+this._time),!0===this._averaging&&n[this.name].push(this._time),this._started=!1,!0):!1},_log:function(e){return this.logging?(enyo.log("bench ("+this.name+"): "+e),void 0):!1}}}(),enyo.job=function(e,t,n){enyo.job.stop(e),enyo.job._jobs[e]=setTimeout(function(){enyo.job.stop(e),t()},n)},enyo.job.stop=function(e){enyo.job._jobs[e]&&(clearTimeout(enyo.job._jobs[e]),delete enyo.job._jobs[e])},enyo.job.throttle=function(e,t,n){enyo.job._jobs[e]||(t(),enyo.job._jobs[e]=setTimeout(function(){enyo.job.stop(e)},n))},enyo.job._jobs={},enyo.kind=function(e){var t=e.name||"";if(enyo.options.noDefer||!t||e.noDefer)return enyo.kind.finish(e);var n=function(){var e;if(n._FinalCtor)e=n._FinalCtor;else{if(!(this instanceof n))throw"enyo.kind: constructor called directly, not using 'new'";e=n._finishKindCreation()}var t=enyo.delegate(e.prototype),r=e.apply(t,arguments);return r?r:t};return n._finishKindCreation=function(){n._finishKindCreation=void 0,enyo.setPath(t,void 0);var r=enyo.kind.finish(e);return n._FinalCtor=r,e=null,r},e.statics&&enyo.mixin(n,e.statics),n.extend=enyo.kind.statics.extend,n._deferred=!0,t&&!enyo.getPath(t)||enyo.kind.allowOverride?enyo.setPath(t,n):t&&enyo.error("enyo.kind: "+t+" is already in use by another "+"kind, all kind definitions must have unique names."),n},enyo.kind.finish=function(e){enyo._kindCtors={};var t=e.name||"";delete e.name;var n="kind"in e,r=e.kind;delete e.kind;var i=enyo.constructorForKind(r),s=i&&i.prototype||null;if(n&&void 0===r||void 0===i){var o=void 0===r?"undefined kind":"unknown kind ("+r+")";throw"enyo.kind: Attempt to subclass an "+o+". Check dependencies for ["+(t||"<unnamed>")+"]."}var u=enyo.kind.makeCtor();return e.hasOwnProperty("constructor")&&(e._constructor=e.constructor,delete e.constructor),enyo.setPrototype(u,s?enyo.delegate(s):{}),enyo.concatHandler(u,e),enyo.mixin(u.prototype,e),u.prototype.kindName=t?t:i&&i.prototype?i.prototype.kindName:"",u.prototype.base=i,u.prototype.ctor=u,enyo.forEach(enyo.kind.features,function(t){t(u,e)}),t&&!enyo.getPath(t)||enyo.kind.allowOverride?enyo.setPath(t,u):t&&enyo.error("enyo.kind: "+t+" is already in use by another "+"kind, all kind definitions must have unique names."),u},enyo.singleton=function(e,t){var n=e.name;delete e.name;var r,i=enyo.kind(e);return enyo.setPath.call(t||enyo.global,n,r=new i),r},enyo.kind.makeCtor=function(){var e=function(){if(this instanceof e){var t;return this._constructor&&(t=this._constructor.apply(this,arguments)),this.constructed&&this.constructed.apply(this,arguments),t?t:void 0}throw"enyo.kind: constructor called directly, not using 'new'"};return e},enyo.kind.defaultNamespace="enyo",enyo.kind.features=[],enyo.kind.extendMethods=function(e,t,n){var r=e.prototype||e,i=r.base;!r.inherited&&i&&(r.inherited=enyo.kind.inherited),t.hasOwnProperty("constructor")&&(t._constructor=t.constructor,delete t.constructor);for(var s in t){var o=t[s];enyo.isInherited(o)&&(o=r[s]=n?o.fn(r[s]||enyo.nop):o.fn(i?i.prototype[s]||enyo.nop:enyo.nop)),enyo.isFunction(o)&&(n?(r[s]=o,o.displayName=s+"()"):(o._inherited=i?i.prototype[s]:null,o.displayName=r.kindName+"."+s+"()"))}},enyo.kind.features.push(enyo.kind.extendMethods),enyo.kind.inherited=function(e,t){var n=e.callee,r=n._inherited;if("function"==typeof r){var i=e;if(t){i=[];for(var s=0,o=t.length;o>s;++s)i[s]=t[s];for(o=e.length;o>s;++s)i[s]=e[s]}return r.apply(this,i)}enyo.warn("enyo.kind.inherited: unable to find requested super-method from -> "+e.callee.displayName+" in "+this.kindName)},function(e){var t=function(e){this.fn=e};e.inherit=function(e){return new t(e)},e.isInherited=function(e){return e&&e instanceof t}}(enyo),enyo.kind.features.push(function(e,t){e.subclass||(e.subclass=enyo.kind.statics.subclass),e.extend||(e.extend=enyo.kind.statics.extend),t.statics&&(enyo.mixin(e,t.statics),delete e.prototype.statics),t.protectedStatics&&(enyo.mixin(e,t.protectedStatics),delete e.prototype.protectedStatics);for(var n=e.prototype.base;n;)n.subclass(e,t),n=n.prototype.base}),enyo.kind.statics={subclass:function(){},extend:function(e,t){var n,r,i=this,s=enyo.isArray(e)?e:[e];r=function(e,t){return!enyo.isFunction(t)&&!enyo.isInherited(t)},!t&&i._deferred&&(i=enyo.checkConstructor(i)),n=t||i.prototype;for(var o,u=0;o=s[u];++u)enyo.concatHandler(n,o),enyo.kind.extendMethods(n,o,!0),enyo.mixin(n,o,{filter:r});return t||i}},enyo.concatHandler=function(e,t){for(var n=e.prototype||e,r=n.ctor,i=n===e;r;)r.concat&&r.concat(e,t,i),r=r.prototype.base},enyo.checkConstructor=function(e){if(enyo.isFunction(e)){if(e._FinalCtor)return e._FinalCtor;if(e._finishKindCreation)return e._finishKindCreation()}return e},enyo._kindCtors={},enyo.constructorForKind=function(e){if(null===e)return e;if(void 0===e)return enyo.defaultCtor;if(enyo.isFunction(e))return enyo.checkConstructor(e);var t=enyo._kindCtors[e];if(t)return t;if(t=enyo.Theme[e]||enyo[e]||enyo.getPath("enyo."+e)||window[e]||enyo.getPath(e),t&&t._finishKindCreation&&(t=t._finishKindCreation()),!enyo.isFunction(t))throw"["+e+"] is not the name of a valid kind.";return enyo._kindCtors[e]=t,t},enyo.Theme={},enyo.registerTheme=function(e){enyo.mixin(enyo.Theme,e)},function(e){var t={},n=/(string|number|boolean)/;e.BindingCount=0,e.kind({name:"enyo.Binding",kind:null,noDefer:!0,from:"",to:"",source:null,allowUndefined:!0,target:null,transform:"",connected:!1,id:"",oneWay:!0,autoConnect:!0,autoSync:!0,owner:null,destroyed:!1,statics:{find:function(e){return t[e]}},sourceObserver:null,targetObserver:null,sourceConnected:!1,targetConnected:!1,sourceRegistered:!1,targetRegistered:!1,registeredSource:null,registeredTarget:null,sourcePath:"",targetPath:"",sourceProp:"",targetProp:"",building:!0,originals:null,constructor:function(n){n&&e.mixin(this,n),this.id=e.uid("binding"),t[this.id]=this,this.originals=this.originals||{},this.originals.from=this.from,this.originals.to=this.to,this.originals.source=this.source,this.originals.target=this.target,this.initTransform(),this.refresh(),e.BindingCount++},isConnected:function(){return this.connected=this.sourceConnected&&this.targetConnected,this.connected},registered:function(e,t){"source"==e?(this.sourceRegistered=!0,this.registeredSource=t):"target"==e&&(this.targetRegistered=!0,this.registeredTarget=t),this.autoSync&&this.isRegistered()&&!this.synchronizing&&this.sync()},isRegistered:function(){return!!this.sourceRegistered&&!!this.targetRegistered},syncFromSource:function(){if(!this.synchronizing){if(this.synchronizing=!0,this.isConnected()&&this.isRegistered()){var e=this.getSourceValue(),t=this.transform;t&&"function"==typeof t&&(e=t.call(this.owner||this,e,"source",this)),(this.allowUndefined||void 0!==e)&&this.setTargetValue(e)}this.synchronizing=!1}},syncFromTarget:function(){if(!this.oneWay&&!this.synchronizing){if(this.synchronizing=!0,this.isConnected()&&this.isRegistered()){var e=this.getTargetValue(),t=this.transform;t&&"function"==typeof t&&(e=t.call(this.owner||this,e,"target",this)),(this.allowUndefined||void 0!==e)&&this.setSourceValue(e)}this.synchronizing=!1}},resolve:function(){var t,n,r=this.source,i=this.target,s=this.from,o=this.to;if(s&&o){if(this.building){if("."!=s[0]&&"^"!=s[0])throw"enyo.Binding: from path must begin with `.` or `^`";if("."!=o[0]&&"^"!=o[0])throw"enyo.Binding: to path must beging with `.` or `^`";if("string"==typeof r){if("."!=r[0]&&"^"!=r[0])throw"enyo.Binding: if source is a string it must begin with `.` or `^`";s=("."==r?"":r)+s,r=null}if("string"==typeof i){if("."!=i[0]&&"^"!=i[0])throw"enyo.Binding: if target is a string it must begin with `.` or `^`";o=("."==i?"":i)+o,i=null}r||(this.source=r="."==s[0]?this.owner:e.global),i||(this.target=i="."==o[0]?this.owner:e.global),n=s.slice(1).split("."),t=o.slice(1).split(".");var u=e.lastIndexOf(".",s),a=e.lastIndexOf(".",o);this.sourcePath=("^"==s[0]?n.slice(0,-1):n).join("."),this.targetPath=("^"==o[0]?t.slice(0,-1):t).join("."),this.sourceProp=u>-1&&"$"==s[u-1]?n.slice(-2).join("."):n.pop(),this.targetProp=a>-1&&"$"==s[a-1]?t.slice(-2).join("."):t.pop(),this.building=!1}return r===e.global&&(this.source=e.getPath(this.sourcePath),this.sourceGlobal=!0),i===e.global&&(t=this.targetPath.split("."),this.targetGlobalPath=t.slice(0,-1).join("."),this.targetPath=t.pop(),this.target=e.getPath(this.targetGlobalPath),this.targetGlobal=!0),this}},connectSource:function(){var t=this.source,n=this.sourceGlobal?this.sourceProp:this.sourcePath,r=this.sourceObserver,i=this.sourceObserverId||(this.sourceObserverId=e.uid("__bindingObserver__"));t===e.global&&(t=this.resolve().source),t&&t.addObserver&&!this.sourceConnected?(r||(r=this.sourceObserver=e.bindSafely(this,this.syncFromSource),r.binding=this,r.bindingProp="source"),this.sourceConnected=!0,this.sourceObserver=t.addObserver(n,r,null,i)):this.sourceConnected=!1},connectTarget:function(){var t=this.target,n=this.targetGlobal?this.targetProp:this.targetPath,r=this.targetObserver,i=this.targetObserverId||(this.targetObserverId=e.uid("__bindingObserver__"));t===e.global&&(t=this.resolve().target),t&&t.addObserver&&!this.targetConnected?(!r&&n&&(r=this.targetObserver=e.bindSafely(this,this.syncFromTarget),r.binding=this,r.bindingProp="target"),this.targetConnected=!0,n?this.targetObserver=t.addObserver(n,r,null,i):this.registered("target",this.target)):this.targetConnected=!1},disconnectSource:function(){if(this.source&&this.sourceConnected){var t=this.source,n=this.sourceObserver,r=this.sourceObserverId,i=e._observerMap[t.objectObserverId],s=i&&i[r];s&&t&&t.addObserver&&this.sourceConnected&&n&&t.removeObserver(s.observerProp,n)}this.sourceObserver=null,this.sourceConnected=!1},disconnectTarget:function(){if(this.target&&this.targetConnected){var t=this.target,n=this.targetObserver,r=this.targetObserverId,i=e._observerMap[t.objectObserverId],s=i&&i[r];s&&t&&t.addObserver&&this.targetConnected&&n&&t.removeObserver(s.observerProp,n)}this.targetObserver=null,this.targetConnected=!1},getSourceValue:function(){var e=this.registeredSource;return e?e.get(this.sourceProp):void 0},getTargetValue:function(){var e=this.registeredTarget;return e?e.get(this.targetProp):void 0},setSourceValue:function(e){var t=this.registeredSource;if(t){if(t.destroyed)return this.destroy(),void 0;this.stop?this.stop=!1:t.set(this.sourceProp,e,!n.test(typeof e))}},setTargetValue:function(e){var t=this.registeredTarget;if(t){if(t.destroyed)return this.destroy(),void 0;this.stop?this.stop=!1:t.set(this.targetProp,e,!n.test(typeof e))}},connect:function(){var e=this.isConnected();return e||(this.connecting=!0,this.sourceConnected||this.connectSource(),this.targetConnected||this.connectTarget(),this.connecting=!1,this.isConnected()),this.connected&&!e&&this.autoSync&&this.sync(),this},sync:function(){return this.connecting||this.syncFromSource(),this},disconnect:function(){return this.disconnectSource(),this.disconnectTarget(),this.isConnected(),this},refresh:function(){return this.stop=!1,this.resolve(),this.autoConnect&&this.connect(),this},reset:function(){return this.disconnect(),e.mixin(this,this.originals),this.building=!0,this.stop=!1,this.sourceRegistered=!1,this.targetRegistered=!1,this.registeredSource=null,this.registeredTarget=null,this},stop:function(){this.stop=!0},rebuild:function(){return this.reset().refresh()},destroy:function(){this.disconnect(),this.destroyed=!0,this.source=null,this.target=null,this.registeredSource=null,this.registeredTarget=null,this.sourceObserver=null,this.targetObserver=null,this.transform=null,this.originals=null,this.owner&&(this.owner.removeBinding(this),this.owner=null),delete t[this.id],e.BindingCount--},initTransform:function(){var t=this.transform,n=this.owner,r=n?n.bindingTransformOwner:null;t&&e.isString(t)&&((r||n)&&(t=e.getPath.call(r||n,this.transform),!t&&r&&n&&(t=e.getPath.call(n,this.transform))),t||(t=e.getPath(this.transform))),this.transform=e.isFunction(t)?t:null}}),e.defaultBindingKind=e.Binding}(enyo),function(e){var t=function(t,n){var r,i=t._appliedMixins,s=n;if(e.isString(s)&&(s=e.getPath(s),!s))return e.warn("could not find the requested mixin "+n),void 0;if(s.name){if(~e.indexOf(s.name,i))return e.warn("attempt to add the same mixin more than once, "+s.name+" onto -> "+t.kindName),void 0;i.push(s.name),r=s.name,delete s.name}else r=null;var o=e.clone(s);s.hasOwnProperty("constructor")&&(o._constructor=s.constructor,delete o.constructor),e.kind.statics.extend(o,t),r&&(s.name=r)},n=function(n,r){if(r.mixins){var i=n.prototype||n,s=r.mixins;i._appliedMixins=i._appliedMixins?e.cloneArray(i._appliedMixins):[],delete r.mixins;for(var o,u=0;o=s[u];++u)t(i,o)}};e.kind.features.push(n);var r=e.concatHandler;e.concatHandler=function(e,t){if(t.mixins){var n=e.prototype||e;n.mixins=n.mixins?n.mixins.concat(t.mixins):t.mixins.slice()}r.apply(this,arguments)},e.kind.extendMethods(e.kind.statics,{extend:e.inherit(function(t){return function(r,i){var s=i||this.prototype;return r.mixins&&(s.mixins=e.merge(s.mixins,r.mixins),n(s,r)),t.apply(this,arguments)}})},!0),e.MixinSupport={name:"MixinSupport",extend:function(e){t(this,e)},importProps:e.inherit(function(e){return function(t){t&&n(this,t),e.apply(this,arguments)}})}}(enyo),function(e){var t=function(t){return t.hasOwnProperty("observerMap")||(t.observerMap=e.clone(t.observerMap)),t.observerMap},n=e._observerMap={};e.ObserverSupport={name:"ObserverSupport",addObserver:function(r,i,s){var o,u,a=("."==r[0]?r.slice(1):r).split("."),f=a.shift(),l=i,c=arguments[3],h=arguments[4],p=c||i.observerId||e.uid("__observer__"),d=t(this),v=this.objectObserverId||(this.objectObserverId=e.uid("__objectObserverId__")),m=n[v]||(n[v]={}),g=m[p]||(m[p]={});return h&&h.chain&&(g.chain=h.chain),"$"==f&&(f=f+"."+a.shift()),a.length&&(g.chain=g.chain||[],r=a.join("."),i=e.bindSafely(this,"updateObserver",r,l,s,p,g),u=this.get(f)),(o=d[f])?("string"==typeof o&&(o=d[f]=e.trim(o).split(" ")),o.push(p)):d[f]=[p],i=this[p]=s?e.bindSafely(s,i):i,i.observer=!0,g.observerId=p,g.observerProp=f,g.observerOwner=this,g.objectObserverId=v,g.observer=i,g.chain&&g.chain.push(g),u&&u.addObserver&&u.addObserver(r,l,s,p,g),i},updateObserver:function(e,t,n,r,i,s,o){this.removeChainedObservers(r),o&&o!==s&&o.addObserver(e,t,n,r,i)},removeChainedObservers:function(t){for(var r,i=n[this.objectObserverId],s=i[t],o=e.find(s.chain,function(e){return e===s}),u=s.chain.splice(o+1,s.chain.length),a=0;r=u[a];++a)r.chain=null,r.observerOwner.removeObserver(r.observerProp,r.observer),n[r.objectObserverId][r.observerId]=void 0},removeObserver:function(r,i){var s,o,u=t(this),a=n[this.objectObserverId];if(o=u[r]){"string"==typeof o&&(o=u[r]=e.trim(o).split(" "));for(var f,l,c=0;f=o[c];++c)((l=this[f])&&i&&l===i||!i)&&(o.splice(c,1),s=a&&a[f],s&&s.chain&&this.removeChainedObservers(f),l.observer&&(a[f]=void 0,delete this[f]));0!==o.length&&i||delete u[r]}},removeAllObservers:function(){var e=t(this);for(var n in e)this.removeObserver(n);return this},notifyObservers:function(n,r,i){var s=t(this);if(s){var o=s[n],u=this.observerNotificationsEnabled;if(!u)return this._addObserverToQueue(n,[r,i,n]),this;if("string"==typeof o&&(o=s[n]=e.trim(o).split(" ")),s["*"]&&("string"==typeof s["*"]&&(s["*"]=e.trim(s["*"]).split(" ")),o=o?o.concat(s["*"]):s["*"]),o&&o.length){o=o.slice();for(var a,f,l=0;a=o[l];++l)(f=this[a])&&f.call(this,r,this.get(n),n)}}return this},stopNotifications:function(e){return this.observerNotificationsEnabled=!1,this.observerStopCount+=1,e&&this.disableNotificationQueue(),this},startNotifications:function(e){return 0!==this.observerStopCount&&(this.observerStopCount-=1),0===this.observerStopCount&&(this.observerNotificationsEnabled=!0,this._flushObserverQueue()),e&&this.enableNotificationQueue(),this},enableNotificationQueue:function(){return this.observerNotificationQueueEnabled=!0,this},disableNotificationQueue:function(){return this.observerNotificationQueueEnabled=!1,this.observerNotificationQueue={},this},_addObserverToQueue:function(e,t){if(this.observerNotificationQueueEnabled){var n=this.observerNotificationQueue||(this.observerNotificationQueue={});t||(t=[]),n[e]=t}},_flushObserverQueue:function(){if(0===this.observerStopCount&&this.observerNotificationQueueEnabled){if(!this.observerNotificationQueue)return;var e,t,n=this.observerNotificationQueue;this.observerNotificationQueue={};for(e in n)t=n[e],t.unshift(e),this.notifyObservers.apply(this,t)}},observerStopCount:0,observerNotificationsEnabled:!0,observerNotificationQueueEnabled:!0};var r=function(e,t,n,r){var i=r.observers||(r.observers={});(i[t]=i[t]||[]).push(e)},i=e.concatHandler;e.concatHandler=function(t,n){i.apply(this,arguments);var s=t.prototype||t;for(var o in n)"Changed"==o.slice(-7)&&r(o.slice(0,-7),o,s,n);if(n.observers){s.observers?(s.observers=e.clone(s.observers),s.observerMap=e.clone(s.observerMap)):(s.observers={},s.observerMap={});for(var u in n.observers){s.observers[u]=s.observers[u]||"";for(var a,f="string"==typeof n.observers[u]?e.trim(n.observers[u]).split(" "):n.observers[u],l=0;a=f[l];++l)~s.observers[u].indexOf(a)||(s.observers[u]+=" "+a,s.observerMap[a]=e.trim((s.observerMap[a]||"")+" "+u).replace(/\s+/g," "));s.observers[u]=e.trim(s.observers[u]).replace(/\s+/g," ")}delete n.observers}}}(enyo),function(e){var t=function(t,n){return t.hasOwnProperty(n)||(t[n]=t[n]?e.clone(t[n]):{}),t[n]};e.ComputedSupport={name:"ComputedSupport",get:e.inherit(function(e){return function(t){return this._isComputed(t)?this._getComputed(t):e.apply(this,arguments)}}),set:e.inherit(function(e){return function(t){return this._isComputed(t)?this:e.apply(this,arguments)}}),notifyObservers:e.inherit(function(n){return function(r){var i,s=t(this,"computedMap");if(s&&(i=s[r])){"string"==typeof i&&(i=s[r]=e.trim(i).split(" "));for(var o,u=0;o=i[u];++u)this._markComputed(o);n.apply(this,arguments),this._flushComputedQueue()}else n.apply(this,arguments)}}),_getComputed:function(e){var n,r=t(this,"computedCached"),i=t(this,"computedConfig"),s=i?t(i,e):null;if(n=r[e])return"object"!=typeof n&&(n=r[e]={},s&&s.hasOwnProperty("defaultValue")?(n.dirty=!1,n.value=s.defaultValue):n.dirty=!0),n.dirty&&(n.value=this[e](),n.dirty=!1),n.value;if(s&&s.hasOwnProperty("defaultValue")){var o=s.defaultValue;return delete s.defaultValue,o}return this[e]()},_markComputed:function(e){var n,r=t(this,"computedCached"),i=this.computedQueue||(this.computedQueue={}),s=null;(n=r[e])&&("object"!=typeof n&&(n=r[e]={}),s=n.value,n.dirty=!0),i[e]=s},_isComputed:function(e){var n=t(this,"computed");return n&&void 0!==n[e]&&null!==n[e]},_flushComputedQueue:function(){if(this.computedQueue&&this.observerNotificationsEnabled){var e=this.computedQueue;this.computedQueue={};for(var t in e)this.notifyObservers(t,e[t],this._getComputed(t))}}};var n=e.concatHandler;e.concatHandler=function(t,r){if(n.apply(this,arguments),r.computed){var i=t.prototype||t;i.computed?(i.computed=e.clone(i.computed),i.computedCached=e.clone(i.computedCached),i.computedMap=e.clone(i.computedMap),i.computedConfig=e.clone(i.computedConfig)):(i.computed={},i.computedCached={},i.computedMap={},i.computedConfig={});for(var s in r.computed){i.computed[s]=i.computed[s]||"";for(var o,u="string"==typeof r.computed[s]?e.trim(r.computed[s]).split(" "):r.computed[s],a=0;o=u[a];++a)"object"==typeof o?(o.cached===!0&&(i.computedCached[s]=!0),i.computedConfig[s]=i.computedConfig[s]?e.mixin(e.clone(i.computedConfig[s]),o):o):~i.computed[s].indexOf(o)||(i.computed[s]+=" "+o,i.computedMap[o]=e.trim((i.computedMap[o]||"")+" "+s).replace(/\s+/g," "));i.computed[s]=e.trim(i.computed[s]).replace(/\s+/g," ")}delete r.computed}}}(enyo),enyo.BindingSupport={name:"BindingSupport",binding:function(){var e,t=enyo.toArray(arguments),n=enyo.mixin(t),r=this.bindings||(this.bindings=[]);return n.owner=n.owner||this,n.kind=n.kind||this.defaultBindingKind||enyo.defaultBindingKind,this.bindingSupportInitialized===!1?r.push(n):(enyo.isFunction(n.kind)||(n.kind=enyo.getPath(n.kind)),r.push(e=new n.kind(n))),e},clearBindings:function(e){var t=e||this.bindings;if(t)for(var n,r=0;n=t[r];++r)n.destroy()},refreshBindings:function(e){var t=e||this.bindings;if(t)for(var n,r=0;n=t[r];++r)n.refresh()},rebuildBindings:function(e){var t=e||this.bindings;if(t)for(var n,r=0;n=t[r];++r)n.rebuild()},removeBinding:function(e){var t=this.bindings;if(e&&t&&t.length){var n=enyo.indexOf(e,t);n>-1&&t.splice(n,1)}},initBindings:function(){var e,t;if(!1===this.bindingSupportInitialized){this.bindingSupportInitialized=void 0;var n=this.bindings;if(!n)return;for(this.bindings=[],e=0;t=n[e];++e)this.binding(t)}},constructed:enyo.inherit(function(e){return function(){this.bindings?this.initBindings():this.bindingSupportInitialized=void 0,e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){var t=this.bindings;if(t)for(var n,r=t.length-1;n=t[r];--r)n.destroy();e.apply(this,arguments)}}),addObserver:enyo.inherit(function(e){return function(t,n){var r,i=e.apply(this,arguments),s=this;return n.binding&&((-1===(r=enyo.lastIndexOf(".",t))||1===r&&"$"==t[0]&&("source"==n.bindingProp||(s=this.get(t))))&&n.binding.registered(n.bindingProp,s),i.binding=n.binding),i}}),bindingSupportInitialized:!1,bindingSyncAllowed:!0},function(e){var t=e.concatHandler;e.concatHandler=function(n,r){if(t.apply(this,arguments),r.bindings){for(var i,s=n.prototype||n,o=r.defaultBindingKind||e.defaultBindingKind,u=r.bindingDefaults,a=0;i=r.bindings[a];++a)u&&e.mixin(i,u,{ignore:!0}),i.kind=i.kind||o;s.bindings=s.bindings?s.bindings.concat(r.bindings):r.bindings,delete r.bindings}}}(enyo),enyo.ComponentBindingSupport={name:"ComponentBindingSupport",adjustComponentProps:enyo.inherit(function(e){return function(t){e.apply(this,arguments),t.bindingTransformOwner=t.bindingTransformOwner||this.getInstanceOwner()}})},enyo.ApplicationSupport={name:"ApplicationSupport",adjustComponentProps:enyo.inherit(function(e){return function(t){t.app=t.app||this.app||this instanceof enyo.Application&&this,e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){this.app=null,e.apply(this,arguments)}})},enyo.MultipleDispatchSupport={name:"MultipleDispatchSupport",addDispatchTarget:function(e){var t=this._dispatchTargets;e&&!~enyo.indexOf(e,t)&&t.push(e)},removeDispatchTarget:function(e){var t,n=this._dispatchTargets;t=enyo.indexOf(e,n),t>-1&&n.splice(t,1)},bubbleUp:enyo.inherit(function(e){return function(t,n,r){this._dispatchDefaultPath&&e.apply(this,arguments);for(var i,s=this._dispatchTargets,o=0;i=s[o];++o)i&&!i.destroyed&&i.dispatchBubble(t,n,r)}}),ownerChanged:enyo.inherit(function(e){return function(){e.apply(this,arguments);var t=this.owner;this._dispatchDefaultPath=!!t}}),constructor:enyo.inherit(function(e){return function(){return this._dispatchTargets=[],e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){this._dispatchTargets=null,e.apply(this,arguments)}}),_dispatchDefaultPath:!1},function(e){var t={};e.RegisteredEventSupport={name:"RegisteredEventSupport",silence:function(){this._silenced=!0,this._silenceCount+=1},unsilence:function(){0!==this._silenceCount&&--this._silenceCount,0===this._silenceCount&&(this._silenced=!1)},isSilenced:function(){return this._silenced},addListener:function(n,r,i){var s=this.eventId||(this.eventId=e.uid("__eventId__")),o=t[s]||(t[s]={}),u=o[n]||(o[n]=[]);if(r=r&&i?e.bindSafely(i,r):r,"function"!=typeof r)throw"enyo.RegisteredEventSupport.addListener: must supply a valid function or if a string must supply a context";return u.length&&~e.indexOf(r,u)||u.push(r),r},removeListener:function(t,n){var r=this.listeners(t);if(r.length){var i=e.indexOf(n,r);~i&&r.splice(i,1)}return this},removeAllListeners:function(e){var n,r=this.eventId,i=t[r];return i&&(e?(n=this.listeners(e),n.splice(0,n.length)):t[r]={}),this},triggerEvent:function(e,t){if(!this.isSilenced()){var n=this.listeners(e);if(n.length){n=n.slice();for(var r,i=0;n.length>i;++i)r=n[i],r(this,e,t)}}return this},listeners:function(e){var n=this.eventId,r=t[n],i=r&&r[e]||[];return i},_silenced:!1,_silenceCount:0}}(enyo),enyo.kind({name:"enyo.Object",kind:null,noDefer:!0,mixins:[enyo.MixinSupport,enyo.ObserverSupport,enyo.ComputedSupport,enyo.BindingSupport],constructor:function(e){enyo._objectCount++,this.importProps(e)},importProps:function(e){if(e){var t;if(enyo.concatHandler(this,e),e.kindName)for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);else for(t in e)this[t]=e[t]}},destroyObject:function(e){this[e]&&this[e].destroy&&this[e].destroy(),this[e]=null},log:function(){var e=arguments.callee.caller,t=((e?e.displayName:"")||"(instance method)")+":";enyo.logging.log("log",[t].concat(enyo.cloneArray(arguments)))},warn:function(){this._log("warn",arguments)},error:function(){this._log("error",arguments)},_log:function(e,t){if(enyo.logging.shouldLog(e))try{throw Error()}catch(n){enyo.logging._log(e,[t.callee.caller.displayName+": "].concat(enyo.cloneArray(t))),enyo.log(n.stack)}},get:function(){return enyo.getPath.apply(this,arguments)},set:function(){return enyo.setPath.apply(this,arguments)},bindSafely:function(){var e=Array.prototype.concat.apply([this],arguments);return enyo.bindSafely.apply(enyo,e)},destroy:function(){this.set("destroyed",!0)},_isObject:!0}),enyo._objectCount=0,enyo.Object.concat=function(e,t){var n=t.published;if(n){var r=e.prototype||e;for(var i in n)t[i]&&enyo.isFunction(t[i])||enyo.Object.addGetterSetter(i,n[i],r)}},enyo.Object.addGetterSetter=function(e,t,n){var r,i=enyo.cap(e),s=enyo.getPath.fast,o=enyo.setPath.fast,u="set"+i,a="get"+i,f=n._getters||(n._getters={}),l=n._setters||(n._setters={});n[e]=t,(r=n[a])&&enyo.isFunction(r)?r&&"function"==typeof r&&!r.generated&&(f[e]=a):(r=n[a]=function(){return s.call(this,e)},r.generated=!0),(r=n[u])&&enyo.isFunction(r)?r&&"function"==typeof r&&!r.generated&&(l[e]=u):(r=n[u]=function(t){return o.call(this,e,t)},r.generated=!0)},enyo.kind({name:"enyo.Component",kind:"enyo.Object",published:{name:"",id:"",owner:null,componentOverrides:null},protectedStatics:{_kindPrefixi:{},_unnamedKindNumber:0},defaultKind:"Component",noDefer:!0,handlers:{},mixins:[enyo.ApplicationSupport,enyo.ComponentBindingSupport],toString:function(){return this.id+" ["+this.kindName+"]"},constructor:enyo.inherit(function(e){return function(){this._componentNameMap={},this.$={},e.apply(this,arguments)}}),constructed:enyo.inherit(function(e){return function(t){this.create(t),e.apply(this,arguments)}}),create:function(){this.stopNotifications(),this.ownerChanged(),this.initComponents(),this.startNotifications()},initComponents:function(){this.createChrome(this.kindComponents),this.createClientComponents(this.components)},createChrome:function(e){this.createComponents(e,{isChrome:!0})},createClientComponents:function(e){this.createComponents(e,{owner:this.getInstanceOwner()})},getInstanceOwner:function(){return!this.owner||this.owner.notInstanceOwner?this:this.owner},destroy:enyo.inherit(function(e){return function(){this.destroyComponents(),this.setOwner(null),e.apply(this,arguments),this.stopAllJobs()}}),destroyComponents:function(){enyo.forEach(this.getComponents(),function(e){e.destroyed||e instanceof enyo.Controller&&e.global||e.destroy()})},makeId:function(){var e="_",t=this.owner&&this.owner.getId(),n=this.name||"@@"+ ++enyo.Component._unnamedKindNumber;return(t?t+e:"")+n},ownerChanged:function(e){e&&e.removeComponent&&e.removeComponent(this),this.owner&&this.owner.addComponent&&this.owner.addComponent(this),this.id||(this.id=this.makeId())},nameComponent:function(e){var t,n=enyo.Component.prefixFromKindName(e.kindName),r=this._componentNameMap[n]||0;do t=n+(++r>1?r+"":"");while(this.$[t]);return this._componentNameMap[n]=Number(r),e.name=t,e.name},addComponent:function(e){var t=e.getName();t||(t=this.nameComponent(e)),this.$[t]&&this.warn('Duplicate component name "'+t+'" in owner "'+this.id+'" violates '+"unique-name-under-owner rule, replacing existing component in the hash and continuing, "+"but this is an error condition and should be fixed."),this.$[t]=e,this.notifyObservers("$."+t,null,e)},removeComponent:function(e){delete this.$[e.getName()]},getComponents:function(){var e=[];for(var t in this.$)e.push(this.$[t]);return e},adjustComponentProps:function(e){this.defaultProps&&enyo.mixin(e,this.defaultProps,{ignore:!0}),e.kind=e.kind||e.isa||this.defaultKind,e.owner=e.owner||this},_createComponent:function(e,t){if(!e.kind&&"kind"in e)throw"enyo.create: Attempt to create a null kind. Check dependencies for ["+e.name+"].";var n=enyo.mixin(enyo.clone(t),e);return this.adjustComponentProps(n),enyo.Component.create(n)},createComponent:function(e,t){return this._createComponent(e,t)},createComponents:function(e,t){if(e){for(var n,r=[],i=0;n=e[i];i++)r.push(this._createComponent(n,t));return r}},getBubbleTarget:function(){return this.bubbleTarget||this.owner},bubble:function(e,t,n){if(!this._silenced){var r=t||{};return enyo.exists(r.originator)||(r.originator=n||this),this.dispatchBubble(e,r,n||this)}},bubbleUp:function(e,t){if(!this._silenced){var n=t||{},r=this.getBubbleTarget();return r?r.dispatchBubble(e,n,n.delegate||this):!1}},dispatchEvent:function(e,t,n){if(!this._silenced){var r,i=(t||(t={})).delegate;if(this.decorateEvent!==enyo.Component.prototype.decorateEvent&&this.decorateEvent(e,t,n),i&&i.owner===this){if(this[e]&&"function"==typeof this[e])return this.dispatch(e,t,n)}else if(!i){if(this.handlers&&this.handlers[e]&&this.dispatch(this.handlers[e],t,n))return!0;if(this[e]&&enyo.isString(this[e]))return t.delegate=this,r=this.bubbleUp(this[e],t,n),delete t.delegate,r}}},dispatchBubble:function(e,t,n){return this._silenced?void 0:this.dispatchEvent(e,t,n)?!0:this.bubbleUp(e,t,n)},decorateEvent:function(){},stopAllJobs:function(){if(this.__jobs)for(var e in this.__jobs)this.stopJob(e)},dispatch:function(e,t,n){if(!this._silenced){var r=e&&this[e];return r&&"function"==typeof r?r.call(this,n||this,t):void 0}},triggerHandler:function(){return this.dispatchEvent.apply(this,arguments)},waterfall:function(e,t,n){return this._silenced?void 0:(t=t||{},this.dispatchEvent(e,t,n)?!0:(this.waterfallDown(e,t,n||this),void 0))},waterfallDown:function(e,t,n){if(!this._silenced)for(var r in this.$)this.$[r].waterfall(e,t,n)},_silenced:!1,_silenceCount:0,silence:function(){this._silenced=!0,this._silenceCount+=1},isSilenced:function(){return this._silenced},unsilence:function(){0!==this._silenceCount&&--this._silenceCount,0===this._silenceCount&&(this._silenced=!1)},startJob:function(e,t,n,r){r=r||5;var i=this.__jobs=this.__jobs||{};enyo.isString(t)&&(t=this[t]),this.stopJob(e),i[e]=setTimeout(this.bindSafely(function(){enyo.jobs.add(this.bindSafely(t),r,e)}),n)},stopJob:function(e){var t=this.__jobs=this.__jobs||{};t[e]&&(clearTimeout(t[e]),delete t[e]),enyo.jobs.remove(e)},throttleJob:function(e,t,n){var r=this.__jobs=this.__jobs||{};r[e]||(enyo.isString(t)&&(t=this[t]),t.call(this),r[e]=setTimeout(this.bindSafely(function(){this.stopJob(e)}),n))}}),enyo.defaultCtor=enyo.Component,enyo.create=enyo.Component.create=function(e){if(!e.kind&&"kind"in e)throw"enyo.create: Attempt to create a null kind. Check dependencies for ["+(e.name||"")+"].";var t=e.kind||e.isa||enyo.defaultCtor,n=enyo.constructorForKind(t);return n||(enyo.error('no constructor found for kind "'+t+'"'),n=enyo.Component),new n(e)},enyo.Component.subclass=function(e,t){var n=e.prototype;t.components?(n.kindComponents=t.components,delete n.components):t.componentOverrides&&(n.kindComponents=enyo.Component.overrideComponents(n.kindComponents,t.componentOverrides,n.defaultKind))},enyo.Component.concat=function(e,t){var n=e.prototype||e;if(t.handlers){var r=n.handlers?enyo.clone(n.handlers):{};n.handlers=enyo.mixin(r,t.handlers),delete t.handlers}t.events&&enyo.Component.publishEvents(n,t)},enyo.Component.overrideComponents=function(e,t,n){var r=function(e,t){return!enyo.isFunction(t)&&!enyo.isInherited(t)};e=enyo.clone(e);for(var i=0;e.length>i;i++){var s=enyo.clone(e[i]),o=t[s.name],u=enyo.constructorForKind(s.kind||n);if(o){enyo.concatHandler(s,o);for(var a=s.kind&&("string"==typeof s.kind&&enyo.getPath(s.kind)||"function"==typeof s.kind&&s.kind)||enyo.defaultCtor;a;)a.concat&&a.concat(s,o,!0),a=a.prototype.base;enyo.mixin(s,o,{filter:r})}s.components&&(s.components=enyo.Component.overrideComponents(s.components,t,u.prototype.defaultKind)),e[i]=s}return e},enyo.Component.publishEvents=function(e,t){var n=t.events;if(n){var r=e.prototype||e;for(var i in n)enyo.Component.addEvent(i,n[i],r)}},enyo.Component.addEvent=function(e,t,n){var r,i;enyo.isString(t)?("on"!=e.slice(0,2)&&(enyo.warn("enyo.Component.addEvent: event names must start with 'on'. "+n.kindName+" event '"+e+"' was auto-corrected to 'on"+e+"'."),e="on"+e),r=t,i="do"+enyo.cap(e.slice(2))):(r=t.value,i=t.caller),n[e]=r,n[i]||(n[i]=function(t){var n=t;n||(n={});var r=n.delegate;n.delegate=void 0,enyo.exists(n.type)||(n.type=e),this.bubble(e,n),r&&(n.delegate=r)})},enyo.Component.prefixFromKindName=function(e){var t=enyo.Component._kindPrefixi[e];if(!t){var n=e.lastIndexOf(".");t=n>=0?e.slice(n+1):e,t=t.charAt(0).toLowerCase()+t.slice(1),enyo.Component._kindPrefixi[e]=t}return t},enyo.kind({name:"enyo.UiComponent",kind:"enyo.Component",published:{container:null,parent:null,controlParentName:"client",layoutKind:""},handlers:{onresize:"resizeHandler"},addBefore:void 0,protectedStatics:{_resizeFlags:{showingOnly:!0}},create:enyo.inherit(function(e){return function(){this.controls=this.controls||[],this.children=this.children||[],this.containerChanged(),e.apply(this,arguments),this.layoutKindChanged()}}),destroy:enyo.inherit(function(e){return function(){this.destroyClientControls(),this.setContainer(null),e.apply(this,arguments)}}),importProps:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.owner||(this.owner=enyo.master)}}),createComponents:enyo.inherit(function(e){return function(){var t=e.apply(this,arguments);return this.discoverControlParent(),t}}),discoverControlParent:function(){this.controlParent=this.$[this.controlParentName]||this.controlParent},adjustComponentProps:enyo.inherit(function(e){return function(t){t.container=t.container||this,e.apply(this,arguments)}}),containerChanged:function(e){e&&e.removeControl(this),this.container&&this.container.addControl(this,this.addBefore)},parentChanged:function(e){e&&e!=this.parent&&e.removeChild(this)},isDescendantOf:function(e){for(var t=this;t&&t!=e;)t=t.parent;return e&&t==e},getControls:function(){return this.controls},getClientControls:function(){for(var e,t=[],n=0,r=this.controls;e=r[n];n++)e.isChrome||t.push(e);return t},destroyClientControls:function(){for(var e,t=this.getClientControls(),n=0;e=t[n];n++)e.destroy()},addControl:function(e,t){if(void 0!==t){var n=null===t?0:this.indexOfControl(t);this.controls.splice(n,0,e)}else this.controls.push(e);this.addChild(e,t)},removeControl:function(e){return e.setParent(null),enyo.remove(e,this.controls)},indexOfControl:function(e){return enyo.indexOf(e,this.controls)},indexOfClientControl:function(e){return enyo.indexOf(e,this.getClientControls())},indexInContainer:function(){return this.container.indexOfControl(this)},clientIndexInContainer:function(){return this.container.indexOfClientControl(this)},controlAtIndex:function(e){return this.controls[e]},addChild:function(e,t){if(this.controlParent)this.controlParent.addChild(e,t);else if(e.setParent(this),void 0!==t){var n=null===t?0:this.indexOfChild(t);this.children.splice(n,0,e)}else this.children.push(e)},removeChild:function(e){return enyo.remove(e,this.children)},indexOfChild:function(e){return enyo.indexOf(e,this.children)},layoutKindChanged:function(){this.layout&&this.layout.destroy(),this.layout=enyo.createFromKind(this.layoutKind,this),this.generated&&this.render()},flow:function(){this.layout&&this.layout.flow()},reflow:function(){this.layout&&this.layout.reflow()},resized:function(){this.waterfall("onresize",enyo.UiComponent._resizeFlags),this.waterfall("onpostresize",enyo.UiComponent._resizeFlags)},resizeHandler:function(){this.reflow()},waterfallDown:function(e,t,n){t=t||{};for(var r in this.$)this.$[r]instanceof enyo.UiComponent||this.$[r].waterfall(e,t,n);for(var i,s=0,o=this.children;i=o[s];s++)!i.showing&&t&&t.showingOnly||i.waterfall(e,t,n)},getBubbleTarget:function(){return this.bubbleTarget||this.parent||this.owner}}),enyo.createFromKind=function(e,t){var n=e&&enyo.constructorForKind(e);return n?new n(t):void 0},enyo.master=new enyo.Component({name:"master",notInstanceOwner:!0,eventFlags:{showingOnly:!0},getId:function(){return""},isDescendantOf:enyo.nop,bubble:function(e,t){"onresize"==e?(enyo.master.waterfallDown("onresize",this.eventFlags),enyo.master.waterfallDown("onpostresize",this.eventFlags)):enyo.Signals.send(e,t)}}),enyo.kind({name:"enyo.Layout",kind:null,layoutClass:"",constructor:function(e){this.container=e,e&&e.addClass(this.layoutClass)},destroy:function(){this.container&&this.container.removeClass(this.layoutClass)},flow:function(){},reflow:function(){}}),enyo.kind({name:"enyo.Signals",kind:"enyo.Component",noDefer:!0,create:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.Signals.addListener(this)}}),destroy:enyo.inherit(function(e){return function(){enyo.Signals.removeListener(this),e.apply(this,arguments)}}),notify:function(e,t){this.dispatchEvent(e,t)},protectedStatics:{listeners:[],addListener:function(e){this.listeners.push(e)},removeListener:function(e){enyo.remove(e,this.listeners)}},statics:{send:function(e,t){enyo.forEach(this.listeners,function(r){r.notify(e,t)})}}}),enyo.kind({name:"enyo.MultipleDispatchComponent",kind:"enyo.Component",mixins:[enyo.MultipleDispatchSupport]}),enyo.kind({name:"enyo.Controller",kind:"enyo.MultipleDispatchComponent",global:!1,data:null,constructor:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.global&&enyo.setPath(this.name,this)}}),_isController:!0}),function(e){var t=[],n=function(e){for(var n=t,r=n.length,i=0;r>i;++i)n[i]._hashChanged(e)},r=/\:[a-zA-Z0-9]*/g,i=function(e){return"#"===e[0]?e.slice(1):e};e.ready(function(){e.dispatcher.listen(window,"hashchange",n)}),e.kind({name:"enyo.Router",listening:!0,internalOnly:!1,defaultPathOnStart:!1,defaultRoute:null,triggerOnStart:!0,useHistory:!1,routes:null,kind:"enyo.Controller",_staticRoutes:null,_dynamicRoutes:null,_current:"",_history:null,computed:{location:["_current",{cached:!0}],defaultPath:[]},location:function(t){return t?(t=i(t),this.internalOnly?this.set("_current",t):e.asyncMethod(this,"trigger",{location:t,change:!0}),void 0):i(this.get("_current"))},defaultPath:function(){return this.defaultRoute?this.defaultRoute.path:""},trigger:function(e){e?"string"==typeof e&&(e={location:e}):e={location:this.get("_current")};var t=e.location,r=e.global,i=e.change,s=this.get("location");i?s!==t?window.location.hash=t:this._hashChanged(t):r?n(t):this._hashChanged(t)},handle:function(e){this._handleStatic(e)||this._handleDynamic(e)||this._handleDefault(e)},back:function(){this.useHistory&&this._history.length>=2&&(this._history.shift(),this.set("location",this._history.shift()))},addHistory:function(e,t){if(this.useHistory)switch(typeof t){case"undefined":this._history.unshift(e);break;case"number":t>=0&&this._history.length>t&&this._history.splice(t,0,e);break;case"boolean":this._history.push(e)}return this},clearHistory:function(){return this._history=[],this},addRoute:function(e){var t,n=this._staticRoutes,i=this._dynamicRoutes;return!0===e["default"]?this.defaultRoute=e:r.test(e.path)?(r.lastIndex=0,t=RegExp(e.path.replace(r,"([a-zA-Z0-9-]*)")),e.regex=t,i.push(e)):n[e.path]=e,this},constructor:e.inherit(function(e){return function(){this._staticRoutes={},this._dynamicRoutes=[],this.routes=this.routes||[],this._history=this._history||[],e.apply(this,arguments)}}),create:e.inherit(function(e){return function(){e.apply(this,arguments),this._setupRoutes(),this.set("_current",i(window.location.hash)),t.push(this),this.triggerOnStart&&(this.defaultPathOnStart?this.trigger({change:!0,location:this.get("defaultPath")}):this.trigger())}}),destroy:e.inherit(function(n){return function(){var r=e.indexOf(this,t);~r||t.splice(r,1),n.apply(this,arguments)}}),_hashChanged:function(t){var n=function(t){return e.isString(t)||(t=t.newUrl||window.location.hash),i(t)}(t);this.listening&&(this.set("_current",n),this.handle(n))},_execHandler:function(t,n,r,i){var s=n,o="string"==typeof t?e.getPath.call(this,t):t||this;return"string"==typeof n&&(s=this[n]||o[n],"function"==typeof s&&(i.handler=s,i.context=o)),s&&"function"==typeof s?(s.apply(o,r),!0):!1},_handleStatic:function(e){var t,n,r,i=this._staticRoutes;return(t=i[e])?(n=t.handler,r=t.context,this._execHandler(r,n,[e],t)):!1},_handleDynamic:function(e){for(var t,n,r,i,s,o=this._dynamicRoutes,u=0,a=o.length;a>u;++u)if(n=o[u],t=n.regex,s=t.exec(e))return s=s.slice(1),r=n.handler,i=n.context,this._execHandler(i,r,s,n);return!1},_handleDefault:function(e){var t=this.defaultRoute||{},n=t.context,r=t.handler;return this._execHandler(n,r,[e],t)},_setupRoutes:function(){for(var e,t=this.routes,n=0,r=t.length;r>n;++n)e=t[n],e&&this.addRoute(e)},_currentChanged:function(){this.useHistory&&this._history.unshift(this.get("location"))}})}(enyo),enyo.kind({name:"enyo.ViewController",kind:"enyo.Controller",view:null,viewKind:null,renderTarget:"document.body",resetView:!1,render:function(e){var t=this.view,n=e||this.renderTarget;if(t){if(t.hasNode()&&t.generated)return;this.container?t.render():t.renderInto(enyo.dom.byId(n)||enyo.getPath(n))}},renderInto:function(e){this.render(this.renderTarget=e)},viewChanged:function(e){if(!e||(e.set("bubbleTarget",null),e.owner!==this||e.destroyed||e.destroy(),!e.destroyed||this.resetView)){var t=this.view;if("string"==typeof t&&(t=enyo.getPath(t)),"function"==typeof t&&(this.viewKind=t,t=null),"string"==typeof this.viewKind&&(this.viewKind=enyo.getPath(this.viewKind)),!t&&this.viewKind||t&&"object"==typeof t&&!(t instanceof enyo.UiComponent)){var n="object"==typeof t&&null!==t&&!t.destroyed&&t||{kind:this.viewKind},r=this;n.kind=n.kind||this.viewKind||enyo.defaultCtor,t=this.createComponent(n,{owner:this,container:this.container||null,bubbleTarget:this}),t.extend({destroy:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.bubbleTarget===r&&this.bubbleTarget.set("view",null)}})})}else t&&t instanceof enyo.UiComponent&&(this.viewKind||(this.viewKind=t.ctor),t.set("bubbleTarget",this));this.view=t}},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.viewChanged()}}),destroy:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.view=null,this.viewKind=null}}),notInstanceOwner:!0}),enyo.applications={},enyo.kind({name:"enyo.Application",kind:"enyo.ViewController",autoStart:!0,renderOnStart:!0,defaultKind:"enyo.Controller",controllers:null,viewReady:!1,start:function(){this.renderOnStart&&this.render()},render:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.view&&this.view.generated&&this.set("viewReady",!0)}}),constructor:enyo.inherit(function(e){return function(t){t&&"string"==typeof t.name&&(enyo.setPath(t.name,this),this.id=t&&t.name),e.apply(this,arguments),this.controllers=this.$,enyo.applications[this.id||this.makeId()]=this}}),create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.autoStart&&this.start()}}),adjustComponentProps:enyo.inherit(function(e){return function(t){t.app=this,e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){delete enyo.applications[this.id],e.apply(this,arguments)}}),owner:enyo.master}),enyo.singleton({name:"enyo.jobs",published:{priorityLevel:0},_jobs:[[],[],[],[],[],[],[],[],[],[]],_priorities:{},_namedJobs:{},_magicWords:{low:3,normal:5,high:7},add:function(e,t,n){t=t||5,t=enyo.isString(t)?this._magicWords[t]:t,n&&(this.remove(n),this._namedJobs[n]=t),t>=this.priorityLevel?e():this._jobs[t-1].push({fkt:e,name:n})},remove:function(e){var t=this._jobs[this._namedJobs[e]-1];if(t)for(var n=t.length-1;n>=0;n--)if(t[n].name===e)return t.splice(n,1)},registerPriority:function(e,t){this._priorities[t]=e,this.setPriorityLevel(Math.max(e,this.priorityLevel))},unregisterPriority:function(e){var t=0;delete this._priorities[e];for(var n in this._priorities)t=Math.max(t,this._priorities[n]);this.setPriorityLevel(t)},priorityLevelChanged:function(e){e>this.priorityLevel&&this._doJob()},_doJob:function(){for(var e,t=9;t>=this.priorityLevel;t--)if(this._jobs[t].length){e=this._jobs[t].shift();break}e&&(e.fkt(),delete this._namedJobs[e.name],setTimeout(enyo.bind(this,"_doJob"),10))}}),enyo.macroize=function(e,t,n){var r,i,s=e,o=n||enyo.macroize.pattern,u=function(e,n){return r=enyo.getPath.call(t,n),void 0===r||null===r?"{$"+n+"}":(i=!0,r)},a=0;do if(i=!1,s=s.replace(o,u),++a>=20)throw"enyo.macroize: recursion too deep";while(i);return s},enyo.quickReplace=function(e,t,n){n=n||enyo.macroize.pattern;var r=function(e){var n=t[e];return n||e};return e.replace(n,r)},enyo.quickMacroize=function(e,t,n){var r,i=e,s=n||enyo.macroize.pattern,o=function(e,n){return r=n in t?t[n]:enyo.getPath.call(t,n),void 0===r||null===r?"{$"+n+"}":r};return i=i.replace(s,o)},enyo.macroize.pattern=/\{\$([^{}]*)\}/g,function(){window.$L=function(e){return e},enyo.updateLocale=function(){enyo.Signals.send("onlocalechange")},document.addEventListener&&document.addEventListener("localechange",function(){enyo.updateLocale()},!1)}(),enyo.kind({name:"enyo.InputBinding",kind:enyo.Binding,placeholderDirection:"source",oneWay:!1,transform:function(e,t,n){if(e)return e;var r=n.placeholderDirection,i=n[r].placeholder||"";return i}}),enyo.kind({name:"enyo.BooleanBinding",kind:enyo.Binding,transform:function(e){return!!e}}),enyo.kind({name:"enyo.EmptyBinding",kind:enyo.Binding,transform:function(e){return""!==e&&null!=e}}),enyo.kind({name:"enyo.BooleanOnlyBinding",kind:enyo.Binding,transform:function(e){return e!==!0&&e!==!1?void 0:e}}),enyo.kind({name:"enyo.StringBinding",kind:enyo.Binding,transform:function(e){return enyo.isString(e)?e:""}}),enyo.kind({name:"enyo.InvertBooleanBinding",kind:enyo.Binding,transform:function(e){return!e}}),enyo.kind({name:"enyo.Async",kind:"enyo.Object",published:{timeout:0},failed:!1,context:null,constructor:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.responders=[],this.errorHandlers=[],this.progressHandlers=[]}}),destroy:enyo.inherit(function(e){return function(){this.timeoutJob&&this.clearTimeout(),e.apply(this,arguments)}}),accumulate:function(e,t){var n=2>t.length?t[0]:enyo.bind(t[0],t[1]);e.push(n)},response:function(){return this.accumulate(this.responders,arguments),this},error:function(){return this.accumulate(this.errorHandlers,arguments),this},route:function(e,t){var n=this.bindSafely("respond");e.response(function(e,t){n(t)});var r=this.bindSafely("fail");e.error(function(e,t){r(t)}),e.go(t)},handle:function(e,t){var n=t.shift();if(n)if(n instanceof enyo.Async)this.route(n,e);else{var r=enyo.call(this.context||this,n,[this,e]);r=void 0!==r?r:e,(this.failed?this.fail:this.respond).call(this,r)}},startTimer:function(){this.startTime=enyo.perfNow(),this.timeout&&(this.timeoutJob=setTimeout(this.bindSafely("timeoutComplete"),this.timeout))},endTimer:function(){this.timeoutJob&&(this.endTime=enyo.perfNow(),clearTimeout(this.timeoutJob),this.timeoutJob=null,this.latency=this.endTime-this.startTime)},timeoutComplete:function(){this.timedout=!0,this.fail("timeout")},respond:function(e){this.failed=!1,this.endTimer(),this.handle(e,this.responders)},fail:function(e){this.failed=!0,this.endTimer(),this.handle(e,this.errorHandlers)},recover:function(){this.failed=!1},progress:function(){return this.accumulate(this.progressHandlers,arguments),this},sendProgress:function(e,t,n,r){var i=enyo.mixin({},r);i.type="progress",i.current=e,i.min=t,i.max=n;for(var s=0;this.progressHandlers.length>s;s++)enyo.call(this.context||this,this.progressHandlers[s],[this,i])},go:function(e){return this.sendProgress(0,0,1),enyo.asyncMethod(this,function(){this.sendProgress(1,0,1),this.respond(e)}),this}}),enyo.json={stringify:function(e,t,n){return JSON.stringify(e,t,n)},parse:function(e,t){return e?JSON.parse(e,t):null}},enyo.getCookie=function(e){var t=document.cookie.match(RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},enyo.setCookie=function(e,t,n){var r=e+"="+encodeURIComponent(t),i=n||{},s=i.expires;if("number"==typeof s){var o=new Date;o.setTime(o.getTime()+864e5*s),s=o}s&&s.toUTCString&&(i.expires=s.toUTCString());var u,a;for(u in i)r+="; "+u,a=i[u],a!==!0&&(r+="="+a);document.cookie=r},enyo.xhr={request:function(e){var t=this.getXMLHttpRequest(e),n=this.simplifyFileURL(enyo.path.rewrite(e.url)),r=e.method||"GET",i=!e.sync;if(e.username?t.open(r,n,i,e.username,e.password):t.open(r,n,i),enyo.mixin(t,e.xhrFields),e.callback&&this.makeReadyStateHandler(t,e.callback),e.headers=e.headers||{},"GET"!==r&&enyo.platform.ios&&6==enyo.platform.ios&&null!==e.headers["cache-control"]&&(e.headers["cache-control"]=e.headers["cache-control"]||"no-cache"),t.setRequestHeader)for(var s in e.headers)e.headers[s]&&t.setRequestHeader(s,e.headers[s]);return"function"==typeof t.overrideMimeType&&e.mimeType&&t.overrideMimeType(e.mimeType),t.send(e.body||null),!i&&e.callback&&t.onreadystatechange(t),t},cancel:function(e){e.onload&&(e.onload=null),e.onreadystatechange&&(e.onreadystatechange=null),e.abort&&e.abort()},makeReadyStateHandler:function(e,t){window.XDomainRequest&&e instanceof window.XDomainRequest?e.onload=function(){var n;"arraybuffer"===e.responseType?n=e.response:"string"==typeof e.responseText&&(n=e.responseText),t.apply(null,[n,e]),e=null}:e.onreadystatechange=function(){if(e&&4==e.readyState){var n;"arraybuffer"===e.responseType?n=e.response:"string"==typeof e.responseText&&(n=e.responseText),t.apply(null,[n,e]),e=null}}},inOrigin:function(e){var t=document.createElement("a"),n=!1;return t.href=e,(":"===t.protocol||t.protocol===window.location.protocol&&t.hostname===window.location.hostname&&t.port===(window.location.port||("https:"===window.location.protocol?"443":"80")))&&(n=!0),n},simplifyFileURL:function(e){var t=document.createElement("a");if(t.href=e,"file:"===t.protocol||":"===t.protocol&&"file:"===window.location.protocol){var n=4>enyo.platform.webos?"":t.host;return t.protocol+"//"+n+t.pathname}return":"===t.protocol&&"x-wmapp0:"===window.location.protocol?window.location.protocol+"//"+window.location.pathname.split("/")[0]+"/"+t.host+t.pathname:e},getXMLHttpRequest:function(e){try{if(10>enyo.platform.ie&&window.XDomainRequest&&!e.headers&&!this.inOrigin(e.url)&&!/^file:\/\//.test(window.location.href))return new window.XDomainRequest}catch(t){}try{if(enyo.platform.firefoxOS){var n=!1,r={};if(e.mozSystem&&(r.mozSystem=!0,n=!0),e.mozAnon&&(r.mozAnon=!0,n=!0),n)return new XMLHttpRequest(r)}return new XMLHttpRequest}catch(t){}return null}},function(e){function t(){this.fake=!0,this._fields=[],this.boundary="--------------------------";for(var e=0;24>e;e++)this.boundary+=Math.floor(10*Math.random()).toString(16)}function n(e,t){if(this.name=t.name,this.type=t.type||"application/octet-stream",!enyo.isArray(e))throw Error("enyo.Blob only handles Arrays of Strings");if(e.length>0&&"string"!=typeof e[0])throw Error("enyo.Blob only handles Arrays of Strings");this._bufs=e}if(e.FormData)try{return new e.FormData,new e.Blob,enyo.FormData=e.FormData,enyo.Blob=e.Blob,void 0}catch(r){}t.prototype.getContentType=function(){return"multipart/form-data; boundary="+this.boundary},t.prototype.append=function(e,t,n){this._fields.push([e,t,n])},t.prototype.toString=function(){var e=this.boundary,t="";return enyo.forEach(this._fields,function(n){if(t+="--"+e+"\r\n",n[2]||n[1].name){var r=n[1],i=n[2]||r.name;t+='Content-Disposition: form-data; name="'+n[0]+'"; filename="'+i+'"\r\n',t+="Content-Type: "+r.type+"\r\n\r\n",t+=r.getAsBinary()+"\r\n"}else t+='Content-Disposition: form-data; name="'+n[0]+'";\r\n\r\n',t+=n[1]+"\r\n"}),t+="--"+e+"--"},enyo.FormData=t,n.prototype.getAsBinary=function(){var e="",t=e.concat.apply(e,this._bufs);return t},enyo.Blob=n}(window),enyo.AjaxProperties={cacheBust:!0,url:"",method:"GET",handleAs:"json",contentType:"application/x-www-form-urlencoded",sync:!1,headers:null,postBody:"",username:"",password:"",xhrFields:null,mimeType:null},enyo.kind({name:"enyo.Ajax",kind:"enyo.Async",published:enyo.AjaxProperties,constructor:enyo.inherit(function(e){return function(t){enyo.mixin(this,t),e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){this.xhr=null,e.apply(this,arguments)}}),go:function(e){return this.failed=!1,this.startTimer(),this.request(e),this},request:function(e){var t=this.url.split("?"),n=t.shift()||"",r=t.length?t.join("?").split("&"):[],i=null;enyo.isString(e)?i=e:e&&(i=enyo.Ajax.objectToQuery(e)),i&&(r.push(i),i=null),this.cacheBust&&r.push(Math.random());var s,o=r.length?[n,r.join("&")].join("?"):n,u={};"GET"!=this.method&&(s=this.postBody,"POST"===this.method&&s instanceof enyo.FormData?s.fake&&(u["Content-Type"]=s.getContentType(),s=""+s):(u["Content-Type"]=this.contentType,s instanceof Object&&(s=null!==this.contentType.match(/^application\/json(;.*)?$/)?JSON.stringify(s):"application/x-www-form-urlencoded"===this.contentType?enyo.Ajax.objectToQuery(s):""+s))),enyo.mixin(u,this.headers),0===enyo.keys(u).length&&(u=void 0);try{this.xhr=enyo.xhr.request({url:o,method:this.method,callback:this.bindSafely("receive"),body:s,headers:u,sync:this.sync,username:this.username,password:this.password,xhrFields:enyo.mixin({onprogress:this.bindSafely(this.updateProgress)},this.xhrFields),mimeType:this.mimeType})}catch(a){this.fail(a)}},receive:function(e,t){if(!this.failed&&!this.destroyed){var n;n="string"==typeof t.responseText?t.responseText:t.responseBody,this.xhrResponse={status:t.status,headers:enyo.Ajax.parseResponseHeaders(t),body:n},this.isFailure(t)?this.fail(t.status):this.respond(this.xhrToResponse(t))}},fail:enyo.inherit(function(e){return function(){this.xhr&&(enyo.xhr.cancel(this.xhr),this.xhr=null),e.apply(this,arguments)}}),xhrToResponse:function(e){return e?this[(this.handleAs||"text")+"Handler"](e):void 0},isFailure:function(e){try{var t="";return"string"==typeof e.responseText&&(t=e.responseText),0===e.status&&""===t?!0:0!==e.status&&(200>e.status||e.status>=300)}catch(n){return!0}},xmlHandler:function(e){return e.responseXML},textHandler:function(e){return e.responseText},jsonHandler:function(e){var t=e.responseText;try{return t&&enyo.json.parse(t)}catch(n){return enyo.warn("Ajax request set to handleAs JSON but data was not in JSON format"),t}},updateProgress:function(e){var t={};for(var n in e)"input"!==n&&(t[n]=e[n]);this.sendProgress(e.loaded,0,e.total,t)},statics:{objectToQuery:function(e){var t=encodeURIComponent,n=[],r={};for(var i in e){var s=e[i];if(s!=r[i]){var o=t(i)+"=";if(enyo.isArray(s))for(var u=0;s.length>u;u++)n.push(o+t(s[u]));else n.push(o+t(s))}}return n.join("&")}},protectedStatics:{parseResponseHeaders:function(e){var t={},n=[];e.getAllResponseHeaders&&(n=e.getAllResponseHeaders().split(/\r?\n/));for(var r=0;n.length>r;r++){var i=n[r],s=i.indexOf(": ");if(s>0){var o=i.substring(0,s).toLowerCase(),u=i.substring(s+2);t[o]=u}}return t}}}),enyo.kind({name:"enyo.JsonpRequest",kind:"enyo.Async",published:{url:"",charset:null,callbackName:"callback",cacheBust:!0,overrideCallback:null},protectedStatics:{nextCallbackID:0},addScriptElement:function(){var e=document.createElement("script");e.src=this.src,e.async="async",this.charset&&(e.charset=this.charset),e.onerror=this.bindSafely(function(){this.fail(400)});var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.scriptTag=e},removeScriptElement:function(){var e=this.scriptTag;this.scriptTag=null,e.onerror=null,e.parentNode&&e.parentNode.removeChild(e)},constructor:enyo.inherit(function(e){return function(t){enyo.mixin(this,t),e.apply(this,arguments)}}),go:function(e){return this.startTimer(),this.jsonp(e),this},jsonp:function(e){var t=this.overrideCallback||"enyo_jsonp_callback_"+enyo.JsonpRequest.nextCallbackID++;this.src=this.buildUrl(e,t),this.addScriptElement(),window[t]=this.bindSafely(this.respond);var n=this.bindSafely(function(){this.removeScriptElement(),window[t]=null});this.response(n),this.error(n)},buildUrl:function(e,t){var n=this.url.split("?"),r=n.shift()||"",i=n.length?n.join("?").split("&"):[],s=this.bodyArgsFromParams(e,t);return i.push(s),this.cacheBust&&i.push(Math.random()),[r,i.join("&")].join("?")},bodyArgsFromParams:function(e,t){if(enyo.isString(e))return e.replace("=?","="+t);var n=enyo.mixin({},e);return this.callbackName&&(n[this.callbackName]=t),enyo.Ajax.objectToQuery(n)}}),enyo.kind({name:"enyo._AjaxComponent",kind:"enyo.Component",published:enyo.AjaxProperties}),enyo.kind({name:"enyo.WebService",kind:"enyo._AjaxComponent",published:{jsonp:!1,callbackName:"callback",charset:null,timeout:0},events:{onResponse:"",onError:"",onProgress:""},send:function(e,t){return this.jsonp?this.sendJsonp(e,t):this.sendAjax(e,t)},sendJsonp:function(e,t){var n=new enyo.JsonpRequest;for(var r in{url:1,callbackName:1,charset:1,timeout:1})n[r]=this[r];return enyo.mixin(n,t),this.sendAsync(n,e)},sendAjax:function(e,t){var n=new enyo.Ajax(t);for(var r in enyo.AjaxProperties)n[r]=this[r];return n.timeout=this.timeout,enyo.mixin(n,t),this.sendAsync(n,e)},sendAsync:function(e,t){return e.go(t).response(this,"response").error(this,"error").progress(this,"progress")},response:function(e,t){this.doResponse({ajax:e,data:t})},error:function(e,t){this.doError({ajax:e,data:t})},progress:function(e,t){this.doProgress(t)}}),enyo.kind({name:"enyo.Source",kind:null,store:null,fetch:function(){},commit:function(){},destroy:function(){},find:function(){},get:function(){return enyo.getPath.apply(this,arguments)},set:function(){return enyo.setPath.apply(this,arguments)}}),enyo.kind({name:"enyo.LocalStorageSource",kind:enyo.Source}),function(e){var t=function(e){return e.replace(/([^:]\/)(\/+)/g,"$1")},n=/^http/,r=function(){var e=location.protocol,t=location.pathname.split("/");return e+="//"+location.host,t.length>1&&t[t.length-1].match(/\./)&&t.pop(),e+="/"+t.join("/")};e.kind({name:"enyo.XHRSource",kind:e.Source,requestKind:null,urlRoot:"",buildUrl:function(s,o){var u=o.url||e.isFunction(s.getUrl)&&s.getUrl()||s.url;return n.test(u)||(u=(s.urlRoot||this.urlRoot||r())+"/"+u),t(u)},go:function(t){var n=this.requestKind,r=e.only(this._requestOptions,t),i=new n(r);i.response(function(e,n){t&&t.success&&t.success(n,e)}),i.error(t.fail),i.go(t.params)},find:function(e,t){var n=e.prototype,r=n.kindName,i=t.attributes,s="/find/"+r;t.url=s,t.url=this.buildUrl(n,t),t.method="POST",t.postBody=i,this.go(t)}}),e.kind({name:"enyo.AjaxSource",kind:e.XHRSource,requestKind:e.Ajax,fetch:function(e,t){t.method="GET",t.url=this.buildUrl(e,t),this.go(t)},commit:function(e,t){t.method=e.isNew?"POST":"PUT",t.url=this.buildUrl(e,t),t.postBody=e.toJSON(),this.go(t)},destroy:function(e,t){t.method="DELETE",t.url=this.buildUrl(e,t),this.go(t)},_requestOptions:e.keys(e.AjaxProperties)}),e.kind({name:"enyo.JsonpSource",kind:e.XHRSource,requestKind:e.JsonpRequest,fetch:function(e,t){t.cacheBust=!1,t.method="GET",t.url=this.buildUrl(e,t),this.go(t)},commit:function(e,t){t.cacheBust=!1,t.method=e.isNew?"POST":"PUT",t.url=this.buildUrl(e,t),t.postBody=e.toJSON(),this.go(t)},destroy:function(e,t){t.cacheBust=!1,t.method="DELETE",t.url=this.buildUrl(e,t),this.go(t)},_requestOptions:e.keys(e.getPath("enyo.JsonpRequest").prototype.published)})}(enyo),function(e){e.kind({name:"enyo.Store",kind:e.Object,noDefer:!0,sources:{ajax:"enyo.AjaxSource",jsonp:"enyo.JsonpSource"},ignoreDuplicates:!1,records:null,collections:null,createRecord:function(t,n,r){3>arguments.length&&e.isObject(t)&&(r=n,n=t,t=e.Model);var i=e.isString(t)&&e.getPath(t)||e.isFunction(t)&&t;return r=r||{},e.mixin(r,{store:this}),i||(i=e.Model),new i(n,r)},getRecord:function(e){return this.records.euid[e]},getCollection:function(e){return this.collections[e]},createCollection:function(t,n,r){3>arguments.length&&e.isArray(t)&&(r=n,n=t,t=e.Collection);var i=e.isString(t)&&e.getPath(t)||e.isFunction(t)&&t;return r=r||{},e.mixin(r,{store:this}),i||(i=e.Collection),new i(n,r)},addRecord:function(e){var t=this.records,n=e.primaryKey,r=t.pk[e.kindName]||(t.pk[e.kindName]={}),i=e.get(n),s=e.euid;if(e.store&&e.store!==this&&e.store.removeRecord(e),t.euid[s]&&t.euid[s]!==e)throw"enyo.Store.addRecord: duplicate and unmatching euid entries - parallel euid's should not exist";if(t.euid[s]=e,void 0!==i&&null!==i)if(r[i]&&r[i]!==e){if(!this.ignoreDuplicates)throw"enyo.Store.addRecord: duplicate record added to store for kind `"+e.kindName+"` "+"with primaryKey set to `"+n+"` and the same value of `"+i+"` which cannot coexist "+"for the kind without the `ignoreDuplicates` flag of the store set to `true`"}else r[i]=e;t.kn[e.kindName]=t.kn[e.kindName]||(t.kn[e.kindName]={}),t.kn[e.kindName][s]=e,e.store||(e.store=this)},addCollection:function(e){var t=this.collections,n=e.euid;e.store&&e.store!==this&&e.store.removeCollection(e),e.addListener("destroy",this._collectionDestroyed),t[n]=e,e.store||(e.store=this)},removeCollection:function(e){var t=this.collections,n=e.euid;delete t[n],e.removeListener("destroy",this._collectionDestroyed)},removeRecord:function(e){var t=this.records,n=e.primaryKey,r=e.euid,i=e.get(n);delete t.euid[r],delete t.kn[e.kindName][r],delete t.pk[e.kindName][i]},addSources:function(e){var t=this.sources;for(var n in e)t[n]=e[n];this._initSources()},removeSource:function(e){delete this.sources[e]},removeSources:function(e){for(var t,n=this.sources,r=0;t=e[r];++r)delete n[t]},find:function(t,n){1==arguments.length&&(n=t,t=e.Model);var r=e.isString(t)?e.constructorForKind(t):t,i=r.prototype,s=n,o=s.attributes,u=this.sources,a=this.records,f=i.primaryKey,l=s.source&&(e.isString(s.source)&&u[s.source]||s.source)||u[i.defaultSource],c=s.euid&&a.euid[s.euid]||o&&o[f]&&a.pk[i.kindName][o[f]];return c?s.success(s,c):l?(s=e.clone(s),s.success=this.bindSafely("didFind",n),s.fail=this.bindSafely("didFail","find",n),n.strategy=n.strategy||"merge",l.find(r,s),void 0):this.warn("could not find source `"+(s.source||i.defaultSource)+"`")},findLocal:function(t,n,r){3>arguments.length&&e.isObject(t)&&(e.isFunction(n)&&(r=n),n=t,t=e.Model);var i,s=("string"==typeof t?e.constructorForKind(t):t).prototype,o=this.records,u=s?s.primaryKey:"",a=n[u];return n.euid?o.euid[n.euid]:void 0!==a&&null!==a?(i=o.pk[s.kindName],i&&i[a]||void 0):n.kindName?(i=o.kn[n.kindName],i&&e.values(i)||[]):(r=r&&("string"==typeof r&&this[r]||r)||this.filter,r=this.bindSafely(r,n),e.filter(e.values(o.kn[s.kindName])||[],r,this))},filter:function(e,t){for(var n in e)if(t.get(n)!==e[n])return!1;return!0},didFind:function(){this.log(arguments)},didFetch:function(e,t,n){t&&t.success&&t.success(n)},didCommit:function(e,t,n){t&&t.success&&t.success(n)},didDestroy:function(e,t,n){t&&t.success&&t.success(n)},didFail:function(e,t,n,r){return n&&n.fail?n.fail(r):void 0},fetchRecord:function(t,n){var r=this.sources,i=n?e.clone(n):{},s=r[i.source||t.defaultSource];if(!s)throw"enyo.Store: Could not find source '"+(i.source||t.defaultSource)+"'";i.success=this.bindSafely("didFetch",t,n),i.fail=this.bindSafely("didFail","fetch",t,n),s.fetch(t,i)},commitRecord:function(t,n){var r=this.sources,i=n?e.clone(n):{},s=r[i.source||t.defaultSource];if(!s)throw"enyo.Store: Could not find source '"+(i.source||t.defaultSource)+"'";i.success=this.bindSafely("didCommit",t,n),i.fail=this.bindSafely("didFail","commit",t,n),s.commit(t,i)},destroyRecord:function(t,n){var r=this.sources,i=n?e.clone(n):{},s=r[i.source||t.defaultSource];if(!s)throw"enyo.Store: Could not find source '"+(i.source||t.defaultSource)+"'";i.success=this.bindSafely("didDestroy",t,n),i.fail=this.bindSafely("didFail","destroy",t,n),s.destroy(t,i)},destroyRecordLocal:function(e,t){this.didDestroy(e,t)},_initRecords:function(){for(var e,t=this.records,n=["euid","pk","kn"],r=0;e=n[r];++r)t[e]=t[e]||{}},_initSources:function(){var t,n=this.sources;for(var r in n)(t=n[r])&&e.isString(t)&&(t=e.getPath(t)),t?"function"==typeof t&&t.prototype?n[r]=new t({store:this}):(n[r]=t,t.store=this):!t&&e.isString(n[r])&&this.warn("could not find source -> `"+n[r]+"`")},_recordDestroyed:function(e){this.removeRecord(e)},_collectionDestroyed:function(e){this.removeCollection(e)},_recordKeyChanged:function(e,t){t&&delete this.records.pk[e.kindName][t],this.addRecord(e)},constructor:e.inherit(function(e){return function(){var t=e.apply(this,arguments);return this.sources=this.sources||{},this.records=this.records||{},this.collections=this.collections||{},this._initRecords(),this._initSources(),this._recordDestroyed=this.bindSafely("_recordDestroyed"),this._collectionDestroyed=this.bindSafely("_collectionDestroyed"),t}})}),e.Store.concat=function(t,n){if(n.sources){var r=t.prototype||t;r.sources=r.sources?e.mixin(e.clone(r.sources),n.sources):n.sources,delete n.sources}},e.store=new e.Store}(enyo),function(e){var t={ignore:!0,filter:function(e,t,n,r){return r[e]===void 0&&t!==void 0}};e.kind({name:"enyo.Model",kind:null,mixins:[e.ObserverSupport,e.BindingSupport,e.RegisteredEventSupport],noDefer:!0,attributes:null,defaults:{},readOnly:!1,store:null,defaultSource:"ajax",includeKeys:null,url:"",urlRoot:"",dirty:!1,primaryKey:"id",mergeKeys:null,euid:"",isNew:!0,get:function(e){if(this.attributes){var t=this.attributes[e];return t&&"function"==typeof t?t.call(this):t}},set:function(t,n,r){if(this.attributes){if(e.isObject(t))return this.setObject(t);var i,s,o=this.attributes[t];if(this._updated=!1,o&&"function"==typeof o)return this;if(r||o!==n){if(this.previous[t]=o,this.computedMap&&(s=this.computedMap[t])){"string"==typeof s&&(s=this.computedMap[t]=e.trim(s).split(" ")),i={};for(var u,a=0;u=s[a];++a)this.attributes[t]=o,this.previous[u]=i[u]=this.get(u),this.attributes[t]=n,this.changed[u]=this.get(u),this._updated=!0}if(this.changed[t]=this.attributes[t]=n,this.notifyObservers(t,o,n),this._updated=!0,i)for(var f in i)this.notifyObservers(f,this.previous[f],i[f]);!this.isSilenced()&&this._updated&&(this._updated=!1,this.triggerEvent("change"),this.changed={}),this.dirty=!0}}return this},setObject:function(e){if(this.attributes&&e){this.stopNotifications(),this.silence();var t=!1;for(var n in e)this.set(n,e[n]),t=t||this._updated;this.startNotifications(),this.unsilence(),t&&(this._updated=!1,this.triggerEvent("change")),this.changed={}}return this},constructor:function(n,r){r&&this.importProps(r),this.euid=e.uuid();var i=this.attributes=this.attributes?e.clone(this.attributes):{},s=this.defaults,o=n;o&&e.mixin(i,this.parse(o)),s&&e.mixin(i,s,t),this.changed={},this.previous=this.raw(),this.storeChanged()},importProps:function(t){t&&e.kind.statics.extend(t,this)},raw:function(){var t=this.includeKeys,n=this.attributes,r=t?e.only(t,n):e.clone(n);for(var i in r)"function"==typeof r[i]?r[i]=r[i].call(this):r[i]instanceof e.Collection&&(r[i]=r[i].raw());return r},toJSON:function(){return e.json.stringify(this.raw())},getUrl:function(){var e=this.primaryKey,t=this.get(e),n=this.urlRoot+"/"+this.url;return t&&(n+="/"+t),n},commit:function(t){var n=t?e.clone(t):{};n.success=e.bindSafely(this,"didCommit",this,t),n.fail=e.bindSafely(this,"didFail","commit",this,t),this.store.commitRecord(this,n)},fetch:function(t){var n=t?e.clone(t):{};n.success=e.bindSafely(this,"didFetch",this,t),n.fail=e.bindSafely(this,"didFail","fetch",this,t),this.store.fetchRecord(this,n)},destroy:function(t){if(this.readOnly||this.isNew)return this.destroyLocal();var n=t?e.clone(t):{};n.success=e.bindSafely(this,"didDestroy",this,t),n.fail=e.bindSafely(this,"didFail","destroy",this,t),this.store.destroyRecord(this,n)},destroyLocal:function(){var t={};t.success=e.bindSafely(this,"didDestroy",this),this.store.destroyRecordLocal(this,t)},parse:function(e){return e},didFetch:function(e,t,n){var r=this.parse(n);r&&this.setObject(r),this.dirty=!1,this.isNew=!1,t&&t.success&&t.success(e,t,n)},didCommit:function(e,t,n){var r=this.parse(n);r&&this.setObject(r),this.dirty=!1,this.isNew=!1,t&&t.success&&t.success(e,t,n)},didDestroy:function(t,n,r){for(var i in this.attributes)(this.attributes[i]instanceof e.Model||this.attributes[i]instanceof e.Collection)&&this.attributes[i].owner===this&&this.attributes[i].destroy();this.triggerEvent("destroy"),this.store._recordDestroyed(this),this.previous=null,this.changed=null,this.defaults=null,this.includeKeys=null,this.mergeKeys=null,this.store=null,this.destroyed=!0,this.removeAllObservers(),this.removeAllListeners(),n&&n.success&&n.success(t,n,r)},didFail:function(e,t,n,r){n&&n.fail&&n.fail(t,n,r)},storeChanged:function(){var t=this.store||e.store;t&&e.isString(t)&&(t=e.getPath(t),t||e.warn("enyo.Model: could not find the requested store -> ",this.store,", usingthe default store")),t=this.store=t||e.store,t.addRecord(this)},_attributeSpy:function(){var e=this.primaryKey,t=arguments[2];e==t&&this.store._recordKeyChanged(this,this.previous[this.primaryKey])},observers:{_attributeSpy:"*"}}),e.Model.concat=function(t,n){var r=t.prototype||t;n.attributes&&(r.attributes=r.attributes?e.mixin(e.clone(r.attributes),n.attributes):n.attributes,delete n.attributes),n.defaults&&(r.defaults=r.defaults?e.mixin(e.clone(r.defaults),n.defaults):n.defaults,delete n.defaults),n.mergeKeys&&(r.mergeKeys=r.mergeKeys?e.merge(r.mergeKeys,n.mergeKeys):n.mergeKeys.slice(),delete n.mergeKeys)}}(enyo),function(e){e.kind({name:"enyo.RelationalModel",kind:"enyo.Model"})}(enyo),enyo.kind({name:"enyo.Collection",kind:enyo.Component,noDefer:!0,mixins:[enyo.RegisteredEventSupport],model:enyo.Model,url:"",instanceAllRecords:!1,defaultSource:"ajax",records:null,preserveRecords:!1,store:null,length:0,isFetching:!1,fetch:function(e){var t=e?enyo.clone(e):{};(e=e||{})&&(e.strategy=e.strategy||"add"),t.success=enyo.bindSafely(this,"didFetch",this,e),t.fail=enyo.bindSafely(this,"didFail","fetch",this,e),this.set("isFetching",!0),enyo.asyncMethod(this,function(){this.store.fetchRecord(this,t)})},fetchAndReplace:function(e){var t=e||{};return t.replace=!0,this.fetch(t)},fetchAndDestroy:function(e){var t=e||{};return t.destroy=!0,this.fetch(t)},fetchAndDestroyLocal:function(e){var t=e||{};return t.destroyLocal=!0,this.fetch(t)},didFetch:function(e,t,n){t.replace&&!t.destroy?this.removeAll():t.destroy&&!t.destroyLocal?this.destroyAll():t.destroyLocal&&this.destroyAllLocal();var r,i=this.parse(n),s=t.strategy;if(i){for(var o,u=0;o=i[u];++u)o&&(o.isNew=!1);(r=this[s])&&enyo.isFunction(r)&&r.call(this,i)}t&&t.success&&t.success(e,t,n),this.set("isFetching",!1)},didFail:function(e,t,n,r){n&&n.fail&&n.fail(t,n,r),this.set("isFetching",!1)},parse:function(e){return e},raw:function(){return this.map(function(e){return e.raw()})},toJSON:function(){return enyo.json.stringify(this.raw())},merge:function(e){if(e){var t=this.model.prototype,n=t.primaryKey,r=t.mergeKeys,i=[],s=this.records.slice(),o=!1,u=!1;e=enyo.isArray(e)?e:[e];for(var a,f=0;a=e[f];++f){o=!1;var l=a.get?a.get(n):a[n];if(r||null!==l&&void 0!==l){for(var c,h=0;!o&&(c=s[h]);++h)if(null!==l&&void 0!==l&&l===(c.get?c.get(n):c[n]))o=!0,s.splice(h,1);else if(r){u=!1;for(var p,d=0;p=r[d];++d){if(l=a.get?a.get(p):a[p],l!==(c.get?c.get(p):c[p])){u=!1;break}u=!0}u&&(o=!0,s.splice(h,1))}o?c.setObject?c.setObject(a.raw?a.raw():c.parse(a)):enyo.mixin(c,a.raw?a.raw():a):i.push(a)}else i.push(a)}i.length&&this.add(i)}},add:function(e,t){var n=this.records,r=[],i=this.length;if(t=null===t||isNaN(t)?i:Math.max(0,Math.min(i,t)),e=enyo.isArray(e)?e:[e],!e.length)return r;for(var s,o=0;s=e[o];++o){if(s instanceof enyo.Model){if(s.destroyed)throw"enyo.Collection.add: cannot add a record that has already been destroyed";s.addListener("change",this._recordChanged),s.addListener("destroy",this._recordDestroyed)}else this.instanceAllRecords&&(e[o]=this.createRecord(s,null,!1));r.push(o+t)}return e.unshift.apply(e,[t,0]),n.splice.apply(n,e),e.splice(0,2),this.length=n.length,i!==this.length&&this.notifyObservers("length",i,this.length),r.length&&this.triggerEvent("add",{records:r}),r},remove:function(e){var t,n,r=[],i={},s=this.length;e=enyo.isArray(e)&&e||[e];for(var o,u,a,f=0;o=e[f];++f)if((u=this.indexOf(o))>-1){if(void 0===n||n>=u)n=u,r.unshift(u);else if(void 0===t||u>=t)t=u,r.push(u);else if(t!==u&&n!==u){for(a=0;u>r[a];)++a;r.splice(a,0,u)}i[u]=o}for(f=r.length-1;!isNaN(u=r[f]);--f)this.records.splice(u,1),i[u]instanceof this.model&&(i[u].removeListener("change",this._recordChanged),i[u].removeListener("destroy",this._recordDestroyed));return this.length=this.records.length,s!=this.length&&this.notifyObservers("length",s,this.length),r.length&&this.triggerEvent("remove",{records:i}),i},reset:function(e){var t,n=!1;return e&&enyo.isArray(e)&&(t=this.records.length,this.records=e.slice(),this.length=this.records.length,n=!0),n&&(t!==this.length&&this.notifyObservers("length",t,this.length),this.triggerEvent("reset",{records:this.records})),this},removeAll:function(){return this.reset().remove(this.records)},destroyAll:function(e){var t,n=this.removeAll(),r=e===!0?"destroyLocal":"destroy";this._destroyAll=!0;for(var i in n)t=n[i],t&&t instanceof enyo.Model&&t[r]();this._destroyAll=!1},destroyAllLocal:function(){this.destroyAll(!0)},indexOf:function(e,t){return enyo.indexOf(e,this.records,t)},map:function(e,t){t=t||this;for(var n,r=[],i=0,s=this.length;s>i&&(n=this.at(i));++i)r.push(e.call(t,n,i));return r},filter:function(e,t){var n=[];if(e){t=t||this;for(var r,i=0,s=this.length;s>i&&(r=this.at(i));++i)e.call(t,r,i)&&n.push(r)}return n},at:function(e){var t=this.records[e];return!t||t instanceof this.model||(t=this.records[e]=this.createRecord(t,null,!1)),t},createRecord:function(e,t,n){var r,i={owner:this};return e&&e.isNew===!1&&((t||i).isNew=!1,delete e.isNew),r=this.store.createRecord(this.model,e,t?enyo.mixin(i,t):i),n=!1===n?-1:null!==n&&n>=0?n:this.length,r.addListener("change",this._recordChanged),r.addListener("destroy",this._recordDestroyed),n>=0&&this.add(r,n),r},recordChanged:null,constructor:enyo.inherit(function(e){return function(t,n){var r=enyo.isArray(t)?t.slice():null,i=n||(t&&!r?t:null);i&&this.importProps(i),this.records=(this.records||[]).concat(r?this.parse(r):[]),this.length=this.records.length,this._recordChanged=enyo.bindSafely(this,this._recordChanged),this._recordDestroyed=enyo.bindSafely(this,this._recordDestroyed),this.euid=enyo.uuid();var s=this.model;this.model=s&&enyo.isString(s)?enyo.getPath(s):enyo.checkConstructor(s),this.storeChanged(),t=n=void 0,e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){var t,n=this.removeAll();for(var r in n)t=n[r],t.owner===this&&(this.preserveRecords?t.owner=null:t.destroy());this.triggerEvent("destroy"),this.store=null,this.removeAllListeners(),e.apply(this,arguments)}}),importProps:function(e){e&&(e.records&&(this.records=this.records?this.records.concat(e.records):e.records,delete e.records),enyo.kind.statics.extend(e,this))},storeChanged:function(){var e=this.store||enyo.store;e&&enyo.isString(e)&&(e=enyo.getPath(e),e||enyo.warn("enyo.Collection: could not find the requested store -> ",this.store,", usingthe default store")),e=this.store=e||enyo.store,e.addCollection(this)},_recordChanged:function(e,t,n){this.recordChanged&&this.recordChanged(e,t,n)},_recordDestroyed:function(e){this._destroyAll||this.remove(e)}}),enyo.kind({name:"enyo.ModelController",kind:enyo.Controller,model:null,get:function(e){return"model"==e?this.getLocal(e):this._isComputed(e)?this._getComputed(e):this.model?this.model.get.apply(this.model,arguments):null},getLocal:function(){return enyo.getPath.apply(this,arguments)},set:function(e,t){return"model"==e?this.setLocal(e,t):this.model?this.model.set.apply(this.model,arguments):void 0},setLocal:function(){return enyo.setPath.apply(this,arguments)},sync:function(e){var t=this.model,n=e||this.model&&this.model.attributes;for(var r in n)this.notifyObservers(r,t?t.previous[r]:n[r],t?this.model.get(r):null)},modelChanged:function(e,t){var n=e,r=t;n&&(n.removeListener("change",this._modelChanged),n.removeListener("destroy",this._modelDestroyed),r||this.sync(n.attributes)),r&&(r.addListener("change",this._modelChanged),r.addListener("destroy",this._modelDestroyed),this.sync())},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.model&&this.notifyObservers("model",null,this.model)}}),constructor:enyo.inherit(function(e){return function(){e.apply(this,arguments),this._modelChanged=this.bindSafely("_modelChanged")}}),_modelChanged:function(e){var t=e.changed;for(var n in t)this.notifyObservers(n,e.previous[n],t[n])},_modelDestroyed:function(e){e===this.model&&this.setLocal("model",null)}}),enyo.requiresWindow=function(e){e()},enyo.dom={byId:function(e,t){return"string"==typeof e?(t||document).getElementById(e):e},escape:function(e){return null!==e?(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},getBounds:function(e){return e?{left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}:null},_ie8GetComputedStyle:function(e){var t=/(\-([a-z]){1})/g;return"float"===e?e="styleFloat":t.test(e)&&(e=e.replace(t,function(){return arguments[2].toUpperCase()})),void 0!==this[e]?this[e]:null},getComputedStyle:function(e){if(9>enyo.platform.ie&&e&&e.currentStyle){var t=enyo.clone(e.currentStyle);return t.getPropertyValue=this._ie8GetComputedStyle,t.setProperty=function(){return e.currentStyle.setExpression.apply(e.currentStyle,arguments)},t.removeProperty=function(){return e.currentStyle.removeAttribute.apply(e.currentStyle,arguments)},t}return window.getComputedStyle&&e&&window.getComputedStyle(e,null)},getComputedStyleValue:function(e,t,n){var r=n||this.getComputedStyle(e),i=enyo.platform.ie;if(r=r?r.getPropertyValue(t):null,i){var s={thin:(i>8?2:1)+"px",medium:(i>8?4:3)+"px",thick:(i>8?6:5)+"px",none:"0"};if(s[r]!==void 0&&(r=s[r]),"auto"==r)switch(t){case"width":r=e.offsetWidth;break;case"height":r=e.offsetHeight}}return r},getFirstElementByTagName:function(e){var t=document.getElementsByTagName(e);return t&&t[0]},applyBodyFit:function(){var e=this.getFirstElementByTagName("html");e&&this.addClass(e,"enyo-document-fit"),enyo.dom.addBodyClass("enyo-body-fit"),enyo.bodyIsFitting=!0},getWindowWidth:function(){return window.innerWidth?window.innerWidth:document.body&&document.body.offsetWidth?document.body.offsetWidth:"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?document.documentElement.offsetWidth:320},getWindowHeight:function(){return window.innerHeight?window.innerHeight:document.body&&document.body.offsetHeight?document.body.offsetHeight:"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetHeight?document.documentElement.offsetHeight:480},compareDocumentPosition:function(e,t){return e.compareDocumentPosition?e.compareDocumentPosition(t):e.contains?(e!=t&&e.contains(t)&&16)+(e!=t&&t.contains(e)&&8)+(e.sourceIndex>=0&&t.sourceIndex>=0?(e.sourceIndex<t.sourceIndex&&4)+(e.sourceIndex>t.sourceIndex&&2):1)+0:0},_ieCssToPixelValue:function(e,t){var n=t,r=e.style,i=r.left,s=e.runtimeStyle&&e.runtimeStyle.left;return s&&(e.runtimeStyle.left=e.currentStyle.left),r.left=n,n=r.pixelLeft,r.left=i,s&&(r.runtimeStyle.left=s),n},_pxMatch:/px/i,getComputedBoxValue:function(e,t,n,r){var i=r||this.getComputedStyle(e);if(i&&(!enyo.platform.ie||enyo.platform.ie>=9)){var s=i.getPropertyValue(t+"-"+n);return"auto"===s?0:parseInt(s,10)}if(e&&e.currentStyle){var o=e.currentStyle[t+enyo.cap(n)];return o.match(this._pxMatch)||(o=this._ieCssToPixelValue(e,o)),parseInt(o,0)}return 0},calcBoxExtents:function(e,t){var n=this.getComputedStyle(e);return{top:this.getComputedBoxValue(e,t,"top",n),right:this.getComputedBoxValue(e,t,"right",n),bottom:this.getComputedBoxValue(e,t,"bottom",n),left:this.getComputedBoxValue(e,t,"left",n)}},calcPaddingExtents:function(e){return this.calcBoxExtents(e,"padding")},calcMarginExtents:function(e){return this.calcBoxExtents(e,"margin")},calcNodePosition:function(e,t){var n=0,r=0,i=e,s=i.offsetWidth,o=i.offsetHeight,u=enyo.dom.getStyleTransformProp(),a=/translateX\((-?\d+)px\)/i,f=/translateY\((-?\d+)px\)/i,l=0,c=0,h=0,p=0,d=0,v=0;if(t?(h=t.offsetHeight,p=t.offsetWidth):(h=document.body.parentNode.offsetHeight>this.getWindowHeight()?this.getWindowHeight()-document.body.parentNode.scrollTop:document.body.parentNode.offsetHeight,p=document.body.parentNode.offsetWidth>this.getWindowWidth()?this.getWindowWidth()-document.body.parentNode.scrollLeft:document.body.parentNode.offsetWidth),i.offsetParent)do t&&8&this.compareDocumentPosition(t,i.offsetParent)&&(d=t.offsetLeft,v=t.offsetTop),r+=i.offsetLeft-(i.offsetParent?i.offsetParent.scrollLeft:0)-d,u&&a.test(i.style[u])&&(r+=parseInt(i.style[u].replace(a,"$1"),10)),n+=i.offsetTop-(i.offsetParent?i.offsetParent.scrollTop:0)-v,u&&f.test(i.style[u])&&(n+=parseInt(i.style[u].replace(f,"$1"),10)),i!==e&&(i.currentStyle?(l=parseInt(i.currentStyle.borderLeftWidth,10),c=parseInt(i.currentStyle.borderTopWidth,10)):window.getComputedStyle?(l=parseInt(window.getComputedStyle(i,"").getPropertyValue("border-left-width"),10),c=parseInt(window.getComputedStyle(i,"").getPropertyValue("border-top-width"),10)):(l=parseInt(i.style.borderLeftWidth,10),c=parseInt(i.style.borderTopWidth,10)),l&&(r+=l),c&&(n+=c));while((i=i.offsetParent)&&(!t||16&this.compareDocumentPosition(t,i)));return{top:n,left:r,bottom:h-n-o,right:p-r-s,height:o,width:s}},setInnerHtml:function(e,t){e.innerHTML=t},hasClass:function(e,t){return e&&e.className?(" "+e.className+" ").indexOf(" "+t+" ")>=0:void 0},addClass:function(e,t){if(e&&!this.hasClass(e,t)){var n=e.className;e.className=n+(n?" ":"")+t}},removeClass:function(e,t){if(e&&this.hasClass(e,t)){var n=e.className;e.className=(" "+n+" ").replace(" "+t+" "," ").slice(1,-1)}},addBodyClass:function(e){enyo.exists(enyo.roots)?enyo.dom.addClass(document.body,e):enyo.dom._bodyClasses?enyo.dom._bodyClasses.push(e):enyo.dom._bodyClasses=[e]},getAbsoluteBounds:function(e){for(var t=e,n=0,r=0,i=t.offsetWidth,s=t.offsetHeight,o=enyo.dom.getStyleTransformProp(),u=/translateX\((-?\d+|-?\d*\.\d+)px\)/i,a=/translateY\((-?\d+|-?\d*\.\d+)px\)/i,f=/(?!matrix3d\()(-?\d+|-?\d*\.\d+)(?=[,\)])/g,l=null,c=null,h=null;t;)t.offsetParent!=h&&(enyo.platform.firefox?(n+=t.offsetLeft,r+=t.offsetTop):(n+=t.offsetLeft-(t.offsetParent?t.offsetParent.scrollLeft:0),r+=t.offsetTop-(t.offsetParent?t.offsetParent.scrollTop:0)),h=t.offsetParent),o&&t.style&&(c=t.style[o],l=c.match(u),l&&l[1]!==void 0&&l[1]&&(n+=parseInt(l[1],10)),l=c.match(a),l&&l[1]!==void 0&&l[1]&&(r+=parseInt(l[1],10)),l=c.match(f),l&&16===l.length&&(l[12]!==void 0&&"0"!==l[12]&&(n+=parseFloat(l[12])),l[13]!==void 0&&"0"!==l[13]&&(r+=parseFloat(l[13])))),t=t.parentNode;return{top:e?r:void 0,left:e?n:void 0,bottom:e?document.body.offsetHeight-r-s:void 0,right:e?document.body.offsetWidth-n-i:void 0,height:s,width:i}},flushBodyClasses:function(){if(enyo.dom._bodyClasses){for(var e,t=0;e=enyo.dom._bodyClasses[t];++t)enyo.dom.addClass(document.body,e);enyo.dom._bodyClasses=null}},_bodyClasses:null},window.MSApp!==void 0&&(enyo.dom.setInnerHtml=function(e,t){window.MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),document.head&&document.head.classList&&(enyo.dom.hasClass=function(e,t){return e?e.classList.contains(t):void 0},enyo.dom.addClass=function(e,t){return e?e.classList.add(t):void 0},enyo.dom.removeClass=function(e,t){return e?e.classList.remove(t):void 0}),function(){enyo.dom.calcCanAccelerate=function(){if(2>=enyo.platform.android)return!1;for(var e,t=["perspective","WebkitPerspective","MozPerspective","msPerspective","OPerspective"],n=0;e=t[n];n++)if(document.body.style[e]!==void 0)return!0;return!1};var e=["transform","-webkit-transform","-moz-transform","-ms-transform","-o-transform"],t=["transform","webkitTransform","MozTransform","msTransform","OTransform"];enyo.dom.getCssTransformProp=function(){if(this._cssTransformProp)return this._cssTransformProp;var n=enyo.indexOf(this.getStyleTransformProp(),t);return this._cssTransformProp=e[n],this._cssTransformProp},enyo.dom.getStyleTransformProp=function(){if(this._styleTransformProp||!document.body)return this._styleTransformProp;for(var e,n=0;e=t[n];n++)if(document.body.style[e]!==void 0)return this._styleTransformProp=e,this._styleTransformProp},enyo.dom.domTransformsToCss=function(e){var t,n,r="";for(t in e)n=e[t],null!==n&&void 0!==n&&""!==n&&(r+=t+"("+n+") ");return r},enyo.dom.transformsToDom=function(e){var t=this.domTransformsToCss(e.domTransforms),n=e.hasNode()?e.node.style:null,r=e.domStyles,i=this.getStyleTransformProp(),s=this.getCssTransformProp();i&&s&&(r[s]=t,n?(n[i]=t,e.invalidateStyles()):e.domStylesChanged())},enyo.dom.canTransform=function(){return Boolean(this.getStyleTransformProp())},enyo.dom.canAccelerate=function(){return void 0!==this.accelerando?this.accelerando:document.body&&(this.accelerando=this.calcCanAccelerate())},enyo.dom.transform=function(e,t){var n=e.domTransforms=e.domTransforms||{};enyo.mixin(n,t),this.transformsToDom(e)},enyo.dom.transformValue=function(e,t,n){var r=e.domTransforms=e.domTransforms||{};r[t]=n,this.transformsToDom(e)},enyo.dom.accelerate=function(e,t){var n="auto"==t?this.canAccelerate():t;this.transformValue(e,"translateZ",n?0:null)}}(),enyo.kind({name:"enyo.Control",kind:"enyo.UiComponent",published:{tag:"div",attributes:null,classes:"",style:"",content:"",showing:!0,allowHtml:!1,src:"",canGenerate:!0,fit:null,isContainer:!1},rtl:!1,handlers:{ontap:"tap",onShowingChanged:"showingChangedHandler"},_isView:!0,_needsRender:!0,noDefer:!0,defaultKind:"Control",controlClasses:"",node:null,generated:!1,kindStyle:"",create:enyo.inherit(function(e){return function(){null==this.tag&&(this._needsRender=!1),this.initStyles(),e.apply(this,arguments),this.showingChanged(),this.kindClasses&&this.addClass(this.kindClasses),this.classes&&this.addClass(this.classes),this.initProps(["id","content","src"])}}),constructor:enyo.inherit(function(e){return function(){this.attributes=enyo.clone(this.ctor.prototype.attributes),e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){this.removeFromRoots(),this.removeNodeFromDom(),enyo.Control.unregisterDomEvents(this.id),e.apply(this,arguments)}}),initProps:function(e){for(var t,n,r=0;t=e[r];r++)this[t]&&(n=t+"Changed",this[n]&&this[n]())},dispatchEvent:enyo.inherit(function(e){return function(t,n){return this.strictlyInternalEvents[t]&&this.isInternalEvent(n)?!0:e.apply(this,arguments)}}),classesChanged:function(e){this.removeClass(e),this.addClass(this.classes)},addChild:enyo.inherit(function(e){return function(t){t.addClass(this.controlClasses),e.apply(this,arguments)}}),removeChild:enyo.inherit(function(e){return function(t){e.apply(this,arguments),t.removeClass(this.controlClasses)}}),strictlyInternalEvents:{onenter:1,onleave:1},isInternalEvent:function(e){var t=enyo.dispatcher.findDispatchTarget(e.relatedTarget);return t&&t.isDescendantOf(this)},hasNode:function(){return this.generated&&(this.node||this.findNodeById())},addContent:function(e){this.setContent(this.get("content")+e)},getAttribute:function(e){var t=this.hasNode();return t?t.getAttribute(e):this.attributes[e]},setAttribute:function(e,t){this.attributes[e]=t,this.hasNode()&&this.attributeToNode(e,t),this.invalidateTags()},getNodeProperty:function(e,t){var n=this.hasNode();return n?n[e]:t},setNodeProperty:function(e,t){var n=this.hasNode();n&&(n[e]=t)},setClassAttribute:function(e){this.setAttribute("class",e)},getClassAttribute:function(){return this.attributes["class"]||""},hasClass:function(e){return e&&(" "+this.getClassAttribute()+" ").indexOf(" "+e+" ")>=0},addClass:function(e){if(e&&!this.hasClass(e)){var t=this.getClassAttribute();this.setClassAttribute(t+(t?" ":"")+e)}},removeClass:function(e){if(e&&this.hasClass(e)){var t=this.getClassAttribute();t=(" "+t+" ").replace(" "+e+" "," ").slice(1,-1),this.setClassAttribute(t)}},addRemoveClass:function(e,t){this[t?"addClass":"removeClass"](e)},initStyles:function(){this.domStyles=this.domStyles?enyo.clone(this.domStyles):{},enyo.Control.cssTextToDomStyles(this.kindStyle+this.style,this.domStyles),"none"==this.domStyles.display&&(this.showing=!1,this.domStyles.display="")},styleChanged:function(){this.domStyles={},enyo.Control.cssTextToDomStyles(this.kindStyle+this.style,this.domStyles),this.domStylesChanged()},applyStyle:function(e,t){this.domStyles[e]=t,this.domStylesChanged()},addStyles:function(e){if(enyo.isObject(e))for(var t in e)this.domStyles[t]=e[t];else enyo.Control.cssTextToDomStyles(e,this.domStyles);this.domStylesChanged()},getComputedStyleValue:function(e,t){return this.hasNode()?enyo.dom.getComputedStyleValue(this.node,e):t},domStylesChanged:function(){this.invalidateStyles(),this.invalidateTags(),this.renderStyles()},stylesToNode:function(){this.node.style.cssText=this.getDomCssText()},setupBodyFitting:function(){enyo.dom.applyBodyFit(),this.addClass("enyo-fit enyo-clip")},setupOverflowScrolling:function(){enyo.platform.android||enyo.platform.androidChrome||enyo.platform.blackberry||enyo.dom.addBodyClass("webkitOverflowScrolling")},render:function(){if(this.parent){if(this.parent.beforeChildRender(this),!this.parent.generated)return this;if(null===this.tag)return this.parent.render(),this}return this.hasNode()||this.renderNode(),this.hasNode()&&(this.renderDom(),this.generated&&this.rendered()),this},renderInto:function(e){this.teardownRender();var t=enyo.dom.byId(e),n=enyo.exists(this.fit)&&this.fit===!1;return t!=document.body||n?this.fit&&this.addClass("enyo-fit enyo-clip"):this.setupBodyFitting(),this.addClass("enyo-no-touch-action"),this.setupOverflowScrolling(),enyo.dom._bodyClasses&&enyo.dom.flushBodyClasses(),enyo.dom.setInnerHtml(t,this.generateHtml()),enyo.addToRoots(this),this.generated&&this.rendered(),this},write:function(){return enyo.dom._bodyClasses&&enyo.dom.flushBodyClasses(),this.fit&&this.setupBodyFitting(),this.addClass("enyo-no-touch-action"),this.setupOverflowScrolling(),document.write(this.generateHtml()),enyo.addToRoots(this),this.generated&&this.rendered(),this},rendered:function(){this.reflow();for(var e,t=0;e=this.children[t];t++)e.generated&&e.rendered()},show:function(){this.setShowing(!0)},hide:function(){this.setShowing(!1)},focus:function(){this.hasNode()&&this.node.focus()},blur:function(){this.hasNode()&&this.node.blur()},hasFocus:function(){return this.hasNode()?document.activeElement===this.node:void 0},getBounds:function(){var e=this.node||this.hasNode(),t=enyo.dom.getBounds(e);return t||{left:void 0,top:void 0,width:void 0,height:void 0}},setBounds:function(e,t){for(var n,r,i=this.domStyles,s=t||"px",o=["width","height","left","top","right","bottom"],u=0;r=o[u];u++)n=e[r],(n||0===n)&&(i[r]=n+(enyo.isString(n)?"":s));this.domStylesChanged()},getAbsoluteBounds:function(){var e=this.node||this.hasNode(),t=enyo.dom.getAbsoluteBounds(e);return t||{left:void 0,top:void 0,width:void 0,height:void 0,bottom:void 0,right:void 0}},getCssText:function(){var e=this.node||this.hasNode();return e?e.style.cssText:void 0},getCssClasses:function(){var e=this.node||this.hasNode();return e?e.className:void 0},findNodeById:function(){return this.id&&(this.node=enyo.dom.byId(this.id))},idChanged:function(e){e&&enyo.Control.unregisterDomEvents(e),this.setAttribute("id",this.id),this.id&&enyo.Control.registerDomEvents(this.id,this)},contentChanged:function(){this.hasNode()&&this.renderContent(),this._needsRender=!0},getSrc:function(){return this.getAttribute("src")},srcChanged:function(){this.src?this.setAttribute("src",enyo.path.rewrite(this.src)):this.setAttribute("src","")},attributesChanged:function(){this.invalidateTags(),this.renderAttributes()},generateHtml:function(){if(this.canGenerate===!1)return"";var e=this.generateInnerHtml(),t=this.generateOuterHtml(e);return this.set("generated",!0),this._needsRender=!1,t},generateInnerHtml:function(){return this.flow(),this.children.length?this.generateChildHtml():this.allowHtml?this.get("content"):enyo.Control.escapeHtml(this.get("content"))},generateChildHtml:function(){for(var e,t="",n=0;e=this.children[n];n++){var r=e.generateHtml();t+=r}return t},generateOuterHtml:function(e){return this.tag?(this.tagsValid||this.prepareTags(),this._openTag+e+this._closeTag):e},invalidateTags:function(){this.tagsValid=!1},invalidateStyles:function(){this.stylesValid=!1},getDomCssText:function(){return this.stylesValid||(this.domCssText=enyo.Control.domStylesToCssText(this.domStyles),this.stylesValid=!0),this.domCssText},prepareTags:function(){var e=this.getDomCssText();this._openTag="<"+this.tag+(e?' style="'+e+'"':"")+enyo.Control.attributesToHtml(this.attributes),enyo.Control.selfClosing[this.tag]?(this._openTag+="/>",this._closeTag=""):(this._openTag+=">",this._closeTag="</"+this.tag+">"),this.tagsValid=!0},attributeToNode:function(e,t){null===t||t===!1||""===t?this.node.removeAttribute(e):this.node.setAttribute(e,t)},attributesToNode:function(){for(var e in this.attributes)this.attributeToNode(e,this.attributes[e])},getParentNode:function(){return this.parentNode||this.parent&&(this.parent.hasNode()||this.parent.getParentNode())},addNodeToParent:function(){if(this.node){var e=this.getParentNode();e&&(void 0!==this.addBefore?this.insertNodeInParent(e,this.addBefore&&this.addBefore.hasNode()):this.appendNodeToParent(e))}},appendNodeToParent:function(e){e.appendChild(this.node)},insertNodeInParent:function(e,t){e.insertBefore(this.node,t||e.firstChild)},removeNodeFromDom:function(){this.hasNode()&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)},teardownRender:function(){this.generated&&this.teardownChildren(),this.node=null,this.set("generated",!1)},teardownChildren:function(){for(var e,t=0;e=this.children[t];t++)e.teardownRender()},renderNode:function(){this.teardownRender(),this.node=document.createElement(this.tag),this.addNodeToParent(),this.set("generated",!0)},renderDom:function(){this.renderAttributes(),this.renderStyles(),this.renderContent()},renderContent:function(){this.generated&&this.teardownChildren(),this.node&&enyo.dom.setInnerHtml(this.node,this.generateInnerHtml())},renderReusingNode:function(){if(this.canGenerate)if(null===this.tag||this.generated)if(this.children.length)for(var e,t=0;e=this.children[t];++t)e.renderReusingNode();else this.generated&&this.hasNode()&&this._needsRender&&(enyo.dom.setInnerHtml(this.node,this.generateInnerHtml()),this._needsRender=!1);else this.render()},renderStyles:function(){this.hasNode()&&this.stylesToNode()},renderAttributes:function(){this.hasNode()&&this.attributesToNode()},beforeChildRender:function(){this.generated&&this.flow()},syncDisplayToShowing:function(){var e=this.domStyles;this.showing?"none"==e.display&&this.applyStyle("display",this._displayStyle||""):(this._displayStyle="none"==e.display?"":e.display,this.applyStyle("display","none"))},showingChanged:function(e){this.syncDisplayToShowing(),this.sendShowingChangedEvent(e)},sendShowingChangedEvent:function(e){var t=e===!0||e===!1,n=this.parent;t&&(n?n.getAbsoluteShowing(!0):!0)&&this.waterfall("onShowingChanged",{originator:this,showing:this.getShowing()})},getShowing:function(){return this.showing},getAbsoluteShowing:function(e){var t;return e||(t=this.getBounds()),!this.generated||this.destroyed||!this.getShowing()||t&&0===t.height&&0===t.width?!1:this.parent&&this.parent.getAbsoluteShowing&&this.parentNode!==enyo.floatingLayer.hasNode()?this.parent.getAbsoluteShowing(e):!0},showingChangedHandler:function(e){return e===this?!1:!this.getShowing()},fitChanged:function(){this.parent.reflow()},isFullscreen:function(){return this.hasNode()&&this.hasNode()===enyo.fullscreen.getFullscreenElement()},requestFullscreen:function(){return this.hasNode()?enyo.fullscreen.requestFullscreen(this)?!0:!1:!1},cancelFullscreen:function(){return this.isFullscreen()?(enyo.fullscreen.cancelFullscreen(),!0):!1},removeFromRoots:function(){this._isRoot&&enyo.remove(this,enyo.roots)},detectTextDirectionality:function(){this.content&&this.content.length&&(this.rtl=enyo.isRtl(this.content),this.applyStyle("direction",this.rtl?"rtl":"ltr"))},statics:{escapeHtml:function(e){return null!=e?(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""},registerDomEvents:function(e,t){enyo.$[e]=t},unregisterDomEvents:function(e){enyo.$[e]=null},selfClosing:{img:1,hr:1,br:1,area:1,base:1,basefont:1,input:1,link:1,meta:1,command:1,embed:1,keygen:1,wbr:1,param:1,source:1,track:1,col:1},cssTextToDomStyles:function(e,t,n){if(e)for(var r,i,s,o,u=e.replace(/;$/,"").split(/\s*;[\s;]*/),a=0;o=u[a];a++)r=o.split(/\s*:\s*/),i=r.shift(),n?delete t[i]:(s=r.join(":"),t[i]=s)},domStylesToCssText:function(e){var t,n,r="";for(t in e)n=e[t],null!==n&&void 0!==n&&""!==n&&(r+=t+": "+n+"; ");return enyo.trim(r)},stylesToHtml:function(e){var t=enyo.Control.domStylesToCssText(e);return t?' style="'+t+'"':""},escapeAttribute:function(e){return enyo.isString(e)?(e+"").replace(/&/g,"&amp;").replace(/\"/g,"&quot;"):e},attributesToHtml:function(e){var t,n,r="";for(t in e)n=e[t],null!==n&&n!==!1&&""!==n&&(r+=" "+t+'="'+enyo.Control.escapeAttribute(n)+'"');return r},normalizeCssStyleString:function(e){return(e+";").replace(/^[;\s]+/,"").replace(/\s*(;|:)\1+/g,"$1").replace(/(:|;)\s*(?!$)/g,"$1 ")}}}),enyo.defaultCtor=enyo.Control,enyo.Control.concat=function(e,t,n){var r=e.prototype||e;t.classes&&(n?r.classes=enyo.trim((r.classes?r.classes+" ":"")+t.classes):(r.kindClasses=enyo.trim((r.kindClasses?r.kindClasses:"")+(r.classes?" "+r.classes:"")),r.classes=t.classes),delete t.classes),t.style&&(n?r.style=enyo.Control.normalizeCssStyleString((r.style?r.style+";":"")+(" "+(t.style+";"))):(r.kindStyle=enyo.Control.normalizeCssStyleString((r.kindStyle?r.kindStyle+"; ":"")+(r.style?" "+r.style:"")),r.style=enyo.Control.normalizeCssStyleString(t.style)),delete t.style),t.attributes&&(r.attributes=r.attributes?enyo.mixin(enyo.clone(r.attributes),t.attributes):t.attributes,delete t.attributes)},enyo.View=enyo.Control,enyo.platform={touch:Boolean("ontouchstart"in window||window.navigator.msMaxTouchPoints),gesture:Boolean("ongesturestart"in window||window.navigator.msMaxTouchPoints)},function(){for(var e,t,n,r=navigator.userAgent,i=enyo.platform,s=[{platform:"androidChrome",regex:/Android .* Chrome\/(\d+)[.\d]+/},{platform:"android",regex:/Android (\d+)/},{platform:"android",regex:/Silk\/1./,forceVersion:2,extra:{silk:1}},{platform:"android",regex:/Silk\/2./,forceVersion:4,extra:{silk:2}},{platform:"android",regex:/Silk\/3./,forceVersion:4,extra:{silk:3}},{platform:"windowsPhone",regex:/Windows Phone (?:OS )?(\d+)[.\d]+/},{platform:"ie",regex:/MSIE (\d+)/},{platform:"ie",regex:/Trident\/.*; rv:(\d+)/},{platform:"ios",regex:/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/},{platform:"webos",regex:/(?:web|hpw)OS\/(\d+)/},{platform:"webos",regex:/WebAppManager|Isis/,forceVersion:4},{platform:"safari",regex:/Version\/(\d+)[.\d]+\s+Safari/},{platform:"chrome",regex:/Chrome\/(\d+)[.\d]+/},{platform:"androidFirefox",regex:/Android;.*Firefox\/(\d+)/},{platform:"firefoxOS",regex:/Mobile;.*Firefox\/(\d+)/},{platform:"firefox",regex:/Firefox\/(\d+)/},{platform:"blackberry",regex:/PlayBook/i,forceVersion:2},{platform:"blackberry",regex:/BB1\d;.*Version\/(\d+\.\d+)/},{platform:"tizen",regex:/Tizen (\d+)/}],o=0;e=s[o];o++)if(t=e.regex.exec(r)){n=e.forceVersion?e.forceVersion:Number(t[1]),i[e.platform]=n,e.extra&&enyo.mixin(i,e.extra),i.platformName=e.platform;break}enyo.dumbConsole=Boolean(i.android||i.ios||i.webos)}(),function(){for(var e,t,n,r=Math.round(1e3/60),i=["webkit","moz","ms","o",""],s="requestAnimationFrame",o="cancel"+enyo.cap(s),u=function(e){return window.setTimeout(e,r)},a=function(e){return window.clearTimeout(e)},f=0,l=i.length;((e=i[f])||l>f)&&!(enyo.platform.ios>=6);f++)if(t=e?e+enyo.cap(o):o,n=e?e+enyo.cap(s):s,window[t]){a=window[t],u=window[n],"webkit"==e&&a(u(enyo.nop));break}enyo.requestAnimationFrame=function(e,t){return u(e,t)},enyo.cancelRequestAnimationFrame=function(e){return a(e)}}(),enyo.easing={cubicIn:function(e){return Math.pow(e,3)},cubicOut:function(e){return Math.pow(e-1,3)+1},expoOut:function(e){return 1==e?1:-1*Math.pow(2,-10*e)+1},quadInOut:function(e){return e=2*e,1>e?Math.pow(e,2)/2:-1*(--e*(e-2)-1)/2},linear:function(e){return e}},enyo.easedLerp=function(e,t,n,r){var i=(enyo.perfNow()-e)/t;return r?i>=1?0:1-n(1-i):i>=1?1:n(i)},enyo.easedComplexLerp=function(e,t,n,r,i,s,o){var u=(enyo.perfNow()-e)/t;return r?n(1-u,i,s,o,t):n(u,i,s,o,t)},enyo.ready(function(){(window.cordova||window.PhoneGap)&&document.addEventListener("deviceready",function(e){for(var t,n=["pause","resume","online","offline","backbutton","batterycritical","batterylow","batterystatus","menubutton","searchbutton","startcallbutton","endcallbutton","volumedownbutton","volumeupbutton"],r=0;t=n[r];r++)document.addEventListener(t,enyo.bind(enyo.Signals,"send","on"+t),!1);enyo.Signals.send("ondeviceready",e)},!1)}),enyo.ready(function(){function e(e){e=e||window.event,enyo.hidden=e.type in r?r[e.type]:document[t],enyo.visibilityState=e.type in r?r[e.type]?"hidden":"visible":document[n],enyo.Signals.send("onvisibilitychange",enyo.mixin(e,{hidden:enyo.hidden}))}var t="hidden",n="visibilityState",r={};r.blur=r.focusout=r.pagehide=!0,r.focus=r.focusin=r.pageshow=!1,t in document?document.addEventListener("visibilitychange",e):(t="mozHidden")in document?(document.addEventListener("mozvisibilitychange",e),n="mozVisibilityState"):(t="webkitHidden")in document?(document.addEventListener("webkitvisibilitychange",e),n="webkitVisibilityState"):(t="msHidden")in document?(document.addEventListener("msvisibilitychange",e),n="msVisibilityState"):"onfocusin"in document?document.onfocusin=document.onfocusout=e:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=e,enyo.hidden=document[t]!==void 0?document[t]:!1,enyo.visibilityState=document[n]!==void 0?document[n]:"visible"}),function(e){e.$={},e.dispatcher={events:["mousedown","mouseup","mouseover","mouseout","mousemove","mousewheel","click","dblclick","change","keydown","keyup","keypress","input","paste","copy","cut","webkitTransitionEnd","transitionend","webkitAnimationEnd","animationEnd"],windowEvents:["resize","load","unload","message","hashchange","popstate"],features:[],connect:function(){var t,n,r=e.dispatcher;for(t=0;n=r.events[t];t++)r.listen(document,n);for(t=0;n=r.windowEvents[t];t++)"unload"===n&&"object"==typeof window.chrome&&window.chrome.app||r.listen(window,n)},listen:function(t,n,r){var i=e.dispatch;this.listen=t.addEventListener?function(e,t,n){e.addEventListener(t,n||i,!1)}:function(t,n,r){t.attachEvent("on"+n,function(t){return t.target=t.srcElement,t.preventDefault||(t.preventDefault=e.iePreventDefault),(r||i)(t)})},this.listen(t,n,r)},stopListening:function(t,n,r){var i=e.dispatch;this.stopListening=t.addEventListener?function(e,t,n){e.removeEventListener(t,n||i,!1)}:function(e,t,n){e.detachEvent("on"+t,n||i)},this.stopListening(t,n,r)},dispatch:function(e){var t=this.findDispatchTarget(e.target)||this.findDefaultTarget();e.dispatchTarget=t;for(var n,r=0;n=this.features[r];r++)if(n.call(this,e)===!0)return;return t&&!e.preventDispatch?this.dispatchBubble(e,t):void 0},findDispatchTarget:function(t){var n,r=t;try{for(;r;){if(n=e.$[r.id]){n.eventNode=r;break}r=r.parentNode}}catch(i){e.log(i,r)}return n},findDefaultTarget:function(){return e.master},dispatchBubble:function(e,t){var n=e.type;return n=e.customEvent?n:"on"+n,t.bubble(n,e,t)}},e.iePreventDefault=function(){try{this.returnValue=!1}catch(e){}},e.dispatch=function(t){return e.dispatcher.dispatch(t)},e.bubble=function(t){var n=t||window.event;n&&(n.target||(n.target=n.srcElement),e.dispatch(n))},e.bubbler="enyo.bubble(arguments[0])",function(){var t=function(){e.bubble(arguments[0])};e.makeBubble=function(){var n=Array.prototype.slice.call(arguments,0),r=n.shift();"object"==typeof r&&"function"==typeof r.hasNode&&e.forEach(n,function(n){this.hasNode()&&e.dispatcher.listen(this.node,n,t)},r)},e.unmakeBubble=function(){var n=Array.prototype.slice.call(arguments,0),r=n.shift();"object"==typeof r&&"function"==typeof r.hasNode&&e.forEach(n,function(n){this.hasNode()&&e.dispatcher.stopListening(this.node,n,t)},r)}}(),e.requiresWindow(e.dispatcher.connect),e.dispatcher.features.push(function(t){if("click"===t.type&&0===t.clientX&&0===t.clientY){var n=e.clone(t);n.type="tap",n.preventDefault=e.nop,e.dispatch(n)}});var t={};e.dispatcher.features.push(function(e){("mousemove"==e.type||"tap"==e.type||"click"==e.type||"touchmove"==e.type)&&(t.clientX=e.clientX,t.clientY=e.clientY,t.pageX=e.pageX,t.pageY=e.pageY,t.screenX=e.screenX,t.screenY=e.screenY)}),e.getPosition=function(){var n=e.clone(t);if(9>e.platform.ie){var r=document.documentElement||document.body.parentNode||document.body;n.pageX=n.clientX+r.scrollLeft,n.pageY=n.clientY+r.scrollTop}return n}}(enyo),function(){var e="previewDomEvent",t={feature:function(e){t.dispatch(e,e.dispatchTarget)},dispatch:function(t,n){for(var r,i=this.buildLineage(n),s=0;r=i[s];s++)if(r[e]&&r[e](t)===!0)return t.preventDispatch=!0,void 0},buildLineage:function(e){for(var t=[],n=e;n;)t.unshift(n),n=n.parent;return t}};enyo.dispatcher.features.push(t.feature)}(),enyo.dispatcher.features.push(function(e){if(this.captureTarget){var t=e.dispatchTarget,n=(e.customEvent?"":"on")+e.type,r=this.captureEvents[n],i=this.captureHandlerScope||this.captureTarget,s=r&&i[r],o=s&&!(t&&t.isDescendantOf&&t.isDescendantOf(this.captureTarget));if(o){var u=e.captureTarget=this.captureTarget;e.preventDispatch=s&&s.apply(i,[u,e])&&!this.autoForwardEvents[e.type]}}}),enyo.mixin(enyo.dispatcher,{autoForwardEvents:{leave:1,resize:1},captures:[],capture:function(e,t,n){var r={target:e,events:t,scope:n};this.captures.push(r),this.setCaptureInfo(r)},release:function(e){for(var t=this.captures.length-1;t>=0;t--)if(this.captures[t].target===e){this.captures.splice(t,1),this.setCaptureInfo(this.captures[this.captures.length-1]);break}},setCaptureInfo:function(e){this.captureTarget=e&&e.target,this.captureEvents=e&&e.events,this.captureHandlerScope=e&&e.scope}}),enyo.gesture={eventProps:["target","relatedTarget","clientX","clientY","pageX","pageY","screenX","screenY","altKey","ctrlKey","metaKey","shiftKey","detail","identifier","dispatchTarget","which","srcEvent"],makeEvent:function(e,t){var n={};n.type=e;for(var r,i=0;r=this.eventProps[i];i++)n[r]=t[r];if(n.srcEvent=n.srcEvent||t,n.preventDefault=this.preventDefault,n.disablePrevention=this.disablePrevention,10>enyo.platform.ie){8==enyo.platform.ie&&n.target&&(n.pageX=n.clientX+n.target.scrollLeft,n.pageY=n.clientY+n.target.scrollTop);var s=window.event&&window.event.button;s&&(n.which=1&s?1:2&s?2:4&s?3:0)}else(enyo.platform.webos||window.PalmSystem)&&0===n.which&&(n.which=1);return n},down:function(e){this.drag.holdPulseConfig=enyo.clone(this.drag.holdPulseDefaultConfig);var t=this.makeEvent("down",e);t.configureHoldPulse=this.configureHoldPulse,enyo.dispatch(t),this.downEvent=t,this.drag.cancelHold(),this.drag.beginHold(t)},move:function(e){var t=this.makeEvent("move",e);t.dx=t.dy=t.horizontal=t.vertical=0,t.which&&this.downEvent&&(t.dx=e.clientX-this.downEvent.clientX,t.dy=e.clientY-this.downEvent.clientY,t.horizontal=Math.abs(t.dx)>Math.abs(t.dy),t.vertical=!t.horizontal),enyo.dispatch(t)},up:function(e){var t=this.makeEvent("up",e),n=!1;t.preventTap=function(){n=!0},enyo.dispatch(t),!n&&this.downEvent&&1==this.downEvent.which&&this.sendTap(t),this.downEvent=null},over:function(e){var t=this.makeEvent("enter",e);enyo.dispatch(t)},out:function(e){var t=this.makeEvent("leave",e);enyo.dispatch(t)},sendTap:function(e){var t=this.findCommonAncestor(this.downEvent.target,e.target);if(t){var n=this.makeEvent("tap",e);n.target=t,enyo.dispatch(n)}},findCommonAncestor:function(e,t){for(var n=t;n;){if(this.isTargetDescendantOf(e,n))return n;n=n.parentNode}},isTargetDescendantOf:function(e,t){for(var n=e;n;){if(n==t)return!0;n=n.parentNode}},configureHoldPulse:function(e){enyo.mixin(enyo.gesture.drag.holdPulseConfig,e)}},enyo.gesture.preventDefault=function(){this.srcEvent&&this.srcEvent.preventDefault()},enyo.gesture.disablePrevention=function(){this.preventDefault=enyo.nop,this.srcEvent&&(this.srcEvent.preventDefault=enyo.nop)},enyo.dispatcher.features.push(function(e){return enyo.gesture.events[e.type]?enyo.gesture.events[e.type](e):void 0}),enyo.gesture.events={mousedown:function(e){enyo.gesture.down(e)},mouseup:function(e){enyo.gesture.up(e)},mousemove:function(e){enyo.gesture.move(e)},mouseover:function(e){enyo.gesture.over(e)},mouseout:function(e){enyo.gesture.out(e)}},enyo.requiresWindow(function(){document.addEventListener&&document.addEventListener("DOMMouseScroll",function(e){var t=enyo.clone(e);t.preventDefault=function(){e.preventDefault()},t.type="mousewheel";var n=t.VERTICAL_AXIS==t.axis?"wheelDeltaY":"wheelDeltaX";t[n]=-40*t.detail,enyo.dispatch(t)},!1)}),enyo.dispatcher.features.push(function(e){return enyo.gesture.drag[e.type]?enyo.gesture.drag[e.type](e):void 0}),enyo.gesture.drag={holdPulseDefaultConfig:{delay:200,resume:!1,moveTolerance:16,endHold:"onMove"},holdPulseConfig:{},trackCount:5,minFlick:.1,minTrack:8,down:function(e){this.stopDragging(e),this.target=e.target,this.startTracking(e)},move:function(e){if(this.tracking){if(this.track(e),!e.which)return this.stopDragging(e),this.cancelHold(),this.tracking=!1,void 0;this.dragEvent?this.sendDrag(e):"onMove"===this.holdPulseConfig.endHold&&(this.dy*this.dy+this.dx*this.dx>=this.holdPulseConfig.moveTolerance?this.holdJob&&(this.holdPulseConfig.resume?this.stopHold():(this.cancelHold(),this.sendDragStart(e))):this.holdPulseConfig.resume&&!this.holdJob&&this.beginHold(e))}},up:function(e){this.endTracking(e),this.stopDragging(e),this.cancelHold(),this.target=null},enter:function(e){this.holdPulseConfig.resume&&"onLeave"===this.holdPulseConfig.endHold&&this.target&&e.target===this.target&&this.beginHold(e)},leave:function(e){this.dragEvent?this.sendDragOut(e):"onLeave"===this.holdPulseConfig.endHold&&(this.holdPulseConfig.resume?this.stopHold():(this.cancelHold(),this.sendDragStart(e)))},stopDragging:function(e){if(this.dragEvent){this.sendDrop(e);var t=this.sendDragFinish(e);return this.dragEvent=null,t}},makeDragEvent:function(e,t,n,r){var i=Math.abs(this.dx),s=Math.abs(this.dy),o=i>s,u=.414>(o?s/i:i/s),a={};return a.type=e,a.dx=this.dx,a.dy=this.dy,a.ddx=this.dx-this.lastDx,a.ddy=this.dy-this.lastDy,a.xDirection=this.xDirection,a.yDirection=this.yDirection,a.pageX=n.pageX,a.pageY=n.pageY,a.clientX=n.clientX,a.clientY=n.clientY,a.horizontal=o,a.vertical=!o,a.lockable=u,a.target=t,a.dragInfo=r,a.ctrlKey=n.ctrlKey,a.altKey=n.altKey,a.metaKey=n.metaKey,a.shiftKey=n.shiftKey,a.srcEvent=n.srcEvent,8==enyo.platform.ie&&a.target&&(a.pageX=a.clientX+a.target.scrollLeft,a.pageY=a.clientY+a.target.scrollTop),a.preventDefault=enyo.gesture.preventDefault,a.disablePrevention=enyo.gesture.disablePrevention,a},sendDragStart:function(e){this.dragEvent=this.makeDragEvent("dragstart",this.target,e),enyo.dispatch(this.dragEvent)},sendDrag:function(e){var t=this.makeDragEvent("dragover",e.target,e,this.dragEvent.dragInfo);enyo.dispatch(t),t.type="drag",t.target=this.dragEvent.target,enyo.dispatch(t)},sendDragFinish:function(e){var t=this.makeDragEvent("dragfinish",this.dragEvent.target,e,this.dragEvent.dragInfo);t.preventTap=function(){e.preventTap&&e.preventTap()},enyo.dispatch(t)},sendDragOut:function(e){var t=this.makeDragEvent("dragout",e.target,e,this.dragEvent.dragInfo);enyo.dispatch(t)},sendDrop:function(e){var t=this.makeDragEvent("drop",e.target,e,this.dragEvent.dragInfo);t.preventTap=function(){e.preventTap&&e.preventTap()},enyo.dispatch(t)},startTracking:function(e){this.tracking=!0,this.px0=e.clientX,this.py0=e.clientY,this.flickInfo={},this.flickInfo.startEvent=e,this.flickInfo.moves=[],this.track(e)},track:function(e){this.lastDx=this.dx,this.lastDy=this.dy,this.dx=e.clientX-this.px0,this.dy=e.clientY-this.py0,this.xDirection=this.calcDirection(this.dx-this.lastDx,0),this.yDirection=this.calcDirection(this.dy-this.lastDy,0);var t=this.flickInfo;t.moves.push({x:e.clientX,y:e.clientY,t:enyo.perfNow()}),t.moves.length>this.trackCount&&t.moves.shift()},endTracking:function(){this.tracking=!1;var e=this.flickInfo,t=e&&e.moves;if(t&&t.length>1){for(var n,r=t[t.length-1],i=enyo.perfNow(),s=t.length-2,o=0,u=0,a=0,f=0,l=0,c=0,h=0;n=t[s];s--)o=i-n.t,u=(r.x-n.x)/o,a=(r.y-n.y)/o,c=c||(0>u?-1:u>0?1:0),h=h||(0>a?-1:a>0?1:0),(u*c>f*c||a*h>l*h)&&(f=u,l=a);var p=Math.sqrt(f*f+l*l);p>this.minFlick&&this.sendFlick(e.startEvent,f,l,p)}this.flickInfo=null},calcDirection:function(e,t){return e>0?1:0>e?-1:t},beginHold:function(e){this.holdStart=enyo.perfNow();var t=enyo.clone(e);t.srcEvent=enyo.clone(e.srcEvent),this._holdJobFunction=enyo.bind(this,"sendHoldPulse",t),this._holdJobFunction.ce=t,this.holdJob=setInterval(this._holdJobFunction,this.holdPulseConfig.delay)},cancelHold:function(){this.stopHold(),this.sentHold&&(this.sentHold=!1,this.sendRelease(this.holdEvent))},stopHold:function(){clearInterval(this.holdJob),this.holdJob=null,this._holdJobFunction&&(this._holdJobFunction.ce=null,this._holdJobFunction=null)},sendHoldPulse:function(e){this.sentHold||(this.sentHold=!0,this.sendHold(e));var t=enyo.gesture.makeEvent("holdpulse",e);t.holdTime=enyo.perfNow()-this.holdStart,enyo.dispatch(t)},sendHold:function(e){this.holdEvent=e;var t=enyo.gesture.makeEvent("hold",e);enyo.dispatch(t)},sendRelease:function(e){var t=enyo.gesture.makeEvent("release",e);enyo.dispatch(t)},sendFlick:function(e,t,n,r){var i=enyo.gesture.makeEvent("flick",e);i.xVelocity=t,i.yVelocity=n,i.velocity=r,enyo.dispatch(i)}},enyo.dom.transition=enyo.platform.ios||enyo.platform.android||enyo.platform.chrome||enyo.platform.androidChrome||enyo.platform.safari?"-webkit-transition":enyo.platform.firefox||enyo.platform.firefoxOS||enyo.platform.androidFirefox?"-moz-transition":"transition",enyo.dispatcher.features.push(function(e){if("keydown"===e.type||"keyup"===e.type||"keypress"===e.type){e.keySymbol=this.keyMap[e.keyCode];var t=this.findDefaultTarget();e.dispatchTarget!==t&&this.dispatchBubble(e,t)}}),enyo.mixin(enyo.dispatcher,{keyMap:{},registerKeyMap:function(e){enyo.mixin(this.keyMap,e)}}),enyo.requiresWindow(function(){var e=enyo.gesture,t=e.events;e.events.touchstart=function(t){e.events=n,e.events.touchstart(t)};var n={_touchCount:0,touchstart:function(t){this._touchCount+=t.changedTouches.length,this.excludedTarget=null;var n=this.makeEvent(t);e.down(n),n=this.makeEvent(t),this.overEvent=n,e.over(n)},touchmove:function(t){enyo.job.stop("resetGestureEvents");var n=e.drag.dragEvent;this.excludedTarget=n&&n.dragInfo&&n.dragInfo.node;var r=this.makeEvent(t);e.move(r),enyo.bodyIsFitting&&t.preventDefault(),this.overEvent&&this.overEvent.target!=r.target&&(this.overEvent.relatedTarget=r.target,r.relatedTarget=this.overEvent.target,e.out(this.overEvent),e.over(r)),this.overEvent=r},touchend:function(t){e.up(this.makeEvent(t)),e.out(this.overEvent),this._touchCount-=t.changedTouches.length},mouseup:function(){0===this._touchCount&&(this.sawMousedown=!1,e.events=t)},makeEvent:function(e){var t=enyo.clone(e.changedTouches[0]);return t.srcEvent=e,t.target=this.findTarget(t),t.which=1,t},calcNodeOffset:function(e){if(e.getBoundingClientRect){var t=e.getBoundingClientRect();return{left:t.left,top:t.top,width:t.width,height:t.height}}},findTarget:function(e){return document.elementFromPoint(e.clientX,e.clientY)},findTargetTraverse:function(e,t,n){var r=e||document.body,i=this.calcNodeOffset(r);if(i&&r!=this.excludedTarget){var s=t-i.left,o=n-i.top;if(s>0&&o>0&&i.width>=s&&i.height>=o){for(var u,a,f=r.childNodes,l=f.length-1;a=f[l];l--)if(u=this.findTargetTraverse(a,t,n))return u;return r}}},connect:function(){enyo.forEach(["touchstart","touchmove","touchend","gesturestart","gesturechange","gestureend"],function(e){9>enyo.platform.ie?document["on"+e]=enyo.dispatch:document.addEventListener(e,enyo.dispatch,!1)}),18>=enyo.platform.androidChrome||2===enyo.platform.silk?this.findTarget=function(e){return document.elementFromPoint(e.screenX,e.screenY)}:document.elementFromPoint||(this.findTarget=function(e){return this.findTargetTraverse(null,e.clientX,e.clientY)})}};n.connect()}),function(){var e;if(window.navigator.pointerEnabled?e=["pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel"]:window.navigator.msPointerEnabled&&(e=["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerCancel"]),e){var t=function(e){var t=enyo.clone(e);return t.srcEvent=e,t.which=e.buttons||1,t},n=enyo.gesture;enyo.gesture.events={};var r={pointerdown:function(e){var r=t(e);n.down(r)},pointerup:function(e){var r=t(e);n.up(r)},pointermove:function(e){var r=t(e);n.move(r)},pointercancel:function(e){var r=t(e);n.up(r)},pointerover:function(e){var r=t(e);n.over(r)},pointerout:function(e){var r=t(e);n.out(r)}};!window.navigator.pointerEnabled&&window.navigator.msPointerEnabled&&(r.MSPointerDown=r.pointerdown,r.MSPointerUp=r.pointerup,r.MSPointerMove=r.pointermove,r.MSPointerCancel=r.pointercancel,r.MSPointerOver=r.pointerover,r.MSPointerOut=r.pointerout),enyo.forEach(e,function(e){enyo.dispatcher.listen(document,e)}),enyo.dispatcher.features.push(function(e){r[e.type]&&e.isPrimary&&r[e.type](e)})}}(),function(){!enyo.platform.gesture&&enyo.platform.touch&&enyo.dispatcher.features.push(function(n){e[n.type]&&t[n.type](n)});var e={touchstart:!0,touchmove:!0,touchend:!0},t={orderedTouches:[],gesture:null,touchstart:function(e){if(enyo.forEach(e.changedTouches,function(e){var t=e.identifier;0>enyo.indexOf(t,this.orderedTouches)&&this.orderedTouches.push(t)},this),e.touches.length>=2&&!this.gesture){var t=this.gesturePositions(e);this.gesture=this.gestureVector(t),this.gesture.angle=this.gestureAngle(t),this.gesture.scale=1,this.gesture.rotation=0;var n=this.makeGesture("gesturestart",e,{vector:this.gesture,scale:1,rotation:0});enyo.dispatch(n)}},touchend:function(e){if(enyo.forEach(e.changedTouches,function(e){enyo.remove(e.identifier,this.orderedTouches)},this),1>=e.touches.length&&this.gesture){var t=e.touches[0]||e.changedTouches[e.changedTouches.length-1];enyo.dispatch(this.makeGesture("gestureend",e,{vector:{xcenter:t.pageX,ycenter:t.pageY},scale:this.gesture.scale,rotation:this.gesture.rotation})),this.gesture=null}},touchmove:function(e){if(this.gesture){var t=this.makeGesture("gesturechange",e);this.gesture.scale=t.scale,this.gesture.rotation=t.rotation,enyo.dispatch(t)}},findIdentifiedTouch:function(e,t){for(var n,r=0;n=e[r];r++)if(n.identifier===t)return n},gesturePositions:function(e){var t=this.findIdentifiedTouch(e.touches,this.orderedTouches[0]),n=this.findIdentifiedTouch(e.touches,this.orderedTouches[this.orderedTouches.length-1]),r=t.pageX,i=n.pageX,s=t.pageY,o=n.pageY,u=i-r,a=o-s,f=Math.sqrt(u*u+a*a);return{x:u,y:a,h:f,fx:r,lx:i,fy:s,ly:o}},gestureAngle:function(e){var t=e,n=Math.asin(t.y/t.h)*(180/Math.PI);return 0>t.x&&(n=180-n),t.x>0&&0>t.y&&(n+=360),n},gestureVector:function(e){var t=e;return{magnitude:t.h,xcenter:Math.abs(Math.round(t.fx+t.x/2)),ycenter:Math.abs(Math.round(t.fy+t.y/2))}},makeGesture:function(e,t,n){var r,i,s;if(n)r=n.vector,i=n.scale,s=n.rotation;else{var o=this.gesturePositions(t);r=this.gestureVector(o),i=r.magnitude/this.gesture.magnitude,s=(360+this.gestureAngle(o)-this.gesture.angle)%360}var u=enyo.clone(t);return enyo.mixin(u,{type:e,scale:i,pageX:r.xcenter,pageY:r.ycenter,rotation:s})}}}(),enyo.kind({name:"enyo.ScrollMath",kind:"enyo.Component",published:{vertical:!0,horizontal:!0},events:{onScrollStart:"",onScroll:"",onScrollStop:""},kSpringDamping:.93,kDragDamping:.5,kFrictionDamping:.97,kSnapFriction:.9,kFlickScalar:15,kMaxFlick:enyo.platform.android>2?2:1e9,kFrictionEpsilon:.01,topBoundary:0,rightBoundary:0,bottomBoundary:0,leftBoundary:0,interval:20,fixedTime:!0,x0:0,x:0,y0:0,y:0,destroy:enyo.inherit(function(e){return function(){this.stop(),e.apply(this,arguments)}}),verlet:function(){var e=this.x;this.x+=e-this.x0,this.x0=e;var t=this.y;this.y+=t-this.y0,this.y0=t},damping:function(e,t,n,r){var i=.5,s=e-t;return i>Math.abs(s)?t:e*r>t*r?n*s+t:e},boundaryDamping:function(e,t,n,r){return this.damping(this.damping(e,t,r,1),n,r,-1)},constrain:function(){var e=this.boundaryDamping(this.y,this.topBoundary,this.bottomBoundary,this.kSpringDamping);e!=this.y&&(this.y0=e-(this.y-this.y0)*this.kSnapFriction,this.y=e);var t=this.boundaryDamping(this.x,this.leftBoundary,this.rightBoundary,this.kSpringDamping);t!=this.x&&(this.x0=t-(this.x-this.x0)*this.kSnapFriction,this.x=t)},friction:function(e,t,n){var r=this[e]-this[t],i=Math.abs(r)>this.kFrictionEpsilon?n:0;this[e]=this[t]+i*r},frame:10,simulate:function(e){for(;e>=this.frame;)e-=this.frame,this.dragging||this.constrain(),this.verlet(),this.friction("y","y0",this.kFrictionDamping),this.friction("x","x0",this.kFrictionDamping);return e},animate:function(){this.stop();var e,t,n=enyo.perfNow(),r=0,i=this.bindSafely(function(){var s=enyo.perfNow();this.job=enyo.requestAnimationFrame(i);var u=s-n;n=s,this.dragging&&(this.y0=this.y=this.uy,this.x0=this.x=this.ux),r+=Math.max(16,u),this.fixedTime&&!this.isInOverScroll()&&(r=this.interval),r=this.simulate(r),t!=this.y||e!=this.x?this.scroll():this.dragging||(this.stop(),this.scroll(),this.doScrollStop()),t=this.y,e=this.x});this.job=enyo.requestAnimationFrame(i)},start:function(){this.job||(this.doScrollStart(),this.animate())},stop:function(e){var t=this.job;t&&(this.job=enyo.cancelRequestAnimationFrame(t)),e&&this.doScrollStop()},stabilize:function(){this.start();var e=Math.min(this.topBoundary,Math.max(this.bottomBoundary,this.y)),t=Math.min(this.leftBoundary,Math.max(this.rightBoundary,this.x));this.y=this.y0=e,this.x=this.x0=t,this.scroll(),this.stop(!0)},startDrag:function(e){this.dragging=!0,this.my=e.pageY,this.py=this.uy=this.y,this.mx=e.pageX,this.px=this.ux=this.x},drag:function(e){if(this.dragging){var t=this.vertical?e.pageY-this.my:0;this.uy=t+this.py,this.uy=this.boundaryDamping(this.uy,this.topBoundary,this.bottomBoundary,this.kDragDamping);var n=this.horizontal?e.pageX-this.mx:0;return this.ux=n+this.px,this.ux=this.boundaryDamping(this.ux,this.leftBoundary,this.rightBoundary,this.kDragDamping),this.start(),!0}},dragDrop:function(){if(this.dragging&&!window.PalmSystem){var e=.5;this.y=this.uy,this.y0=this.y-(this.y-this.y0)*e,this.x=this.ux,this.x0=this.x-(this.x-this.x0)*e}this.dragFinish()},dragFinish:function(){this.dragging=!1},flick:function(e){var t;this.vertical&&(t=e.yVelocity>0?Math.min(this.kMaxFlick,e.yVelocity):Math.max(-this.kMaxFlick,e.yVelocity),this.y=this.y0+t*this.kFlickScalar),this.horizontal&&(t=e.xVelocity>0?Math.min(this.kMaxFlick,e.xVelocity):Math.max(-this.kMaxFlick,e.xVelocity),this.x=this.x0+t*this.kFlickScalar),this.start()},mousewheel:function(e){var t=this.vertical?e.wheelDeltaY||(e.wheelDeltaX?0:e.wheelDelta):0,n=this.horizontal?e.wheelDeltaX:0,r=!1;return(t>0&&this.y<this.topBoundary||0>t&&this.y>this.bottomBoundary)&&(this.y=this.y0=this.y0+t,r=!0),(n>0&&this.x<this.leftBoundary||0>n&&this.x>this.rightBoundary)&&(this.x=this.x0=this.x0+n,r=!0),r?(this.stop(!0),this.start(),!0):void 0},scroll:function(){this.doScroll()},scrollTo:function(e,t){null!==t&&(this.y=this.y0-(t+this.y0)*(1-this.kFrictionDamping)),null!==e&&(this.x=this.x0-(e+this.x0)*(1-this.kFrictionDamping)),this.start()},setScrollX:function(e){this.x=this.x0=e},setScrollY:function(e){this.y=this.y0=e},setScrollPosition:function(e){this.setScrollY(e)},isScrolling:function(){return Boolean(this.job)},isInOverScroll:function(){return this.job&&(this.x>this.leftBoundary||this.x<this.rightBoundary||this.y>this.topBoundary||this.y<this.bottomBoundary)}}),enyo.kind({name:"enyo.ScrollStrategy",tag:null,published:{vertical:"default",horizontal:"default",scrollLeft:0,scrollTop:0,maxHeight:null,useMouseWheel:!0},handlers:{ondragstart:"dragstart",ondragfinish:"dragfinish",ondown:"down",onmove:"move",onmousewheel:"mousewheel"},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.horizontalChanged(),this.verticalChanged(),this.maxHeightChanged()}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.makeBubble(this.container,"scroll"),this.scrollNode=this.calcScrollNode()}}),teardownRender:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.scrollNode=null}}),calcScrollNode:function(){return this.container.hasNode()},horizontalChanged:function(){this.container.applyStyle("overflow-x","default"==this.horizontal?"auto":this.horizontal)},verticalChanged:function(){this.container.applyStyle("overflow-y","default"==this.vertical?"auto":this.vertical)},maxHeightChanged:function(){this.container.applyStyle("max-height",this.maxHeight)},scrollTo:function(e,t){this.scrollNode&&(this.setScrollLeft(e),this.setScrollTop(t))},scrollToNode:function(e,t){if(this.scrollNode){for(var n=this.getScrollBounds(),r=e,i={height:r.offsetHeight,width:r.offsetWidth,top:0,left:0};r&&r.parentNode&&r.id!=this.scrollNode.id;)i.top+=r.offsetTop,i.left+=r.offsetLeft,r=r.parentNode;this.setScrollTop(Math.min(n.maxTop,t===!1?i.top-n.clientHeight+i.height:i.top)),this.setScrollLeft(Math.min(n.maxLeft,t===!1?i.left-n.clientWidth+i.width:i.left))}},scrollIntoView:function(e,t){e.hasNode()&&e.node.scrollIntoView(t)},isInView:function(e){var t=this.getScrollBounds(),n=e.offsetTop,r=e.offsetHeight,i=e.offsetLeft,s=e.offsetWidth;return n>=t.top&&t.top+t.clientHeight>=n+r&&i>=t.left&&t.left+t.clientWidth>=i+s},setScrollTop:function(e){this.scrollTop=e,this.scrollNode&&(this.scrollNode.scrollTop=this.scrollTop)},setScrollLeft:function(e){this.scrollLeft=e,this.scrollNode&&(this.scrollNode.scrollLeft=this.scrollLeft)},getScrollLeft:function(){return this.scrollNode?this.scrollNode.scrollLeft:this.scrollLeft},getScrollTop:function(){return this.scrollNode?this.scrollNode.scrollTop:this.scrollTop},_getScrollBounds:function(){var e=this.getScrollSize(),t=this.container.hasNode(),n={left:this.getScrollLeft(),top:this.getScrollTop(),clientHeight:t?t.clientHeight:0,clientWidth:t?t.clientWidth:0,height:e.height,width:e.width};return n.maxLeft=Math.max(0,n.width-n.clientWidth),n.maxTop=Math.max(0,n.height-n.clientHeight),n},getScrollSize:function(){var e=this.scrollNode;return{width:e?e.scrollWidth:0,height:e?e.scrollHeight:0}},getScrollBounds:function(){return this._getScrollBounds()},calcStartInfo:function(){var e=this.getScrollBounds(),t=this.getScrollTop(),n=this.getScrollLeft();this.canVertical=e.maxTop>0&&"hidden"!=this.vertical,this.canHorizontal=e.maxLeft>0&&"hidden"!=this.horizontal,this.startEdges={top:0===t,bottom:t===e.maxTop,left:0===n,right:n===e.maxLeft}},shouldDrag:function(e){var t=e.vertical;return t&&this.canVertical||!t&&this.canHorizontal},dragstart:function(e,t){return this.dragging=this.shouldDrag(t),this.dragging?this.preventDragPropagation:void 0},dragfinish:function(e,t){this.dragging&&(this.dragging=!1,t.preventTap())},down:function(){this.calcStartInfo()},move:function(e,t){t.which&&(this.canVertical&&t.vertical||this.canHorizontal&&t.horizontal)&&t.disablePrevention()},mousewheel:function(e,t){this.useMouseWheel||t.preventDefault()}}),enyo.kind({name:"enyo.ScrollThumb",axis:"v",minSize:4,cornerSize:6,classes:"enyo-thumb",create:enyo.inherit(function(e){return function(){e.apply(this,arguments);var n="v"==this.axis;this.dimension=n?"height":"width",this.offset=n?"top":"left",this.translation=n?"translateY":"translateX",this.positionMethod=n?"getScrollTop":"getScrollLeft",this.sizeDimension=n?"clientHeight":"clientWidth",this.addClass("enyo-"+this.axis+"thumb"),this.transform=enyo.dom.canTransform(),enyo.dom.canAccelerate()&&enyo.dom.transformValue(this,"translateZ",0)}}),sync:function(e){this.scrollBounds=e._getScrollBounds(),this.update(e)},update:function(e){if(this.showing){var t=this.dimension,n=this.offset,r=this.scrollBounds[this.sizeDimension],i=this.scrollBounds[t],s=0,o=0,u=0;if(r>=i)return this.hide(),void 0;e.isOverscrolling()&&(u=e.getOverScrollBounds()["over"+n],s=Math.abs(u),o=Math.max(u,0));var a=e[this.positionMethod]()-u,f=r-this.cornerSize,l=Math.floor(r*r/i-s);l=Math.max(this.minSize,l);var c=Math.floor(f*a/i+o);c=Math.max(0,Math.min(f-this.minSize,c)),this.needed=r>l,this.needed&&this.hasNode()?(this._pos!==c&&(this._pos=c,this.transform?enyo.dom.transformValue(this,this.translation,c+"px"):"v"==this.axis?this.setBounds({top:c+"px"}):this.setBounds({left:c+"px"})),this._size!==l&&(this._size=l,this.node.style[t]=this.domStyles[t]=l+"px")):this.hide()}},setShowing:function(e){if(!(e&&e!=this.showing&&this.scrollBounds[this.sizeDimension]>=this.scrollBounds[this.dimension])&&(this.hasNode()&&this.cancelDelayHide(),e!=this.showing)){var t=this.showing;this.showing=e,this.showingChanged(t)}},delayHide:function(e){this.showing&&enyo.job(this.id+"hide",this.bindSafely("hide"),e||0)},cancelDelayHide:function(){enyo.job.stop(this.id+"hide")}}),enyo.kind({name:"enyo.TouchScrollStrategy",kind:"ScrollStrategy",overscroll:!0,preventDragPropagation:!0,published:{vertical:"default",horizontal:"default",thumb:!0,scrim:!1,dragDuringGesture:!0,interval:20,fixedTime:!0,frame:10},events:{onShouldDrag:""},handlers:{onscroll:"domScroll",onflick:"flick",onhold:"hold",ondragstart:"dragstart",onShouldDrag:"shouldDrag",ondrag:"drag",ondragfinish:"dragfinish",onmousewheel:"mousewheel"},tools:[{kind:"ScrollMath",onScrollStart:"scrollMathStart",onScroll:"scrollMathScroll",onScrollStop:"scrollMathStop"},{name:"vthumb",kind:"ScrollThumb",axis:"v",showing:!1},{name:"hthumb",kind:"ScrollThumb",axis:"h",showing:!1}],scrimTools:[{name:"scrim",classes:"enyo-fit",style:"z-index: 1;",showing:!1}],components:[{name:"client",classes:"enyo-touch-scroller"}],listReordering:!1,create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.transform=enyo.dom.canTransform(),this.transform||this.overscroll&&this.$.client.applyStyle("position","relative"),this.accel=enyo.dom.canAccelerate();var n="enyo-touch-strategy-container";enyo.platform.ios&&this.accel&&(n+=" enyo-composite"),this.scrimChanged(),this.intervalChanged(),this.fixedTimeChanged(),this.frameChanged(),this.container.addClass(n),this.translation=this.accel?"translate3d":"translate"}}),initComponents:enyo.inherit(function(e){return function(){this.createChrome(this.tools),e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){this.container.removeClass("enyo-touch-strategy-container"),e.apply(this,arguments)}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.makeBubble(this.$.client,"scroll"),this.calcBoundaries(),this.syncScrollMath(),this.thumb&&this.alertThumbs()}}),scrimChanged:function(){this.scrim&&!this.$.scrim&&this.makeScrim(),!this.scrim&&this.$.scrim&&this.$.scrim.destroy()},makeScrim:function(){var e=this.controlParent;this.controlParent=null,this.createChrome(this.scrimTools),this.controlParent=e;var t=this.container.hasNode();t&&(this.$.scrim.parentNode=t,this.$.scrim.render())},isScrolling:function(){var e=this.$.scrollMath;return e?e.isScrolling():this.scrolling},isOverscrolling:function(){var e=this.$.scrollMath||this;return this.overscroll?Boolean(e.isInOverScroll()):!1},domScroll:function(){this.isScrolling()||(this.calcBoundaries(),this.syncScrollMath(),this.thumb&&this.alertThumbs())},horizontalChanged:function(){this.$.scrollMath.horizontal="hidden"!=this.horizontal},verticalChanged:function(){this.$.scrollMath.vertical="hidden"!=this.vertical},maxHeightChanged:function(){this.$.client.applyStyle("max-height",this.maxHeight),this.$.client.addRemoveClass("enyo-scrollee-fit",!this.maxHeight)},thumbChanged:function(){this.hideThumbs()},intervalChanged:function(){this.$.scrollMath&&(this.$.scrollMath.interval=this.interval)},fixedTimeChanged:function(){this.$.scrollMath&&(this.$.scrollMath.fixedTime=this.fixedTime)},frameChanged:function(){this.$.scrollMath&&(this.$.scrollMath.frame=this.frame)},stop:function(){this.isScrolling()&&this.$.scrollMath.stop(!0)},stabilize:function(){this.$.scrollMath&&this.$.scrollMath.stabilize()},scrollTo:function(e,t){this.stop(),this.$.scrollMath.scrollTo(e,t||0===t?t:null)},scrollIntoView:enyo.inherit(function(e){return function(){this.stop(),e.apply(this,arguments)}}),setScrollLeft:enyo.inherit(function(e){return function(){this.stop(),e.apply(this,arguments)}}),setScrollTop:enyo.inherit(function(e){return function(){this.stop(),e.apply(this,arguments)}}),getScrollLeft:enyo.inherit(function(e){return function(){return this.isScrolling()?this.scrollLeft:e.apply(this,arguments)}}),getScrollTop:enyo.inherit(function(e){return function(){return this.isScrolling()?this.scrollTop:e.apply(this,arguments)}}),calcScrollNode:function(){return this.$.client.hasNode()},calcAutoScrolling:function(){var e="auto"==this.vertical,t="auto"==this.horizontal||"default"==this.horizontal;if((e||t)&&this.scrollNode){var n=this.getScrollBounds();e&&(this.$.scrollMath.vertical=n.height>n.clientHeight),t&&(this.$.scrollMath.horizontal=n.width>n.clientWidth)}},shouldDrag:function(e,t){this.calcAutoScrolling();var n=t.vertical,r=this.$.scrollMath.horizontal&&!n,i=this.$.scrollMath.vertical&&n,s=0>t.dy,o=0>t.dx,u=!s&&this.startEdges.top||s&&this.startEdges.bottom,a=!o&&this.startEdges.left||o&&this.startEdges.right;return t.boundaryDragger||!r&&!i||(t.boundaryDragger=this),!u&&i||!a&&r?(t.dragger=this,!0):void 0},flick:function(e,t){var n=Math.abs(t.xVelocity)>Math.abs(t.yVelocity)?this.$.scrollMath.horizontal:this.$.scrollMath.vertical;return n&&this.dragging?(this.$.scrollMath.flick(t),this.preventDragPropagation):void 0},hold:function(e,t){if(this.isScrolling()&&!this.isOverscrolling()){var n=this.$.scrollMath||this;return n.stop(t),!0}},move:function(){},dragstart:function(e,t){return!this.dragDuringGesture&&t.srcEvent.touches&&t.srcEvent.touches.length>1?!0:(this.doShouldDrag(t),this.dragging=t.dragger==this||!t.dragger&&t.boundaryDragger==this,this.dragging&&(t.preventDefault(),this.syncScrollMath(),this.$.scrollMath.startDrag(t),this.preventDragPropagation)?!0:void 0)},drag:function(e,t){return this.listReordering?!1:(this.dragging&&(t.preventDefault(),this.$.scrollMath.drag(t),this.scrim&&this.$.scrim.show()),void 0)},dragfinish:function(e,t){this.dragging&&(t.preventTap(),this.$.scrollMath.dragFinish(),this.dragging=!1,this.scrim&&this.$.scrim.hide())},mousewheel:function(e,t){return!this.dragging&&this.useMouseWheel&&(this.calcBoundaries(),this.syncScrollMath(),this.stabilize(),this.$.scrollMath.mousewheel(t))?(t.preventDefault(),!0):void 0},scrollMathStart:function(){this.scrollNode&&!this.isScrolling()&&(this.scrolling=!0,this.isOverscrolling()||this.calcBoundaries(),this.thumb&&this.showThumbs())},scrollMathScroll:function(e){this.overscroll?this.effectScroll(-e.x,-e.y):this.effectScroll(-Math.min(e.leftBoundary,Math.max(e.rightBoundary,e.x)),-Math.min(e.topBoundary,Math.max(e.bottomBoundary,e.y))),this.thumb&&this.updateThumbs()},scrollMathStop:function(){this.scrolling=!1,this.effectScrollStop(),this.thumb&&this.delayHideThumbs(100)},calcBoundaries:function(){var e=this.$.scrollMath||this,t=this._getScrollBounds();e.bottomBoundary=t.clientHeight-t.height,e.rightBoundary=t.clientWidth-t.width},syncScrollMath:function(){var e=this.$.scrollMath;e&&(e.setScrollX(-this.getScrollLeft()),e.setScrollY(-this.getScrollTop()))},effectScroll:function(e,t){this.scrollNode&&(this.scrollLeft=this.scrollNode.scrollLeft=e,this.scrollTop=this.scrollNode.scrollTop=t,this.effectOverscroll(null!==e?Math.round(e):e,null!==t?Math.round(t):t))},effectScrollStop:function(){this.effectOverscroll(null,null)},effectOverscroll:function(e,t){var n=this.scrollNode,r="0",i="0",s=this.accel?",0":"";null!==t&&Math.abs(t-n.scrollTop)>1&&(i=n.scrollTop-t),null!==e&&Math.abs(e-n.scrollLeft)>1&&(r=n.scrollLeft-e),this.transform?enyo.dom.transformValue(this.$.client,this.translation,r+"px, "+i+"px"+s):this.$.client.setBounds({left:r+"px",top:i+"px"})},getOverScrollBounds:function(){var e=this.$.scrollMath||this;return{overleft:Math.min(e.leftBoundary-e.x,0)||Math.max(e.rightBoundary-e.x,0),overtop:Math.min(e.topBoundary-e.y,0)||Math.max(e.bottomBoundary-e.y,0)}},_getScrollBounds:enyo.inherit(function(e){return function(){var n=e.apply(this,arguments);return enyo.mixin(n,this.getOverScrollBounds()),n}}),getScrollBounds:enyo.inherit(function(e){return function(){return this.stop(),e.apply(this,arguments)}}),alertThumbs:function(){this.showThumbs(),this.delayHideThumbs(500)},syncThumbs:function(){this.$.vthumb.sync(this),this.$.hthumb.sync(this)},updateThumbs:function(){this.$.vthumb.update(this),this.$.hthumb.update(this)},showThumbs:function(){this.syncThumbs(),"hidden"!=this.horizontal&&this.$.hthumb.show(),"hidden"!=this.vertical&&this.$.vthumb.show()},hideThumbs:function(){this.$.vthumb.hide(),this.$.hthumb.hide()},delayHideThumbs:function(e){this.$.vthumb.delayHide(e),this.$.hthumb.delayHide(e)}}),enyo.kind({name:"enyo.TranslateScrollStrategy",kind:"TouchScrollStrategy",translateOptimized:!1,components:[{name:"clientContainer",classes:"enyo-touch-scroller",components:[{name:"client"}]}],rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.makeBubble(this.$.clientContainer,"scroll")}}),getScrollSize:function(){var e=this.$.client.hasNode();return{width:e?e.scrollWidth:0,height:e?e.scrollHeight:0}},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.dom.transformValue(this.$.client,this.translation,"0,0,0")}}),calcScrollNode:function(){return this.$.clientContainer.hasNode()},maxHeightChanged:function(){this.$.client.applyStyle("min-height",this.maxHeight?null:"100%"),this.$.client.applyStyle("max-height",this.maxHeight),this.$.clientContainer.addRemoveClass("enyo-scrollee-fit",!this.maxHeight)},shouldDrag:enyo.inherit(function(e){return function(){return this.stop(),this.calcStartInfo(),e.apply(this,arguments)}}),syncScrollMath:enyo.inherit(function(e){return function(){this.translateOptimized||e.apply(this,arguments)}}),setScrollLeft:enyo.inherit(function(e){return function(n){if(this.stop(),this.translateOptimized){var r=this.$.scrollMath;r.setScrollX(-n),r.stabilize()}else e.apply(this,arguments)}}),setScrollTop:enyo.inherit(function(e){return function(n){if(this.stop(),this.translateOptimized){var r=this.$.scrollMath;r.setScrollY(-n),r.stabilize()}else e.apply(this,arguments)}}),getScrollLeft:enyo.inherit(function(e){return function(){return this.translateOptimized?this.scrollLeft:e.apply(this,arguments)}}),getScrollTop:enyo.inherit(function(e){return function(){return this.translateOptimized?this.scrollTop:e.apply(this,arguments)}}),scrollMathStart:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.scrollStarting=!0,this.startX=0,this.startY=0,!this.translateOptimized&&this.scrollNode&&(this.startX=this.getScrollLeft(),this.startY=this.getScrollTop())}}),scrollMathScroll:function(e){this.overscroll?(this.scrollLeft=-e.x,this.scrollTop=-e.y):(this.scrollLeft=-Math.min(e.leftBoundary,Math.max(e.rightBoundary,e.x)),this.scrollTop=-Math.min(e.topBoundary,Math.max(e.bottomBoundary,e.y))),this.isScrolling()&&(this.$.scrollMath.isScrolling()&&this.effectScroll(this.startX-this.scrollLeft,this.startY-this.scrollTop),this.thumb&&this.updateThumbs())},effectScroll:function(e,t){var n=e+"px, "+t+"px"+(this.accel?",0":"");enyo.dom.transformValue(this.$.client,this.translation,n)},effectScrollStop:function(){if(!this.translateOptimized){var e="0,0"+(this.accel?",0":""),t=this.$.scrollMath,n=this._getScrollBounds(),r=Boolean(n.maxTop+t.bottomBoundary||n.maxLeft+t.rightBoundary);enyo.dom.transformValue(this.$.client,this.translation,r?null:e),this.setScrollLeft(this.scrollLeft),this.setScrollTop(this.scrollTop),r&&enyo.dom.transformValue(this.$.client,this.translation,e)}},twiddle:function(){this.translateOptimized&&this.scrollNode&&(this.scrollNode.scrollTop=1,this.scrollNode.scrollTop=0)},down:enyo.nop}),enyo.kind({name:"enyo.TransitionScrollStrategy",kind:"enyo.TouchScrollStrategy",components:[{name:"clientContainer",classes:"enyo-touch-scroller",components:[{name:"client"}]}],events:{onScrollStart:"",onScroll:"",onScrollStop:""},handlers:{ondown:"down",ondragfinish:"dragfinish",onwebkitTransitionEnd:"transitionComplete"},tools:[{name:"vthumb",kind:"ScrollThumb",axis:"v",showing:!0},{name:"hthumb",kind:"ScrollThumb",axis:"h",showing:!1}],kFlickScalar:600,topBoundary:0,rightBoundary:0,bottomBoundary:0,leftBoundary:0,scrolling:!1,listener:null,boundaryX:0,boundaryY:0,stopTimeout:null,stopTimeoutMS:80,scrollInterval:null,scrollIntervalMS:50,transitions:{none:"",scroll:"3.8s cubic-bezier(.19,1,.28,1.0) 0s",bounce:"0.5s cubic-bezier(0.06,.5,.5,.94) 0s"},setScrollLeft:function(e){var t=this.scrollLeft;this.stop(),this.scrollLeft=e,(this.isInLeftOverScroll()||this.isInRightOverScroll())&&(this.scrollLeft=t),this.effectScroll()},setScrollTop:function(e){var t=this.scrollTop;this.stop(),this.scrollTop=e,(this.isInTopOverScroll()||this.isInBottomOverScroll())&&(this.scrollTop=t),this.effectScroll()},setScrollX:function(e){this.scrollLeft=-1*e},setScrollY:function(e){this.scrollTop=-1*e},getScrollLeft:function(){return this.scrollLeft},getScrollTop:function(){return this.scrollTop},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.dom.transformValue(this.$.client,this.translation,"0,0,0")}}),destroy:enyo.inherit(function(e){return function(){this.clearCSSTransitionInterval(),e.apply(this,arguments)}}),getScrollSize:function(){var e=this.$.client.hasNode();return{width:e?e.scrollWidth:0,height:e?e.scrollHeight:0}},horizontalChanged:function(){"hidden"==this.horizontal&&(this.scrollHorizontal=!1)},verticalChanged:function(){"hidden"==this.vertical&&(this.scrollVertical=!1)},intervalChanged:function(){this.interval!=enyo.TransitionScrollStrategy.prototype.interval&&this.warn("'interval' not implemented in TransitionScrollStrategy")},calcScrollNode:function(){return this.$.clientContainer.hasNode()},calcBoundaries:function(){var e=this._getScrollBounds();this.bottomBoundary=e.clientHeight-e.height,this.rightBoundary=e.clientWidth-e.width},maxHeightChanged:function(){this.$.client.applyStyle("min-height",this.maxHeight?null:"100%"),this.$.client.applyStyle("max-height",this.maxHeight),this.$.clientContainer.addRemoveClass("enyo-scrollee-fit",!this.maxHeight)},calcAutoScrolling:function(){var e=this.getScrollBounds();this.vertical&&(this.scrollVertical=e.height>e.clientHeight),this.horizontal&&(this.scrollHorizontal=e.width>e.clientWidth)},isInOverScroll:function(){return this.isInTopOverScroll()||this.isInBottomOverScroll()||this.isInLeftOverScroll()||this.isInRightOverScroll()},isInLeftOverScroll:function(){return this.getScrollLeft()<this.leftBoundary},isInRightOverScroll:function(){return 0>=this.getScrollLeft?!1:-1*this.getScrollLeft()<this.rightBoundary},isInTopOverScroll:function(){return this.getScrollTop()<this.topBoundary},isInBottomOverScroll:function(){return 0>=this.getScrollTop()?!1:-1*this.getScrollTop()<this.bottomBoundary},calcStartInfo:function(){var e=this.getScrollBounds(),t=this.getScrollTop(),n=this.getScrollLeft();this.startEdges={top:0===t,bottom:t===e.maxTop,left:0===n,right:n===e.maxLeft}},mousewheel:function(e,t){if(!this.dragging&&this.useMouseWheel){this.calcBoundaries(),this.syncScrollMath(),this.stabilize();var n=this.vertical?t.wheelDeltaY||t.wheelDelta:0,r=parseFloat(this.getScrollTop())+ -1*parseFloat(n);return r=this.bottomBoundary>-1*r?-1*this.bottomBoundary:this.topBoundary>r?this.topBoundary:r,this.setScrollTop(r),this.doScroll(),t.preventDefault(),!0}},scroll:function(){this.thumb&&this.updateThumbs(),this.calcBoundaries(),this.doScroll()},start:function(){this.startScrolling(),this.doScrollStart()},stop:function(){this.isScrolling()&&this.stopScrolling(),this.thumb&&this.delayHideThumbs(100),this.doScrollStop()},updateX:function(){var e=window.getComputedStyle(this.$.client.node,null).getPropertyValue(enyo.dom.getCssTransformProp()).split("(")[1];return e=void 0===e?0:e.split(")")[0].split(",")[4],-1*parseFloat(e)===this.scrollLeft?!1:(this.scrollLeft=-1*parseFloat(e),!0)},updateY:function(){var e=window.getComputedStyle(this.$.client.node,null).getPropertyValue(enyo.dom.getCssTransformProp()).split("(")[1];return e=void 0===e?0:e.split(")")[0].split(",")[5],-1*parseFloat(e)===this.scrollTop?!1:(this.scrollTop=-1*parseFloat(e),!0)},effectScroll:function(){var e=-1*this.scrollLeft+"px, "+ -1*this.scrollTop+"px"+(this.accel?", 0":"");enyo.dom.transformValue(this.$.client,this.translation,e)},down:function(){var e=this;return this.isScrolling()&&!this.isOverscrolling()?(this.stopTimeout=setTimeout(function(){e.stop()},this.stopTimeoutMS),!0):void 0},dragstart:function(e,t){return this.stopTimeout&&clearTimeout(this.stopTimeout),!this.dragDuringGesture&&t.srcEvent.touches&&t.srcEvent.touches.length>1?!0:(this.shouldDrag(t),this.dragging=t.dragger==this||!t.dragger&&t.boundaryDragger==this,this.dragging&&(this.isScrolling()&&this.stopScrolling(),this.thumb&&this.showThumbs(),t.preventDefault(),this.prevY=t.pageY,this.prevX=t.pageX,this.preventDragPropagation)?!0:void 0)},shouldDrag:function(e){return this.calcStartInfo(),this.calcBoundaries(),this.calcAutoScrolling(),this.scrollHorizontal?this.scrollVertical?this.shouldDragVertical(e)||this.shouldDragHorizontal(e):this.shouldDragHorizontal(e):this.shouldDragVertical(e)},shouldDragVertical:function(e){var t=this.canDragVertical(e),n=this.oobVertical(e);return!e.boundaryDragger&&t&&(e.boundaryDragger=this),!n&&t?(e.dragger=this,!0):void 0},shouldDragHorizontal:function(e){var t=this.canDragHorizontal(e),n=this.oobHorizontal(e);return!e.boundaryDragger&&t&&(e.boundaryDragger=this),!n&&t?(e.dragger=this,!0):void 0},canDragVertical:function(e){return this.scrollVertical&&e.vertical},canDragHorizontal:function(e){return this.scrollHorizontal&&!e.vertical},oobVertical:function(e){var t=0>e.dy;return!t&&this.startEdges.top||t&&this.startEdges.bottom},oobHorizontal:function(e){var t=0>e.dx;return!t&&this.startEdges.left||t&&this.startEdges.right},drag:function(e,t){return this.listReordering?!1:(this.dragging&&(t.preventDefault(),this.scrollLeft=this.scrollHorizontal?this.calculateDragDistance(parseInt(this.getScrollLeft(),10),-1*(t.pageX-this.prevX),this.leftBoundary,this.rightBoundary):this.getScrollLeft(),this.scrollTop=this.scrollVertical?this.calculateDragDistance(this.getScrollTop(),-1*(t.pageY-this.prevY),this.topBoundary,this.bottomBoundary):this.getScrollTop(),this.effectScroll(),this.scroll(),this.prevY=t.pageY,this.prevX=t.pageX,this.resetBoundaryX(),this.resetBoundaryY()),void 0)},calculateDragDistance:function(e,t,n,r){var i=e+t;return this.overscrollDragDamping(e,i,t,n,r)},overscrollDragDamping:function(e,t,n,r,i){return(r>t||i>-1*t)&&(n/=2,t=e+n),t},resetBoundaryX:function(){this.boundaryX=0},resetBoundaryY:function(){this.boundaryY=0},dragfinish:function(e,t){this.dragging&&(t.preventTap(),this.dragging=!1,this.isScrolling()||this.correctOverflow(),this.scrim&&this.$.scrim.hide())},correctOverflow:function(){if(this.isInOverScroll()){var e=this.scrollHorizontal?this.correctOverflowX():!1,t=this.scrollVertical?this.correctOverflowY():!1;e!==!1&&t!==!1?(this.scrollLeft=e!==!1?e:this.getScrollLeft(),this.scrollTop=t!==!1?t:this.getScrollTop(),this.startOverflowScrolling()):e!==!1?(this.scrollLeft=e,this.scrollTop=this.targetScrollTop||this.scrollTop,this.targetScrollLeft=this.getScrollLeft(),this.vertical?this.startScrolling():this.startOverflowScrolling()):t!==!1&&(this.scrollTop=t,this.scrollLeft=this.targetScrollLeft||this.scrollLeft,this.targetScrollTop=this.getScrollTop(),this.scrollHorizontal?this.startScrolling():this.startOverflowScrolling())}},correctOverflowX:function(){if(this.isInLeftOverScroll()){if(this.beyondBoundary(this.getScrollLeft(),this.leftBoundary,this.boundaryX))return this.leftBoundary}else if(this.isInRightOverScroll()&&this.beyondBoundary(this.getScrollLeft(),this.rightBoundary,this.boundaryX))return-1*this.rightBoundary;return!1},correctOverflowY:function(){if(this.isInTopOverScroll()){if(this.beyondBoundary(this.getScrollTop(),this.topBoundary,this.boundaryY))return this.topBoundary}else if(this.isInBottomOverScroll()&&this.beyondBoundary(this.getScrollTop(),this.bottomBoundary,this.boundaryY))return-1*this.bottomBoundary;return!1},beyondBoundary:function(e,t,n){return Math.abs(Math.abs(t)-Math.abs(e))>Math.abs(n)},flick:function(e,t){return this.dragging&&this.flickOnEnabledAxis(t)?(this.scrollLeft=this.scrollHorizontal?this.calculateFlickDistance(this.scrollLeft,-1*t.xVelocity):this.getScrollLeft(),this.scrollTop=this.scrollVertical?this.calculateFlickDistance(this.scrollTop,-1*t.yVelocity):this.getScrollTop(),this.targetScrollLeft=this.scrollLeft,this.targetScrollTop=this.scrollTop,this.boundaryX=null,this.boundaryY=null,this.isInLeftOverScroll()?this.boundaryX=this.figureBoundary(this.getScrollLeft()):this.isInRightOverScroll()&&(this.boundaryX=this.figureBoundary(-1*this.bottomBoundary-this.getScrollLeft())),this.isInTopOverScroll()?this.boundaryY=this.figureBoundary(this.getScrollTop()):this.isInBottomOverScroll()&&(this.boundaryY=this.figureBoundary(-1*this.bottomBoundary-this.getScrollTop())),this.startScrolling(),this.preventDragPropagation):void 0},flickOnEnabledAxis:function(e){return Math.abs(e.xVelocity)>Math.abs(e.yVelocity)?this.scrollHorizontal:this.scrollVertical},calculateFlickDistance:function(e,t){return e+t*this.kFlickScalar},startScrolling:function(){this.applyTransition("scroll"),this.effectScroll(),this.setCSSTransitionInterval(),this.scrolling=!0},startOverflowScrolling:function(){this.applyTransition("bounce"),this.effectScroll(),this.setOverflowTransitionInterval(),this.scrolling=!0},applyTransition:function(e){this.$.client.applyStyle("-webkit-transition",this.transitions[e])},stopScrolling:function(){this.resetCSSTranslationVals(),this.clearCSSTransitionInterval(),this.scrolling=!1},setCSSTransitionInterval:function(){this.clearCSSTransitionInterval(),this.scrollInterval=setInterval(this.bindSafely(function(){this.updateScrollPosition(),this.correctOverflow()}),this.scrollIntervalMS)},setOverflowTransitionInterval:function(){this.clearCSSTransitionInterval(),this.scrollInterval=setInterval(this.bindSafely(function(){this.updateScrollPosition()}),this.scrollIntervalMS)},updateScrollPosition:function(){var e=this.updateY(),t=this.updateX();this.scroll(),e||t||this.stop()},clearCSSTransitionInterval:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null)},resetCSSTranslationVals:function(){var e=enyo.dom.getCssTransformProp(),t=window.getComputedStyle(this.$.client.node,null).getPropertyValue(e).split("(")[1].split(")")[0].split(",");this.applyTransition("none"),this.scrollLeft=-1*t[4],this.scrollTop=-1*t[5],this.effectScroll()},figureBoundary:function(e){var t=Math.abs(e),n=t-t/Math.pow(t,.02);return n=0>e?-1*n:n},transitionComplete:function(e,t){if(t.originator===this.$.client){var n=!1;this.isInTopOverScroll()?(n=!0,this.scrollTop=this.topBoundary):this.isInBottomOverScroll()&&(n=!0,this.scrollTop=-1*this.bottomBoundary),this.isInLeftOverScroll()?(n=!0,this.scrollLeft=this.leftBoundary):this.isInRightOverScroll()&&(n=!0,this.scrollLeft=-1*this.rightBoundary),n?this.startOverflowScrolling():this.stop()}},scrollTo:function(e,t){this.setScrollTop(t),this.setScrollLeft(e),this.start()},getOverScrollBounds:function(){return{overleft:Math.min(this.leftBoundary+this.scrollLeft,0)||Math.max(this.rightBoundary+this.scrollLeft,0),overtop:Math.min(this.topBoundary+this.scrollTop,0)||Math.max(this.bottomBoundary+this.scrollTop,0)}}}),enyo.kind({name:"enyo.Scroller",published:{horizontal:"default",vertical:"default",scrollTop:0,scrollLeft:0,maxHeight:null,touch:!1,strategyKind:"ScrollStrategy",thumb:!0,useMouseWheel:!0},events:{onScrollStart:"",onScroll:"",onScrollStop:""},touchOverscroll:!0,preventDragPropagation:!0,preventScrollPropagation:!0,noDefer:!0,handlers:{onscroll:"domScroll",onScrollStart:"scrollStart",onScroll:"scroll",onScrollStop:"scrollStop"},classes:"enyo-scroller",statics:{osInfo:[{os:"android",version:3},{os:"androidChrome",version:18},{os:"androidFirefox",version:16},{os:"firefoxOS",version:16},{os:"ios",version:5},{os:"webos",version:1e9},{os:"blackberry",version:1e9},{os:"tizen",version:2}],hasTouchScrolling:function(){for(var e,t=0;e=this.osInfo[t];t++)if(enyo.platform[e.os])return!0;return(enyo.platform.ie>=10||enyo.platform.windowsPhone>=8)&&enyo.platform.touch?!0:void 0},hasNativeScrolling:function(){for(var e,t=0;e=this.osInfo[t];t++)if(enyo.platform[e.os]<e.version)return!1;return!0},getTouchStrategy:function(){return enyo.platform.android>=3||8===enyo.platform.windowsPhone||enyo.platform.webos>=4?"TranslateScrollStrategy":"TouchScrollStrategy"}},controlParentName:"strategy",create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.horizontalChanged(),this.verticalChanged(),this.useMouseWheelChanged()}}),importProps:enyo.inherit(function(e){return function(n){e.apply(this,arguments),n&&void 0===n.strategyKind&&(enyo.Scroller.touchScrolling||this.touch)&&(this.strategyKind=enyo.Scroller.getTouchStrategy())}}),initComponents:enyo.inherit(function(e){return function(){this.strategyKindChanged(),e.apply(this,arguments)}}),teardownChildren:enyo.inherit(function(e){return function(){this.cacheScrollPosition(),e.apply(this,arguments)}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.restoreScrollPosition()}}),strategyKindChanged:function(){this.$.strategy&&(this.$.strategy.destroy(),this.controlParent=null),this.createStrategy(),this.hasNode()&&this.render()},createStrategy:function(){this.createComponents([{name:"strategy",maxHeight:this.maxHeight,kind:this.strategyKind,thumb:this.thumb,preventDragPropagation:this.preventDragPropagation,overscroll:this.touchOverscroll,isChrome:!0}])},getStrategy:function(){return this.$.strategy},maxHeightChanged:function(){this.$.strategy.setMaxHeight(this.maxHeight)},showingChanged:enyo.inherit(function(e){return function(){this.showing||this.cacheScrollPosition(!0),e.apply(this,arguments),this.showing&&this.restoreScrollPosition()}}),thumbChanged:function(){this.$.strategy.setThumb(this.thumb)},cacheScrollPosition:function(e){var t={left:this.getScrollLeft(),top:this.getScrollTop()};e&&(this.setScrollLeft(0),this.setScrollTop(0)),this.cachedPosition=t},restoreScrollPosition:function(){if(this.cachedPosition){var e=this.cachedPosition;(e.top||e.left)&&(this.cachedPosition=null,this.setScrollLeft(e.left),this.setScrollTop(e.top))}},horizontalChanged:function(){this.$.strategy.setHorizontal(this.horizontal)},verticalChanged:function(){this.$.strategy.setVertical(this.vertical)},setScrollLeft:function(e){this.scrollLeft=e,this.cachedPosition&&(this.cachedPosition.left=e),this.$.strategy.setScrollLeft(this.scrollLeft)},setScrollTop:function(e){this.scrollTop=e,this.cachedPosition&&(this.cachedPosition.top=e),this.$.strategy.setScrollTop(e)},getScrollLeft:function(){return this.scrollLeft=this.$.strategy.getScrollLeft(),this.scrollLeft},getScrollTop:function(){return this.scrollTop=this.$.strategy.getScrollTop(),this.scrollTop},getScrollBounds:function(){var e=this.$.strategy.getScrollBounds();return(-1!==e.xDir&&0!==e.xDir&&1!==e.xDir||-1!==e.yDir&&0!==e.yDir&&1!==e.yDir)&&this.decorateBounds(e),this.scrollTop=e.top,this.scrollLeft=e.left,e},scrollIntoView:function(e,t){this.$.strategy.scrollIntoView(e,t)},scrollTo:function(e,t){this.$.strategy.scrollTo(e,t)},scrollToControl:function(e,t){this.scrollToNode(e.hasNode(),t)},scrollToNode:function(e,t){this.$.strategy.scrollToNode(e,t)},decorateScrollEvent:function(e){var t=e.scrollBounds=e.scrollBounds||this.$.strategy._getScrollBounds();(-1!==t.xDir&&0!==t.xDir&&1!==t.xDir||-1!==t.yDir&&0!==t.yDir&&1!==t.yDir)&&this.decorateBounds(t),this.scrollTop=t.top,this.scrollLeft=t.left},decorateBounds:function(e){var t=this.scrollLeft-e.left,n=this.scrollTop-e.top;e.xDir=0>t?1:t>0?-1:0,e.yDir=0>n?1:n>0?-1:0,this.scrollLeft=e.left,this.scrollTop=e.top},domScroll:function(e,t){return this.$.strategy.domScroll&&t.originator==this&&this.$.strategy.domScroll(e,t),this.decorateScrollEvent(t),this.doScroll(t),!0},shouldStopScrollEvent:function(e){return this.preventScrollPropagation&&e.originator.owner!=this.$.strategy},scrollStart:function(e,t){return this.shouldStopScrollEvent(t)?!0:(this.decorateScrollEvent(t),!1)},scroll:function(e,t){var n;return n=t.dispatchTarget?this.preventScrollPropagation&&t.originator!=this&&t.originator.owner!=this.$.strategy:this.shouldStopScrollEvent(t),n?!0:(this.decorateScrollEvent(t),!1)},scrollStop:function(e,t){return this.shouldStopScrollEvent(t)?!0:(this.decorateScrollEvent(t),!1)},scrollToTop:function(){this.setScrollTop(0)},scrollToBottom:function(){this.setScrollTop(this.getScrollBounds().maxTop)},scrollToRight:function(){this.setScrollLeft(this.getScrollBounds().maxLeft)},scrollToLeft:function(){this.setScrollLeft(0)},stabilize:function(){var e=this.getStrategy();e.stabilize&&e.stabilize()},useMouseWheelChanged:function(){this.$.strategy.setUseMouseWheel(this.useMouseWheel)},resized:enyo.inherit(function(e){return function(){this.getAbsoluteShowing(!0)&&e.apply(this,arguments)}})}),enyo.Scroller.hasTouchScrolling()&&(enyo.Scroller.prototype.strategyKind=enyo.Scroller.getTouchStrategy()),enyo.kind({name:"enyo.Anchor",kind:"enyo.Control",tag:"a",published:{href:"",title:""},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.hrefChanged(),this.titleChanged()}}),hrefChanged:function(){this.setAttribute("href",this.href)},titleChanged:function(){this.setAttribute("title",this.title)}}),enyo.kind({name:"enyo.Animator",kind:"Component",published:{duration:350,startValue:0,endValue:1,node:null,easingFunction:enyo.easing.cubicOut},events:{onStep:"",onEnd:"",onStop:""},constructed:enyo.inherit(function(e){return function(){e.apply(this,arguments),this._next=this.bindSafely("next")}}),destroy:enyo.inherit(function(e){return function(){this.stop(),e.apply(this,arguments)}}),play:function(e){return this.stop(),this.reversed=!1,e&&enyo.mixin(this,e),this.t0=this.t1=enyo.perfNow(),this.value=this.startValue,enyo.jobs.registerPriority(5,this.id),this.job=!0,this.next(),this},stop:function(){return this.isAnimating()?(this.cancel(),this.fire("onStop"),this):void 0},reverse:function(){if(this.isAnimating()){this.reversed=!this.reversed;var e=this.t1=enyo.perfNow(),t=e-this.t0;this.t0=e+t-this.duration;var n=this.startValue;return this.startValue=this.endValue,this.endValue=n,this}},isAnimating:function(){return Boolean(this.job)},requestNext:function(){this.job=enyo.requestAnimationFrame(this._next,this.node)},cancel:function(){enyo.cancelRequestAnimationFrame(this.job),this.node=null,this.job=null,enyo.jobs.unregisterPriority(this.id)},shouldEnd:function(){return this.dt>=this.duration},next:function(){this.t1=enyo.perfNow(),this.dt=this.t1-this.t0;var e,t=this.easingFunction.length;1===t?(e=this.fraction=enyo.easedLerp(this.t0,this.duration,this.easingFunction,this.reversed),this.value=this.startValue+e*(this.endValue-this.startValue)):this.value=enyo.easedComplexLerp(this.t0,this.duration,this.easingFunction,this.reversed,this.dt,this.startValue,this.endValue-this.startValue),e>=1&&1===t||this.shouldEnd()?(this.value=this.endValue,this.fraction=1,this.fire("onStep"),this.cancel(),this.fire("onEnd")):(this.fire("onStep"),this.requestNext())},fire:function(e){var t=this[e];enyo.isString(t)?this.bubble(e):t&&t.call(this.context||window,this)}}),enyo.kind({name:"enyo.BaseLayout",kind:"enyo.Layout",layoutClass:"enyo-positioned",reflow:function(){enyo.forEach(this.container.children,function(e){null!==e.fit&&e.addRemoveClass("enyo-fit",e.fit)},this)}}),enyo.kind({name:"enyo.Image",noEvents:!1,published:{alt:"",sizing:"",position:"center"},tag:"img",classes:"enyo-image",attributes:{draggable:"false"},create:enyo.inherit(function(e){return function(){this.noEvents&&(delete this.attributes.onload,delete this.attributes.onerror),e.apply(this,arguments),this.altChanged(),this.sizingChanged()}}),srcChanged:enyo.inherit(function(e){return function(){this.sizing&&this.src?this.applyStyle("background-image","url("+enyo.path.rewrite(this.src)+")"):e.apply(this,arguments)}}),altChanged:function(){this.setAttribute("alt",this.alt)},sizingChanged:function(e){this.tag=this.sizing?"div":"img",this.addRemoveClass("sized",!!this.sizing),this.inOld&&this.removeClass(e),this.sizing&&this.addClass(this.sizing),this.generated&&(this.srcChanged(),this.render())},positionChanged:function(){this.sizing&&this.applyStyle("background-position",this.containPosition)},rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.makeBubble(this,"load","error")}}),statics:{placeholder:"data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBzdHlsZT0ic3Ryb2tlOiAjNDQ0OyBzdHJva2Utd2lkdGg6IDE7IGZpbGw6ICNhYWE7IiAvPjxsaW5lIHgxPSIwIiB5MT0iMCIgeDI9IjEwMCUiIHkyPSIxMDAlIiBzdHlsZT0ic3Ryb2tlOiAjNDQ0OyBzdHJva2Utd2lkdGg6IDE7IiAvPjxsaW5lIHgxPSIxMDAlIiB5MT0iMCIgeDI9IjAiIHkyPSIxMDAlIiBzdHlsZT0ic3Ryb2tlOiAjNDQ0OyBzdHJva2Utd2lkdGg6IDE7IiAvPjwvc3ZnPg=="}}),enyo.kind({name:"enyo.Input",published:{value:"",placeholder:"",type:"",disabled:!1,selectOnFocus:!1},events:{onDisabledChange:""},defaultFocus:!1,tag:"input",classes:"enyo-input",handlers:{onfocus:"focused",oninput:"input",onclear:"clear",ondragstart:"dragstart"},create:enyo.inherit(function(e){return function(){enyo.platform.ie&&(this.handlers.onkeyup="iekeyup"),enyo.platform.windowsPhone&&(this.handlers.onkeydown="iekeydown"),e.apply(this,arguments),this.placeholderChanged(),this.type&&this.typeChanged(),this.valueChanged()}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.makeBubble(this,"focus","blur"),8==enyo.platform.ie&&this.setAttribute("onchange",enyo.bubbler),this.disabledChanged(),this.defaultFocus&&this.focus()}}),typeChanged:function(){this.setAttribute("type",this.type)},placeholderChanged:function(){this.setAttribute("placeholder",this.placeholder)},disabledChanged:function(){this.setAttribute("disabled",this.disabled),this.bubble("onDisabledChange")},valueChanged:function(){var e=this.hasNode(),t=this.attributes;e?(e.value!==this.value&&(e.value=this.value),t.value=this.value):this.setAttribute("value",this.value)},iekeyup:function(e,t){var n=enyo.platform.ie,r=t.keyCode;(8>=n||9==n&&(8==r||46==r))&&this.bubble("oninput",t)},iekeydown:function(e,t){var n=enyo.platform.windowsPhone,r=t.keyCode,i=t.dispatchTarget;8>=n&&13==r&&"input"==this.tag&&i.hasNode()&&i.node.blur()},clear:function(){this.setValue("")},dragstart:function(){return this.hasFocus()},focused:function(){this.selectOnFocus&&enyo.asyncMethod(this,"selectContents")},selectContents:function(){var e=this.hasNode();if(e&&e.setSelectionRange)e.setSelectionRange(0,e.value.length);else if(e&&e.createTextRange){var t=e.createTextRange();t.expand("textedit"),t.select()}},input:function(){var e=this.getNodeProperty("value");this.setValue(e)}}),enyo.kind({name:"enyo.RichText",classes:"enyo-richtext enyo-selectable",published:{allowHtml:!0,disabled:!1,value:""},defaultFocus:!1,protectedStatics:{osInfo:[{os:"android",version:3},{os:"ios",version:5}],hasContentEditable:function(){for(var e,t=0;e=enyo.RichText.osInfo[t];t++)if(enyo.platform[e.os]<e.version)return!1;return!0}},kind:"enyo.Input",attributes:{contenteditable:!0},handlers:{onfocus:"focusHandler",onblur:"blurHandler",onkeyup:"updateValue",oncut:"updateValueAsync",onpaste:"updateValueAsync",oninput:null},create:enyo.inherit(function(e){return function(){this.setTag(enyo.RichText.hasContentEditable()?"div":"textarea"),e.apply(this,arguments),this.disabledChanged()}}),focusHandler:function(){this._value=this.get("value")},blurHandler:function(){this._value!==this.get("value")&&this.bubble("onchange")},valueChanged:function(){var e=this.get("value");this.hasFocus()&&e!==this.node.innerHTML?(this.selectAll(),this.insertAtCursor(e)):this.hasFocus()||this.set("content",e)},disabledChanged:function(){"div"===this.tag?this.setAttribute("contenteditable",this.disabled?null:"true"):this.setAttribute("disabled",this.disabled),this.bubble("onDisabledChange")},updateValue:function(){var e=this.node.innerHTML;this.set("value",e)},updateValueAsync:function(){enyo.asyncMethod(this.bindSafely("updateValue"))},hasFocus:function(){return this.hasNode()?document.activeElement===this.node:void 0},getSelection:function(){return this.hasFocus()?window.getSelection():void 0},removeSelection:function(e){var t=this.getSelection();t&&t[e?"collapseToStart":"collapseToEnd"]()},modifySelection:function(e,t,n){var r=this.getSelection();r&&r.modify(e||"move",t,n)},moveCursor:function(e,t){this.modifySelection("move",e,t)},moveCursorToEnd:function(){this.moveCursor("forward","documentboundary")},moveCursorToStart:function(){this.moveCursor("backward","documentboundary")},selectAll:function(){this.hasFocus()&&document.execCommand("selectAll")},insertAtCursor:function(e){if(this.hasFocus()){var t=this.allowHtml?e:enyo.Control.escapeHtml(e).replace(/\n/g,"<br/>");document.execCommand("insertHTML",!1,t)}}}),enyo.kind({name:"enyo.TextArea",kind:"enyo.Input",tag:"textarea",classes:"enyo-textarea",rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.valueChanged()}})}),enyo.kind({name:"enyo.Select",published:{selected:0},handlers:{onchange:"change"},tag:"select",defaultKind:"enyo.Option",rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),8==enyo.platform.ie&&this.setAttribute("onchange",enyo.bubbler),this.selectedChanged()}}),getSelected:function(){return Number(this.getNodeProperty("selectedIndex",this.selected))},selectedChanged:function(){this.setNodeProperty("selectedIndex",this.selected)},change:function(){this.selected=this.getSelected()},render:enyo.inherit(function(e){return function(){enyo.platform.ie?this.parent.render():e.apply(this,arguments)}}),getValue:function(){return this.hasNode()?this.node.value:void 0}}),enyo.kind({name:"enyo.Option",published:{value:""},tag:"option",create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.valueChanged()}}),valueChanged:function(){this.setAttribute("value",this.value)}}),enyo.kind({name:"enyo.OptionGroup",published:{label:""},tag:"optgroup",defaultKind:"enyo.Option",create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.labelChanged()}}),labelChanged:function(){this.setAttribute("label",this.label)}}),enyo.kind({name:"enyo.Group",published:{highlander:!0,allowHighlanderDeactivate:!1,active:null,groupName:null},handlers:{onActivate:"activate"},activate:function(e,t){(!this.groupName&&!t.originator.groupName||t.originator.groupName==this.groupName)&&this.highlander&&(void 0!==t.allowHighlanderDeactivate&&t.allowHighlanderDeactivate!==this.allowHighlanderDeactivate&&this.setAllowHighlanderDeactivate(t.allowHighlanderDeactivate),t.originator.active?this.setActive(t.originator):t.originator==this.active&&(this.allowHighlanderDeactivate?this.setActive(null):this.active.setActive(!0)))},activeChanged:function(e){e&&(e.setActive(!1),e.removeClass("active")),this.active&&this.active.addClass("active")}}),enyo.kind({name:"enyo.GroupItem",published:{active:!1},rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.activeChanged()}}),activeChanged:function(){this.bubble("onActivate")}}),enyo.kind({name:"enyo.ToolDecorator",kind:"enyo.GroupItem",classes:"enyo-tool-decorator"}),enyo.kind({name:"enyo.Button",kind:"enyo.ToolDecorator",tag:"button",attributes:{type:"button"},published:{disabled:!1},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.disabledChanged()}}),disabledChanged:function(){this.setAttribute("disabled",this.disabled)},tap:function(){return this.disabled?!0:(this.setActive(!0),void 0)}}),enyo.kind({name:"enyo.Checkbox",kind:"enyo.Input",classes:"enyo-checkbox",events:{onActivate:""},published:{checked:!1,active:!1,type:"checkbox"},kindClasses:"",handlers:{onchange:"change",onclick:"click"},rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.active&&this.activeChanged(),this.checkedChanged()}}),checkedChanged:function(){this.setNodeProperty("checked",this.checked),this.setAttribute("checked",this.checked?"checked":""),this.setActive(this.checked)},activeChanged:function(){this.active=enyo.isTrue(this.active),this.setChecked(this.active),this.bubble("onActivate")},setValue:function(e){this.setChecked(enyo.isTrue(e))},getValue:function(){return this.getChecked()},valueChanged:function(){},change:function(){var e=enyo.isTrue(this.getNodeProperty("checked"));this.setActive(e)},click:function(e,t){8>=enyo.platform.ie&&this.bubble("onchange",t)}}),enyo.kind({name:"enyo.Repeater",published:{count:0},events:{onSetupItem:""},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.countChanged()}}),initComponents:enyo.inherit(function(e){return function(){this.itemComponents=this.components||this.kindComponents,this.components=this.kindComponents=null,e.apply(this,arguments)}}),countChanged:function(){this.build()},itemAtIndex:function(e){return this.controlAtIndex(e)},build:function(){this.destroyClientControls();for(var e,t=0;this.count>t;t++)e=this.createComponent({kind:"enyo.OwnerProxy",index:t}),e.createComponents(this.itemComponents),this.doSetupItem({index:t,item:e});this.render()},renderRow:function(e){var t=this.itemAtIndex(e);this.doSetupItem({index:e,item:t})}}),enyo.kind({name:"enyo.OwnerProxy",tag:null,decorateEvent:enyo.inherit(function(e){return function(n,r){r&&(enyo.exists(r.index)?(r.indices=r.indices||[r.index],r.indices.push(this.index)):r.index=this.index,r.delegate&&r.delegate.owner===this&&(r.delegate=this.owner)),e.apply(this,arguments)}})}),enyo.kind({name:"enyo._DragAvatar",style:"position: absolute; z-index: 10; pointer-events: none; cursor: move;",showing:!1,showingChanged:enyo.inherit(function(e){return function(){e.apply(this,arguments),document.body.style.cursor=this.showing?"move":null}})}),enyo.kind({name:"enyo.DragAvatar",kind:"enyo.Component",published:{showing:!1,offsetX:20,offsetY:30},initComponents:enyo.inherit(function(e){return function(){this.avatarComponents=this.components,this.components=null,e.apply(this,arguments)}}),requireAvatar:function(){this.avatar||(this.avatar=this.createComponent({kind:enyo._DragAvatar,parentNode:document.body,showing:!1,components:this.avatarComponents}).render())},showingChanged:function(){this.avatar.setShowing(this.showing),document.body.style.cursor=this.showing?"move":null},drag:function(e){this.requireAvatar(),this.avatar.setBounds({top:e.pageY-this.offsetY,left:e.pageX+this.offsetX}),this.show()},show:function(){this.setShowing(!0)},hide:function(){this.setShowing(!1)}}),enyo.kind({name:"enyo.FloatingLayer",create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.setParent(null)}}),hasNode:enyo.inherit(function(e){return function(){return e.apply(this,arguments),this.node&&!this.node.parentNode&&this.teardownRender(),this.node}}),render:enyo.inherit(function(e){return function(){return this.parentNode=document.body,e.apply(this,arguments)}}),generateInnerHtml:function(){return""},beforeChildRender:function(){this.hasNode()||this.render()},teardownChildren:function(){}}),enyo.floatingLayer=new enyo.FloatingLayer,enyo.kind({name:"enyo.Popup",classes:"enyo-popup enyo-no-touch-action",published:{modal:!1,autoDismiss:!0,floating:!1,centered:!1,showTransitions:!1,allowDefault:!1},showing:!1,handlers:{onkeydown:"keydown",ondragstart:"dragstart",onfocus:"focus",onblur:"blur",onRequestShow:"requestShow",onRequestHide:"requestHide"},captureEvents:!0,eventsToCapture:{ondown:"capturedDown",ontap:"capturedTap"},events:{onShow:"",onHide:""},tools:[{kind:"Signals",onKeydown:"keydown"}],create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.canGenerate=!this.floating}}),render:enyo.inherit(function(e){return function(){this.floating&&(enyo.floatingLayer.hasNode()||enyo.floatingLayer.render(),this.parentNode=enyo.floatingLayer.hasNode()),e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){this.release(),e.apply(this,arguments)}}),reflow:enyo.inherit(function(e){return function(){this.updatePosition(),e.apply(this,arguments)}}),calcViewportSize:function(){if(window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var e=document.documentElement;return{width:e.offsetWidth,height:e.offsetHeight}},updatePosition:function(){var e=this.calcViewportSize(),t=this.getBounds();if(this.targetPosition){var n=this.targetPosition;"number"==typeof n.left?n.left+t.width>e.width?(n.right=n.left-t.width>=0?e.width-n.left:0,n.left=null):n.right=null:"number"==typeof n.right&&(n.right+t.width>e.width?(n.left=n.right-t.width>=0?e.width-n.right:0,n.right=null):n.left=null),"number"==typeof n.top?n.top+t.height>e.height?(n.bottom=n.top-t.height>=0?e.height-n.top:0,n.top=null):n.bottom=null:"number"==typeof n.bottom&&(n.bottom+t.height>e.height?(n.top=n.bottom-t.height>=0?e.height-n.bottom:0,n.bottom=null):n.top=null),this.addStyles("left: "+(null!==n.left?n.left+"px":"initial")+"; right: "+(null!==n.right?n.right+"px":"initial")+"; top: "+(null!==n.top?n.top+"px":"initial")+"; bottom: "+(null!==n.bottom?n.bottom+"px":"initial")+";")}else if(this.centered){var r=this.getInstanceOwner().getBounds();this.addStyles("top: "+Math.max((r.height-t.height)/2,0)+"px; left: "+Math.max((r.width-t.width)/2,0)+"px;")}},showingChanged:enyo.inherit(function(e){return function(){this.floating&&this.showing&&!this.hasNode()&&this.render(),(this.centered||this.targetPosition)&&(this.showTransitions||this.applyStyle("visibility","hidden"),this.addStyles("top: 0px; left: 0px; right: initial; bottom: initial;")),e.apply(this,arguments),this.showing?(this.resized(),this.captureEvents&&this.capture()):this.captureEvents&&this.release(),(this.centered||this.targetPosition&&!this.showTransitions)&&this.applyStyle("visibility",null),this.hasNode()&&this[this.showing?"doShow":"doHide"]()}}),capture:function(){enyo.dispatcher.capture(this,this.eventsToCapture)},release:function(){enyo.dispatcher.release(this)},capturedDown:function(e,t){return this.downEvent=t,this.modal&&!this.allowDefault&&t.preventDefault(),this.modal},capturedTap:function(e,t){return this.autoDismiss&&!t.dispatchTarget.isDescendantOf(this)&&this.downEvent&&!this.downEvent.dispatchTarget.isDescendantOf(this)&&(this.downEvent=null,this.hide()),this.modal},dragstart:function(e,t){var n=t.dispatchTarget===this||t.dispatchTarget.isDescendantOf(this);return e.autoDismiss&&!n&&e.setShowing(!1),!0},keydown:function(e,t){this.showing&&this.autoDismiss&&27==t.keyCode&&this.hide()},blur:function(e,t){t.dispatchTarget.isDescendantOf(this)&&(this.lastFocus=t.originator)},focus:function(e,t){var n=t.dispatchTarget;if(this.modal&&!n.isDescendantOf(this)){n.hasNode()&&n.node.blur();var r=this.lastFocus&&this.lastFocus.hasNode()||this.hasNode();r&&r.focus()}},requestShow:function(){return this.show(),!0},requestHide:function(){return this.hide(),!0},showAtEvent:function(e,t){var n={left:e.centerX||e.clientX||e.pageX,top:e.centerY||e.clientY||e.pageY};t&&(n.left+=t.left||0,n.top+=t.top||0),this.showAtPosition(n)},showAtPosition:function(e){this.targetPosition=e,this.show()}}),enyo.kind({name:"enyo.Selection",kind:"enyo.Component",published:{multi:!1},events:{onSelect:"",onDeselect:"",onChange:""},create:enyo.inherit(function(e){return function(){this.clear(),e.apply(this,arguments)}}),multiChanged:function(){this.multi||this.clear(),this.doChange()},highlander:function(){this.multi||this.deselect(this.lastSelected)},clear:function(){this.selected={}},isSelected:function(e){return this.selected[e]},setByKey:function(e,t,n){if(t)this.selected[e]=n||!0,this.lastSelected=e,this.doSelect({key:e,data:this.selected[e]});else{var r=this.isSelected(e);delete this.selected[e],this.doDeselect({key:e,data:r})}this.doChange()},deselect:function(e){this.isSelected(e)&&this.setByKey(e,!1)},select:function(e,t){this.multi?this.setByKey(e,!this.isSelected(e),t):this.isSelected(e)||(this.highlander(),this.setByKey(e,!0,t))},toggle:function(e,t){this.multi||this.lastSelected==e||this.deselect(this.lastSelected),this.setByKey(e,!this.isSelected(e),t)},getSelected:function(){return this.selected},remove:function(e){var t={};for(var n in this.selected)e>n?t[n]=this.selected[n]:n>e&&(t[n-1]=this.selected[n]);this.selected=t}}),enyo.kind({name:"enyo.Drawer",published:{open:!0,orient:"v",animated:!0,resizeContainer:!0},events:{onDrawerAnimationStep:"",onDrawerAnimationEnd:""},style:"overflow: hidden; position: relative;",tools:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorEnd"},{name:"client",style:"position: relative;",classes:"enyo-border-box"}],create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.animatedChanged(),this.openChanged()}}),initComponents:enyo.inherit(function(e){return function(){this.createChrome(this.tools),e.apply(this,arguments)}}),animatedChanged:function(){!this.animated&&this.hasNode()&&this.$.animator.isAnimating()&&(this.$.animator.stop(),this.animatorEnd())},openChanged:function(){if(this.$.client.show(),this.hasNode())if(this.$.animator.isAnimating())this.$.animator.reverse();else{var e="v"==this.orient,t=e?"height":"width",n=e?"top":"left";this.applyStyle(t,null);var r=this.hasNode()[e?"scrollHeight":"scrollWidth"];this.animated?this.$.animator.play({startValue:this.open?0:r,endValue:this.open?r:0,dimension:t,position:n}):this.animatorEnd()}else this.$.client.setShowing(this.open)},animatorStep:function(e){if(this.hasNode()){var t=e.dimension;this.node.style[t]=this.domStyles[t]=e.value+"px"}var n=this.$.client.hasNode();if(n){var r=e.position,i=this.open?e.endValue:e.startValue;n.style[r]=this.$.client.domStyles[r]=e.value-i+"px"}return this.container&&this.resizeContainer&&this.container.resized(),this.doDrawerAnimationStep(),!0},animatorEnd:function(){if(this.open){this.$.client.domCssText=enyo.Control.domStylesToCssText(this.$.client.domStyles);var e="v"==this.orient,t=e?"height":"width",n=e?"top":"left",r=this.$.client.hasNode();r&&(r.style[n]=this.$.client.domStyles[n]=null),this.node&&(this.node.style[t]=this.domStyles[t]=null)}else this.$.client.hide();return this.container&&this.resizeContainer&&this.container.resized(),this.doDrawerAnimationEnd(),!0}}),enyo.kind({name:"enyo.Table",tag:"table",attributes:{cellpadding:"0",cellspacing:"0"},defaultKind:"enyo.TableRow"}),enyo.kind({name:"enyo.TableRow",tag:"tr",defaultKind:"enyo.TableCell"}),enyo.kind({name:"enyo.TableCell",tag:"td"}),enyo.fullscreen={fullscreenControl:null,fullscreenElement:null,requestor:null,elementAccessor:"fullscreenElement"in document?"fullscreenElement":"mozFullScreenElement"in document?"mozFullScreenElement":"webkitFullscreenElement"in document?"webkitFullscreenElement":null,requestAccessor:"requestFullscreen"in document.documentElement?"requestFullscreen":"mozRequestFullScreen"in document.documentElement?"mozRequestFullScreen":"webkitRequestFullscreen"in document.documentElement?"webkitRequestFullscreen":null,cancelAccessor:"cancelFullScreen"in document?"cancelFullScreen":"mozCancelFullScreen"in document?"mozCancelFullScreen":"webkitCancelFullScreen"in document?"webkitCancelFullScreen":null,nativeSupport:function(){return null!==this.elementAccessor&&null!==this.requestAccessor&&null!==this.cancelAccessor},getFullscreenElement:function(){return this.nativeSupport()?document[this.elementAccessor]:this.fullscreenElement},getFullscreenControl:function(){return this.fullscreenControl},requestFullscreen:function(e){return this.getFullscreenControl()||!e.hasNode()?!1:(this.requestor=e,this.nativeSupport()?e.hasNode()[this.requestAccessor]():this.fallbackRequestFullscreen(),!0)},cancelFullscreen:function(){this.nativeSupport()?document[this.cancelAccessor]():this.fallbackCancelFullscreen()},setFullscreenElement:function(e){this.fullscreenElement=e},setFullscreenControl:function(e){this.fullscreenControl=e},fallbackRequestFullscreen:function(){var e=this.requestor;e&&(e.prevAddBefore=e.parent.controlAtIndex(e.indexInContainer()+1),enyo.floatingLayer.hasNode()||enyo.floatingLayer.render(),e.addClass("enyo-fullscreen"),e.appendNodeToParent(enyo.floatingLayer.hasNode()),e.resized(),this.setFullscreenControl(e),this.setFullscreenElement(e.hasNode()))},fallbackCancelFullscreen:function(){var e,t,n=this.fullscreenControl;n&&(e=n.prevAddBefore?n.prevAddBefore.hasNode():null,t=n.parent.hasNode(),n.prevAddBefore=null,n.removeClass("enyo-fullscreen"),e?n.insertNodeInParent(t,e):n.appendNodeToParent(t),n.resized(),this.setFullscreenControl(null),this.setFullscreenElement(null))},detectFullscreenChangeEvent:function(){this.setFullscreenControl(this.requestor),this.requestor=null,enyo.Signals.send("onFullscreenChange")}},enyo.ready(function(){document.addEventListener&&(document.addEventListener("webkitfullscreenchange",enyo.bind(enyo.fullscreen,"detectFullscreenChangeEvent"),!1),document.addEventListener("mozfullscreenchange",enyo.bind(enyo.fullscreen,"detectFullscreenChangeEvent"),!1),document.addEventListener("fullscreenchange",enyo.bind(enyo.fullscreen,"detectFullscreenChangeEvent"),!1))}),enyo.fullscreen.nativeSupport()||enyo.dispatcher.features.push(function(e){"keydown"===e.type&&27===e.keyCode&&enyo.fullscreen.cancelFullscreen()}),enyo.kind({name:"enyo.Media",published:{src:"",autoplay:!1,defaultPlaybackRate:1,jumpSec:30,playbackRate:1,playbackRateHash:{fastForward:["2","4","8","16"],rewind:["-2","-4","-8","-16"],slowForward:["1/4","1/2","1"],slowRewind:["-1/2","-1"]},preload:"none",loop:!1,muted:!1,showControls:!1,volume:1},events:{onAbort:"",onCanPlay:"",onCanPlayThrough:"",onDurationChange:"",onEmptied:"",onEnded:"",onError:"",onLoadedData:"",onLoadedMetaData:"",onLoadStart:"",onPause:"",onPlay:"",onPlaying:"",onProgress:"",onRateChange:"",onSeeked:"",onSeeking:"",onStalled:"",onTimeUpdate:"",onWaiting:"",onFastforward:"",onSlowforward:"",onRewind:"",onSlowrewind:"",onJumpForward:"",onJumpBackward:"",onStart:""},handlers:{onabort:"_abort",oncanplay:"_canPlay",oncanplaythrough:"_canPlayThrough",ondurationchange:"_durationChange",onemptied:"_emptied",onended:"_ended",onerror:"_error",onloadeddata:"_loadedData",onloadedmetadata:"_loadedMetaData",onloadstart:"_loadStart",onpause:"_pause",onplay:"_play",onplaying:"_playing",onprogress:"_progress",onratechange:"_rateChange",onseeked:"_seeked",onseeking:"_seeking",onstalled:"_stalled",ontimeupdate:"_timeUpdate",onvolumechange:"_volumeChange",onwaiting:"_waiting"},_playbackRateArray:null,_speedIndex:0,create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.autoplayChanged(),this.loopChanged(),this.preloadChanged(),this.showControlsChanged(),this.srcChanged()}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.makeBubble(this,"abort"),enyo.makeBubble(this,"canplay"),enyo.makeBubble(this,"canplaythrough"),enyo.makeBubble(this,"durationchange"),enyo.makeBubble(this,"emptied"),enyo.makeBubble(this,"ended"),enyo.makeBubble(this,"error"),enyo.makeBubble(this,"loadeddata"),enyo.makeBubble(this,"loadedmetadata"),enyo.makeBubble(this,"loadstart"),enyo.makeBubble(this,"pause"),enyo.makeBubble(this,"play"),enyo.makeBubble(this,"playing"),enyo.makeBubble(this,"progress"),enyo.makeBubble(this,"ratechange"),enyo.makeBubble(this,"seeked"),enyo.makeBubble(this,"seeking"),enyo.makeBubble(this,"stalled"),enyo.makeBubble(this,"timeupdate"),enyo.makeBubble(this,"volumechange"),enyo.makeBubble(this,"waiting"),this.defaultPlaybackRateChanged(),this.mutedChanged(),this.playbackRateChanged(),this.volumeChanged()}}),srcChanged:function(){var e=enyo.path.rewrite(this.src);this.setAttribute("src",e),this.hasNode()&&this.node.load()},autoplayChanged:function(){this.setAttribute("autoplay",this.autoplay?"autoplay":null)},loopChanged:function(){this.setAttribute("loop",this.loop?"loop":null)},mutedChanged:function(){this.setAttribute("muted",this.muted?"muted":null)},preloadChanged:function(){this.setAttribute("preload",this.preload)},defaultPlaybackRateChanged:function(){this.hasNode()&&(this.node.defaultPlaybackRate=this.defaultPlaybackRate)},selectPlaybackRateArray:function(e){this._playbackRateArray=this.playbackRateHash[e]},selectPlaybackRate:function(e){return this._playbackRateArray[e]},clampPlaybackRate:function(e){return this._playbackRateArray?e%this._playbackRateArray.length:void 0},playbackRateChanged:function(){this.hasNode()&&(this.node.playbackRate=this.playbackRate)},showControlsChanged:function(){this.setAttribute("controls",this.showControls?"controls":null)},volumeChanged:function(){this.hasNode()&&(this.node.volume=this.volume)},_abort:function(){this.doEnded()},_canPlay:function(){this.doCanPlay()},_canPlayThrough:function(){this.doCanPlayThrough()},_durationChange:function(){this.doDurationChange()},_emptied:function(){this.doEmptied()},_ended:function(){this.doEnded()},_error:function(){this.doError()},_loadedData:function(){this.doLoadedData()},_loadedMetaData:function(){this.doLoadedMetaData()},_loadStart:function(){this.doLoadStart()},_pause:function(){this.doPause()},_play:function(){this.doPlay()},_playing:function(){this.doPlaying()},_progress:function(){this.doProgress()},createEventData:function(){var e=this.hasNode();return e?(0===e.currentTime&&this.doStart(),{srcElement:e,duration:e.duration,currentTime:e.currentTime,playbackRate:this.getPlaybackRate()}):{}},calcNumberValueOfPlaybackRate:function(e){var t=(e+"").split("/");return t.length>1?parseInt(t[0],10)/parseInt(t[1],10):parseInt(e,10)},_rateChange:function(e,t){var n,r=this.hasNode();r&&(t=enyo.mixin(t,this.createEventData()),n=this.calcNumberValueOfPlaybackRate(t.playbackRate),n>0&&1>n?this.doSlowforward(t):n>1?this.doFastforward(t):0>n&&n>=-1?this.doSlowrewind(t):-1>n?this.doRewind(t):1==n&&this.doPlay(t))},_stalled:function(){this.doStalled()},_seeked:function(){this.doSeeked()},_seeking:function(){this.doSeeking()},_timeUpdate:function(e,t){var n=this.hasNode();n&&(t=enyo.mixin(t,this.createEventData()))},_volumeChange:function(){this.doVolumeChange()},_waiting:function(){this.doWaiting()},play:function(){this.hasNode()&&(this.setPlaybackRate(1),this._prevCommand="play",this.node.play())},pause:function(){this.hasNode()&&(this.setPlaybackRate(1),this._prevCommand="pause",this.node.pause())},seekTo:function(e){this.hasNode()&&(this.node.currentTime=e)},getBuffered:function(){return this.hasNode()?this.node.buffered:0},getCurrentTime:function(){return this.hasNode()?this.node.currentTime:0},getDuration:function(){return this.hasNode()?this.node.duration:0},getPaused:function(){return this.hasNode()?this.node.paused:void 0},getPlayed:function(){return this.hasNode()?this.node.played:void 0},getReadyState:function(){return this.hasNode()?this.node.readyState:void 0},getSeekable:function(){return this.hasNode()?this.node.seekable:void 0},setCurrentTime:function(e){"number"==typeof e&&this.hasNode()&&(this.node.currentTime=e)},beginRewind:function(){this.node.pause(),this.startRewindJob()},_rewind:function(){var e=enyo.perfNow(),t=e-this.rewindBeginTime,n=this.calcNumberValueOfPlaybackRate(this.playbackRate),r=Math.abs(t*n)/1e3,i=this.getCurrentTime()-r;this.setCurrentTime(i),this.startRewindJob()},startRewindJob:function(){this.rewindBeginTime=enyo.perfNow(),enyo.job(this.id+"rewind",this.bindSafely("_rewind"),100)},stopRewindJob:function(){enyo.job.stop(this.id+"rewind")},getSeeking:function(){return this.hasNode()?this.node.seeking:void 0},isPaused:function(){return this.hasNode()?this.hasNode().paused:!0},fastForward:function(){var e=this.hasNode();if(e){switch(this._prevCommand){case"slowForward":this._speedIndex==this._playbackRateArray.length-1?(this.selectPlaybackRateArray("fastForward"),this._speedIndex=0,this._prevCommand="fastForward"):(this._speedIndex=this.clampPlaybackRate(this._speedIndex+1),this._prevCommand="slowForward");break;case"pause":this.selectPlaybackRateArray("slowForward"),this._speedIndex=0,this.isPaused()&&e.play(),this._prevCommand="slowForward";break;case"rewind":var t=this.calcNumberValueOfPlaybackRate(this.playbackRate);0>t?(this.selectPlaybackRateArray("slowForward"),this._prevCommand="slowForward"):(this.selectPlaybackRateArray("fastForward"),this._prevCommand="fastForward"),this._speedIndex=0;break;case"fastForward":this._speedIndex=this.clampPlaybackRate(this._speedIndex+1),this._prevCommand="fastForward";break;default:this.selectPlaybackRateArray("fastForward"),this._speedIndex=0,this._prevCommand="fastForward"}this.setPlaybackRate(this.selectPlaybackRate(this._speedIndex))}},rewind:function(){var e=this.hasNode();if(e){switch(this._prevCommand){case"slowRewind":this._speedIndex==this._playbackRateArray.length-1?(this.selectPlaybackRateArray("rewind"),this._speedIndex=0,this._prevCommand="rewind"):(this._speedIndex=this.clampPlaybackRate(this._speedIndex+1),this._prevCommand="slowRewind");break;case"pause":this.selectPlaybackRateArray("slowRewind"),this._speedIndex=0,this.isPaused()&&this.node.duration>this.node.currentTime&&e.play(),this._prevCommand="slowRewind";break;case"rewind":this._speedIndex=this.clampPlaybackRate(this._speedIndex+1),this._prevCommand="rewind";break;default:this.selectPlaybackRateArray("rewind"),this._speedIndex=0,this._prevCommand="rewind"}this.setPlaybackRate(this.selectPlaybackRate(this._speedIndex))}},setPlaybackRate:function(e){var t,n=this.hasNode();n&&(this.stopRewindJob(),this.playbackRate=e+="",t=this.calcNumberValueOfPlaybackRate(e),n.playbackRate=t,enyo.platform.webos||window.PalmSystem||0>t&&this.beginRewind())},jumpBackward:function(){var e=this.hasNode();e&&(this.setPlaybackRate(1),e.currentTime-=this.jumpSec,this._prevCommand="jumpBackward",this.doJumpBackward(enyo.mixin(this.createEventData(),{jumpSize:this.jumpSec})))},jumpForward:function(){var e=this.hasNode();e&&(this.setPlaybackRate(1),e.currentTime+=this.jumpSec,this._prevCommand="jumpForward",this.doJumpForward(enyo.mixin(this.createEventData(),{jumpSize:this.jumpSec})))},jumpToStart:function(){var e=this.hasNode();e&&(this.setPlaybackRate(1),e.pause(),e.currentTime=0,this._prevCommand="jumpToStart")},jumpToEnd:function(){var e=this.hasNode();e&&(this.setPlaybackRate(1),e.pause(),e.currentTime=this.node.duration,this._prevCommand="jumpToEnd")}}),enyo.kind({name:"enyo.Audio",kind:"enyo.Media",tag:"audio",published:{preload:"auto"}}),enyo.kind({name:"enyo.Video",kind:enyo.Control,published:{src:"",sourceComponents:null,poster:"",showControls:!1,preload:"metadata",autoplay:!1,loop:!1,fitToWindow:!1,aspectRatio:null,jumpSec:30,playbackRate:1,playbackRateHash:{fastForward:["2","4","8","16"],rewind:["-2","-4","-8","-16"],slowForward:["1/4","1/2","1"],slowRewind:["-1/2","-1"]}},events:{onFastforward:"",onSlowforward:"",onRewind:"",onSlowrewind:"",onJumpForward:"",onJumpBackward:"",onPlay:"",onStart:""},handlers:{onloadedmetadata:"metadataLoaded",ontimeupdate:"timeupdate",onratechange:"ratechange",onplay:"_play"},tag:"video",_playbackRateArray:null,_speedIndex:0,create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.posterChanged(),this.showControlsChanged(),this.preloadChanged(),this.autoplayChanged(),this.loopChanged()}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.hookupVideoEvents()}}),posterChanged:function(){if(this.poster){var e=enyo.path.rewrite(this.poster);this.setAttribute("poster",e)}else this.setAttribute("poster",null)},showControlsChanged:function(){this.setAttribute("controls",this.showControls?"controls":null)},preloadChanged:function(){this.setAttribute("preload",this.preload?this.preload:null)},autoplayChanged:function(){this.setAttribute("autoplay",this.autoplay?"autoplay":null),this._prevCommand=this.autoplay?"play":"pause"},loopChanged:function(){this.setAttribute("loop",this.loop?"loop":null)},fitToWindowChanged:function(){!this.hasNode()},srcChanged:function(){this.setAttribute("src",enyo.path.rewrite(this.src))},load:function(){this.hasNode()&&this.hasNode().load()},unload:function(){this.set("src",""),this.load()},play:function(){this.hasNode()&&(this._speedIndex=0,this.setPlaybackRate(1),this.node.play(),this._prevCommand="play")},pause:function(){this.hasNode()&&(this._speedIndex=0,this.setPlaybackRate(1),this.node.pause(),this._prevCommand="pause")},fastForward:function(){var e=this.hasNode();if(e){switch(this._prevCommand){case"slowForward":this._speedIndex==this._playbackRateArray.length-1?(this.selectPlaybackRateArray("fastForward"),this._speedIndex=0,this._prevCommand="fastForward"):(this._speedIndex=this.clampPlaybackRate(this._speedIndex+1),this._prevCommand="slowForward");break;case"pause":this.selectPlaybackRateArray("slowForward"),this._speedIndex=0,this.isPaused()&&e.play(),this._prevCommand="slowForward";break;case"rewind":var t=this.calcNumberValueOfPlaybackRate(this.playbackRate);0>t?(this.selectPlaybackRateArray("slowForward"),this._prevCommand="slowForward"):(this.selectPlaybackRateArray("fastForward"),this._prevCommand="fastForward"),this._speedIndex=0;break;case"fastForward":this._speedIndex=this.clampPlaybackRate(this._speedIndex+1),this._prevCommand="fastForward";break;default:this.selectPlaybackRateArray("fastForward"),this._speedIndex=0,this._prevCommand="fastForward"}this.setPlaybackRate(this.selectPlaybackRate(this._speedIndex))}},rewind:function(){var e=this.hasNode();if(e){switch(this._prevCommand){case"slowRewind":this._speedIndex==this._playbackRateArray.length-1?(this.selectPlaybackRateArray("rewind"),this._speedIndex=0,this._prevCommand="rewind"):(this._speedIndex=this.clampPlaybackRate(this._speedIndex+1),this._prevCommand="slowRewind");break;case"pause":this.selectPlaybackRateArray("slowRewind"),this._speedIndex=0,this.isPaused()&&this.node.duration>this.node.currentTime&&e.play(),this._prevCommand="slowRewind";break;case"rewind":this._speedIndex=this.clampPlaybackRate(this._speedIndex+1),this._prevCommand="rewind";break;default:this.selectPlaybackRateArray("rewind"),this._speedIndex=0,this._prevCommand="rewind"}this.setPlaybackRate(this.selectPlaybackRate(this._speedIndex))}},jumpBackward:function(){var e=this.hasNode();e&&(this.setPlaybackRate(1),e.currentTime-=this.jumpSec,this._prevCommand="jumpBackward",this.doJumpBackward(enyo.mixin(this.createEventData(),{jumpSize:this.jumpSec})))},jumpForward:function(){var e=this.hasNode();e&&(this.setPlaybackRate(1),e.currentTime+=parseInt(this.jumpSec,10),this._prevCommand="jumpForward",this.doJumpForward(enyo.mixin(this.createEventData(),{jumpSize:this.jumpSec})))},jumpToStart:function(){var e=this.hasNode();e&&(this.setPlaybackRate(1),e.pause(),e.currentTime=0,this._prevCommand="jumpToStart")},jumpToEnd:function(){var e=this.hasNode();e&&(this.setPlaybackRate(1),e.pause(),e.currentTime=this.node.duration,this._prevCommand="jumpToEnd")},selectPlaybackRateArray:function(e){this._playbackRateArray=this.playbackRateHash[e]},clampPlaybackRate:function(e){return this._playbackRateArray?e%this._playbackRateArray.length:void 0},selectPlaybackRate:function(e){return this._playbackRateArray[e]},setPlaybackRate:function(e){var t,n=this.hasNode();n&&(this.stopRewindJob(),this.playbackRate=e+="",t=this.calcNumberValueOfPlaybackRate(e),n.playbackRate=t,enyo.platform.webos||window.PalmSystem||0>t&&this.beginRewind())},isPaused:function(){return this.hasNode()?this.hasNode().paused:!0},getCurrentTime:function(){return this.hasNode()?this.hasNode().currentTime:0},getBufferedTimeRange:function(){return this.hasNode()?this.hasNode().buffered:0},setCurrentTime:function(e){"number"==typeof e&&this.hasNode()&&(this.node.currentTime=e)},getDuration:function(){return this.hasNode()?this.hasNode().duration:0},getReadyState:function(){return this.hasNode()?this.hasNode().readyState:-1},getSeeking:function(){return this.hasNode()?this.hasNode().seeking:-1},beginRewind:function(){this.node.pause(),this.startRewindJob()},_rewind:function(){var e=enyo.perfNow(),t=e-this.rewindBeginTime,n=this.calcNumberValueOfPlaybackRate(this.playbackRate),r=Math.abs(t*n)/1e3,i=this.getCurrentTime()-r;this.setCurrentTime(i),this.startRewindJob()},startRewindJob:function(){this.rewindBeginTime=enyo.perfNow(),enyo.job(this.id+"rewind",this.bindSafely("_rewind"),100)},stopRewindJob:function(){enyo.job.stop(this.id+"rewind")},calcNumberValueOfPlaybackRate:function(e){var t=(e+"").split("/");return t.length>1?parseInt(t[0],10)/parseInt(t[1],10):parseInt(e,10)},metadataLoaded:function(e,t){var n=this.hasNode();this.setAspectRatio("none"),n&&n.videoWidth&&n.videoHeight&&(this.setAspectRatio(n.videoWidth/n.videoHeight+":1"),t=enyo.mixin(t,this.createEventData()))},timeupdate:function(e,t){var n=this.hasNode();n&&(t=enyo.mixin(t,this.createEventData()))},ratechange:function(e,t){var n,r=this.hasNode();r&&(t=enyo.mixin(t,this.createEventData()),n=this.calcNumberValueOfPlaybackRate(t.playbackRate),n>0&&1>n?this.doSlowforward(t):n>1?this.doFastforward(t):0>n&&n>=-1?this.doSlowrewind(t):-1>n?this.doRewind(t):1==n&&this.doPlay(t))},createEventData:function(){var e=this.hasNode();return e?(0===e.currentTime&&this.doStart(),{srcElement:e,duration:e.duration,currentTime:e.currentTime,playbackRate:this.getPlaybackRate()}):{}},_play:function(e,t){var n=this.hasNode();n&&(t=enyo.mixin(t,this.createEventData()),this.doPlay(t))},hookupVideoEvents:function(){enyo.makeBubble(this,"loadstart","emptied","canplaythrough","ended","ratechange","progress","stalled","playing","durationchange","volumechange","suspend","loadedmetadata","waiting","timeupdate","abort","loadeddata","seeking","play","error","canplay","seeked","pause")}}),function(e){e.RepeaterChildSupport={name:"RepeaterChildSupport",selected:!1,selectedChanged:e.inherit(function(e){return function(){if(this.repeater.selection){this.addRemoveClass(this.selectedClass||"selected",this.selected);var n=this.repeater.collection.indexOf(this.model);this.selected&&!this.repeater.isSelected(this.model)?this.repeater.select(n):!this.selected&&this.repeater.isSelected(this.model)&&this.repeater.deselect(n)}e.apply(this,arguments)}}),decorateEvent:e.inherit(function(e){return function(n,r){r.model=this.model,r.child=this,r.index=this.repeater.collection.indexOf(this.model),e.apply(this,arguments)}}),_selectionHandler:function(){this.repeater.selection&&!this.get("disabled")&&this.set("selected",!this.selected)},createClientComponents:e.inherit(function(){return function(e){this.createComponents(e,{owner:this})}}),dispatchEvent:e.inherit(function(n){return function(r,i){return i._fromRepeaterChild||~e.indexOf(r,this.repeater.selectionEvents)&&(this._selectionHandler(),i._fromRepeaterChild=!0),n.apply(this,arguments)}}),constructed:e.inherit(function(n){return function(){n.apply(this,arguments);var r=this.repeater,i=r.selectionProperty;if(i){var s=this.binding({from:".model."+i,to:".selected",oneWay:!1,kind:e.BooleanBinding});this._selectionBindingId=s.id}}}),destroy:e.inherit(function(n){return function(){if(this._selectionBindingId){var r=e.Binding.find(this._selectionBindingId);r&&r.destroy()}n.apply(this,arguments)}}),_selectionBindingId:null}}(enyo),enyo.kind({name:"enyo.DataRepeater",selection:!0,multipleSelection:!1,selectionClass:"selection-enabled",multipleSelectionClass:"multiple-selection-enabled",selectionProperty:"",selectionEvents:"ontap",childBindingDefaults:null,initComponents:function(){this.initContainer();var e=this.kindComponents||this.components||[],t=this.getInstanceOwner(),n=this.defaultProps?enyo.clone(this.defaultProps):this.defaultProps={};n.bindingTransformOwner=this,n.bindingDefaults=this.childBindingDefaults,e&&(e.length>1?n.components=e:enyo.mixin(n,e[0]),n.repeater=this,n.owner=t,n.mixins=n.mixins?n.mixins.concat(this.childMixins):this.childMixins)},constructor:enyo.inherit(function(e){return function(){this._selection=[];var n=this.selectionEvents;this.selectionEvents="string"==typeof n?n.split(" "):n;var r=this._handlers=enyo.clone(this._handlers);for(var i in r)r[i]=this.bindSafely(r[i]);e.apply(this,arguments)}}),create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.collectionChanged(),this.selectionChanged()}}),observers:{selectionChanged:["multipleSelection"]},selectionChanged:function(){this.addRemoveClass(this.selectionClass,this.selection),this.addRemoveClass(this.multipleSelectionClass,this.multipleSelection&&this.selection)},reset:function(){var e=this.get("data");this.destroyClientControls();for(var t,n=0;t=e.at(n);++n)this.add(t,n);this.hasReset=!0},refresh:function(){return this.hasReset?(this.startJob("refreshing",function(){for(var e,t,n=this.get("data"),r=this.getClientControls(),i=0;t=n.at(i);++i)e=r[i],e?e.set("model",t):this.add(t,i);this.prune()},16),void 0):this.reset()},rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.collection&&this.collection.length&&this.reset(),this.hasRendered=!0}}),add:function(e,t){var n=this.createComponent({model:e,index:t});this.generated&&!this.batching&&n.render()},remove:function(e){var t=this.getClientControls(),n=t[e||Math.abs(t.length-1)];n&&n.destroy()},prune:function(){var e,t=this.getClientControls(),n=this.collection?this.collection.length:0;if(t.length>n){e=t.slice(n);for(var r,i=0;r=e[i];++i)r.destroy()}},initContainer:function(){var e=this.get("containerOptions"),t=e.name||(e.name=this.containerName);this.createChrome([e]),this.discoverControlParent(),t!=this.containerName&&(this.$[this.containerName]=this.$[t])},handlers:{onSelected:"childSelected",onDeselected:"childDeselected"},_handlers:{add:"modelsAdded",remove:"modelsRemoved",reset:"refresh"},collectionChanged:function(e){var t=this.collection;"string"==typeof t&&(t=this.collection=enyo.getPath(t)),t&&this.initCollection(t,e)},initCollection:function(e,t){var n;if(e&&e.addListener)for(n in this._handlers)e.addListener(n,this._handlers[n]);if(t&&t.removeListener)for(n in this._handlers)t.removeListener(n,this._handlers[n])},modelsAdded:function(e,t,n){if(e==this.collection){this.set("batching",!0);for(var r,i=0;!isNaN(r=n.records[i]);++i)this.add(e.at(r),r);this.set("batching",!1)}},modelsRemoved:function(e,t,n){if(e==this.collection)for(var r,i=enyo.keys(n.records),s=i.length-1;r=i[s];--s)this.remove(r),this._select(r,n.records[r],!1)},batchingChanged:function(e,t){this.generated&&!1===t&&this.$[this.containerName].render()},getChildForIndex:function(e){return this.childForIndex(e)},childForIndex:function(e){return this.$.container.children[e]},data:function(){return this.collection},_select:function(e,t,n){if(this.selection){var r=this.getChildForIndex(e),i=this._selection,s=enyo.indexOf(t,i);if(n){if(-1==s){if(!this.multipleSelection)for(;i.length;)s=this.collection.indexOf(i.pop()),this.deselect(s);i.push(t)}}else s>=0&&i.splice(s,1);r&&r.set("selected",n),this.selectionProperty&&t&&(i=this.selectionProperty)&&t.set(i,n),this.notifyObservers("selected")}},select:function(e){this._select(e,this.collection.at(e),!0)},deselect:function(e){this._select(e,this.collection.at(e),!1)},isSelected:function(e){return!!~enyo.indexOf(e,this._selection)},selectAll:function(){if(this.multipleSelection){this.stopNotifications();var e=this._selection,t=this.collection?this.collection.length:0;e.length=0;for(var n=0;t>n;++n)this.select(n);this.startNotifications()}},deselectAll:function(){if(this.selection){this.stopNotifications();for(var e,t,n=this._selection;n.length;)e=n.pop(),t=this.collection.indexOf(e),this.deselect(t);this.startNotifications()}},selected:function(){return(this.multipleSelection?this._selection:this._selection[0])||null},dataChanged:function(){this.collection&&this.hasRendered&&this.reset()},computed:{selected:[],data:["controller","collection"]},noDefer:!0,childMixins:[enyo.RepeaterChildSupport],controlParentName:"container",containerName:"container",containerOptions:{name:"container",classes:"enyo-fill enyo-data-repeater-container"},batching:!1,_selection:null}),enyo.DataRepeater.concat=function(e,t){var n=e.prototype||e;t.childMixins&&(n.childMixins=n.childMixins?enyo.merge(n.childMixins,t.childMixins):t.childMixins.slice(),delete t.childMixins)},enyo.kind({name:"enyo.DataList",kind:enyo.DataRepeater,scrollerOptions:null,orientation:"vertical",pageSizeMultiplier:null,fixedChildSize:null,allowTransitions:!0,renderDelay:250,reset:function(){this.get("absoluteShowing")?this.generated&&this.$.scroller.generated&&this.delegate.reset(this):this._addToShowingQueue("reset",this.reset)},refresh:function(){this.get("absoluteShowing")?this.hasRendered&&this.delegate.refresh(this):this._addToShowingQueue("refresh",this.refresh)},scrollToIndex:function(e){var t=this.collection?this.collection.length:0;e>=0&&t>e&&(this.get("absoluteShowing")?this.delegate.scrollToIndex(this,e):this._addToShowingQueue("scrollToIndex",function(){this.delegate.scrollToIndex(this,e)}))},constructor:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.metrics={},this.metrics.pages={},null===this.pageSizeMultiplier||isNaN(this.pageSizeMultiplier)||(this.pageSizeMultiplier=Math.max(1.2,this.pageSizeMultiplier))}}),create:enyo.inherit(function(e){return function(){this.allowTransitionsChanged(),this.delegate=this.ctor.delegates[this.orientation]||this.base.delegates.vertical,this.delegate.initList&&this.delegate.initList(this),e.apply(this,arguments),this.pages=[this.$.page1,this.$.page2]}}),render:enyo.inherit(function(e){return function(){this.$.scroller.canGenerate=!1,this.$.scroller.teardownRender(),e.apply(this,arguments)}}),rendered:function(){if(this.get("absoluteShowing")){var e=function(){this.$.scroller.canGenerate=!0,this.$.scroller.render(),this.delegate.rendered(this),this.hasRendered=!0,this.addClass("rendered"),this.didRender&&this.didRender()};null===this.renderDelay?e.call(this):this.startJob("rendering",e,this.renderDelay)}else this._addToShowingQueue("rendered",this.rendered)},_absoluteShowingChanged:function(){if(this.get("absoluteShowing")&&this._showingQueue&&this._showingQueue.length){var e,t,n=this._showingQueue,r=this._showingQueueMethods;this._showingQueue=null,this._showingQueueMethods=null;do t=n.shift(),e=r[t],e.call(this);while(n.length)}},_addToShowingQueue:function(e,t){var n=this._showingQueue||(this._showingQueue=[]),r=this._showingQueueMethods||(this._showingQueueMethods={}),i=enyo.indexOf(e,n);i>=0&&n.splice(i,1),n.push(e),r[e]=t},remove:function(){},modelsAdded:function(e,t,n){e===this.collection&&this.$.scroller.canGenerate&&(this.get("absoluteShowing")?this.delegate.modelsAdded(this,n):this._addToShowingQueue("refresh",function(){this.refresh()}))},modelsRemoved:enyo.inherit(function(e){return function(n,r,i){n===this.collection&&this.$.scroller.canGenerate&&(this.get("absoluteShowing")?this.delegate.modelsRemoved(this,i):this._addToShowingQueue("refresh",function(){this.refresh()})),e.apply(this,arguments)}}),destroy:enyo.inherit(function(e){return function(){this.delegate&&this.delegate.destroyList&&this.delegate.destroyList(this),this._showingQueue=null,this._showingQueueMethods=null,e.apply(this,arguments)}}),initContainer:enyo.inherit(function(e){return function(){var n=enyo.clone(this.get("containerOptions")),r=this.get("scrollerOptions");r&&enyo.mixin(n,r,{exists:!0}),this.set("containerOptions",n),e.apply(this,arguments)}}),didScroll:function(e,t){return this.hasRendered&&this.collection&&((this.heightNeedsUpdate||this.widthNeedsUpdate)&&(this.heightNeedsUpdate=this.widthNeedsUpdate=!1,this.refresh()),this.delegate.didScroll(this,t)),!0},didResize:function(e,t){this.get("absoluteShowing")?this.hasRendered&&this.collection&&((this.heightNeedsUpdate||this.widthNeedsUpdate)&&(this.heightNeedsUpdate=this.widthNeedsUpdate=!1,this.refresh()),this.delegate.didResize(this,t)):this._addToShowingQueue("didResize",this.didResize)},showingChangedHandler:enyo.inherit(function(e){return function(){return this.set("absoluteShowing",this.getAbsoluteShowing(!0)),e.apply(this,arguments)}}),childForIndex:function(e){return this.delegate.childForIndex(this,e)},allowTransitionsChanged:function(){this.addRemoveClass("transitions",this.allowTransitions)},containerOptions:{name:"scroller",kind:"enyo.Scroller",components:[{name:"active",classes:"active",components:[{name:"page1",classes:"page page1"},{name:"page2",classes:"page page2"},{name:"buffer",classes:"buffer"}]}],canGenerate:!1,classes:"enyo-fit enyo-data-list-scroller"},noDefer:!0,absoluteShowing:!0,classes:"enyo-data-list",controlParentName:"",containerName:"scroller",handlers:{onScroll:"didScroll",onresize:"didResize"},observers:{_absoluteShowingChanged:["absoluteShowing"]},mixins:[enyo.RegisteredEventSupport],statics:{delegates:{}},pages:null}),enyo.DataList.subclass=function(e){e.delegates=enyo.clone(e.prototype.base.delegates||this.delegates)},enyo.DataList.delegates.vertical={pageSizeMultiplier:2,initList:function(e){e.posProp="top",e.upperProp="top",e.lowerProp="bottom",e.psizeProp="height",e.ssizeProp="width";var t=e.scrollerOptions=e.scrollerOptions?enyo.clone(e.scrollerOptions):{};t.vertical="scroll"==t.vertical?"scroll":"auto",t.horizontal=t.horizontal||"hidden"},reset:function(e){for(var t,n=0;t=e.pages[n];++n)this.generatePage(e,t,n);this.adjustPagePositions(e),this.adjustBuffer(e),e.hasReset=!0,e.$.scroller.scrollTo(0,0)},pagesByPosition:function(e){var t=e.metrics.pages,n=e.pagePositions||(e.pagePositions={}),r=e.upperProp,i=e.$.page1.index,s=e.$.page2.index;return n.firstPage=t[i][r]<t[s][r]?e.$.page1:e.$.page2,n.lastPage=n.firstPage===e.$.page1?e.$.page2:e.$.page1,n},refresh:function(e){if(!e.hasReset)return this.reset(e);var t=Math.max(this.pageCount(e)-1,0),n=e.$.page1.index,r=e.$.page2.index;n>t&&(n=t),r>t&&(r=n+1>t&&n-1>=0?n-1:n+1),e.$.page1.index=n,e.$.page2.index=r;for(var i,s=0;i=e.pages[s];++s)this.generatePage(e,i,i.index);this.adjustPagePositions(e),this.adjustBuffer(e)},rendered:function(e){e.$.scroller.addScrollListener&&(e.usingScrollListener=!0,e.$.scroller.addScrollListener(enyo.bindSafely(this,"scrollHandler",e))),this.updateBounds(e),e.collection&&e.collection.length&&this.reset(e)},generatePage:function(e,t,n){t.index=n;var r,i=e.collection,s=e.metrics,o=this.controlsPerPage(e);t.start=o*n,t.end=Math.min(i.length-1,t.start+o-1),e.controlParent=t;for(var u=t.start;t.end>=u&&i.length>u;++u)r=t.children[u-t.start]||e.createComponent({}),r.teardownRender(),r.stopNotifications(),r.set("model",i.at(u)),r.set("index",u),r.set("selected",e.isSelected(r.model)),r.startNotifications(),r.canGenerate=!0;for(u-=t.start;t.children.length>u;++u)r=t.children[u],r.teardownRender(),r.canGenerate=!1;t.render(),s=s.pages[n]||(s.pages[n]={}),s.height=this.pageHeight(e,t),s.width=this.pageWidth(e,t),this.childSize(e)},childSize:function(e){if(!e.fixedChildSize){var t,n,r=e.$.page1.index,i=e.psizeProp,s=e.$.page1.node||e.$.page1.hasNode();r>=0&&s&&(n=e.metrics.pages[r],t=n?n[i]:0,e.childSize=Math.floor(t/(s.children.length||1)))}return e.fixedChildSize||e.childSize||(e.childSize=100)},controlsPerPage:function(e){var t=e._updatedControlsPerPage,n=e._updatedBounds,r=e.childSize,i=e.controlsPerPage,s=e.psizeProp,o=e.pageSizeMultiplier||this.pageSizeMultiplier,u=this[s];return(!t||n>t)&&(r=this.childSize(e),i=e.controlsPerPage=Math.ceil(u(e)*o/r+1),e._updatedControlsPerPage=enyo.perfNow()),e.controlsPerPage=i},pageForIndex:function(e,t){var n=e.controlsPerPage||this.controlsPerPage(e);return Math.floor(t/(n||1))},scrollToIndex:function(e,t){var n=this.childForIndex(e,t),r=this.pageForIndex(e,t);0>r||r>this.pageCount(e)||(n?e.$.scroller.scrollIntoView(n,this.pagePosition(e,r)):(this.resetToPosition(e,this.pagePosition(e,r)),enyo.asyncMethod(function(){e.scrollToIndex(t)})))},pageHeight:function(e,t){var n=t.node.offsetHeight,r=e.metrics.pages[t.index],i=e.collection?e.collection.length:0;return 0===n&&i&&t.node.children.length&&(e.heightNeedsUpdate=!0,n=r?r.height:0),n},pageWidth:function(e,t){var n=t.node.offsetWidth,r=e.metrics.pages[t.index],i=e.collection?e.collection.length:0;return 0===n&&i&&t.node.children.length&&(e.widthNeedsUpdate=!0,n=r?r.width:0),n},modelsAdded:function(e,t){if(!e.hasReset)return this.reset(e);for(var n,r,i,s,o=e.$.page1.index||(e.$.page1.index=0),u=e.$.page2.index||(e.$.page2.index=1),a=0;(s=t.records[a])>=0;++a)if(i=this.pageForIndex(e,s),i==o)n=!0;else if(i==u)r=!0;else if(i>u)break;n&&this.generatePage(e,e.$.page1,o),r&&this.generatePage(e,e.$.page2,u),(n||r)&&this.adjustPagePositions(e),this.adjustBuffer(e)},childForIndex:function(e,t){var n=this.pageForIndex(e,t),r=e.$.page1,i=e.$.page2;if(n=n==r.index&&r||n==i.index&&i)for(var s,o=0;s=n.children[o];++o)if(s.index==t)return s},modelsRemoved:function(e,t){for(var n,r,i=enyo.keys(t.records),s=e.$.page1.index,o=e.$.page2.index,u=i.length-1;(r=i[u])>=0;--u)if(n=this.pageForIndex(e,r),n==s||n==o){this.refresh(e);var a=this.pagesByPosition(e);this.scrollToIndex(e,a.firstPage.start);break}},adjustBuffer:function(e){var t,n=this.pageCount(e),r=this.defaultPageSize(e),i=0,s=e.psizeProp,o=e.ssizeProp,u=e.$.buffer.node||e.$.buffer.hasNode();if(u){if(0!==n)for(var a=0;n>a;++a)t=e.metrics.pages[a],i+=t&&t[s]||r;e.bufferSize=i,u.style[s]=i+"px",u.style[o]=this[o](e)+"px"}},adjustPagePositions:function(e){for(var t,n=0;t=e.pages[n];++n){var r=t.index,i=this.pagePosition(e,t.index),s=e.metrics.pages[r]||(e.metrics.pages[r]={}),o=e.posProp,u=e.upperProp,a=e.lowerProp,f=e.psizeProp;t.node.style[o]=i+"px",t[u]=s[u]=i,t[a]=s[a]=s[f]+i}this.setScrollThreshold(e)},pagePosition:function(e,t){for(var n,r=e.metrics.pages,i=this.defaultPageSize(e),s=0,o=e.psizeProp;t>0;)n=r[--t],s+=n&&n[o]?n[o]:i;return s},defaultPageSize:function(e){var t=e.controlsPerPage||this.controlsPerPage(e);return t*(e.fixedChildSize||e.childSize||100)},pageCount:function(e){var t=e.controlsPerPage||this.controlsPerPage(e),n=e.collection?e.collection.length:0;return Math.ceil(n/(t||1))},getScrollPosition:function(e){return e.$.scroller.getScrollTop()},scrollHandler:function(e,t){var n=this.pageCount(e)-1,r=this.pagesByPosition(e);1!==t.xDir&&1!==t.yDir||r.lastPage.index===n?-1!==t.xDir&&-1!==t.yDir||0===r.firstPage.index||(this.generatePage(e,r.lastPage,r.firstPage.index-1),this.adjustPagePositions(e),e.triggerEvent("paging",{start:r.firstPage.start,end:r.lastPage.end,action:"scroll"})):(this.generatePage(e,r.firstPage,r.lastPage.index+1),this.adjustPagePositions(e),this.adjustBuffer(e),e.triggerEvent("paging",{start:r.firstPage.start,end:r.lastPage.end,action:"scroll"}))},setScrollThreshold:function(e){var t=e.scrollThreshold||(e.scrollThreshold={}),n=e.metrics.pages,r=this.pagesByPosition(e),i=r.firstPage.index,s=r.lastPage.index,o=this.pageCount(e)-1,u=e.lowerProp,a=e.upperProp,f="top"==a?this.height:this.width;t[a]=0===i?void 0:n[i][a]+this.childSize(e),t[u]=s>=o?void 0:n[s][u]-f(e)-this.childSize(e),e.usingScrollListener&&e.$.scroller.setScrollThreshold(t)},resetToPosition:function(e,t){if(t>=0&&e.bufferSize>=t){var n=Math.ceil(t/this.defaultPageSize(e)),r=this.pageCount(e)-1,i=this.pagesByPosition(e);(i.firstPage[e.upperProp]>=t||t>=i.lastPage[e.lowerProp])&&(e.$.page1.index=n=Math.min(n,r),e.$.page2.index=n===r?n-1:n+1,this.refresh(e),e.triggerEvent("paging",{start:e.$.page1.start,end:e.$.page2.end,action:"reset"}))}},didScroll:function(e,t){if(!e.usingScrollListener){var n=e.scrollThreshold,r=t.scrollBounds,i=e.lowerProp,s=e.upperProp;r[s]=this.getScrollPosition(e),1===r.xDir||1===r.yDir?!isNaN(n[i])&&r[s]>=n[i]&&this.scrollHandler(e,r):(-1===r.yDir||-1===r.xDir)&&!isNaN(n[s])&&r[s]<=n[s]&&this.scrollHandler(e,r)}},didResize:function(e){e._updateBounds=!0,this.updateBounds(e),this.refresh(e)},height:function(e){return e._updateBounds&&this.updateBounds(e),e.boundsCache.height},width:function(e){return e._updateBounds&&this.updateBounds(e),e.boundsCache.width},updateBounds:function(e){e.boundsCache=e.getBounds(),e._updatedBounds=enyo.perfNow(),e._updateBounds=!1}},function(e){var t=e.clone(e.DataList.delegates.vertical);e.kind.extendMethods(t,{initList:e.inherit(function(t){return function(n){t.apply(this,arguments),n.addClass("horizontal"),n.posProp=n.rtl?"right":"left",n.upperProp="left",n.lowerProp="right",n.psizeProp="width",n.ssizeProp="height";var r=n.scrollerOptions=n.scrollerOptions?e.clone(n.scrollerOptions):{};r.vertical="hidden",r.horizontal="scroll"==r.horizontal?"scroll":"auto"}}),destroyList:function(e){e&&e.removeClass("horizontal")},getScrollPosition:function(e){return e.$.scroller.getScrollLeft()},adjustBuffer:e.inherit(function(e){return function(t){e.apply(this,arguments);var n=t.$.active.node||t.$.active.hasNode(),r=t.bufferSize;n&&(n.style.width=r+"px")}})},!0),e.DataList.delegates.horizontal=t}(enyo),enyo.kind({name:"enyo.DataGridList",kind:enyo.DataList,spacing:10,minWidth:100,minHeight:100,constructor:enyo.inherit(function(e){return function(){var n=this.orientation;this.orientation="vertical"==n?"verticalGrid":"horizontal"==n?"horizontalGrid":n;var r=this.spacing;return this.spacing=0===r%2?r:Math.max(r-1,0),e.apply(this,arguments)}}),initComponents:enyo.inherit(function(e){return function(){e.apply(this,arguments);var n=this.defaultProps,r=" item";n.classes=(n.classes||"")+r}}),showingChanged:enyo.inherit(function(e){return function(){e.apply(this,arguments);var n=this.collection?this.collection.length:0;this.$.scroller.generated&&n&&this.showing&&this.didResize()}}),noDefer:!0,classes:"enyo-data-grid-list"}),enyo.kind({name:"enyo.DataTable",kind:"enyo.DataRepeater",defaultKind:"enyo.TableRow",style:"display: table;",containerOptions:{kind:"enyo.Table",name:"container",style:"width: 100%;"}}),function(e){var t=e.clone(e.DataGridList.delegates.vertical);e.kind.extendMethods(t,{rendered:function(e){this.updateMetrics(e),e.collection&&e.collection.length&&this.reset(e)},reset:e.inherit(function(e){return function(t){e.apply(this,arguments),t.hasReset&&!t.hasClass("reset")&&(t.canAddResetClass=!0)}}),pageHeight:function(e,t){var n,r=t.node||t.hasNode(),i=r.children.length,s=e.metrics.pages[t.index];return n=(Math.floor(i/e.columns)+(i%e.columns?1:0))*(e.tileHeight+e.spacing),r.style.height=n+"px",s.height=n,n},generatePage:e.inherit(function(e){return function(t,n){e.apply(this,arguments),this.layout(t,n)}}),pageWidth:function(e,t){var n=e.boundsCache.width,r=t.node||t.hasNode(),i=e.metrics.pages[t.index];return r.style.width=n+"px",i.width=n,n},defaultPageSize:function(e){return Math.ceil(this.controlsPerPage(e)/e.columns)*(e.tileHeight+e.spacing)},updateMetrics:function(e){this.updateBounds(e);var t=e.boundsCache,n=t.width,r=e.spacing,i=e.minWidth,s=e.minHeight;e.columns=Math.max(Math.floor((n-r)/(i+r)),1),e.tileWidth=(n-r*(e.columns+1))/e.columns,e.tileHeight=s*(e.tileWidth/i),this.controlsPerPage(e)},controlsPerPage:e.inherit(function(e){return function(t){var n=t._updatedControlsPerPage,r=e.apply(this,arguments);return n!=t._updatedControlsPerPage&&(r=t.controlsPerPage=r*t.columns),r}}),childSize:function(e){return e.childSize=e.tileHeight+e.spacing},layout:function(e,t){e.canAddResetClass&&(e.addClass("reset"),delete e.canAddResetClass);var n,r=e.columns,i=e.spacing,s=e.tileWidth,o=e.tileHeight,u=0,a=t,f=a.children;if(f.length)for(var l,c=0;l=f[c];++c)n=c%r,l.addStyles("top: "+Math.round(i+u*(o+i))+"px; "+(e.rtl?"right: ":"left: ")+Math.round(i+n*(s+i))+"px; "+"width: "+Math.round(s)+"px; "+"height: "+Math.round(o)+"px"),0===(c+1)%r&&++u},adjustBuffer:function(e){var t,n=this.pageCount(e),r=this.defaultPageSize(e),i=0,s=e.psizeProp,o=e.ssizeProp,u=e.$.buffer.node||e.$.buffer.hasNode();if(u){for(var a=0;n>a;++a)t=e.metrics.pages[a],i+=t&&t[s]||r;i+=e.spacing,e.bufferSize=i,u.style[s]=i+"px",u.style[o]=this[o](e)+"px"}},didResize:function(e){var t=e.boundsCache;e._updateBounds=!0,this.updateMetrics(e),(t.left!==e.boundsCache.left||t.top!==e.boundsCache.top||t.width!==e.boundsCache.width||t.height!==e.boundsCache.height)&&this.refresh(e)}},!0),e.DataGridList.delegates.verticalGrid=t}(enyo);enyo&&enyo.version&&(enyo.version.layout="2.4.0"),enyo.kind({name:"enyo.ContextualLayout",kind:"Layout",adjustPosition:function(){if(this.container.showing&&this.container.hasNode()){this.resetPositioning();var e=this.getViewWidth(),t=this.getViewHeight(),n=this.container.vertFlushMargin,r=t-this.container.vertFlushMargin,i=this.container.horizFlushMargin,s=e-this.container.horizFlushMargin;if(this.offset.top+this.offset.height<n||this.offset.top>r){if(this.applyVerticalFlushPositioning(i,s))return;if(this.applyHorizontalFlushPositioning(i,s))return;if(this.applyVerticalPositioning())return}else if(this.offset.left+this.offset.width<i||this.offset.left>s)if(this.applyHorizontalPositioning())return;var o=this.getBoundingRect(this.container.node);if(o.width>this.container.widePopup){if(this.applyVerticalPositioning())return}else if(o.height>this.container.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.container.addClass("vertical");var e=this.getBoundingRect(this.container.node),t=this.getViewHeight();return this.container.floating?this.offset.top<t/2?(this.applyPosition({top:this.offset.top+this.offset.height,bottom:"auto"}),this.container.addClass("below")):(this.applyPosition({top:this.offset.top-e.height,bottom:"auto"}),this.container.addClass("above")):e.top+e.height>t&&t-e.bottom<e.top-e.height?this.container.addClass("above"):this.container.addClass("below"),e=this.getBoundingRect(this.container.node),e.top+e.height>t||e.top<0?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var e=this.getBoundingRect(this.container.node),t=this.getViewWidth();if(this.container.floating){var n=this.offset.left+this.offset.width/2-e.width/2;n+e.width>t?(this.applyPosition({left:this.offset.left+this.offset.width-e.width}),this.container.addClass("left")):n<0?(this.applyPosition({left:this.offset.left}),this.container.addClass("right")):this.applyPosition({left:n})}else{var r=this.offset.left+this.offset.width/2-e.left-e.width/2;e.right+r>t?(this.applyPosition({left:this.offset.left+this.offset.width-e.right}),this.container.addRemoveClass("left",!0)):e.left+r<0?this.container.addRemoveClass("right",!0):this.applyPosition({left:r})}return!0},applyVerticalFlushPositioning:function(e,t){if(!this.initVerticalPositioning())return!1;var n=this.getBoundingRect(this.container.node),r=this.getViewWidth();return this.offset.left+this.offset.width/2<e?(this.offset.left+this.offset.width/2<this.container.horizBuffer?this.applyPosition({left:this.container.horizBuffer+(this.container.floating?0:-n.left)}):this.applyPosition({left:this.offset.width/2+(this.container.floating?this.offset.left:0)}),this.container.addClass("right"),this.container.addClass("corner"),!0):this.offset.left+this.offset.width/2>t?(this.offset.left+this.offset.width/2>r-this.container.horizBuffer?this.applyPosition({left:r-this.container.horizBuffer-n.right}):this.applyPosition({left:this.offset.left+this.offset.width/2-n.right}),this.container.addClass("left"),this.container.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var e=this.getBoundingRect(this.container.node),t=this.getViewWidth();return this.container.floating?this.offset.left+this.offset.width<t/2?(this.applyPosition({left:this.offset.left+this.offset.width}),this.container.addRemoveClass("left",!0)):(this.applyPosition({left:this.offset.left-e.width}),this.container.addRemoveClass("right",!0)):this.offset.left-e.width>0?(this.applyPosition({left:this.offset.left-e.left-e.width}),this.container.addRemoveClass("right",!0)):(this.applyPosition({left:this.offset.width}),this.container.addRemoveClass("left",!0)),this.container.addRemoveClass("horizontal",!0),e=this.getBoundingRect(this.container.node),e.left<0||e.left+e.width>t?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var e=this.getBoundingRect(this.container.node),t=this.getViewHeight(),n=this.offset.top+this.offset.height/2;return this.container.floating?n>=t/2-.05*t&&n<=t/2+.05*t?this.applyPosition({top:this.offset.top+this.offset.height/2-e.height/2,bottom:"auto"}):this.offset.top+this.offset.height<t/2?(this.applyPosition({top:this.offset.top,bottom:"auto"}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top-e.height+this.offset.height*2,bottom:"auto"}),this.container.addRemoveClass("low",!0)):n>=t/2-.05*t&&n<=t/2+.05*t?this.applyPosition({top:(this.offset.height-e.height)/2}):this.offset.top+this.offset.height<t/2?(this.applyPosition({top:-this.offset.height}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:e.top-e.height-this.offset.top+this.offset.height}),this.container.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(e,t){if(!this.initHorizontalPositioning())return!1;var n=this.getBoundingRect(this.container.node),r=this.getViewHeight();return this.container.floating?this.offset.top<r/2?(this.applyPosition({top:this.offset.top+this.offset.height/2}),this.container.addRemoveClass("high",!0)):(this.applyPosition({top:this.offset.top+this.offset.height/2-n.height}),this.container.addRemoveClass("low",!0)):n.top+n.height>r&&r-n.bottom<n.top-n.height?(this.applyPosition({top:n.top-n.height-this.offset.top-this.offset.height/2}),this.container.addRemoveClass("low",!0)):(this.applyPosition({top:this.offset.height/2}),this.container.addRemoveClass("high",!0)),this.offset.left+this.offset.width<e?(this.container.addClass("left"),this.container.addClass("corner"),!0):this.offset.left>t?(this.container.addClass("right"),this.container.addClass("corner"),!0):!1},getBoundingRect:function(e){var t=e.getBoundingClientRect();return!t.width||!t.height?{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.right-t.left,height:t.bottom-t.top}:t},getViewHeight:function(){return window.innerHeight===undefined?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return window.innerWidth===undefined?document.documentElement.clientWidth:window.innerWidth},applyPosition:function(e){var t="";for(var n in e)t+=n+":"+e[n]+(isNaN(e[n])?"; ":"px; ");this.container.addStyles(t)},resetPositioning:function(){this.container.removeClass("right"),this.container.removeClass("left"),this.container.removeClass("high"),this.container.removeClass("low"),this.container.removeClass("corner"),this.container.removeClass("below"),this.container.removeClass("above"),this.container.removeClass("vertical"),this.container.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},reflow:function(){this.offset=this.container.activatorOffset,this.adjustPosition()}}),enyo.kind({name:"enyo.FittableLayout",kind:"Layout",constructor:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.container.addRemoveClass("force-left-to-right",enyo.Control.prototype.rtl&&!this.container.get("rtl"))}}),calcFitIndex:function(){var e=this.container.children,t,n;for(n=0;n<e.length;n++){t=e[n];if(t.fit&&t.showing)return n}},getFitControl:function(){var e=this.container.children,t=e[this.fitIndex];return t&&t.fit&&t.showing||(this.fitIndex=this.calcFitIndex(),t=e[this.fitIndex]),t},shouldReverse:function(){return this.container.rtl&&this.orient==="h"},getFirstChild:function(){var e=this.getShowingChildren();return this.shouldReverse()?e[e.length-1]:e[0]},getLastChild:function(){var e=this.getShowingChildren();return this.shouldReverse()?e[0]:e[e.length-1]},getShowingChildren:function(){var e=[],t=0,n=this.container.children,r=n.length;for(;t<r;t++)n[t].showing&&e.push(n[t]);return e},_reflow:function(e,t,n,r){this.container.addRemoveClass("enyo-stretch",!this.container.noStretch);var i=this.getFitControl(),s=this.container.hasNode(),o=0,u=0,a=0,f,l,c,h,p;if(!i||!s)return;f=enyo.dom.calcPaddingExtents(s),l=i.getBounds(),o=s[t]-(f[n]+f[r]);if(this.shouldReverse()){h=this.getFirstChild(),a=o-(l[n]+l[e]);var d=enyo.dom.getComputedBoxValue(h.hasNode(),"margin",n)||0;if(h==i)u=d;else{var v=h.getBounds(),m=v[n];u=l[n]+d-m}}else{c=this.getLastChild(),u=l[n]-(f[n]||0);var g=enyo.dom.getComputedBoxValue(c.hasNode(),"margin",r)||0;if(c==i)a=g;else{var y=c.getBounds(),b=l[n]+l[e],w=y[n]+y[e]+g;a=w-b}}p=o-(u+a),i.applyStyle(e,p+"px")},reflow:function(){this.orient=="h"?this._reflow("width","clientWidth","left","right"):this._reflow("height","clientHeight","top","bottom")}}),enyo.kind({name:"enyo.FittableColumnsLayout",kind:"FittableLayout",orient:"h",layoutClass:"enyo-fittable-columns-layout"}),enyo.kind({name:"enyo.FittableRowsLayout",kind:"FittableLayout",layoutClass:"enyo-fittable-rows-layout",orient:"v"}),enyo.kind({name:"enyo.FittableRows",layoutKind:"FittableRowsLayout",noStretch:!1}),enyo.kind({name:"enyo.FittableColumns",layoutKind:"FittableColumnsLayout",noStretch:!1}),enyo.kind({name:"enyo.FittableHeaderLayout",kind:"FittableColumnsLayout",applyFitSize:enyo.inherit(function(e){return function(t,n,r,i){var s=r-i,o=this.getFitControl();s<0?(o.applyStyle("padding-left",Math.abs(s)+"px"),o.applyStyle("padding-right",null)):s>0?(o.applyStyle("padding-left",null),o.applyStyle("padding-right",Math.abs(s)+"px")):(o.applyStyle("padding-left",null),o.applyStyle("padding-right",null)),e.apply(this,arguments)}})}),enyo.kind({name:"enyo.FlyweightRepeater",published:{count:0,noSelect:!1,multiSelect:!1,toggleSelected:!1,clientClasses:"",clientStyle:"",rowOffset:0,orient:"v"},events:{onSetupItem:"",onRenderRow:""},bottomUp:!1,components:[{kind:"Selection",onSelect:"selectDeselect",onDeselect:"selectDeselect"},{name:"client"}],create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.noSelectChanged(),this.multiSelectChanged(),this.clientClassesChanged(),this.clientStyleChanged()}}),noSelectChanged:function(){this.noSelect&&this.$.selection.clear()},multiSelectChanged:function(){this.$.selection.setMulti(this.multiSelect)},clientClassesChanged:function(){this.$.client.setClasses(this.clientClasses)},clientStyleChanged:function(){this.$.client.setStyle(this.clientStyle)},setupItem:function(e){this.doSetupItem({index:e,selected:this.isSelected(e)})},generateChildHtml:enyo.inherit(function(e){return function(){var t="";this.index=null;for(var n=0,r=0;n<this.count;n++)r=this.rowOffset+(this.bottomUp?this.count-n-1:n),this.setupItem(r),this.$.client.setAttribute("data-enyo-index",r),this.orient=="h"&&this.$.client.setStyle("display:inline-block;"),t+=e.apply(this,arguments),this.$.client.teardownRender();return t}}),previewDomEvent:function(e){var t=this.index=this.rowForEvent(e);e.rowIndex=e.index=t,e.flyweight=this},decorateEvent:enyo.inherit(function(e){return function(t,n,r){var i=n&&n.index!=null?n.index:this.index;n&&i!=null&&(n.index=i,n.flyweight=this),e.apply(this,arguments)}}),tap:function(e,t){if(this.noSelect||t.index===-1)return;this.toggleSelected?this.$.selection.toggle(t.index):this.$.selection.select(t.index)},selectDeselect:function(e,t){this.renderRow(t.key)},getSelection:function(){return this.$.selection},isSelected:function(e){return this.getSelection().isSelected(e)},renderRow:function(e){if(e<this.rowOffset||e>=this.count+this.rowOffset)return;this.setupItem(e);var t=this.fetchRowNode(e);t&&(enyo.dom.setInnerHtml(t,this.$.client.generateChildHtml()),this.$.client.teardownChildren(),this.doRenderRow({rowIndex:e}))},fetchRowNode:function(e){if(this.hasNode())return this.node.querySelector('[data-enyo-index="'+e+'"]')},rowForEvent:function(e){if(!this.hasNode())return-1;var t=e.target;while(t&&t!==this.node){var n=t.getAttribute&&t.getAttribute("data-enyo-index");if(n!==null)return Number(n);t=t.parentNode}return-1},prepareRow:function(e){if(e<this.rowOffset||e>=this.count+this.rowOffset)return;this.setupItem(e);var t=this.fetchRowNode(e);enyo.FlyweightRepeater.claimNode(this.$.client,t)},lockRow:function(){this.$.client.teardownChildren()},performOnRow:function(e,t,n){if(e<this.rowOffset||e>=this.count+this.rowOffset)return;t&&(this.prepareRow(e),enyo.call(n||null,t),this.lockRow())},statics:{claimNode:function(e,t){var n;t&&(t.id!==e.id?n=t.querySelector("#"+e.id):n=t),e.generated=Boolean(n||!e.tag),e.node=n,e.node&&e.rendered();for(var r=0,i=e.children,s;s=i[r];r++)this.claimNode(s,t)}}}),enyo.kind({name:"enyo.List",kind:"Scroller",classes:"enyo-list",published:{count:0,rowsPerPage:50,orient:"v",bottomUp:!1,noSelect:!1,multiSelect:!1,toggleSelected:!1,fixedSize:!1,reorderable:!1,centerReorderContainer:!0,reorderComponents:[],pinnedReorderComponents:[],swipeableComponents:[],enableSwipe:!1,persistSwipeableItem:!1},events:{onSetupItem:"",onSetupReorderComponents:"",onSetupPinnedReorderComponents:"",onReorder:"",onSetupSwipeItem:"",onSwipeDrag:"",onSwipe:"",onSwipeComplete:""},handlers:{onAnimateFinish:"animateFinish",onRenderRow:"rowRendered",ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onup:"up",onholdpulse:"holdpulse",onflick:"flick"},rowSize:0,listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"placeholder",classes:"enyo-list-placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0;"}]}],reorderHoldTimeMS:600,draggingRowIndex:-1,initHoldCounter:3,holdCounter:3,holding:!1,draggingRowNode:null,placeholderRowIndex:-1,dragToScrollThreshold:.1,prevScrollTop:0,autoScrollTimeoutMS:20,autoScrollTimeout:null,autoscrollPageY:0,pinnedReorderMode:!1,initialPinPosition:-1,itemMoved:!1,currentPageNumber:-1,completeReorderTimeout:null,swipeIndex:null,swipeDirection:null,persistentItemVisible:!1,persistentItemOrigin:null,swipeComplete:!1,completeSwipeTimeout:null,completeSwipeDelayMS:500,normalSwipeSpeedMS:200,fastSwipeSpeedMS:100,percentageDraggedThreshold:.2,importProps:enyo.inherit(function(e){return function(t){t&&t.reorderable&&(this.touch=!0),e.apply(this,arguments)}}),create:enyo.inherit(function(e){return function(){this.pageSizes=[],this.orientV=this.orient=="v",this.vertical=this.orientV?"default":"hidden",e.apply(this,arguments),this.$.generator.orient=this.orient,this.getStrategy().translateOptimized=!0,this.$.port.addRemoveClass("horizontal",!this.orientV),this.$.port.addRemoveClass("vertical",this.orientV),this.$.page0.addRemoveClass("vertical",this.orientV),this.$.page1.addRemoveClass("vertical",this.orientV),this.bottomUpChanged(),this.noSelectChanged(),this.multiSelectChanged(),this.toggleSelectedChanged(),this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count)}}),initComponents:enyo.inherit(function(e){return function(){this.createReorderTools(),e.apply(this,arguments),this.createSwipeableComponents()}}),createReorderTools:function(){this.createComponent({name:"reorderContainer",classes:"enyo-list-reorder-container",ondown:"sendToStrategy",ondrag:"sendToStrategy",ondragstart:"sendToStrategy",ondragfinish:"sendToStrategy",onflick:"sendToStrategy"})},createStrategy:enyo.inherit(function(e){return function(){this.controlParentName="strategy",e.apply(this,arguments),this.createChrome(this.listTools),this.controlParentName="client",this.discoverControlParent()}}),createSwipeableComponents:function(){for(var e=0;e<this.swipeableComponents.length;e++)this.$.swipeableComponents.createComponent(this.swipeableComponents[e],{owner:this.owner})},rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.$.generator.node=this.$.port.hasNode(),this.$.generator.generated=!0,this.reset()}}),resizeHandler:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.refresh()}}),bottomUpChanged:function(){this.$.generator.bottomUp=this.bottomUp,this.$.page0.applyStyle(this.pageBound,null),this.$.page1.applyStyle(this.pageBound,null),this.orientV?this.pageBound=this.bottomUp?"bottom":"top":this.rtl?this.pageBound=this.bottomUp?"left":"right":this.pageBound=this.bottomUp?"right":"left",!this.orientV&&this.bottomUp&&(this.$.page0.applyStyle("left","auto"),this.$.page1.applyStyle("left","auto")),this.hasNode()&&this.reset()},noSelectChanged:function(){this.$.generator.setNoSelect(this.noSelect)},multiSelectChanged:function(){this.$.generator.setMultiSelect(this.multiSelect)},toggleSelectedChanged:function(){this.$.generator.setToggleSelected(this.toggleSelected)},countChanged:function(){this.hasNode()&&this.updateMetrics()},sendToStrategy:function(e,t){this.$.strategy.dispatchEvent("on"+t.type,t,e)},updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.portSize=0;for(var e=0;e<this.pageCount;e++)this.portSize+=this.getPageSize(e);this.adjustPortSize()},holdpulse:function(e,t){if(!this.getReorderable()||this.isReordering())return;if(t.holdTime>=this.reorderHoldTimeMS&&this.shouldStartReordering(e,t))return this.startReordering(t),!1},dragstart:function(e,t){if(this.isReordering())return!0;if(this.isSwipeable())return this.swipeDragStart(e,t)},drag:function(e,t){if(this.shouldDoReorderDrag(t))return t.preventDefault(),this.reorderDrag(t),!0;if(this.isSwipeable())return t.preventDefault(),this.swipeDrag(e,t),!0},dragfinish:function(e,t){this.isReordering()?this.finishReordering(e,t):this.isSwipeable()&&this.swipeDragFinish(e,t)},up:function(e,t){this.isReordering()&&this.finishReordering(e,t)},generatePage:function(e,t){this.page=e;var n=this.rowsPerPage*this.page;this.$.generator.setRowOffset(n);var r=Math.min(this.count-n,this.rowsPerPage);this.$.generator.setCount(r);var i=this.$.generator.generateChildHtml();t.setContent(i),this.getReorderable()&&this.draggingRowIndex>-1&&this.hideReorderingRow();var s=t.getBounds(),o=this.orientV?s.height:s.width;!this.rowSize&&o>0&&(this.rowSize=Math.floor(o/r),this.updateMetrics());if(!this.fixedSize){var u=this.getPageSize(e);u!=o&&o>0&&(this.pageSizes[e]=o,this.portSize+=o-u)}},pageForRow:function(e){return Math.floor(e/this.rowsPerPage)},preserveDraggingRowNode:function(e){this.draggingRowNode&&this.pageForRow(this.draggingRowIndex)===e&&(this.$.holdingarea.hasNode().appendChild(this.draggingRowNode),this.draggingRowNode=null,this.removedInitialPage=!0)},update:function(e){var t=!1,n=this.positionToPageInfo(e),r=n.pos+this.scrollerSize/2,i=Math.floor(r/Math.max(n.size,this.scrollerSize)+.5)+n.no,s=i%2===0?i:i-1;this.p0!=s&&this.isPageInRange(s)&&(this.preserveDraggingRowNode(this.p0),this.generatePage(s,this.$.page0),this.positionPage(s,this.$.page0),this.p0=s,t=!0,this.p0RowBounds=this.getPageRowSizes(this.$.page0)),s=i%2===0?Math.max(1,i-1):i,this.p1!=s&&this.isPageInRange(s)&&(this.preserveDraggingRowNode(this.p1),this.generatePage(s,this.$.page1),this.positionPage(s,this.$.page1),this.p1=s,t=!0,this.p1RowBounds=this.getPageRowSizes(this.$.page1)),t&&(this.$.generator.setRowOffset(0),this.$.generator.setCount(this.count),this.fixedSize||(this.adjustBottomPage(),this.adjustPortSize()))},getPageRowSizes:function(e){var t={},n=e.hasNode().querySelectorAll("div[data-enyo-index]");for(var r=0,i,s;r<n.length;r++)i=n[r].getAttribute("data-enyo-index"),i!==null&&(s=enyo.dom.getBounds(n[r]),t[parseInt(i,10)]={height:s.height,width:s.width});return t},updateRowBounds:function(e){this.p0RowBounds[e]?this.updateRowBoundsAtIndex(e,this.p0RowBounds,this.$.page0):this.p1RowBounds[e]&&this.updateRowBoundsAtIndex(e,this.p1RowBounds,this.$.page1)},updateRowBoundsAtIndex:function(e,t,n){var r=n.hasNode().querySelector('div[data-enyo-index="'+e+'"]'),i=enyo.dom.getBounds(r);t[e].height=i.height,t[e].width=i.width},updateForPosition:function(e){this.update(this.calcPos(e))},calcPos:function(e){return this.bottomUp?this.portSize-this.scrollerSize-e:e},adjustBottomPage:function(){var e=this.p0>=this.p1?this.$.page0:this.$.page1;this.positionPage(e.pageNo,e)},adjustPortSize:function(){this.scrollerSize=this.orientV?this.getBounds().height:this.getBounds().width;var e=Math.max(this.scrollerSize,this.portSize);this.$.port.applyStyle(this.orientV?"height":"width",e+"px"),this.orientV||this.$.port.applyStyle("height",this.getBounds().height+"px")},positionPage:function(e,t){t.pageNo=e;var n=this.pageToPosition(e);t.applyStyle(this.pageBound,n+"px")},pageToPosition:function(e){var t=0,n=e;while(n>0)n--,t+=this.getPageSize(n);return t},positionToPageInfo:function(e){var t=-1,n=this.calcPos(e),r=this.defaultPageSize;while(n>=0)t++,r=this.getPageSize(t),n-=r;return t=Math.max(t,0),{no:t,size:r,pos:n+r,startRow:t*this.rowsPerPage,endRow:Math.min((t+1)*this.rowsPerPage-1,this.count-1)}},isPageInRange:function(e){return e==Math.max(0,Math.min(this.pageCount-1,e))},getPageSize:function(e){var t=this.pageSizes[e];if(!t){var n=this.rowsPerPage*e,r=Math.min(this.count-n,this.rowsPerPage);t=this.defaultPageSize*(r/this.rowsPerPage)}return Math.max(1,t)},invalidatePages:function(){this.p0=this.p1=null,this.p0RowBounds={},this.p1RowBounds={},this.$.page0.setContent(""),this.$.page1.setContent("")},invalidateMetrics:function(){this.pageSizes=[],this.rowSize=0,this.updateMetrics()},scroll:enyo.inherit(function(e){return function(t,n){var r=e.apply(this,arguments),i=this.orientV?this.getScrollTop():this.getScrollLeft();return this.lastPos===i?r:(this.lastPos=i,this.update(i),this.pinnedReorderMode&&this.reorderScroll(t,n),r)}}),setScrollTop:enyo.inherit(function(e){return function(t){this.update(t),e.apply(this,arguments),this.twiddle()}}),getScrollPosition:function(){return this.calcPos(this[this.orientV?"getScrollTop":"getScrollLeft"]())},setScrollPosition:function(e){this[this.orientV?"setScrollTop":"setScrollLeft"](this.calcPos(e))},scrollToBottom:enyo.inherit(function(e){return function(){this.update(this.getScrollBounds().maxTop),e.apply(this,arguments)}}),scrollToRow:function(e){var t=this.pageForRow(e),n=this.pageToPosition(t);this.updateForPosition(n),n=this.pageToPosition(t),this.setScrollPosition(n);if(t==this.p0||t==this.p1){var r=this.$.generator.fetchRowNode(e);if(r){var i=this.orientV?r.offsetTop:r.offsetLeft;this.bottomUp&&(i=this.getPageSize(t)-(this.orientV?r.offsetHeight:r.offsetWidth)-i);var s=this.getScrollPosition()+i;this.setScrollPosition(s)}}},scrollToStart:function(){this[this.bottomUp?this.orientV?"scrollToBottom":"scrollToRight":"scrollToTop"]()},scrollToEnd:function(){this[this.bottomUp?this.orientV?"scrollToTop":"scrollToLeft":this.orientV?"scrollToBottom":"scrollToRight"]()},refresh:function(){this.invalidatePages(),this.update(this[this.orientV?"getScrollTop":"getScrollLeft"]()),this.stabilize(),enyo.platform.android===4&&this.twiddle()},reset:function(){this.getSelection().clear(),this.invalidateMetrics(),this.invalidatePages(),this.stabilize(),this.scrollToStart()},getSelection:function(){return this.$.generator.getSelection()},select:function(e,t){return this.getSelection().select(e,t)},deselect:function(e){return this.getSelection().deselect(e)},isSelected:function(e){return this.$.generator.isSelected(e)},renderRow:function(e){this.$.generator.renderRow(e)},rowRendered:function(e,t){this.updateRowBounds(t.rowIndex)},prepareRow:function(e){this.$.generator.prepareRow(e)},lockRow:function(){this.$.generator.lockRow()},performOnRow:function(e,t,n){this.$.generator.performOnRow(e,t,n)},animateFinish:function(e){return this.twiddle(),!0},twiddle:function(){var e=this.getStrategy();enyo.call(e,"twiddle")},pageForPageNumber:function(e,t){return e%2===0?!t||e===this.p0?this.$.page0:null:!t||e===this.p1?this.$.page1:null},shouldStartReordering:function(e,t){return!this.getReorderable()||t.rowIndex==null||t.rowIndex<0||this.pinnedReorderMode||e!==this.$.strategy||t.index==null||t.index<0?!1:!0},startReordering:function(e){this.$.strategy.listReordering=!0,this.buildReorderContainer(),this.doSetupReorderComponents(e),this.styleReorderContainer(e),this.draggingRowIndex=this.placeholderRowIndex=e.rowIndex,this.draggingRowNode=e.target,this.removedInitialPage=!1,this.itemMoved=!1,this.initialPageNumber=this.currentPageNumber=this.pageForRow(e.rowIndex),this.prevScrollTop=this.getScrollTop(),this.replaceNodeWithPlaceholder(e.rowIndex)},buildReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var e=0;e<this.reorderComponents.length;e++)this.$.reorderContainer.createComponent(this.reorderComponents[e],{owner:this.owner});this.$.reorderContainer.render()},styleReorderContainer:function(e){this.setItemPosition(this.$.reorderContainer,e.rowIndex),this.setItemBounds(this.$.reorderContainer,e.rowIndex),this.$.reorderContainer.setShowing(!0),this.centerReorderContainer&&this.centerReorderContainerOnPointer(e)},appendNodeToReorderContainer:function(e){this.$.reorderContainer.createComponent({allowHtml:!0,content:e.innerHTML}).render()},centerReorderContainerOnPointer:function(e){var t=enyo.dom.calcNodePosition(this.hasNode()),n=e.pageX-t.left-parseInt(this.$.reorderContainer.domStyles.width,10)/2,r=e.pageY-t.top+this.getScrollTop()-parseInt(this.$.reorderContainer.domStyles.height,10)/2;this.getStrategyKind()!="ScrollStrategy"&&(n-=this.getScrollLeft(),r-=this.getScrollTop()),this.positionReorderContainer(n,r)},positionReorderContainer:function(e,t){this.$.reorderContainer.addClass("enyo-animatedTopAndLeft"),this.$.reorderContainer.addStyles("left:"+e+"px;top:"+t+"px;"),this.setPositionReorderContainerTimeout()},setPositionReorderContainerTimeout:function(){this.clearPositionReorderContainerTimeout(),this.positionReorderContainerTimeout=setTimeout(this.bindSafely(function(){this.$.reorderContainer.removeClass("enyo-animatedTopAndLeft"),this.clearPositionReorderContainerTimeout()}),100)},clearPositionReorderContainerTimeout:function(){this.positionReorderContainerTimeout&&(clearTimeout(this.positionReorderContainerTimeout),this.positionReorderContainerTimeout=null)},shouldDoReorderDrag:function(){return!this.getReorderable()||this.draggingRowIndex<0||this.pinnedReorderMode?!1:!0},reorderDrag:function(e){this.positionReorderNode(e),this.checkForAutoScroll(e),this.updatePlaceholderPosition(e.pageY)},updatePlaceholderPosition:function(e){var t=this.getRowIndexFromCoordinate(e);t!==-1&&(t>=this.placeholderRowIndex?this.movePlaceholderToIndex(Math.min(this.count,t+1)):this.movePlaceholderToIndex(t))},positionReorderNode:function(e){var t=this.$.reorderContainer.getBounds(),n=t.left+e.ddx,r=t.top+e.ddy;r=this.getStrategyKind()=="ScrollStrategy"?r+(this.getScrollTop()-this.prevScrollTop):r,this.$.reorderContainer.addStyles("top: "+r+"px ; left: "+n+"px"),this.prevScrollTop=this.getScrollTop()},checkForAutoScroll:function(e){var t=enyo.dom.calcNodePosition(this.hasNode()),n=this.getBounds(),r;this.autoscrollPageY=e.pageY,e.pageY-t.top<n.height*this.dragToScrollThreshold?(r=100*(1-(e.pageY-t.top)/(n.height*this.dragToScrollThreshold)),this.scrollDistance=-1*r):e.pageY-t.top>n.height*(1-this.dragToScrollThreshold)?(r=100*((e.pageY-t.top-n.height*(1-this.dragToScrollThreshold))/(n.height-n.height*(1-this.dragToScrollThreshold))),this.scrollDistance=1*r):this.scrollDistance=0,this.scrollDistance===0?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling()},stopAutoScrolling:function(){this.autoScrollTimeout&&(clearTimeout(this.autoScrollTimeout),this.autoScrollTimeout=null)},startAutoScrolling:function(){this.autoScrollTimeout=setInterval(this.bindSafely(this.autoScroll),this.autoScrollTimeoutMS)},autoScroll:function(){this.scrollDistance===0?this.stopAutoScrolling():this.autoScrollTimeout||this.startAutoScrolling(),this.setScrollPosition(this.getScrollPosition()+this.scrollDistance),this.positionReorderNode({ddx:0,ddy:0}),this.updatePlaceholderPosition(this.autoscrollPageY)},movePlaceholderToIndex:function(e){var t,n;if(e<0)return;e>=this.count?(t=null,n=this.pageForPageNumber(this.pageForRow(this.count-1)).hasNode()):(t=this.$.generator.fetchRowNode(e),n=t.parentNode);var r=this.pageForRow(e);r>=this.pageCount&&(r=this.currentPageNumber),n.insertBefore(this.placeholderNode,t),this.currentPageNumber!==r&&(this.updatePageSize(this.currentPageNumber),this.updatePageSize(r),this.updatePagePositions(r)),this.placeholderRowIndex=e,this.currentPageNumber=r,this.itemMoved=!0},finishReordering:function(e,t){if(!this.isReordering()||this.pinnedReorderMode||this.completeReorderTimeout)return;return this.stopAutoScrolling(),this.$.strategy.listReordering=!1,this.moveReorderedContainerToDroppedPosition(t),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,t),100),t.preventDefault(),!0},moveReorderedContainerToDroppedPosition:function(){var e=this.getRelativeOffset(this.placeholderNode,this.hasNode()),t=this.getStrategyKind()=="ScrollStrategy"?e.top:e.top-this.getScrollTop(),n=e.left-this.getScrollLeft();this.positionReorderContainer(n,t)},completeFinishReordering:function(e){this.completeReorderTimeout=null,this.placeholderRowIndex>this.draggingRowIndex&&(this.placeholderRowIndex=Math.max(0,this.placeholderRowIndex-1));if(this.draggingRowIndex==this.placeholderRowIndex&&this.pinnedReorderComponents.length&&!this.pinnedReorderMode&&!this.itemMoved){this.beginPinnedReorder(e);return}this.removeDraggingRowNode(),this.removePlaceholderNode(),this.emptyAndHideReorderContainer(),this.pinnedReorderMode=!1,this.reorderRows(e),this.draggingRowIndex=this.placeholderRowIndex=-1,this.refresh()},beginPinnedReorder:function(e){this.buildPinnedReorderContainer(),this.doSetupPinnedReorderComponents(enyo.mixin(e,{index:this.draggingRowIndex})),this.pinnedReorderMode=!0,this.initialPinPosition=e.pageY},emptyAndHideReorderContainer:function(){this.$.reorderContainer.destroyComponents(),this.$.reorderContainer.setShowing(!1)},buildPinnedReorderContainer:function(){this.$.reorderContainer.destroyClientControls();for(var e=0;e<this.pinnedReorderComponents.length;e++)this.$.reorderContainer.createComponent(this.pinnedReorderComponents[e],{owner:this.owner});this.$.reorderContainer.render()},reorderRows:function(e){this.doReorder(this.makeReorderEvent(e)),this.positionReorderedNode(),this.updateListIndices()},makeReorderEvent:function(e){return e.reorderFrom=this.draggingRowIndex,e.reorderTo=this.placeholderRowIndex,e},positionReorderedNode:function(){if(!this.removedInitialPage){var e=this.$.generator.fetchRowNode(this.placeholderRowIndex);e&&(e.parentNode.insertBefore(this.hiddenNode,e),this.showNode(this.hiddenNode)),this.hiddenNode=null;if(this.currentPageNumber!=this.initialPageNumber){var t,n,r=this.pageForPageNumber(this.currentPageNumber),i=this.pageForPageNumber(this.currentPageNumber+1);this.initialPageNumber<this.currentPageNumber?(t=r.hasNode().firstChild,i.hasNode().appendChild(t)):(t=r.hasNode().lastChild,n=i.hasNode().firstChild,i.hasNode().insertBefore(t,n)),this.correctPageSizes(),this.updatePagePositions(this.initialPageNumber)}}},updateListIndices:function(){if(this.shouldDoRefresh()){this.refresh(),this.correctPageSizes();return}var e=Math.min(this.draggingRowIndex,this.placeholderRowIndex),t=Math.max(this.draggingRowIndex,this.placeholderRowIndex),n=this.draggingRowIndex-this.placeholderRowIndex>0?1:-1,r,i,s,o;if(n===1){r=this.$.generator.fetchRowNode(this.draggingRowIndex),r&&r.setAttribute("data-enyo-index","reordered");for(i=t-1,s=t;i>=e;i--){r=this.$.generator.fetchRowNode(i);if(!r)continue;o=parseInt(r.getAttribute("data-enyo-index"),10),s=o+1,r.setAttribute("data-enyo-index",s)}r=this.hasNode().querySelector('[data-enyo-index="reordered"]'),r.setAttribute("data-enyo-index",this.placeholderRowIndex)}else{r=this.$.generator.fetchRowNode(this.draggingRowIndex),r&&r.setAttribute("data-enyo-index",this.placeholderRowIndex);for(i=e+1,s=e;i<=t;i++){r=this.$.generator.fetchRowNode(i);if(!r)continue;o=parseInt(r.getAttribute("data-enyo-index"),10),s=o-1,r.setAttribute("data-enyo-index",s)}}},shouldDoRefresh:function(){return Math.abs(this.initialPageNumber-this.currentPageNumber)>1},getNodeStyle:function(e){var t=this.$.generator.fetchRowNode(e);if(!t)return;var n=this.getRelativeOffset(t,this.hasNode()),r=enyo.dom.getBounds(t);return{h:r.height,w:r.width,left:n.left,top:n.top}},getRelativeOffset:function(e,t){var n={top:0,left:0};if(e!==t&&e.parentNode)do n.top+=e.offsetTop||0,n.left+=e.offsetLeft||0,e=e.offsetParent;while(e&&e!==t);return n},replaceNodeWithPlaceholder:function(e){var t=this.$.generator.fetchRowNode(e);if(!t){enyo.log("No node - "+e);return}this.placeholderNode=this.createPlaceholderNode(t),this.hiddenNode=this.hideNode(t);var n=this.pageForPageNumber(this.currentPageNumber);n.hasNode().insertBefore(this.placeholderNode,this.hiddenNode)},createPlaceholderNode:function(e){var t=this.$.placeholder.hasNode().cloneNode(!0),n=enyo.dom.getBounds(e);return t.style.height=n.height+"px",t.style.width=n.width+"px",t},removePlaceholderNode:function(){this.removeNode(this.placeholderNode),this.placeholderNode=null},removeDraggingRowNode:function(){this.draggingRowNode=null;var e=this.$.holdingarea.hasNode();e.innerHTML=""},removeNode:function(e){if(!e||!e.parentNode)return;e.parentNode.removeChild(e)},updatePageSize:function(e){if(e<0)return;var t=this.pageForPageNumber(e,!0);if(t){var n=this.pageSizes[e],r=Math.max(1,t.getBounds().height);this.pageSizes[e]=r,this.portSize+=r-n}},updatePagePositions:function(e){this.positionPage(this.currentPageNumber,this.pageForPageNumber(this.currentPageNumber)),this.positionPage(e,this.pageForPageNumber(e))},correctPageSizes:function(){var e=this.initialPageNumber%2;this.updatePageSize(this.currentPageNumber,this.$["page"+this.currentPage]),e!=this.currentPageNumber&&this.updatePageSize(this.initialPageNumber,this.$["page"+e])},hideNode:function(e){return e.style.display="none",e},showNode:function(e){return e.style.display="block",e},dropPinnedRow:function(e){this.moveReorderedContainerToDroppedPosition(e),this.completeReorderTimeout=setTimeout(this.bindSafely(this.completeFinishReordering,e),100);return},cancelPinnedMode:function(e){this.placeholderRowIndex=this.draggingRowIndex,this.dropPinnedRow(e)},getRowIndexFromCoordinate:function(e){var t=this.getScrollTop()+e-enyo.dom.calcNodePosition(this.hasNode()).top;if(t<0)return-1;var n=this.positionToPageInfo(t),r=n.no==this.p0?this.p0RowBounds:this.p1RowBounds;if(!r)return this.count;var i=n.pos,s=this.placeholderNode?enyo.dom.getBounds(this.placeholderNode).height:0,o=0;for(var u=n.startRow;u<=n.endRow;++u){if(u===this.placeholderRowIndex){o+=s;if(o>=i)return-1}if(u!==this.draggingRowIndex){o+=r[u].height;if(o>=i)return u}}return u},getIndexPosition:function(e){return enyo.dom.calcNodePosition(this.$.generator.fetchRowNode(e))},setItemPosition:function(e,t){var n=this.getNodeStyle(t),r=this.getStrategyKind()=="ScrollStrategy"?n.top:n.top-this.getScrollTop(),i="top:"+r+"px; left:"+n.left+"px;";e.addStyles(i)},setItemBounds:function(e,t){var n=this.getNodeStyle(t),r="width:"+n.w+"px; height:"+n.h+"px;";e.addStyles(r)},reorderScroll:function(e,t){this.getStrategyKind()=="ScrollStrategy"&&this.$.reorderContainer.addStyles("top:"+(this.initialPinPosition+this.getScrollTop()-this.rowSize)+"px;"),this.updatePlaceholderPosition(this.initialPinPosition)},hideReorderingRow:function(){var e=this.hasNode().querySelector('[data-enyo-index="'+this.draggingRowIndex+'"]');e&&(this.hiddenNode=this.hideNode(e))},isReordering:function(){return this.draggingRowIndex>-1},isSwiping:function(){return this.swipeIndex!=null&&!this.swipeComplete&&this.swipeDirection!=null},swipeDragStart:function(e,t){return t.index==null||t.vertical?!0:(this.completeSwipeTimeout&&this.completeSwipe(t),this.swipeComplete=!1,this.swipeIndex!=t.index&&(this.clearSwipeables(),this.swipeIndex=t.index),this.swipeDirection=t.xDirection,this.persistentItemVisible||this.startSwipe(t),this.draggedXDistance=0,this.draggedYDistance=0,!0)},swipeDrag:function(e,t){return this.persistentItemVisible?(this.dragPersistentItem(t),this.preventDragPropagation):this.isSwiping()?(this.dragSwipeableComponents(this.calcNewDragPosition(t.ddx)),this.draggedXDistance=t.dx,this.draggedYDistance=t.dy,!0):!1},swipeDragFinish:function(e,t){if(this.persistentItemVisible)this.dragFinishPersistentItem(t);else{if(!this.isSwiping())return!1;var n=this.calcPercentageDragged(this.draggedXDistance);n>this.percentageDraggedThreshold&&t.xDirection===this.swipeDirection?this.swipe(this.fastSwipeSpeedMS):this.backOutSwipe(t)}return this.preventDragPropagation},isSwipeable:function(){return this.enableSwipe&&this.$.swipeableComponents.controls.length!==0&&!this.isReordering()&&!this.pinnedReorderMode},positionSwipeableContainer:function(e,t){var n=this.$.generator.fetchRowNode(e);if(!n)return;var r=this.getRelativeOffset(n,this.hasNode()),i=enyo.dom.getBounds(n),s=t==1?-1*i.width:i.width;this.$.swipeableComponents.addStyles("top: "+r.top+"px; left: "+s+"px; height: "+i.height+"px; width: "+i.width+"px;")},calcNewDragPosition:function(e){var t=this.$.swipeableComponents.getBounds(),n=t.left,r=this.$.swipeableComponents.getBounds(),i=this.swipeDirection==1?0:-1*r.width,s=this.swipeDirection==1?n+e>i?i:n+e:n+e<i?i:n+e;return s},dragSwipeableComponents:function(e){this.$.swipeableComponents.applyStyle("left",e+"px")},startSwipe:function(e){e.index=this.swipeIndex,this.positionSwipeableContainer(this.swipeIndex,e.xDirection),this.$.swipeableComponents.setShowing(!0),this.setPersistentItemOrigin(e.xDirection),this.doSetupSwipeItem(e)},dragPersistentItem:function(e){var t=0,n=this.persistentItemOrigin=="right"?Math.max(t,t+e.dx):Math.min(t,t+e.dx);this.$.swipeableComponents.applyStyle("left",n+"px")},dragFinishPersistentItem:function(e){var t=this.calcPercentageDragged(e.dx)>.2,n=e.dx>0?"right":e.dx<0?"left":null;this.persistentItemOrigin==n?t?this.slideAwayItem():this.bounceItem(e):this.bounceItem(e)},setPersistentItemOrigin:function(e){this.persistentItemOrigin=e==1?"left":"right"},calcPercentageDragged:function(e){return Math.abs(e/this.$.swipeableComponents.getBounds().width)},swipe:function(e){this.swipeComplete=!0,this.animateSwipe(0,e)},backOutSwipe:function(e){var t=this.$.swipeableComponents.getBounds(),n=this.swipeDirection==1?-1*t.width:t.width;this.animateSwipe(n,this.fastSwipeSpeedMS),this.swipeDirection=null},bounceItem:function(e){var t=this.$.swipeableComponents.getBounds();t.left!=t.width&&this.animateSwipe(0,this.normalSwipeSpeedMS)},slideAwayItem:function(){var e=this.$.swipeableComponents,t=e.getBounds().width,n=this.persistentItemOrigin=="left"?-1*t:t;this.animateSwipe(n,this.normalSwipeSpeedMS),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},clearSwipeables:function(){this.$.swipeableComponents.setShowing(!1),this.persistentItemVisible=!1,this.setPersistSwipeableItem(!1)},completeSwipe:function(e){this.completeSwipeTimeout&&(clearTimeout(this.completeSwipeTimeout),this.completeSwipeTimeout=null),this.getPersistSwipeableItem()?this.swipeComplete&&(this.persistentItemVisible=!0):(this.$.swipeableComponents.setShowing(!1),this.swipeComplete&&this.doSwipeComplete({index:this.swipeIndex,xDirection:this.swipeDirection})),this.swipeIndex=null,this.swipeDirection=null},animateSwipe:function(e,t){var n=enyo.now(),r=this.$.swipeableComponents,i=parseInt(r.domStyles.left,10),s=e-i;this.stopAnimateSwipe();var o=this.bindSafely(function(){var e=enyo.now()-n,u=e/t,a=i+s*Math.min(u,1);r.applyStyle("left",a+"px"),this.job=enyo.requestAnimationFrame(o),e/t>=1&&(this.stopAnimateSwipe(),this.completeSwipeTimeout=setTimeout(this.bindSafely(function(){this.completeSwipe()}),this.completeSwipeDelayMS))});this.job=enyo.requestAnimationFrame(o)},stopAnimateSwipe:function(){this.job&&(this.job=enyo.cancelRequestAnimationFrame(this.job))}}),enyo.kind({name:"enyo.PulldownList",kind:"List",touch:!0,pully:null,pulldownTools:[{name:"pulldown",classes:"enyo-list-pulldown",components:[{name:"puller",kind:"Puller"}]}],events:{onPullStart:"",onPullCancel:"",onPull:"",onPullRelease:"",onPullComplete:""},handlers:{onScrollStart:"scrollStartHandler",onScrollStop:"scrollStopHandler",ondragfinish:"dragfinish"},pullingMessage:"Pull down to refresh...",pulledMessage:"Release to refresh...",loadingMessage:"Loading...",pullingIconClass:"enyo-puller-arrow enyo-puller-arrow-down",pulledIconClass:"enyo-puller-arrow enyo-puller-arrow-up",loadingIconClass:"",create:enyo.inherit(function(e){return function(){var t={kind:"Puller",showing:!1,text:this.loadingMessage,iconClass:this.loadingIconClass,onCreate:"setPully"};this.listTools.splice(0,0,t),e.apply(this,arguments),this.setPulling()}}),initComponents:enyo.inherit(function(e){return function(){this.createChrome(this.pulldownTools),this.accel=enyo.dom.canAccelerate(),this.translation=this.accel?"translate3d":"translate",this.strategyKind=this.resetStrategyKind(),e.apply(this,arguments)}}),resetStrategyKind:function(){return enyo.platform.android>=3?"TranslateScrollStrategy":"TouchScrollStrategy"},setPully:function(e,t){this.pully=t.originator},scrollStartHandler:function(){this.firedPullStart=!1,this.firedPull=!1,this.firedPullCancel=!1},scroll:enyo.inherit(function(e){return function(t,n){var r=e.apply(this,arguments);this.completingPull&&this.pully.setShowing(!1);var i=this.getStrategy().$.scrollMath||this.getStrategy(),s=-1*this.getScrollTop();return i.isInOverScroll()&&s>0&&(enyo.dom.transformValue(this.$.pulldown,this.translation,"0,"+s+"px"+(this.accel?",0":"")),this.firedPullStart||(this.firedPullStart=!0,this.pullStart(),this.pullHeight=this.$.pulldown.getBounds().height),s>this.pullHeight&&!this.firedPull&&(this.firedPull=!0,this.firedPullCancel=!1,this.pull()),this.firedPull&&!this.firedPullCancel&&s<this.pullHeight&&(this.firedPullCancel=!0,this.firedPull=!1,this.pullCancel())),r}}),scrollStopHandler:function(){this.completingPull&&(this.completingPull=!1,this.doPullComplete())},dragfinish:function(){if(this.firedPull){var e=this.getStrategy().$.scrollMath||this.getStrategy();e.setScrollY(-1*this.getScrollTop()-this.pullHeight),this.pullRelease()}},completePull:function(){this.completingPull=!0;var e=this.getStrategy().$.scrollMath||this.getStrategy();e.setScrollY(this.pullHeight),e.start()},pullStart:function(){this.setPulling(),this.pully.setShowing(!1),this.$.puller.setShowing(!0),this.doPullStart()},pull:function(){this.setPulled(),this.doPull()},pullCancel:function(){this.setPulling(),this.doPullCancel()},pullRelease:function(){this.$.puller.setShowing(!1),this.pully.setShowing(!0),this.doPullRelease()},setPulling:function(){this.$.puller.setText(this.pullingMessage),this.$.puller.setIconClass(this.pullingIconClass)},setPulled:function(){this.$.puller.setText(this.pulledMessage),this.$.puller.setIconClass(this.pulledIconClass)}}),enyo.kind({name:"enyo.Puller",classes:"enyo-puller",published:{text:"",iconClass:""},events:{onCreate:""},components:[{name:"icon"},{name:"text",tag:"span",classes:"enyo-puller-text"}],create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.doCreate(),this.textChanged(),this.iconClassChanged()}}),textChanged:function(){this.$.text.setContent(this.text)},iconClassChanged:function(){this.$.icon.setClasses(this.iconClass)}}),enyo.kind({name:"enyo.AroundList",kind:"enyo.List",listTools:[{name:"port",classes:"enyo-list-port enyo-border-box",components:[{name:"aboveClient"},{name:"generator",kind:"FlyweightRepeater",canGenerate:!1,components:[{tag:null,name:"client"}]},{name:"holdingarea",allowHtml:!0,classes:"enyo-list-holdingarea"},{name:"page0",allowHtml:!0,classes:"enyo-list-page"},{name:"page1",allowHtml:!0,classes:"enyo-list-page"},{name:"belowClient"},{name:"placeholder"},{name:"swipeableComponents",style:"position:absolute; display:block; top:-1000px; left:0px;"}]}],aboveComponents:null,initComponents:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.aboveComponents&&this.$.aboveClient.createComponents(this.aboveComponents,{owner:this.owner}),this.belowComponents&&this.$.belowClient.createComponents(this.belowComponents,{owner:this.owner})}}),updateMetrics:function(){this.defaultPageSize=this.rowsPerPage*(this.rowSize||100),this.pageCount=Math.ceil(this.count/this.rowsPerPage),this.aboveHeight=this.$.aboveClient.getBounds().height,this.belowHeight=this.$.belowClient.getBounds().height,this.portSize=this.aboveHeight+this.belowHeight;for(var e=0;e<this.pageCount;e++)this.portSize+=this.getPageSize(e);this.adjustPortSize()},positionPage:function(e,t){t.pageNo=e;var n=this.pageToPosition(e),r=this.bottomUp?this.belowHeight:this.aboveHeight;n+=r,t.applyStyle(this.pageBound,n+"px")},scrollToContentStart:function(){var e=this.bottomUp?this.belowHeight:this.aboveHeight;this.setScrollPosition(e)}}),enyo.kind({name:"enyo.GridListImageItem",classes:"enyo-gridlist-imageitem",components:[{name:"image",kind:"enyo.Image",classes:"image"},{name:"caption",classes:"caption"},{name:"subCaption",classes:"sub-caption"}],published:{source:"",caption:"",subCaption:"",selected:!1,centered:!0,imageSizing:"",useCaption:!0,useSubCaption:!0},bindings:[{from:".source",to:".$.image.src"},{from:".caption",to:".$.caption.content"},{from:".caption",to:".$.caption.showing",kind:"enyo.EmptyBinding"},{from:".subCaption",to:".$.subCaption.content"},{from:".subCaption",to:".$.subCaption.showing",kind:"enyo.EmptyBinding"}],create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.selectedChanged(),this.imageSizingChanged(),this.centeredChanged()}}),selectedChanged:function(){this.addRemoveClass("selected",this.selected)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},imageSizingChanged:function(){this.$.image.setSizing(this.imageSizing),this.addRemoveClass("sized-image",!!this.imageSizing),this.imageSizing&&(this.useCaptionChanged(),this.useSubCaptionChanged())},useCaptionChanged:function(){this.addRemoveClass("use-caption",this.useCaption)},useSubCaptionChanged:function(){this.addRemoveClass("use-subcaption",this.useSubCaption)},centeredChanged:function(){this.addRemoveClass("centered",this.centered)}}),enyo.kind({name:"enyo.GridFlyWeightRepeater",kind:"enyo.FlyweightRepeater",events:{onSizeupItem:""},itemsPerRow:0,_itemsFromPreviousPage:0,generateChildHtml:function(){return this.itemFluidWidth||this.itemFixedSize?this._generateChildHtmlEqualSizedItems():this._generateChildHtmlVariableSizedItems()},_generateChildHtmlEqualSizedItems:function(){var e=this.owner.hasNode().clientWidth,t=this.$.client,n="",r=0,i=this.itemWidth,s=this.itemHeight;if(this.itemFluidWidth){r=100/this.itemsPerRow;var o=0;this.itemSpacing>=0&&(o=(this.itemsPerRow+1)*this.itemSpacing,r=100/this.itemsPerRow-100*o/(this.itemsPerRow*e)),i=r/100*e,s=i*(this.itemHeight/this.itemWidth)}for(var u=this.rowOffset;u<this.rowOffset+this.count;u++)t.setAttribute("data-enyo-index",u),this.doSetupItem({index:u,selected:this.isSelected(u)}),this.itemFluidWidth?t.addStyles("width:"+r+"%;height:"+s+"px;"):t.addStyles("width:"+this.itemWidth+"px;height:"+this.itemHeight+"px;"),this.itemSpacing>=0&&(t.addStyles("margin-top:"+this.itemSpacing+"px; margin-left:"+this.itemSpacing+"px;"),u%this.itemsPerRow==this.itemsPerRow-1?t.addStyles("margin-right:"+this.itemSpacing+"px;"):t.addStyles("margin-right: 0px;"),u>=this.count-this.itemsPerRow&&t.addStyles("margin-bottom:"+this.itemSpacing+"px;")),n+=t.generateHtml(),t.teardownRender();return n},_generateChildHtmlVariableSizedItems:function(){this.index=null;var e=null,t=this.$.client,n=this.owner.hasNode().clientWidth,r=0,i=0,s=0,o=0,u=0,a=0,f=0,l=0,c=0,h=this.itemMinWidth/this.itemMinHeight,p=[{index:0,items:[]}],d=this.owner.$._dummy_.hasNode(),v,m;this.owner.page===0&&(this._itemsFromPreviousPage=0);var g=this.count+this._itemsFromPreviousPage;for(v=0,m=v+this.rowOffset-this._itemsFromPreviousPage;v<g;v++,m++){l=0,c=0,this.doSizeupItem({index:m,selected:this.isSelected(m)}),l=this.itemWidth,c=this.itemHeight;if(!l||l<=0)this.doSetupItem({index:m,selected:this.isSelected(m)}),d.innerHTML=t.generateChildHtml(),l=d.clientWidth,c=d.clientHeight;if(!l||l<=0)l=this.itemMinWidth,c=this.itemMinHeight;if(!c||c<=0)c=this.itemMinHeight;h=l/c,r=Math.min(l,n),this.itemMinWidth&&this.itemMinWidth>0&&(r=Math.max(l,this.itemMinWidth));var y=v==g-1;s=r/h,i+=r,o+=s,e={index:m,pageIndex:v,width:r,height:s},p[f].items.push(e);if(!this.normalizeRows)continue;u=i/p[f].items.length,a=o/p[f].items.length;if(i>=n||y){p[f].avgHeight=a,p[f].index=f;var b=p[f].items.length,w=(n-i)/b;this._itemsFromPreviousPage=0;if(y&&w+u>1.5*u){this._itemsFromPreviousPage=b,p[f]={avgHeight:0,index:f,items:[]};break}this._normalizeRow(p[f]),y||(f++,p[f]={avgHeight:0,index:0,items:[]}),i=o=a=u=r=s=l=c=0}}d.innerHTML="";var E="",S="",x;for(v=0;v<p.length;v++){x=p[v];if(!x.items||x.items.length===0)continue;for(var T=0;T<x.items.length;T++)e=x.items[T],this.doSetupItem({index:e.index,selected:this.isSelected(e.index)}),t.setAttribute("data-enyo-index",e.index),t.addStyles("width:"+e.width+"px;height:"+e.height+"px;"),this.itemSpacing>=0&&t.addStyles("margin-top:"+this.itemSpacing+"px;margin-left:"+this.itemSpacing+"px;"),S=t.generateHtml(),t.teardownRender(),E+=S}return E},_normalizeRow:function(e){if(!this.normalizeRows)return;if(!e.items||e.items.length===0)return;var t=this.owner.hasNode().clientWidth,n,r=0,i=0,s="",o=0,u=0,a=0,f=0,l;for(l=0;l<e.items.length;l++)n=e.items[l],o=n.width,u=n.height,i=Math.floor(e.avgHeight/u*o),s+=" "+i,n.width=i,n.height=e.avgHeight,r+=i,this.itemSpacing>=0&&(r+=this.itemSpacing,l==e.items.length-1&&(r+=this.itemSpacing));f=t-r,a=t/(t-f),r=0,i=0,s="";for(l=0;l<e.items.length;l++){n=e.items[l],o=n.width,u=n.height,i=Math.floor(o*a),s+=" "+i;var c=Math.floor(u*a);n.width=i,n.height=c,r+=i,this.itemSpacing>=0&&(r+=this.itemSpacing,l==e.items.length-1&&(r+=this.itemSpacing))}f=t-r,n=e.items[e.items.length-1],o=n.width,u=n.height,n.width=o+f,n.height=u}}),enyo.kind({name:"enyo.GridList",kind:"enyo.List",classes:"enyo-gridlist",published:{itemFluidWidth:!1,itemFixedSize:!1,itemMinWidth:160,itemMinHeight:160,itemWidth:160,itemHeight:160,itemSpacing:0,normalizeRows:!1},horizontal:"hidden",events:{onSizeupItem:""},show:function(e){this._calculateItemsPerRow(),this.setCount(e),this.reset()},create:enyo.inherit(function(e){return function(){this._setComponents(),e.apply(this,arguments),this.itemFluidWidthChanged(),this.itemFixedSizeChanged(),this.itemMinWidthChanged(),this.itemMinHeightChanged(),this.itemWidthChanged(),this.itemHeightChanged(),this.itemSpacingChanged(),this.normalizeRowsChanged(),this.$.generator.setClientClasses("enyo-gridlist-row")}}),itemFluidWidthChanged:function(){this.$.generator.itemFluidWidth=this.itemFluidWidth,this.setNormalizeRows(!this.itemFluidWidth&&!this.itemFixedSize)},itemFixedSizeChanged:function(){this.$.generator.itemFixedSize=this.itemFixedSize,this.setNormalizeRows(!this.itemFluidWidth&&!this.itemFixedSize)},itemWidthChanged:function(){this.$.generator.itemWidth=this.itemWidth},itemHeightChanged:function(){this.$.generator.itemHeight=this.itemHeight},itemMinWidthChanged:function(){var e=this.hasNode();e&&(this.itemMinWidth||(this.itemMinWidth=160),this.itemMinWidth=Math.min(this.itemMinWidth,e.clientWidth)),this.$.generator.itemMinWidth=this.itemMinWidth},itemMinHeightChanged:function(){var e=this.hasNode();e&&(this.itemMinHeight||(this.itemMinHeight=160),this.itemMinHeight=Math.min(this.itemMinHeight,e.clientHeight)),this.$.generator.itemMinHeight=this.itemMinHeight},itemSpacingChanged:function(){this.itemSpacing<0&&(this.itemSpacing=0),this.itemSpacing=this.itemSpacing,this.$.generator.itemSpacing=this.itemSpacing},normalizeRowsChanged:function(){this.$.generator.normalizeRows=this.normalizeRows},bottomUpChanged:function(){this.bottomUp=!1,this.pageBound="top"},reflow:enyo.inherit(function(e){return function(){this._calculateItemsPerRow(),e.apply(this,arguments)}}),_calculateItemsPerRow:function(){var e=this.hasNode();if(e){this.itemsPerRow=Math.floor((e.clientWidth-this.itemSpacing)/(this.itemMinWidth+this.itemSpacing));var t=Math.round((e.clientHeight-this.itemSpacing)/(this.itemMinHeight+this.itemSpacing));if(this.itemFixedSize||this.itemFluidWidth){var n=Math.floor((e.clientWidth-this.itemSpacing)/(this.itemWidth+this.itemSpacing)),r=Math.floor(n),i=Math.ceil(n),s=e.clientWidth-this.itemSpacing-i*(this.itemWidth+this.itemSpacing);this.itemsPerRow=s>0?i:r,t=Math.round((e.clientHeight-this.itemSpacing)/(this.itemHeight+this.itemSpacing))}this.itemsPerRow=Math.max(1,this.itemsPerRow),this.rowsPerPage=3*this.itemsPerRow*t,this.$.generator.itemsPerRow=this.itemsPerRow}},_setComponents:function(){this.listTools=enyo.clone(this.listTools),this.listTools[0]=enyo.clone(this.listTools[0]),this.listTools[0].components=enyo.clone(this.listTools[0].components);var e=this.listTools[0].components;for(var t=0;t<e.length;t++)if(e[t].name=="generator"){e[t]=enyo.clone(e[t]),e[t].kind="enyo.GridFlyWeightRepeater";return}}}),enyo.kind({name:"enyo.Slideable",kind:"Control",published:{axis:"h",value:0,unit:"px",min:0,max:0,accelerated:"auto",overMoving:!0,draggable:!0},events:{onAnimateFinish:"",onChange:""},preventDragPropagation:!1,tools:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"}],handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},kDragScalar:1,dragEventProp:"dx",unitModifier:!1,canTransform:!1,create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.acceleratedChanged(),this.transformChanged(),this.axisChanged(),this.valueChanged(),this.addClass("enyo-slideable")}}),initComponents:enyo.inherit(function(e){return function(){this.createComponents(this.tools),e.apply(this,arguments)}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.canModifyUnit(),this.updateDragScalar()}}),resizeHandler:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.updateDragScalar()}}),canModifyUnit:function(){if(!this.canTransform){var e=this.getInitialStyleValue(this.hasNode(),this.boundary);e.match(/px/i)&&this.unit==="%"&&(this.unitModifier=this.getBounds()[this.dimension])}},getInitialStyleValue:function(e,t){var n=enyo.dom.getComputedStyle(e);return n?n.getPropertyValue(t):e&&e.currentStyle?e.currentStyle[t]:"0"},updateBounds:function(e,t){var n={};n[this.boundary]=e,this.setBounds(n,this.unit),this.setInlineStyles(e,t)},updateDragScalar:function(){if(this.unit=="%"){var e=this.getBounds()[this.dimension];this.kDragScalar=e?100/e:1,this.canTransform||this.updateBounds(this.value,100)}},transformChanged:function(){this.canTransform=enyo.dom.canTransform()},acceleratedChanged:function(){(!enyo.platform.android||enyo.platform.android<=2)&&enyo.dom.accelerate(this,this.accelerated)},axisChanged:function(){var e=this.axis=="h";this.dragMoveProp=e?"dx":"dy",this.shouldDragProp=e?"horizontal":"vertical",this.transform=e?"translateX":"translateY",this.dimension=e?"width":"height",this.boundary=e?"left":"top"},setInlineStyles:function(e,t){var n={};this.unitModifier?(n[this.boundary]=this.percentToPixels(e,this.unitModifier),n[this.dimension]=this.unitModifier,this.setBounds(n)):(t?n[this.dimension]=t:n[this.boundary]=e,this.setBounds(n,this.unit))},valueChanged:function(e){var t=this.value;this.isOob(t)&&!this.isAnimating()&&(this.value=this.overMoving?this.dampValue(t):this.clampValue(t)),enyo.platform.android>2&&(this.value?(e===0||e===undefined)&&enyo.dom.accelerate(this,this.accelerated):enyo.dom.accelerate(this,!1)),this.canTransform?enyo.dom.transformValue(this,this.transform,this.value+this.unit):this.setInlineStyles(this.value,!1),this.doChange()},getAnimator:function(){return this.$.animator},isAtMin:function(){return this.value<=this.calcMin()},isAtMax:function(){return this.value>=this.calcMax()},calcMin:function(){return this.min},calcMax:function(){return this.max},clampValue:function(e){var t=this.calcMin(),n=this.calcMax();return Math.max(t,Math.min(e,n))},dampValue:function(e){return this.dampBound(this.dampBound(e,this.min,1),this.max,-1)},dampBound:function(e,t,n){var r=e;return r*n<t*n&&(r=t+(r-t)/4),r},percentToPixels:function(e,t){return Math.floor(t/100*e)},pixelsToPercent:function(e){var t=this.unitModifier?this.getBounds()[this.dimension]:this.container.getBounds()[this.dimension];return e/t*100},shouldDrag:function(e){return this.draggable&&e[this.shouldDragProp]},isOob:function(e){return e>this.calcMax()||e<this.calcMin()},dragstart:function(e,t){if(this.shouldDrag(t))return t.preventDefault(),this.$.animator.stop(),t.dragInfo={},this.dragging=!0,this.drag0=this.value,this.dragd0=0,this.preventDragPropagation},drag:function(e,t){if(this.dragging){t.preventDefault();var n=this.canTransform?t[this.dragMoveProp]*this.kDragScalar:this.pixelsToPercent(t[this.dragMoveProp]),r=this.drag0+n,i=n-this.dragd0;return this.dragd0=n,i&&(t.dragInfo.minimizing=i<0),this.setValue(r),this.preventDragPropagation}},dragfinish:function(e,t){if(this.dragging)return this.dragging=!1,this.completeDrag(t),t.preventTap(),this.preventDragPropagation},completeDrag:function(e){this.value!==this.calcMax()&&this.value!=this.calcMin()&&this.animateToMinMax(e.dragInfo.minimizing)},isAnimating:function(){return this.$.animator.isAnimating()},play:function(e,t){this.$.animator.play({startValue:e,endValue:t,node:this.hasNode()})},animateTo:function(e){this.play(this.value,e)},animateToMin:function(){this.animateTo(this.calcMin())},animateToMax:function(){this.animateTo(this.calcMax())},animateToMinMax:function(e){e?this.animateToMin():this.animateToMax()},animatorStep:function(e){return this.setValue(e.value),!0},animatorComplete:function(e){return this.doAnimateFinish(e),!0},toggleMinMax:function(){this.animateToMinMax(!this.isAtMin())}}),enyo.kind({name:"enyo.Arranger",kind:"Layout",layoutClass:"enyo-arranger",accelerated:"auto",dragProp:"ddx",dragDirectionProp:"xDirection",canDragProp:"horizontal",incrementalPoints:!1,destroy:enyo.inherit(function(e){return function(){var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)r._arranger=null;e.apply(this,arguments)}}),arrange:function(e,t){},size:function(){},start:function(){var e=this.container.fromIndex,t=this.container.toIndex,n=this.container.transitionPoints=[e];if(this.incrementalPoints){var r=Math.abs(t-e)-2,i=e;while(r>=0)i+=t<e?-1:1,n.push(i),r--}n.push(this.container.toIndex)},finish:function(){},calcArrangementDifference:function(e,t,n,r){},canDragEvent:function(e){return e[this.canDragProp]},calcDragDirection:function(e){return e[this.dragDirectionProp]},calcDrag:function(e){return e[this.dragProp]},drag:function(e,t,n,r,i){var s=this.measureArrangementDelta(-e,t,n,r,i);return s},measureArrangementDelta:function(e,t,n,r,i){var s=this.calcArrangementDifference(t,n,r,i),o=s?e/Math.abs(s):0;return o*=this.container.fromIndex>this.container.toIndex?-1:1,o},_arrange:function(e){this.containerBounds||this.reflow();var t=this.getOrderedControls(e);this.arrange(t,e)},arrangeControl:function(e,t){e._arranger=enyo.mixin(e._arranger||{},t)},flow:function(){this.c$=[].concat(this.container.getPanels()),this.controlsIndex=0;for(var e=0,t=this.container.getPanels(),n;n=t[e];e++){enyo.dom.accelerate(n,!n.preventAccelerate&&this.accelerated);if(enyo.platform.safari){var r=n.children;for(var i=0,s;s=r[i];i++)enyo.dom.accelerate(s,this.accelerated)}}},reflow:function(){var e=this.container.hasNode();this.containerBounds=e?{width:e.clientWidth,height:e.clientHeight}:{},this.size()},flowArrangement:function(){var e=this.container.arrangement;if(e)for(var t=0,n=this.container.getPanels(),r;(r=n[t])&&e[t];t++)this.flowControl(r,e[t])},flowControl:function(e,t){enyo.Arranger.positionControl(e,t);var n=t.opacity;n!=null&&enyo.Arranger.opacifyControl(e,n)},getOrderedControls:function(e){var t=Math.floor(e),n=t-this.controlsIndex,r=n>0,i=this.c$||[];for(var s=0;s<Math.abs(n);s++)r?i.push(i.shift()):i.unshift(i.pop());return this.controlsIndex=t,i},statics:{positionControl:function(e,t,n){var r=n||"px";if(!this.updating)if(enyo.dom.canTransform()&&!e.preventTransform&&!enyo.platform.android&&enyo.platform.ie!==10){var i=t.left,s=t.top;i=enyo.isString(i)?i:i&&i+r,s=enyo.isString(s)?s:s&&s+r,enyo.dom.transform(e,{translateX:i||null,translateY:s||null})}else enyo.dom.canTransform()&&e.preventTransform&&enyo.dom.transform(e,{translateX:null,translateY:null}),e.setBounds(t,n)},opacifyControl:function(e,t){var n=t;n=n>.99?1:n<.01?0:n,enyo.platform.ie<9?e.applyStyle("filter","progid:DXImageTransform.Microsoft.Alpha(Opacity="+n*100+")"):e.applyStyle("opacity",n)}}}),enyo.kind({name:"enyo.CardArranger",kind:"Arranger",layoutClass:"enyo-arranger enyo-arranger-fit",calcArrangementDifference:function(e,t,n,r){return this.containerBounds.width},arrange:function(e,t){for(var n=0,r,i;r=e[n];n++)i=n===0?1:0,this.arrangeControl(r,{opacity:i})},start:enyo.inherit(function(e){return function(){e.apply(this,arguments);var t=this.container.getPanels();for(var n=0,r;r=t[n];n++){var i=r.showing;r.setShowing(n==this.container.fromIndex||n==this.container.toIndex),r.showing&&!i&&r.resized()}}}),finish:enyo.inherit(function(e){return function(){e.apply(this,arguments);var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)r.setShowing(n==this.container.toIndex)}}),destroy:enyo.inherit(function(e){return function(){var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)enyo.Arranger.opacifyControl(r,1),r.showing||r.setShowing(!0);e.apply(this,arguments)}})}),enyo.kind({name:"enyo.CardSlideInArranger",kind:"CardArranger",start:function(){var e=this.container.getPanels();for(var t=0,n;n=e[t];t++){var r=n.showing;n.setShowing(t==this.container.fromIndex||t==this.container.toIndex),n.showing&&!r&&n.resized()}var i=this.container.fromIndex;t=this.container.toIndex,this.container.transitionPoints=[t+"."+i+".s",t+"."+i+".f"]},finish:enyo.inherit(function(e){return function(){e.apply(this,arguments);var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)r.setShowing(n==this.container.toIndex)}}),arrange:function(e,t){var n=t.split("."),r=n[0],i=n[1],s=n[2]=="s",o=this.containerBounds.width;for(var u=0,a=this.container.getPanels(),f,l;f=a[u];u++)l=o,i==u&&(l=s?0:-o),r==u&&(l=s?o:0),i==u&&i==r&&(l=0),this.arrangeControl(f,{left:l})},destroy:enyo.inherit(function(e){return function(){var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)enyo.Arranger.positionControl(r,{left:null});e.apply(this,arguments)}})}),enyo.kind({name:"enyo.CarouselArranger",kind:"Arranger",size:function(){var e=this.container.getPanels(),t=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},n=this.containerBounds,r,i,s,o,u;n.height-=t.top+t.bottom,n.width-=t.left+t.right;var a;for(r=0,s=0;u=e[r];r++)o=enyo.dom.calcMarginExtents(u.hasNode()),u.width=u.getBounds().width,u.marginWidth=o.right+o.left,s+=(u.fit?0:u.width)+u.marginWidth,u.fit&&(a=u);if(a){var f=n.width-s;a.width=f>=0?f:a.width}for(r=0,i=t.left;u=e[r];r++)u.setBounds({top:t.top,bottom:t.bottom,width:u.fit?u.width:null})},arrange:function(e,t){this.container.wrap?this.arrangeWrap(e,t):this.arrangeNoWrap(e,t)},arrangeNoWrap:function(e,t){var n,r,i,s,o=this.container.getPanels(),u=this.container.clamp(t),a=this.containerBounds.width;for(n=u,i=0;s=o[n];n++){i+=s.width+s.marginWidth;if(i>a)break}var f=a-i,l=0;if(f>0)for(n=u-1,r=0;s=o[n];n--){r+=s.width+s.marginWidth;if(f-r<=0){l=f-r,u=n;break}}var c,h;for(n=0,h=this.containerPadding.left+l;s=o[n];n++)c=s.width+s.marginWidth,n<u?this.arrangeControl(s,{left:-c}):(this.arrangeControl(s,{left:Math.floor(h)}),h+=c)},arrangeWrap:function(e,t){for(var n=0,r=this.containerPadding.left,i;i=e[n];n++)this.arrangeControl(i,{left:r}),r+=i.width+i.marginWidth},calcArrangementDifference:function(e,t,n,r){var i=Math.abs(e%this.c$.length);return t[i].left-r[i].left},destroy:enyo.inherit(function(e){return function(){var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)enyo.Arranger.positionControl(r,{left:null,top:null}),r.applyStyle("top",null),r.applyStyle("bottom",null),r.applyStyle("left",null),r.applyStyle("width",null);e.apply(this,arguments)}})}),enyo.kind({name:"enyo.CollapsingArranger",kind:"CarouselArranger",peekWidth:0,size:enyo.inherit(function(e){return function(){this.clearLastSize(),e.apply(this,arguments)}}),clearLastSize:function(){for(var e=0,t=this.container.getPanels(),n;n=t[e];e++)n._fit&&e!=t.length-1&&(n.applyStyle("width",null),n._fit=null)},constructor:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.peekWidth=this.container.peekWidth!=null?this.container.peekWidth:this.peekWidth}}),arrange:function(e,t){var n=this.container.getPanels();for(var r=0,i=this.containerPadding.left,s,o=0;s=n[r];r++)s.getShowing()?(this.arrangeControl(s,{left:i+o*this.peekWidth}),r>=t&&(i+=s.width+s.marginWidth-this.peekWidth),o++):(this.arrangeControl(s,{left:i}),r>=t&&(i+=s.width+s.marginWidth)),r==n.length-1&&t<0&&this.arrangeControl(s,{left:i-t})},calcArrangementDifference:function(e,t,n,r){var i=this.container.getPanels().length-1;return Math.abs(r[i].left-t[i].left)},flowControl:enyo.inherit(function(e){return function(t,n){e.apply(this,arguments);if(this.container.realtimeFit){var r=this.container.getPanels(),i=r.length-1,s=r[i];t==s&&this.fitControl(t,n.left)}}}),finish:enyo.inherit(function(e){return function(){e.apply(this,arguments);if(!this.container.realtimeFit&&this.containerBounds){var t=this.container.getPanels(),n=this.container.arrangement,r=t.length-1,i=t[r];this.fitControl(i,n[r].left)}}}),fitControl:function(e,t){e._fit=!0,e.applyStyle("width",this.containerBounds.width-t+"px"),e.resized()}}),enyo.kind({name:"enyo.DockRightArranger",kind:"Arranger",basePanel:!1,overlap:0,layoutWidth:0,constructor:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.overlap=this.container.overlap!=null?this.container.overlap:this.overlap,this.layoutWidth=this.container.layoutWidth!=null?this.container.layoutWidth:this.layoutWidth}}),size:function(){var e=this.container.getPanels(),t=this.containerPadding=this.container.hasNode()?enyo.dom.calcPaddingExtents(this.container.node):{},n=this.containerBounds,r,i,s;n.width-=t.left+t.right;var o=n.width,u=e.length,a;this.container.transitionPositions={};for(r=0;s=e[r];r++)s.width=r===0&&this.container.basePanel?o:s.getBounds().width;for(r=0;s=e[r];r++){r===0&&this.container.basePanel&&s.setBounds({width:o}),s.setBounds({top:t.top,bottom:t.bottom});for(var f=0;s=e[f];f++){var l;if(r===0&&this.container.basePanel)l=0;else if(f<r)l=o;else{if(r!==f)break;a=o>this.layoutWidth?this.overlap:0,l=o-e[r].width+a}this.container.transitionPositions[r+"."+f]=l}if(f<u){var c=!1;for(var h=r+1;h<u;h++){a=0;if(c)a=0;else if(e[r].width+e[h].width-this.overlap>o)a=0,c=!0;else{a=e[r].width-this.overlap;for(i=r;i<h;i++){var p=a+e[i+1].width-this.overlap;if(!(p<o)){a=o;break}a=p}a=o-a}this.container.transitionPositions[r+"."+h]=a}}}},arrange:function(e,t){var n,r,i=this.container.getPanels(),s=this.container.clamp(t);for(n=0;r=i[n];n++){var o=this.container.transitionPositions[n+"."+s];this.arrangeControl(r,{left:o})}},calcArrangementDifference:function(e,t,n,r){var i=this.container.getPanels(),s=e<n?i[n].width:i[e].width;return s},destroy:enyo.inherit(function(e){return function(){var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)enyo.Arranger.positionControl(r,{left:null,top:null}),r.applyStyle("top",null),r.applyStyle("bottom",null),r.applyStyle("left",null),r.applyStyle("width",null);e.apply(this,arguments)}})}),enyo.kind({name:"enyo.LeftRightArranger",kind:"Arranger",margin:40,axisSize:"width",offAxisSize:"height",axisPosition:"left",constructor:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.margin=this.container.margin!=null?this.container.margin:this.margin}}),size:function(){var e=this.container.getPanels(),t=this.containerBounds[this.axisSize],n=t-this.margin-this.margin;for(var r=0,i,s;s=e[r];r++)i={},i[this.axisSize]=n,i[this.offAxisSize]="100%",s.setBounds(i)},start:enyo.inherit(function(e){return function(){e.apply(this,arguments);var t=this.container.fromIndex,n=this.container.toIndex,r=this.getOrderedControls(n),i=Math.floor(r.length/2);for(var s=0,o;o=r[s];s++)t>n?s==r.length-i?o.applyStyle("z-index",0):o.applyStyle("z-index",1):s==r.length-1-i?o.applyStyle("z-index",0):o.applyStyle("z-index",1)}}),arrange:function(e,t){var n,r,i;if(this.container.getPanels().length==1){i={},i[this.axisPosition]=this.margin,this.arrangeControl(this.container.getPanels()[0],i);return}var s=Math.floor(this.container.getPanels().length/2),o=this.getOrderedControls(Math.floor(t)-s),u=this.containerBounds[this.axisSize]-this.margin-this.margin,a=this.margin-u*s;for(n=0;r=o[n];n++)i={},i[this.axisPosition]=a,this.arrangeControl(r,i),a+=u},calcArrangementDifference:function(e,t,n,r){if(this.container.getPanels().length==1)return 0;var i=Math.abs(e%this.c$.length);return t[i][this.axisPosition]-r[i][this.axisPosition]},destroy:enyo.inherit(function(e){return function(){var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)enyo.Arranger.positionControl(r,{left:null,top:null}),enyo.Arranger.opacifyControl(r,1),r.applyStyle("left",null),r.applyStyle("top",null),r.applyStyle("height",null),r.applyStyle("width",null);e.apply(this,arguments)}})}),enyo.kind({name:"enyo.TopBottomArranger",kind:"LeftRightArranger",dragProp:"ddy",dragDirectionProp:"yDirection",canDragProp:"vertical",axisSize:"height",offAxisSize:"width",axisPosition:"top"}),enyo.kind({name:"enyo.SpiralArranger",kind:"Arranger",incrementalPoints:!0,inc:20,size:function(){var e=this.container.getPanels(),t=this.containerBounds,n=this.controlWidth=t.width/3,r=this.controlHeight=t.height/3;for(var i=0,s;s=e[i];i++)s.setBounds({width:n,height:r})},arrange:function(e,t){var n=this.inc;for(var r=0,i=e.length,s;s=e[r];r++){var o=Math.cos(r/i*2*Math.PI)*r*n+this.controlWidth,u=Math.sin(r/i*2*Math.PI)*r*n+this.controlHeight;this.arrangeControl(s,{left:o,top:u})}},start:enyo.inherit(function(e){return function(){e.apply(this,arguments);var t=this.getOrderedControls(this.container.toIndex);for(var n=0,r;r=t[n];n++)r.applyStyle("z-index",t.length-n)}}),calcArrangementDifference:function(e,t,n,r){return this.controlWidth},destroy:enyo.inherit(function(e){return function(){var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)r.applyStyle("z-index",null),enyo.Arranger.positionControl(r,{left:null,top:null}),r.applyStyle("left",null),r.applyStyle("top",null),r.applyStyle("height",null),r.applyStyle("width",null);e.apply(this,arguments)}})}),enyo.kind({name:"enyo.GridArranger",kind:"Arranger",incrementalPoints:!0,colWidth:100,colHeight:100,size:function(){var e=this.container.getPanels(),t=this.colWidth,n=this.colHeight;for(var r=0,i;i=e[r];r++)i.setBounds({width:t,height:n})},arrange:function(e,t){var n=this.colWidth,r=this.colHeight,i=Math.max(1,Math.floor(this.containerBounds.width/n)),s;for(var o=0,u=0;u<e.length;o++)for(var a=0;a<i&&(s=e[u]);a++,u++)this.arrangeControl(s,{left:n*a,top:r*o})},flowControl:enyo.inherit(function(e){return function(t,n){e.apply(this,arguments),enyo.Arranger.opacifyControl(t,n.top%this.colHeight!==0?.25:1)}}),calcArrangementDifference:function(e,t,n,r){return this.colWidth},destroy:enyo.inherit(function(e){return function(){var t=this.container.getPanels();for(var n=0,r;r=t[n];n++)enyo.Arranger.positionControl(r,{left:null,top:null}),r.applyStyle("left",null),r.applyStyle("top",null),r.applyStyle("height",null),r.applyStyle("width",null);e.apply(this,arguments)}})}),enyo.kind({name:"enyo.Panels",classes:"enyo-panels",published:{index:0,draggable:!0,animate:!0,wrap:!1,arrangerKind:"CardArranger",narrowFit:!0},events:{onTransitionStart:"",onTransitionFinish:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",onscroll:"domScroll"},tools:[{kind:"Animator",onStep:"step",onEnd:"completed"}],fraction:0,create:enyo.inherit(function(e){return function(){this.transitionPoints=[],e.apply(this,arguments),this.arrangerKindChanged(),this.narrowFitChanged(),this.indexChanged()}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),enyo.makeBubble(this,"scroll")}}),domScroll:function(e,t){this.hasNode()&&this.node.scrollLeft>0&&(this.node.scrollLeft=0)},initComponents:enyo.inherit(function(e){return function(){this.createChrome(this.tools),e.apply(this,arguments)}}),arrangerKindChanged:function(){this.setLayoutKind(this.arrangerKind)},narrowFitChanged:function(){this.addRemoveClass("enyo-panels-fit-narrow",this.narrowFit&&enyo.Panels.isScreenNarrow())},destroy:enyo.inherit(function(e){return function(){this.destroying=!0,e.apply(this,arguments)}}),removeControl:enyo.inherit(function(e){return function(t){if(this.destroying)return e.apply(this,arguments);var n=-1,r=enyo.indexOf(t,this.controls);r===this.index&&(n=Math.max(r-1,0)),e.apply(this,arguments),n!==-1&&this.controls.length>0&&(this.setIndex(n),this.flow(),this.reflow())}}),isPanel:function(){return!0},flow:enyo.inherit(function(e){return function(){this.arrangements=[],e.apply(this,arguments)}}),reflow:enyo.inherit(function(e){return function(){this.arrangements=[],e.apply(this,arguments),this.refresh()}}),getPanels:function(){var e=this.controlParent||this;return e.children},getActive:function(){var e=this.getPanels(),t=this.index%e.length;return t<0&&(t+=e.length),e[t]},getAnimator:function(){return this.$.animator},setIndex:function(e){var t=this.get("index"),n=this.clamp(e);this.index=n,this.notifyObservers("index",t,n)},setIndexDirect:function(e){this.setIndex(e),this.completed()},selectPanelByName:function(e){if(!e)return;var t=0,n=this.getPanels(),r=n.length;for(;t<r;++t)if(e===n[t].name)return this.setIndex(t),t},previous:function(){var e=this.index-1;this.wrap&&e<0&&(e=this.getPanels().length-1),this.setIndex(e)},next:function(){var e=this.index+1;this.wrap&&e>=this.getPanels().length&&(e=0),this.setIndex(e)},clamp:function(e){var t=this.getPanels().length;return this.wrap?(e%=t,e<0?e+t:e):Math.max(0,Math.min(e,t-1))},indexChanged:function(e){this.lastIndex=e,!this.dragging&&this.$.animator&&(this.$.animator.isAnimating()&&(this.finishTransitionInfo&&(this.finishTransitionInfo.animating=!0),this.completed()),this.$.animator.stop(),this.hasNode()&&(this.animate?(this.startTransition(!0),this.$.animator.play({startValue:this.fraction})):this.refresh()))},step:function(e){return this.fraction=e.value,this.stepTransition(),!0},completed:function(){return this.$.animator.isAnimating()&&this.$.animator.stop(),this.fraction=1,this.stepTransition(),this.finishTransition(!0),!0},dragstart:function(e,t){if(this.draggable&&this.layout&&this.layout.canDragEvent(t))return t.preventDefault(),this.dragstartTransition(t),this.dragging=!0,this.$.animator.stop(),!0},drag:function(e,t){this.dragging&&(t.preventDefault(),this.dragTransition(t))},dragfinish:function(e,t){this.dragging&&(this.dragging=!1,t.preventTap(),this.dragfinishTransition(t))},dragstartTransition:function(e){if(!this.$.animator.isAnimating()){var t=this.fromIndex=this.index;this.toIndex=t-(this.layout?this.layout.calcDragDirection(e):0)}else this.verifyDragTransition(e);this.fromIndex=this.clamp(this.fromIndex),this.toIndex=this.clamp(this.toIndex),this.fireTransitionStart(),this.layout&&this.layout.start()},dragTransition:function(e){var t=this.layout?this.layout.calcDrag(e):0,n=this.transitionPoints,r=n[0],i=n[n.length-1],s=this.fetchArrangement(r),o=this.fetchArrangement(i),u=this.layout?this.layout.drag(t,r,s,i,o):0,a=t&&!u;a,this.fraction+=u;var f=this.fraction;if(f>1||f<0||a)(f>0||a)&&this.dragfinishTransition(e),this.dragstartTransition(e),this.fraction=0;this.stepTransition()},dragfinishTransition:function(e){this.verifyDragTransition(e),this.setIndex(this.toIndex),this.dragging&&this.fireTransitionFinish()},verifyDragTransition:function(e){var t=this.layout?this.layout.calcDragDirection(e):0,n=Math.min(this.fromIndex,this.toIndex),r=Math.max(this.fromIndex,this.toIndex);if(t>0){var i=n;n=r,r=i}n!=this.fromIndex&&(this.fraction=1-this.fraction),this.fromIndex=n,this.toIndex=r},refresh:function(){this.$.animator&&this.$.animator.isAnimating()&&this.$.animator.stop(),this.startTransition(!1),this.fraction=1,this.stepTransition(),this.finishTransition(!1)},startTransition:function(e){this.fromIndex=this.fromIndex!=null?this.fromIndex:this.lastIndex||0,this.toIndex=this.toIndex!=null?this.toIndex:this.index,this.layout&&this.layout.start(),e&&this.fireTransitionStart()},finishTransition:function(e){this.layout&&this.layout.finish(),this.transitionPoints=[],this.fraction=0,this.fromIndex=this.toIndex=null,e&&this.fireTransitionFinish()},fireTransitionStart:function(){var e=this.startTransitionInfo;this.hasNode()&&(!e||e.fromIndex!=this.fromIndex||e.toIndex!=this.toIndex)&&(this.startTransitionInfo={fromIndex:this.fromIndex,toIndex:this.toIndex},this.doTransitionStart(enyo.clone(this.startTransitionInfo)))},fireTransitionFinish:function(){var e=this.finishTransitionInfo;this.hasNode()&&(!e||e.fromIndex!=this.lastIndex||e.toIndex!=this.index)&&(e&&e.animating?this.finishTransitionInfo={fromIndex:e.toIndex,toIndex:this.lastIndex}:this.finishTransitionInfo={fromIndex:this.lastIndex,toIndex:this.index},this.doTransitionFinish(enyo.clone(this.finishTransitionInfo)))},stepTransition:function(){if(this.hasNode()){var e=this.transitionPoints,t=(this.fraction||0)*(e.length-1),n=Math.floor(t);t-=n;var r=e[n],i=e[n+1],s=this.fetchArrangement(r),o=this.fetchArrangement(i);this.arrangement=s&&o?enyo.Panels.lerp(s,o,t):s||o,this.arrangement&&this.layout&&this.layout.flowArrangement()}},fetchArrangement:function(e){return e!=null&&!this.arrangements[e]&&this.layout&&(this.layout._arrange(e),this.arrangements[e]=this.readArrangement(this.getPanels())),this.arrangements[e]},readArrangement:function(e){var t=[];for(var n=0,r=e,i;i=r[n];n++)t.push(enyo.clone(i._arranger));return t},statics:{isScreenNarrow:function(){var e=navigator.userAgent,t=enyo.dom.getWindowWidth();switch(enyo.platform.platformName){case"ios":return/iP(?:hone|od;(?: U;)? CPU) OS (\d+)/.test(e);case"android":return/Mobile/.test(e)&&(enyo.platform.android>2?!0:t<=800);case"androidChrome":return/Mobile/.test(e)}return t<=800},lerp:function(e,t,n){var r=[];for(var i=0,s=enyo.keys(e),o;o=s[i];i++)r.push(this.lerpObject(e[o],t[o],n));return r},lerpObject:function(e,t,n){var r=enyo.clone(e),i,s;if(t)for(var o in e)i=e[o],s=t[o],i!=s&&(r[o]=i-(i-s)*n);return r}}}),enyo.kind({name:"enyo.Node",published:{expandable:!1,expanded:!1,icon:"",onlyIconExpands:!1,selected:!1},style:"padding: 0 0 0 16px;",content:"Node",defaultKind:"Node",classes:"enyo-node",components:[{name:"icon",kind:"Image",showing:!1},{kind:"Control",name:"caption",Xtag:"span",style:"display: inline-block; padding: 4px;",allowHtml:!0},{kind:"Control",name:"extra",tag:"span",allowHtml:!0}],childClient:[{kind:"Control",name:"box",classes:"enyo-node-box",Xstyle:"border: 1px solid orange;",components:[{kind:"Control",name:"client",classes:"enyo-node-client",Xstyle:"border: 1px solid lightblue;"}]}],handlers:{ondblclick:"dblclick"},events:{onNodeTap:"nodeTap",onNodeDblClick:"nodeDblClick",onExpand:"nodeExpand",onDestroyed:"nodeDestroyed"},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.selectedChanged(),this.iconChanged()}}),destroy:enyo.inherit(function(e){return function(){this.doDestroyed(),e.apply(this,arguments)}}),initComponents:enyo.inherit(function(e){return function(){this.expandable&&(this.kindComponents=this.kindComponents.concat(this.childClient)),e.apply(this,arguments)}}),contentChanged:function(){this.$.caption.setContent(this.content)},iconChanged:function(){this.$.icon.setSrc(this.icon),this.$.icon.setShowing(Boolean(this.icon))},selectedChanged:function(){this.addRemoveClass("enyo-selected",this.selected)},rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.expandable&&!this.expanded&&this.quickCollapse()}}),addNodes:function(e){this.destroyClientControls();for(var t=0,n;n=e[t];t++)this.createComponent(n);this.$.client.render()},addTextNodes:function(e){this.destroyClientControls();for(var t=0,n;n=e[t];t++)this.createComponent({content:n});this.$.client.render()},tap:function(e,t){return this.onlyIconExpands?t.target==this.$.icon.hasNode()?this.toggleExpanded():this.doNodeTap():(this.toggleExpanded(),this.doNodeTap()),!0},dblclick:function(e,t){return this.doNodeDblClick(),!0},toggleExpanded:function(){this.setExpanded(!this.expanded)},quickCollapse:function(){this.removeClass("enyo-animate"),this.$.box.applyStyle("height","0");var e=this.$.client.getBounds().height;this.$.client.setBounds({top:-e})},_expand:function(){this.addClass("enyo-animate");var e=this.$.client.getBounds().height;this.$.box.setBounds({height:e}),this.$.client.setBounds({top:0}),setTimeout(this.bindSafely(function(){this.expanded&&(this.removeClass("enyo-animate"),this.$.box.applyStyle("height","auto"))}),225)},_collapse:function(){this.removeClass("enyo-animate");var e=this.$.client.getBounds().height;this.$.box.setBounds({height:e}),setTimeout(this.bindSafely(function(){this.addClass("enyo-animate"),this.$.box.applyStyle("height","0"),this.$.client.setBounds({top:-e})}),25)},expandedChanged:function(e){if(!this.expandable)this.expanded=!1;else{var t={expanded:this.expanded};this.doExpand(t),t.wait||this.effectExpanded()}},effectExpanded:function(){this.$.client&&(this.expanded?this._expand():this._collapse())}}),enyo.kind({name:"enyo.PanZoomView",kind:enyo.Scroller,touchOverscroll:!1,thumb:!1,animate:!0,verticalDragPropagation:!0,horizontalDragPropagation:!0,published:{scale:"auto",disableZoom:!1},events:{onZoom:""},touch:!0,preventDragPropagation:!1,handlers:{ondragstart:"dragPropagation",onSetDimensions:"setDimensions"},components:[{name:"animator",kind:"Animator",onStep:"zoomAnimationStep",onEnd:"zoomAnimationEnd"},{name:"viewport",style:"overflow:hidden;min-height:100%;min-width:100%;",classes:"enyo-fit",ongesturechange:"gestureTransform",ongestureend:"saveState",ontap:"singleTap",ondblclick:"doubleClick",onmousewheel:"mousewheel",components:[{name:"content"}]}],create:enyo.inherit(function(e){return function(){this.scaleKeyword=this.scale;var t=this.components;this.components=[],e.apply(this,arguments),this.$.content.applyStyle("width",this.contentWidth+"px"),this.$.content.applyStyle("height",this.contentHeight+"px");if(this.unscaledComponents){var n=this.hasOwnProperty("unscaledComponents")?this.getInstanceOwner():this;this.createComponents(this.unscaledComponents,{owner:n})}this.controlParentName="content",this.discoverControlParent(),this.createComponents(t),this.canTransform=enyo.dom.canTransform(),this.canTransform||this.$.content.applyStyle("position","relative"),this.canAccelerate=enyo.dom.canAccelerate(),this.getStrategy().setDragDuringGesture(!1)}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.getOriginalScale()}}),dragPropagation:function(e,t){var n=this.getStrategy().getScrollBounds(),r=n.top===0&&t.dy>0||n.top>=n.maxTop-2&&t.dy<0,i=n.left===0&&t.dx>0||n.left>=n.maxLeft-2&&t.dx<0;return!(r&&this.verticalDragPropagation||i&&this.horizontalDragPropagation)},mousewheel:function(e,t){t.pageX|=t.clientX+t.target.scrollLeft,t.pageY|=t.clientY+t.target.scrollTop;var n=(this.maxScale-this.minScale)/10,r=this.scale;if(t.wheelDelta>0||t.detail<0)this.scale=this.limitScale(this.scale+n);else if(t.wheelDelta<0||t.detail>0)this.scale=this.limitScale(this.scale-n);return this.eventPt=this.calcEventLocation(t),this.transform(this.scale),r!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null,t.preventDefault(),!0},resizeHandler:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.scaleChanged()}}),setDimensions:function(e,t){return this.$.content.applyStyle("width",t.width+"px"),this.$.content.applyStyle("height",t.height+"px"),this.originalWidth=t.width,this.originalHeight=t.height,this.scale=this.scaleKeyword,this.scaleChanged(),!0},getOriginalScale:function(){this.$.content.hasNode()&&(this.originalWidth=this.$.content.node.clientWidth,this.originalHeight=this.$.content.node.clientHeight,this.scale=this.scaleKeyword,this.scaleChanged())},scaleChanged:function(){var e=this.hasNode();if(e){this.containerWidth=e.clientWidth,this.containerHeight=e.clientHeight;var t=this.containerWidth/this.originalWidth,n=this.containerHeight/this.originalHeight;this.minScale=Math.min(t,n),this.maxScale=this.minScale*3<1?1:this.minScale*3,this.scale=="auto"?this.scale=this.minScale:this.scale=="width"?this.scale=t:this.scale=="height"?this.scale=n:this.scale=="fit"?(this.fitAlignment="center",this.scale=Math.max(t,n)):(this.maxScale=Math.max(this.maxScale,this.scale),this.scale=this.limitScale(this.scale))}this.eventPt=this.calcEventLocation(),this.transform(this.scale),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start(),this.align()},align:function(){if(this.fitAlignment&&this.fitAlignment==="center"){var e=this.getScrollBounds();this.setScrollLeft(e.maxLeft/2),this.setScrollTop(e.maxTop/2)}},gestureTransform:function(e,t){this.eventPt=this.calcEventLocation(t),this.transform(this.limitScale(this.scale*t.scale))},calcEventLocation:function(e){var t={x:0,y:0};if(e&&this.hasNode()){var n=this.node.getBoundingClientRect();t.x=Math.round(e.pageX-n.left-this.bounds.x),t.x=Math.max(0,Math.min(this.bounds.width,t.x)),t.y=Math.round(e.pageY-n.top-this.bounds.y),t.y=Math.max(0,Math.min(this.bounds.height,t.y))}return t},transform:function(e){this.tapped=!1;var t=this.bounds||this.innerBounds(e);this.bounds=this.innerBounds(e),this.scale>this.minScale?this.$.viewport.applyStyle("cursor","move"):this.$.viewport.applyStyle("cursor",null),this.$.viewport.setBounds({width:this.bounds.width+"px",height:this.bounds.height+"px"}),this.ratioX=this.ratioX||(this.eventPt.x+this.getScrollLeft())/t.width,this.ratioY=this.ratioY||(this.eventPt.y+this.getScrollTop())/t.height;var n,r;this.$.animator.ratioLock?(n=this.$.animator.ratioLock.x*this.bounds.width-this.containerWidth/2,r=this.$.animator.ratioLock.y*this.bounds.height-this.containerHeight/2):(n=this.ratioX*this.bounds.width-this.eventPt.x,r=this.ratioY*this.bounds.height-this.eventPt.y),n=Math.max(0,Math.min(this.bounds.width-this.containerWidth,n)),r=Math.max(0,Math.min(this.bounds.height-this.containerHeight,r));if(this.canTransform){var i={scale:e};this.canAccelerate?i=enyo.mixin({translate3d:Math.round(this.bounds.left)+"px, "+Math.round(this.bounds.top)+"px, 0px"},i):i=enyo.mixin({translate:this.bounds.left+"px, "+this.bounds.top+"px"},i),enyo.dom.transform(this.$.content,i)}else if(enyo.platform.ie){var s='"progid:DXImageTransform.Microsoft.Matrix(M11='+e+", M12=0, M21=0, M22="+e+", SizingMethod='auto expand')\"";this.$.content.applyStyle("-ms-filter",s),this.$.content.setBounds({width:this.bounds.width*e+"px",height:this.bounds.height*e+"px",left:this.bounds.left+"px",top:this.bounds.top+"px"}),this.$.content.applyStyle("width",e*this.bounds.width),this.$.content.applyStyle("height",e*this.bounds.height)}this.setScrollLeft(n),this.setScrollTop(r),this.positionClientControls(e)},limitScale:function(e){return this.disableZoom?e=this.scale:e>this.maxScale?e=this.maxScale:e<this.minScale&&(e=this.minScale),e},innerBounds:function(e){var t=this.originalWidth*e,n=this.originalHeight*e,r={x:0,y:0,transX:0,transY:0};return t<this.containerWidth&&(r.x+=(this.containerWidth-t)/2),n<this.containerHeight&&(r.y+=(this.containerHeight-n)/2),this.canTransform&&(r.transX-=(this.originalWidth-t)/2,r.transY-=(this.originalHeight-n)/2),{left:r.x+r.transX,top:r.y+r.transY,width:t,height:n,x:r.x,y:r.y}},saveState:function(e,t){var n=this.scale;this.scale*=t.scale,this.scale=this.limitScale(this.scale),n!=this.scale&&this.doZoom({scale:this.scale}),this.ratioX=this.ratioY=null},doubleClick:function(e,t){enyo.platform.ie==8&&(this.tapped=!0,t.pageX=t.clientX+t.target.scrollLeft,t.pageY=t.clientY+t.target.scrollTop,this.singleTap(e,t),t.preventDefault())},singleTap:function(e,t){setTimeout(this.bindSafely(function(){this.tapped=!1}),300),this.tapped?(this.tapped=!1,this.smartZoom(e,t)):this.tapped=!0},smartZoom:function(e,t){var n=this.hasNode(),r=this.$.content.hasNode();if(n&&r&&this.hasNode()&&!this.disableZoom){var i=this.scale;this.scale!=this.minScale?this.scale=this.minScale:this.scale=this.maxScale,this.eventPt=this.calcEventLocation(t);if(this.animate){var s={x:(this.eventPt.x+this.getScrollLeft())/this.bounds.width,y:(this.eventPt.y+this.getScrollTop())/this.bounds.height};this.$.animator.play({duration:350,ratioLock:s,baseScale:i,deltaScale:this.scale-i})}else this.transform(this.scale),this.doZoom({scale:this.scale})}},zoomAnimationStep:function(e,t){var n=this.$.animator.baseScale+this.$.animator.deltaScale*this.$.animator.value;return this.transform(n),!0},zoomAnimationEnd:function(e,t){return this.stabilize(),this.doZoom({scale:this.scale}),this.$.animator.ratioLock=undefined,!0},positionClientControls:function(e){this.waterfallDown("onPositionPin",{scale:e,bounds:this.bounds})}}),enyo.kind({name:"enyo.ImageViewPin",kind:"enyo.Control",published:{highlightAnchorPoint:!1,anchor:{top:0,left:0},position:{top:0,left:0}},style:"position:absolute;z-index:1000;width:0px;height:0px;",handlers:{onPositionPin:"reAnchor"},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.styleClientControls(),this.positionClientControls(),this.highlightAnchorPointChanged(),this.anchorChanged()}}),styleClientControls:function(){var e=this.getClientControls();for(var t=0;t<e.length;t++)e[t].applyStyle("position","absolute")},positionClientControls:function(){var e=this.getClientControls();for(var t=0;t<e.length;t++)for(var n in this.position)e[t].applyStyle(n,this.position[n]+"px")},highlightAnchorPointChanged:function(){this.addRemoveClass("pinDebug",this.highlightAnchorPoint)},anchorChanged:function(){var e=null,t=null;for(t in this.anchor){e=this.anchor[t].toString().match(/^(\d+(?:\.\d+)?)(.*)$/);if(!e)continue;this.anchor[t+"Coords"]={value:e[1],units:e[2]||"px"}}},reAnchor:function(e,t){var n=t.scale,r=t.bounds,i=this.anchor.right?this.anchor.rightCoords.units=="px"?r.width+r.x-this.anchor.rightCoords.value*n:r.width*(100-this.anchor.rightCoords.value)/100+r.x:this.anchor.leftCoords.units=="px"?this.anchor.leftCoords.value*n+r.x:r.width*this.anchor.leftCoords.value/100+r.x,s=this.anchor.bottom?this.anchor.bottomCoords.units=="px"?r.height+r.y-this.anchor.bottomCoords.value*n:r.height*(100-this.anchor.bottomCoords.value)/100+r.y:this.anchor.topCoords.units=="px"?this.anchor.topCoords.value*n+r.y:r.height*this.anchor.topCoords.value/100+r.y;this.applyStyle("left",i+"px"),this.applyStyle("top",s+"px")}}),enyo.kind({name:"enyo.ImageView",kind:"enyo.PanZoomView",subKindComponents:[{kind:"Image",ondown:"down",style:"vertical-align: text-top;"}],create:enyo.inherit(function(e){return function(){this.unscaledComponents=this.components,this.components=[],this.kindComponents[1].components[0].components=this.subKindComponents,e.apply(this,arguments),this.$.content.applyStyle("display","inline-block"),this.bufferImage=new Image,this.bufferImage.onload=enyo.bind(this,"imageLoaded"),this.bufferImage.onerror=enyo.bind(this,"imageError"),this.srcChanged(),this.getStrategy().$.scrollMath&&this.getStrategy().$.scrollMath.start()}}),destroy:enyo.inherit(function(e){return function(){this.bufferImage&&(this.bufferImage.onerror=undefined,this.bufferImage.onerror=undefined,delete this.bufferImage),e.apply(this,arguments)}}),down:function(e,t){t.preventDefault()},srcChanged:function(){this.src&&this.src.length>0&&this.bufferImage&&this.src!=this.bufferImage.src&&(this.bufferImage.src=this.src)},imageLoaded:function(e){this.scale=this.scaleKeyword,this.originalWidth=this.contentWidth=this.bufferImage.width,this.originalHeight=this.contentHeight=this.bufferImage.height,this.scaleChanged(),this.$.image.setSrc(this.bufferImage.src);if(enyo.platform.safari){var t=this.$.image.hasNode(),n=this.bufferImage.src;t&&setTimeout(function(){t.src=n},100)}enyo.dom.transformValue(this.getStrategy().$.client,"translate3d","0px, 0px, 0"),this.positionClientControls(this.scale),this.align()},imageError:function(e){enyo.error("Error loading image: "+this.src),this.bubble("onerror",e)}}),enyo.kind({name:"enyo.ImageCarousel",kind:enyo.Panels,arrangerKind:"enyo.CarouselArranger",defaultScale:"auto",disableZoom:!1,lowMemory:!1,published:{images:[]},handlers:{onTransitionStart:"transitionStart",onTransitionFinish:"transitionFinish"},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.imageCount=this.images.length,this.images.length>0&&(this.initContainers(),this.loadNearby())}}),initContainers:function(){for(var e=0;e<this.images.length;e++)this.$["container"+e]||(this.createComponent({name:"container"+e,style:"height:100%; width:100%;"}),this.$["container"+e].render());for(e=this.images.length;e<this.imageCount;e++)this.$["image"+e]&&this.$["image"+e].destroy(),this.$["container"+e].destroy();this.imageCount=this.images.length},loadNearby:function(){var e=this.getBufferRange();for(var t in e)this.loadImageView(e[t])},getBufferRange:function(){var e=[];if(this.layout.containerBounds){var t=1,n=this.layout.containerBounds,r,i,s,o;i=this.index-1,s=0,o=n.width*t;while(i>=0&&s<=o)r=this.$["container"+i],s+=r.width+r.marginWidth,e.unshift(i),i--;i=this.index,s=0,o=n.width*(t+1);while(i<this.images.length&&s<=o)r=this.$["container"+i],s+=r.width+r.marginWidth,e.push(i),i++}return e},reflow:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.loadNearby()}}),loadImageView:function(e){return this.wrap&&(e=(e%this.images.length+this.images.length)%this.images.length),e>=0&&e<=this.images.length-1&&(this.$["image"+e]?this.$["image"+e].src!=this.images[e]&&(this.$["image"+e].setSrc(this.images[e]),this.$["image"+e].setScale(this.defaultScale),this.$["image"+e].setDisableZoom(this.disableZoom)):(this.$["container"+e].createComponent({name:"image"+e,kind:"ImageView",scale:this.defaultScale,disableZoom:this.disableZoom,src:this.images[e],verticalDragPropagation:!1,style:"height:100%; width:100%;"},{owner:this}),this.$["image"+e].render())),this.$["image"+e]},setImages:function(e){this.set("images",e)},imagesChanged:function(){this.initContainers(),this.loadNearby()},indexChanged:enyo.inherit(function(e){return function(){this.loadNearby(),this.lowMemory&&this.cleanupMemory(),e.apply(this,arguments)}}),transitionStart:function(e,t){if(t.fromIndex==t.toIndex)return!0},transitionFinish:function(e,t){this.loadNearby(),this.lowMemory&&this.cleanupMemory()},getActiveImage:function(){return this.getImageByIndex(this.index)},getImageByIndex:function(e){return this.$["image"+e]||this.loadImageView(e)},cleanupMemory:function(){var e=this.getBufferRange();for(var t=0;t<this.images.length;t++)enyo.indexOf(t,e)===-1&&this.$["image"+t]&&this.$["image"+t].destroy()}});enyo&&enyo.version&&(enyo.version.onyx="2.4.0"),enyo.kind({name:"onyx.Icon",published:{src:"",disabled:!1},classes:"onyx-icon",create:function(){this.inherited(arguments),this.src&&this.srcChanged(),this.disabledChanged()},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},srcChanged:function(){this.applyStyle("background-image","url("+enyo.path.rewrite(this.src)+")")}}),enyo.kind({name:"onyx.Button",kind:"enyo.Button",classes:"onyx-button enyo-unselectable",handlers:{ondown:"down",onenter:"enter",ondragfinish:"dragfinish",onleave:"leave",onup:"up"},down:function(e,t){if(this.disabled)return!0;this.addClass("pressed"),this._isPressed=!0},enter:function(e,t){if(this.disabled)return!0;this._isPressed&&this.addClass("pressed")},dragfinish:function(e,t){if(this.disabled)return!0;this.removeClass("pressed"),this._isPressed=!1},leave:function(e,t){if(this.disabled)return!0;this.removeClass("pressed")},up:function(e,t){if(this.disabled)return!0;this.removeClass("pressed"),this._isPressed=!1}}),enyo.kind({name:"onyx.IconButton",kind:"onyx.Icon",published:{active:!1},classes:"onyx-icon-button",handlers:{ondown:"down",onenter:"enter",ondragfinish:"dragfinish",onleave:"leave",onup:"up"},rendered:function(){this.inherited(arguments),this.activeChanged()},tap:function(){if(this.disabled)return!0;this.setActive(!0)},down:function(e,t){if(this.disabled)return!0;this.addClass("pressed"),this._isPressed=!0},enter:function(e,t){if(this.disabled)return!0;this._isPressed&&this.addClass("pressed")},dragfinish:function(e,t){if(this.disabled)return!0;this.removeClass("pressed"),this._isPressed=!1},leave:function(e,t){if(this.disabled)return!0;this.removeClass("pressed")},up:function(e,t){if(this.disabled)return!0;this.removeClass("pressed"),this._isPressed=!1},activeChanged:function(){this.bubble("onActivate")}}),enyo.kind({name:"onyx.Checkbox",classes:"onyx-checkbox",kind:enyo.Checkbox,tag:"div",handlers:{onclick:""},tap:function(e,t){return this.disabled||(this.setChecked(!this.getChecked()),this.bubble("onchange")),!this.disabled},dragstart:function(){}}),enyo.kind({name:"onyx.Drawer",kind:"enyo.Drawer"}),enyo.kind({name:"onyx.Grabber",classes:"onyx-grabber"}),enyo.kind({name:"onyx.Groupbox",classes:"onyx-groupbox"}),enyo.kind({name:"onyx.GroupboxHeader",classes:"onyx-groupbox-header"}),enyo.kind({name:"onyx.Input",kind:"enyo.Input",classes:"onyx-input"}),enyo.kind({name:"onyx.Popup",kind:"enyo.Popup",classes:"onyx-popup",published:{scrimWhenModal:!0,scrim:!1,scrimClassName:"",defaultZ:120},protectedStatics:{count:0,highestZ:120},showingChanged:function(){this.showing?(onyx.Popup.count++,this.applyZIndex()):onyx.Popup.count>0&&onyx.Popup.count--,this.showHideScrim(this.showing),this.inherited(arguments)},showHideScrim:function(e){if(this.floating&&(this.scrim||this.modal&&this.scrimWhenModal)){var t=this.getScrim();if(e){var n=this.getScrimZIndex();this._scrimZ=n,t.showAtZIndex(n)}else t.hideAtZIndex(this._scrimZ);enyo.call(t,"addRemoveClass",[this.scrimClassName,t.showing])}},getScrimZIndex:function(){return onyx.Popup.highestZ>=this._zIndex?this._zIndex-1:onyx.Popup.highestZ},getScrim:function(){return this.modal&&this.scrimWhenModal&&!this.scrim?onyx.scrimTransparent.make():onyx.scrim.make()},applyZIndex:function(){this._zIndex=onyx.Popup.count*2+this.findZIndex()+1,this._zIndex<=onyx.Popup.highestZ&&(this._zIndex=onyx.Popup.highestZ+1),this._zIndex>onyx.Popup.highestZ&&(onyx.Popup.highestZ=this._zIndex),this.applyStyle("z-index",this._zIndex)},findZIndex:function(){var e=this.defaultZ;return this._zIndex?e=this._zIndex:this.hasNode()&&(e=Number(enyo.dom.getComputedStyleValue(this.node,"z-index"))||e),e<this.defaultZ&&(e=this.defaultZ),this._zIndex=e,this._zIndex}}),enyo.kind({name:"onyx.TextArea",kind:"enyo.TextArea",classes:"onyx-textarea"}),enyo.kind({name:"onyx.RichText",kind:"enyo.RichText",classes:"onyx-richtext"}),enyo.kind({name:"onyx.InputDecorator",kind:"enyo.ToolDecorator",tag:"label",classes:"onyx-input-decorator",published:{alwaysLooksFocused:!1},handlers:{onDisabledChange:"disabledChange",onfocus:"receiveFocus",onblur:"receiveBlur"},create:function(){this.inherited(arguments),this.updateFocus(!1)},alwaysLooksFocusedChanged:function(e){this.updateFocus(this.focus)},updateFocus:function(e){this.focused=e,this.addRemoveClass("onyx-focused",this.alwaysLooksFocused||this.focused)},receiveFocus:function(){this.updateFocus(!0)},receiveBlur:function(){this.updateFocus(!1)},disabledChange:function(e,t){this.addRemoveClass("onyx-disabled",t.originator.disabled)}}),enyo.kind({name:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator",handlers:{onenter:"enter",onleave:"leave"},enter:function(){this.requestShowTooltip()},leave:function(){this.requestHideTooltip()},tap:function(){this.requestHideTooltip()},requestShowTooltip:function(){this.waterfallDown("onRequestShowTooltip")},requestHideTooltip:function(){this.waterfallDown("onRequestHideTooltip")}}),enyo.kind({name:"onyx.Tooltip",kind:"onyx.Popup",classes:"onyx-tooltip below left-arrow",autoDismiss:!1,showDelay:500,defaultLeft:-6,handlers:{onRequestShowTooltip:"requestShow",onRequestHideTooltip:"requestHide"},requestShow:function(){return this.showJob=setTimeout(this.bindSafely("show"),this.showDelay),!0},cancelShow:function(){clearTimeout(this.showJob)},requestHide:function(){return this.cancelShow(),this.inherited(arguments)},showingChanged:function(){this.cancelShow(),this.adjustPosition(!0),this.inherited(arguments)},applyPosition:function(e){var t="";for(var n in e)t+=n+":"+e[n]+(isNaN(e[n])?"; ":"px; ");this.addStyles(t)},adjustPosition:function(e){if(this.showing&&this.hasNode()){var t=this.node.getBoundingClientRect();t.top+t.height>window.innerHeight?(this.addRemoveClass("below",!1),this.addRemoveClass("above",!0)):(this.addRemoveClass("above",!1),this.addRemoveClass("below",!0)),t.left+t.width>window.innerWidth&&(this.applyPosition({"margin-left":-t.width,bottom:"auto"}),this.addRemoveClass("left-arrow",!1),this.addRemoveClass("right-arrow",!0))}},resizeHandler:function(){this.applyPosition({"margin-left":this.defaultLeft,bottom:"auto"}),this.addRemoveClass("left-arrow",!0),this.addRemoveClass("right-arrow",!1),this.adjustPosition(!0),this.inherited(arguments)}}),enyo.kind({name:"onyx.MenuDecorator",kind:"onyx.TooltipDecorator",defaultKind:"onyx.Button",classes:"onyx-popup-decorator enyo-unselectable",handlers:{onActivate:"activated",onHide:"menuHidden"},activated:function(e,t){this.requestHideTooltip(),t.originator.active&&(this.menuActive=!0,this.activator=t.originator,this.activator.addClass("active"),this.requestShowMenu())},requestShowMenu:function(){this.waterfallDown("onRequestShowMenu",{activator:this.activator})},requestHideMenu:function(){this.waterfallDown("onRequestHideMenu")},menuHidden:function(){this.menuActive=!1,this.activator&&(this.activator.setActive(!1),this.activator.removeClass("active"))},enter:function(e){this.menuActive||this.inherited(arguments)},leave:function(e,t){this.menuActive||this.inherited(arguments)}}),enyo.kind({name:"onyx.Menu",kind:"onyx.Popup",modal:!0,defaultKind:"onyx.MenuItem",classes:"onyx-menu",published:{maxHeight:200,scrolling:!0,scrollStrategyKind:"TouchScrollStrategy"},handlers:{onActivate:"itemActivated",onRequestShowMenu:"requestMenuShow",onRequestHideMenu:"requestHide"},childComponents:[{name:"client",kind:"enyo.Scroller"}],showOnTop:!1,scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged()},initComponents:function(){this.scrolling&&this.createComponents(this.childComponents,{isChrome:!0,strategyKind:this.scrollStrategyKind}),this.inherited(arguments)},getScroller:function(){return this.$[this.scrollerName]},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},itemActivated:function(e,t){return t.originator.setActive(!1),!0},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition(!0)},requestMenuShow:function(e,t){if(this.floating){var n=t.activator.hasNode();if(n){var r=this.activatorOffset=this.getPageOffset(n);this.applyPosition({top:r.top+(this.showOnTop?0:r.height),left:r.left,width:r.width})}}return this.show(),!0},applyPosition:function(e){var t="";for(var n in e)t+=n+":"+e[n]+(isNaN(e[n])?"; ":"px; ");this.addStyles(t)},getPageOffset:function(e){var t=e.getBoundingClientRect(),n=window.pageYOffset===undefined?document.documentElement.scrollTop:window.pageYOffset,r=window.pageXOffset===undefined?document.documentElement.scrollLeft:window.pageXOffset,i=t.height===undefined?t.bottom-t.top:t.height,s=t.width===undefined?t.right-t.left:t.width;return{top:t.top+n,left:t.left+r,height:i,width:s}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.scrolling&&!this.showOnTop&&this.getScroller().setMaxHeight(this.maxHeight+"px"),this.removeClass("onyx-menu-up"),this.floating||this.applyPosition({left:"auto"});var e=this.node.getBoundingClientRect(),t=e.height===undefined?e.bottom-e.top:e.height,n=window.innerHeight===undefined?document.documentElement.clientHeight:window.innerHeight,r=window.innerWidth===undefined?document.documentElement.clientWidth:window.innerWidth;this.menuUp=e.top+t>n&&n-e.bottom<e.top-t,this.addRemoveClass("onyx-menu-up",this.menuUp);if(this.floating){var i=this.activatorOffset;this.menuUp?this.applyPosition({top:i.top-t+(this.showOnTop?i.height:0),bottom:"auto"}):e.top<i.top&&i.top+(this.showOnTop?0:i.height)+t<n&&this.applyPosition({top:i.top+(this.showOnTop?0:i.height),bottom:"auto"})}e.right>r&&(this.floating?this.applyPosition({left:r-e.width}):this.applyPosition({left:-(e.right-r)})),e.left<0&&(this.floating?this.applyPosition({left:0,right:"auto"}):this.getComputedStyleValue("right")=="auto"?this.applyPosition({left:-e.left}):this.applyPosition({right:e.left}));if(this.scrolling&&!this.showOnTop){e=this.node.getBoundingClientRect();var s;this.menuUp?s=this.maxHeight<e.bottom?this.maxHeight:e.bottom:s=e.top+this.maxHeight<n?this.maxHeight:n-e.top,this.getScroller().setMaxHeight(s+"px")}}},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}}),enyo.kind({name:"onyx.MenuItem",kind:"enyo.Button",events:{onSelect:"",onItemContentChange:""},classes:"onyx-menu-item",tag:"div",create:function(){this.silence(),this.inherited(arguments),this.unsilence(),this.active&&this.bubble("onActivate")},tap:function(e){this.inherited(arguments),this.bubble("onRequestHideMenu"),this.doSelect({selected:this,content:this.content})},contentChanged:function(e){this.inherited(arguments),this.doItemContentChange({content:this.content})}}),enyo.kind({name:"onyx.Submenu",defaultKind:"onyx.MenuItem",initComponents:function(){this.createChrome([{name:"label",kind:"enyo.Control",classes:"onyx-menu-item",content:this.content||this.name,isChrome:!0,ontap:"toggleOpen"},{kind:"onyx.Drawer",name:"client",classes:"client onyx-submenu",isChrome:!0,open:!1}]),this.inherited(arguments)},toggleOpen:function(){this.setOpen(!this.getOpen())},setOpen:function(e){this.$.client.setOpen(e)},getOpen:function(){return this.$.client.getOpen()}}),enyo.kind({name:"onyx.PickerDecorator",kind:"onyx.MenuDecorator",classes:"onyx-picker-decorator",defaultKind:"onyx.PickerButton",handlers:{onChange:"change"},change:function(e,t){this.waterfallDown("onChange",t)}}),enyo.kind({name:"onyx.PickerButton",kind:"onyx.Button",handlers:{onChange:"change"},change:function(e,t){t.content!==undefined&&this.setContent(t.content)}}),enyo.kind({name:"onyx.Picker",kind:"onyx.Menu",classes:"onyx-picker enyo-unselectable",published:{selected:null},events:{onChange:""},handlers:{onItemContentChange:"itemContentChange"},floating:!0,showOnTop:!0,initComponents:function(){this.setScrolling(!0),this.inherited(arguments)},showingChanged:function(){this.getScroller().setShowing(this.showing),this.inherited(arguments),this.showing&&this.selected&&this.scrollToSelected()},scrollToSelected:function(){this.getScroller().scrollToControl(this.selected,!this.menuUp)},itemActivated:function(e,t){return this.processActivatedItem(t.originator),this.inherited(arguments)},processActivatedItem:function(e){e.active&&this.setSelected(e)},selectedChanged:function(e){e&&e.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content}))},itemContentChange:function(e,t){t.originator==this.selected&&this.doChange({selected:this.selected,content:this.selected.content})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()}}),enyo.kind({name:"onyx.FlyweightPicker",kind:"onyx.Picker",classes:"onyx-flyweight-picker",published:{count:0},events:{onSetupItem:"",onSelect:""},handlers:{onSelect:"itemSelect"},components:[{name:"scroller",kind:"enyo.Scroller",strategyKind:"TouchScrollStrategy",components:[{name:"flyweight",kind:"FlyweightRepeater",noSelect:!0,ontap:"itemTap"}]}],scrollerName:"scroller",initComponents:function(){this.controlParentName="flyweight",this.inherited(arguments),this.$.flyweight.$.client.children[0].setActive(!0)},create:function(){this.inherited(arguments),this.countChanged()},rendered:function(){this.inherited(arguments),this.selectedChanged()},scrollToSelected:function(){var e=this.$.flyweight.fetchRowNode(this.selected);this.getScroller().scrollToNode(e,!this.menuUp)},countChanged:function(){this.$.flyweight.count=this.count},processActivatedItem:function(e){this.item=e},selectedChanged:function(e){if(!this.item)return;e!=null&&(this.item.removeClass("selected"),this.$.flyweight.renderRow(e));var t;this.selected!=null&&(this.item.addClass("selected"),this.$.flyweight.renderRow(this.selected),this.item.removeClass("selected"),t=this.$.flyweight.fetchRowNode(this.selected)),this.doChange({selected:this.selected,content:t&&t.textContent||this.item.content})},itemTap:function(e,t){this.setSelected(t.rowIndex),this.doSelect({selected:this.item,content:this.item.content})},itemSelect:function(e,t){if(t.originator!=this)return!0}}),enyo.kind({name:"onyx.DatePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en-US",dayHidden:!1,monthHidden:!1,yearHidden:!1,minYear:1900,maxYear:2099,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),ilib&&(this.locale=ilib.getLocale()),this.initDefaults()},initDefaults:function(){var e;ilib?(e=[],this._tf=new ilib.DateFmt({locale:this.locale,timezone:"local"}),e=this._tf.getMonthsOfYear({length:"long"})):(e=[undefined,"JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],this.localeInfo.getMonthsOfYear=function(){return e}),this.setupPickers(this._tf?this._tf.getTemplate():"mdy"),this.dayHiddenChanged(),this.monthHiddenChanged(),this.yearHiddenChanged();var t=this.value=this.value||new Date;for(var n=0,r;r=e[n+1];n++)this.$.monthPicker.createComponent({content:r,value:n,active:n==t.getMonth()});var i=t.getFullYear();this.$.yearPicker.setSelected(i-this.minYear);for(n=1;n<=this.monthLength(t.getYear(),t.getMonth());n++)this.$.dayPicker.createComponent({content:n,value:n,active:n==t.getDate()})},monthLength:function(e,t){return 32-(new Date(e,t,32)).getDate()},setupYear:function(e,t){return this.$.year.setContent(this.minYear+t.index),!0},setupPickers:function(e){var t=e.split(""),n,r,i,s=!1,o=!1,u=!1;for(r=0,i=t.length;r<i;r++){n=t[r];switch(n.toLowerCase()){case"d":u||(this.createDay(),u=!0);break;case"m":o||(this.createMonth(),o=!0);break;case"y":s||(this.createYear(),s=!0);break;default:}}},createYear:function(){var e=this.maxYear-this.minYear;this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateYear",components:[{classes:"onyx-datepicker-year",name:"yearPickerButton",disabled:this.disabled},{name:"yearPicker",kind:"onyx.FlyweightPicker",count:++e,onSetupItem:"setupYear",components:[{name:"year"}]}]})},createMonth:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMonth",components:[{classes:"onyx-datepicker-month",name:"monthPickerButton",disabled:this.disabled},{name:"monthPicker",kind:"onyx.Picker"}]})},createDay:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateDay",components:[{classes:"onyx-datepicker-day",name:"dayPickerButton",disabled:this.disabled},{name:"dayPicker",kind:"onyx.Picker"}]})},localeChanged:function(){this.refresh()},dayHiddenChanged:function(){this.$.dayPicker.getParent().setShowing(this.dayHidden?!1:!0)},monthHiddenChanged:function(){this.$.monthPicker.getParent().setShowing(this.monthHidden?!1:!0)},yearHiddenChanged:function(){this.$.yearPicker.getParent().setShowing(this.yearHidden?!1:!0)},minYearChanged:function(){this.refresh()},maxYearChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},disabledChanged:function(){this.$.yearPickerButton.setDisabled(this.disabled),this.$.monthPickerButton.setDisabled(this.disabled),this.$.dayPickerButton.setDisabled(this.disabled)},updateDay:function(e,t){var n=this.calcDate(this.value.getFullYear(),this.value.getMonth(),t.selected.value);return this.doSelect({name:this.name,value:n}),this.setValue(n),!0},updateMonth:function(e,t){var n=this.calcDate(this.value.getFullYear(),t.selected.value,this.value.getDate());return this.doSelect({name:this.name,value:n}),this.setValue(n),!0},updateYear:function(e,t){if(t.originator.selected!=-1){var n=this.calcDate(this.minYear+t.originator.selected,this.value.getMonth(),this.value.getDate());this.doSelect({name:this.name,value:n}),this.setValue(n)}return!0},calcDate:function(e,t,n){return new Date(e,t,n,this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds())},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}}),enyo.kind({name:"onyx.TimePicker",classes:"onyx-toolbar-inline",published:{disabled:!1,locale:"en-US",is24HrMode:null,value:null},events:{onSelect:""},create:function(){this.inherited(arguments),ilib&&(this.locale=ilib.getLocale()),this.initDefaults()},initDefaults:function(){this._strAm="AM",this._strPm="PM";if(ilib){this._tf=new ilib.DateFmt({locale:this.locale});var e=new ilib.DateFmt({locale:this.locale,type:"time",template:"a"}),t=ilib.Date.newInstance({locale:this.locale,hour:1});this._strAm=e.format(t),t.hour=13,this._strPm=e.format(t),this.is24HrMode==null&&(this.is24HrMode=this._tf.getClock()=="24")}else this.is24HrMode==null&&(this.is24HrMode=!1);this.setupPickers(this._tf?this._tf.getTimeComponents():"hma");var n=this.value=this.value||new Date,r;if(!this.is24HrMode){var i=n.getHours();i=i===0?12:i;for(r=1;r<=12;r++)this.$.hourPicker.createComponent({content:r,value:r,active:r==(i>12?i%12:i)})}else for(r=0;r<24;r++)this.$.hourPicker.createComponent({content:r,value:r,active:r==n.getHours()});for(r=0;r<=59;r++)this.$.minutePicker.createComponent({content:r<10?"0"+r:r,value:r,active:r==n.getMinutes()});n.getHours()>=12?this.$.ampmPicker.createComponents([{content:this._strAm},{content:this._strPm,active:!0}]):this.$.ampmPicker.createComponents([{content:this._strAm,active:!0},{content:this._strPm}]),this.$.ampmPicker.getParent().setShowing(!this.is24HrMode)},setupPickers:function(e){e.indexOf("h")!==-1&&this.createHour(),e.indexOf("m")!==-1&&this.createMinute(),e.indexOf("a")!==-1&&this.createAmPm()},createHour:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateHour",components:[{classes:"onyx-timepicker-hour",name:"hourPickerButton",disabled:this.disabled},{name:"hourPicker",kind:"onyx.Picker"}]})},createMinute:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateMinute",components:[{classes:"onyx-timepicker-minute",name:"minutePickerButton",disabled:this.disabled},{name:"minutePicker",kind:"onyx.Picker"}]})},createAmPm:function(){this.createComponent({kind:"onyx.PickerDecorator",onSelect:"updateAmPm",components:[{classes:"onyx-timepicker-ampm",name:"ampmPickerButton",disabled:this.disabled},{name:"ampmPicker",kind:"onyx.Picker"}]})},disabledChanged:function(){this.$.hourPickerButton.setDisabled(this.disabled),this.$.minutePickerButton.setDisabled(this.disabled),this.$.ampmPickerButton.setDisabled(this.disabled)},localeChanged:function(){this.is24HrMode=null,this.refresh()},is24HrModeChanged:function(){this.refresh()},valueChanged:function(){this.refresh()},updateHour:function(e,t){var n=t.selected.value;if(!this.is24HrMode){var r=this.$.ampmPicker.getParent().controlAtIndex(0).content;n=n+(n==12?-12:0)+(this.isAm(r)?0:12)}return this.setValue(this.calcTime(n,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},updateMinute:function(e,t){return this.setValue(this.calcTime(this.value.getHours(),t.selected.value)),this.doSelect({name:this.name,value:this.value}),!0},updateAmPm:function(e,t){var n=this.value.getHours();return this.is24HrMode||(n+=n>11?this.isAm(t.content)?-12:0:this.isAm(t.content)?0:12),this.setValue(this.calcTime(n,this.value.getMinutes())),this.doSelect({name:this.name,value:this.value}),!0},calcTime:function(e,t){return new Date(this.value.getFullYear(),this.value.getMonth(),this.value.getDate(),e,t,this.value.getSeconds(),this.value.getMilliseconds())},isAm:function(e){return e==this._strAm?!0:!1},refresh:function(){this.destroyClientControls(),this.initDefaults(),this.render()}}),enyo.kind({name:"onyx.RadioButton",kind:"enyo.Button",classes:"onyx-radiobutton"}),enyo.kind({name:"onyx.RadioGroup",kind:"enyo.Group",defaultKind:"onyx.RadioButton",highlander:!0}),enyo.kind({name:"onyx.ToggleButton",classes:"onyx-toggle-button",published:{active:!1,value:!1,onContent:"On",offContent:"Off",disabled:!1},events:{onChange:""},handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},components:[{name:"contentOn",classes:"onyx-toggle-content on"},{name:"contentOff",classes:"onyx-toggle-content off"},{classes:"onyx-toggle-button-knob"}],create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active),this.onContentChanged(),this.offContentChanged(),this.disabledChanged()},rendered:function(){this.inherited(arguments),this.updateVisualState()},updateVisualState:function(){this.addRemoveClass("off",!this.value),this.$.contentOn.setShowing(this.value),this.$.contentOff.setShowing(!this.value),this.setActive(this.value)},valueChanged:function(){this.updateVisualState(),this.doChange({value:this.value})},activeChanged:function(){this.setValue(this.active),this.bubble("onActivate")},onContentChanged:function(){this.$.contentOn.setContent(this.onContent||""),this.$.contentOn.addRemoveClass("empty",!this.onContent)},offContentChanged:function(){this.$.contentOff.setContent(this.offContent||""),this.$.contentOff.addRemoveClass("empty",!this.onContent)},disabledChanged:function(){this.addRemoveClass("disabled",this.disabled)},updateValue:function(e){this.disabled||this.setValue(e)},tap:function(){this.updateValue(!this.value)},dragstart:function(e,t){if(t.horizontal)return t.preventDefault(),this.dragging=!0,this.dragged=!1,!0},drag:function(e,t){if(this.dragging){var n=t.dx;return Math.abs(n)>10&&(this.updateValue(n>0),this.dragged=!0),!0}},dragfinish:function(e,t){this.dragging=!1,this.dragged&&t.preventTap()}}),enyo.kind({name:"onyx.ToggleIconButton",kind:"onyx.Icon",published:{active:!1,value:!1},events:{onChange:""},classes:"onyx-icon-button onyx-icon-toggle",activeChanged:function(){this.addRemoveClass("active",this.value),this.bubble("onActivate")},updateValue:function(e){this.disabled||(this.setValue(e),this.doChange({value:this.value}))},tap:function(){this.updateValue(!this.value)},valueChanged:function(){this.setActive(this.value)},create:function(){this.inherited(arguments),this.value=Boolean(this.value||this.active)},rendered:function(){this.inherited(arguments),this.valueChanged(),this.removeClass("onyx-icon")}}),enyo.kind({name:"onyx.Toolbar",classes:"onyx onyx-toolbar onyx-toolbar-inline",create:function(){this.inherited(arguments),this.hasClass("onyx-menu-toolbar")&&enyo.platform.android>=4&&this.applyStyle("position","static")}}),enyo.kind({name:"onyx.ProgressBar",classes:"onyx-progress-bar",published:{progress:0,min:0,max:100,barClasses:"",showStripes:!0,animateStripes:!0,increment:0},events:{onAnimateProgressFinish:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar"}],create:function(){this.inherited(arguments),this.progressChanged(),this.barClassesChanged(),this.showStripesChanged(),this.animateStripesChanged()},barClassesChanged:function(e){this.$.bar.removeClass(e),this.$.bar.addClass(this.barClasses)},showStripesChanged:function(){this.$.bar.addRemoveClass("striped",this.showStripes)},animateStripesChanged:function(){this.$.bar.addRemoveClass("animated",this.animateStripes)},progressChanged:function(){this.progress=this.clampValue(this.min,this.max,this.progress);var e=this.calcPercent(this.progress);this.updateBarPosition(e)},calcIncrement:function(e){return Math.round(e/this.increment)*this.increment},clampValue:function(e,t,n){return Math.max(e,Math.min(n,t))},calcRatio:function(e){return(e-this.min)/(this.max-this.min)},calcPercent:function(e){return this.calcRatio(e)*100},updateBarPosition:function(e){this.$.bar.applyStyle("width",e+"%")},animateProgressTo:function(e){this.$.progressAnimator.play({startValue:this.progress,endValue:e,node:this.hasNode()})},progressAnimatorStep:function(e){return this.setProgress(e.value),!0},progressAnimatorComplete:function(e){return this.doAnimateProgressFinish(e),!0}}),enyo.kind({name:"onyx.ProgressButton",kind:"onyx.ProgressBar",classes:"onyx-progress-button",events:{onCancel:""},components:[{name:"progressAnimator",kind:"enyo.Animator",onStep:"progressAnimatorStep",onEnd:"progressAnimatorComplete"},{name:"bar",classes:"onyx-progress-bar-bar onyx-progress-button-bar"},{name:"client",classes:"onyx-progress-button-client"},{kind:"onyx.Icon",src:"$lib/onyx/images/progress-button-cancel.png",classes:"onyx-progress-button-icon",ontap:"cancelTap"}],cancelTap:function(){this.doCancel()}}),enyo.kind({name:"onyx.Scrim",showing:!1,classes:"onyx-scrim enyo-fit",floating:!1,create:function(){this.inherited(arguments),this.zStack=[],this.floating&&this.setParent(enyo.floatingLayer)},showingChanged:function(){this.floating&&this.showing&&!this.hasNode()&&this.render(),this.inherited(arguments)},addZIndex:function(e){enyo.indexOf(e,this.zStack)<0&&this.zStack.push(e)},removeZIndex:function(e){enyo.remove(e,this.zStack)},showAtZIndex:function(e){this.addZIndex(e),e!==undefined&&this.setZIndex(e),this.show()},hideAtZIndex:function(e){this.removeZIndex(e);if(!this.zStack.length)this.hide();else{var t=this.zStack[this.zStack.length-1];this.setZIndex(t)}},setZIndex:function(e){this.zIndex=e,this.applyStyle("z-index",e)},make:function(){return this}}),enyo.kind({name:"onyx.scrimSingleton",kind:null,constructor:function(e,t){this.instanceName=e,enyo.setPath(this.instanceName,this),this.props=t||{}},make:function(){var e=new onyx.Scrim(this.props);return enyo.setPath(this.instanceName,e),e},showAtZIndex:function(e){var t=this.make();t.showAtZIndex(e)},hideAtZIndex:enyo.nop,show:function(){var e=this.make();e.show()}}),new onyx.scrimSingleton("onyx.scrim",{floating:!0,classes:"onyx-scrim-translucent"}),new onyx.scrimSingleton("onyx.scrimTransparent",{floating:!0,classes:"onyx-scrim-transparent"}),enyo.kind({name:"onyx.Slider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{value:0,lockBar:!0,tappable:!0},events:{onChange:"",onChanging:"",onAnimateFinish:""},showStripes:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish"},moreComponents:[{kind:"Animator",onStep:"animatorStep",onEnd:"animatorComplete"},{classes:"onyx-slider-taparea"},{name:"knob",classes:"onyx-slider-knob"}],create:function(){this.inherited(arguments),this.moreComponents[2].ondown="knobDown",this.moreComponents[2].onup="knobUp",this.createComponents(this.moreComponents),this.valueChanged()},valueChanged:function(){this.value=this.clampValue(this.min,this.max,this.value);var e=this.calcPercent(this.value);this.updateKnobPosition(e),this.lockBar&&this.setProgress(this.value)},updateKnobPosition:function(e){this.$.knob.applyStyle("left",e+"%")},calcKnobPosition:function(e){var t=e.clientX-this.hasNode().getBoundingClientRect().left;return t/this.getBounds().width*(this.max-this.min)+this.min},dragstart:function(e,t){if(t.horizontal)return t.preventDefault(),this.dragging=!0,e.addClass("pressed"),!0},drag:function(e,t){if(this.dragging){var n=this.calcKnobPosition(t);return n=this.increment?this.calcIncrement(n):n,this.setValue(n),this.doChanging({value:this.value}),!0}},dragfinish:function(e,t){return this.dragging=!1,t.preventTap(),this.doChange({value:this.value}),e.removeClass("pressed"),!0},tap:function(e,t){if(this.tappable){var n=this.calcKnobPosition(t);return n=this.increment?this.calcIncrement(n):n,this.tapped=!0,this.animateTo(n),!0}},knobDown:function(e,t){this.$.knob.addClass("pressed")},knobUp:function(e,t){this.$.knob.removeClass("pressed")},animateTo:function(e){this.$.animator.play({startValue:this.value,endValue:e,node:this.hasNode()})},animatorStep:function(e){return this.setValue(e.value),!0},animatorComplete:function(e){return this.tapped&&(this.tapped=!1,this.doChange({value:this.value})),this.doAnimateFinish(e),!0}}),enyo.kind({name:"onyx.RangeSlider",kind:"onyx.ProgressBar",classes:"onyx-slider",published:{rangeMin:0,rangeMax:100,rangeStart:0,rangeEnd:100,beginValue:0,endValue:0},events:{onChange:"",onChanging:""},showStripes:!1,showLabels:!1,handlers:{ondragstart:"dragstart",ondrag:"drag",ondragfinish:"dragfinish",ondown:"down"},moreComponents:[{name:"startKnob",classes:"onyx-slider-knob"},{name:"endKnob",classes:"onyx-slider-knob onyx-range-slider-knob"}],create:function(){this.inherited(arguments),this.createComponents(this.moreComponents),this.initControls()},rendered:function(){this.inherited(arguments);var e=this.calcPercent(this.beginValue);this.updateBarPosition(e)},initControls:function(){this.$.bar.applyStyle("position","relative"),this.refreshRangeSlider(),this.showLabels&&(this.$.startKnob.createComponent({name:"startLabel",kind:"onyx.RangeSliderKnobLabel"}),this.$.endKnob.createComponent({name:"endLabel",kind:"onyx.RangeSliderKnobLabel"})),this.$.startKnob.ondown="knobDown",this.$.startKnob.onup="knobUp",this.$.endKnob.ondown="knobDown",this.$.endKnob.onup="knobUp"},refreshRangeSlider:function(){this.beginValue=this.calcKnobPercent(this.rangeStart),this.endValue=this.calcKnobPercent(this.rangeEnd),this.beginValueChanged(),this.endValueChanged()},calcKnobRatio:function(e){return(e-this.rangeMin)/(this.rangeMax-this.rangeMin)},calcKnobPercent:function(e){return this.calcKnobRatio(e)*100},beginValueChanged:function(e){if(e===undefined){var t=this.calcPercent(this.beginValue);this.updateKnobPosition(t,this.$.startKnob)}},endValueChanged:function(e){if(e===undefined){var t=this.calcPercent(this.endValue);this.updateKnobPosition(t,this.$.endKnob)}},calcKnobPosition:function(e){var t=e.clientX-this.hasNode().getBoundingClientRect().left;return t/this.getBounds().width*(this.max-this.min)+this.min},updateKnobPosition:function(e,t){t.applyStyle("left",e+"%"),this.updateBarPosition()},updateBarPosition:function(){if(this.$.startKnob!==undefined&&this.$.endKnob!==undefined){var e=this.calcKnobPercent(this.rangeStart),t=this.calcKnobPercent(this.rangeEnd)-e;this.$.bar.applyStyle("left",e+"%"),this.$.bar.applyStyle("width",t+"%")}},calcRangeRatio:function(e){return e/100*(this.rangeMax-this.rangeMin)+this.rangeMin-this.increment/2},swapZIndex:function(e){e==="startKnob"?(this.$.startKnob.applyStyle("z-index",1),this.$.endKnob.applyStyle("z-index",0)):e==="endKnob"&&(this.$.startKnob.applyStyle("z-index",0),this.$.endKnob.applyStyle("z-index",1))},down:function(e,t){this.swapZIndex(e.name)},dragstart:function(e,t){if(t.horizontal)return t.preventDefault(),this.dragging=!0,e.addClass("pressed"),!0},drag:function(e,t){if(this.dragging){var n=this.calcKnobPosition(t),r,i,s;if(e.name==="startKnob"&&n>=0){if(!(n<=this.endValue&&t.xDirection===-1||n<=this.endValue))return this.drag(this.$.endKnob,t);this.setBeginValue(n),r=this.calcRangeRatio(this.beginValue),i=this.increment?this.calcIncrement(r+.5*this.increment):r,s=this.calcKnobPercent(i),this.updateKnobPosition(s,this.$.startKnob),this.setRangeStart(i),this.doChanging({value:i})}else if(e.name==="endKnob"&&n<=100){if(!(n>=this.beginValue&&t.xDirection===1||n>=this.beginValue))return this.drag(this.$.startKnob,t);this.setEndValue(n),r=this.calcRangeRatio(this.endValue),i=this.increment?this.calcIncrement(r+.5*this.increment):r,s=this.calcKnobPercent(i),this.updateKnobPosition(s,this.$.endKnob),this.setRangeEnd(i),this.doChanging({value:i})}return!0}},dragfinish:function(e,t){this.dragging=!1,t.preventTap();var n;return e.name==="startKnob"?(n=this.calcRangeRatio(this.beginValue),this.doChange({value:n,startChanged:!0})):e.name==="endKnob"&&(n=this.calcRangeRatio(this.endValue),this.doChange({value:n,startChanged:!1})),e.removeClass("pressed"),!0},knobDown:function(e,t){e.addClass("pressed")},knobUp:function(e,t){e.removeClass("pressed")},rangeMinChanged:function(){this.refreshRangeSlider()},rangeMaxChanged:function(){this.refreshRangeSlider()},rangeStartChanged:function(){this.refreshRangeSlider()},rangeEndChanged:function(){this.refreshRangeSlider()},setStartLabel:function(e){this.$.startKnob.waterfallDown("onSetLabel",e)},setEndLabel:function(e){this.$.endKnob.waterfallDown("onSetLabel",e)}}),enyo.kind({name:"onyx.RangeSliderKnobLabel",classes:"onyx-range-slider-label",handlers:{onSetLabel:"setLabel"},setLabel:function(e,t){this.setContent(t)}}),enyo.kind({name:"onyx.Item",classes:"onyx-item",tapHighlight:!0,handlers:{onhold:"hold",onrelease:"release"},hold:function(e,t){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!0,t)},release:function(e,t){this.tapHighlight&&onyx.Item.addRemoveFlyweightClass(this.controlParent||this,"onyx-highlight",!1,t)},statics:{addRemoveFlyweightClass:function(e,t,n,r,i){var s=r.flyweight;if(s){var o=i!==undefined?i:r.index;s.performOnRow(o,function(){e.addRemoveClass(t,n)})}}}}),enyo.kind({name:"onyx.Spinner",classes:"onyx-spinner",stop:function(){this.setShowing(!1)},start:function(){this.setShowing(!0)},toggle:function(){this.setShowing(!this.getShowing())}}),enyo.kind({name:"onyx.MoreToolbar",classes:"onyx-toolbar onyx-more-toolbar",menuClass:"",movedClass:"",layoutKind:"FittableColumnsLayout",noStretch:!0,handlers:{onHide:"reflow"},published:{clientLayoutKind:"FittableColumnsLayout"},tools:[{name:"client",noStretch:!0,fit:!0,classes:"onyx-toolbar-inline"},{name:"nard",kind:"onyx.MenuDecorator",showing:!1,onActivate:"activated",components:[{kind:"onyx.IconButton",classes:"onyx-more-button"},{name:"menu",kind:"onyx.Menu",scrolling:!1,classes:"onyx-more-menu"}]}],initComponents:function(){this.menuClass&&this.menuClass.length>0&&!this.$.menu.hasClass(this.menuClass)&&this.$.menu.addClass(this.menuClass),this.createChrome(this.tools),this.inherited(arguments),this.$.client.setLayoutKind(this.clientLayoutKind)},clientLayoutKindChanged:function(){this.$.client.setLayoutKind(this.clientLayoutKind)},reflow:function(){this.inherited(arguments),this.isContentOverflowing()?(this.$.nard.show(),this.popItem()&&this.reflow()):this.tryPushItem()?this.reflow():this.$.menu.children.length||(this.$.nard.hide(),this.$.menu.hide())},activated:function(e,t){this.addRemoveClass("active",t.originator.active)},popItem:function(){var e=this.findCollapsibleItem();if(e){this.movedClass&&this.movedClass.length>0&&!e.hasClass(this.movedClass)&&e.addClass(this.movedClass),this.$.menu.addChild(e,null);var t=this.$.menu.hasNode();return t&&e.hasNode()&&e.insertNodeInParent(t),!0}},pushItem:function(){var e=this.$.menu.children,t=e[0];if(t){this.movedClass&&this.movedClass.length>0&&t.hasClass(this.movedClass)&&t.removeClass(this.movedClass),this.$.client.addChild(t);var n=this.$.client.hasNode();if(n&&t.hasNode()){var r,i;for(var s=0;s<this.$.client.children.length;s++){var o=this.$.client.children[s];if(o.toolbarIndex!==undefined&&o.toolbarIndex!=s){r=o,i=s;break}}if(r&&r.hasNode()){t.insertNodeInParent(n,r.node);var u=this.$.client.children.pop();this.$.client.children.splice(i,0,u)}else t.appendNodeToParent(n)}return!0}},tryPushItem:function(){if(this.pushItem()){if(!this.isContentOverflowing())return!0;this.popItem()}},isContentOverflowing:function(){if(this.$.client.hasNode()){var e=this.$.client.children,t=e.length&&e[e.length-1].hasNode();if(t)return this.$.client.reflow(),t.offsetLeft+t.offsetWidth>this.$.client.node.clientWidth}},findCollapsibleItem:function(){var e=this.$.client.children,t;for(var n=e.length-1;t=e[n];n--){if(!t.unmoveable)return t;t.toolbarIndex===undefined&&(t.toolbarIndex=n)}}}),enyo.kind({name:"onyx.IntegerPicker",kind:"onyx.Picker",published:{value:0,min:0,max:9},create:function(){this.inherited(arguments),this.rangeChanged()},minChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},maxChanged:function(){this.destroyClientControls(),this.rangeChanged(),this.render()},rangeChanged:function(){for(var e=this.min;e<=this.max;e++)this.createComponent({content:e,active:e===this.value?!0:!1})},valueChanged:function(e){var t=this.getClientControls(),n=t.length;this.value=Math.min(this.max,Math.max(this.value,this.min));for(var r=0;r<n;r++)if(this.value===parseInt(t[r].content,10)){this.setSelected(t[r]);break}},selectedChanged:function(e){e&&e.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,content:this.selected.content})),this.setValue(parseInt(this.selected.content,10))}}),enyo.kind({name:"onyx.ContextualPopup",kind:"enyo.Popup",modal:!0,autoDismiss:!0,floating:!1,classes:"onyx-contextual-popup enyo-unselectable",published:{maxHeight:100,scrolling:!0,title:undefined,actionButtons:[]},statics:{subclass:function(e,t){var n=e.prototype;t.actionButtons&&(n.kindActionButtons=t.actionButtons,delete n.actionButtons)}},vertFlushMargin:60,horizFlushMargin:50,widePopup:200,longPopup:200,horizBuffer:16,events:{onTap:""},handlers:{onActivate:"childControlActivated",onRequestShowMenu:"requestShow",onRequestHideMenu:"requestHide"},components:[{name:"title",classes:"onyx-contextual-popup-title"},{classes:"onyx-contextual-popup-scroller",components:[{name:"client",kind:"enyo.Scroller",vertical:"auto",classes:"enyo-unselectable",thumb:!1,strategyKind:"TouchScrollStrategy"}]},{name:"actionButtons",classes:"onyx-contextual-popup-action-buttons"}],scrollerName:"client",create:function(){this.inherited(arguments),this.maxHeightChanged(),this.titleChanged(),this.actionButtonsChanged()},getScroller:function(){return this.$[this.scrollerName]},titleChanged:function(){this.$.title.setContent(this.title)},actionButtonsChanged:function(){this.actionButtons?enyo.forEach(this.actionButtons,function(e){e.kind="onyx.Button",e.classes=e.classes+" onyx-contextual-popup-action-button",e.popup=this,e.actionButton=!0,this.$.actionButtons.createComponent(e,{owner:this.getInstanceOwner()})},this):this.kindActionButtons&&enyo.forEach(this.kindActionButtons,function(e){e.kind="onyx.Button",e.classes=e.classes+" onyx-contextual-popup-action-button",e.popup=this,e.actionButton=!0,this.$.actionButtons.createComponent(e,{owner:this})},this),this.hasNode()&&this.$.actionButtons.render()},maxHeightChanged:function(){this.scrolling&&this.getScroller().setMaxHeight(this.maxHeight+"px")},showingChanged:function(){this.inherited(arguments),this.scrolling&&this.getScroller().setShowing(this.showing),this.adjustPosition()},childControlActivated:function(e,t){return!0},requestShow:function(e,t){var n=t.activator.hasNode();return n&&(this.activatorOffset=this.getPageOffset(n)),this.show(),!0},applyPosition:function(e){var t="";for(var n in e)t+=n+":"+e[n]+(isNaN(e[n])?"; ":"px; ");this.addStyles(t)},getPageOffset:function(e){var t=this.getBoundingRect(e),n=window.pageYOffset===undefined?document.documentElement.scrollTop:window.pageYOffset,r=window.pageXOffset===undefined?document.documentElement.scrollLeft:window.pageXOffset,i=t.height===undefined?t.bottom-t.top:t.height,s=t.width===undefined?t.right-t.left:t.width;return{top:t.top+n,left:t.left+r,height:i,width:s}},adjustPosition:function(){if(this.showing&&this.hasNode()){this.resetPositioning();var e=this.getViewWidth(),t=this.getViewHeight(),n=this.vertFlushMargin,r=t-this.vertFlushMargin,i=this.horizFlushMargin,s=e-this.horizFlushMargin;if(this.activatorOffset.top+this.activatorOffset.height<n||this.activatorOffset.top>r){if(this.applyVerticalFlushPositioning(i,s))return;if(this.applyHorizontalFlushPositioning(i,s))return;if(this.applyVerticalPositioning())return}else if(this.activatorOffset.left+this.activatorOffset.width<i||this.activatorOffset.left>s)if(this.applyHorizontalPositioning())return;var o=this.getBoundingRect(this.node);if(o.width>this.widePopup){if(this.applyVerticalPositioning())return}else if(o.height>this.longPopup&&this.applyHorizontalPositioning())return;if(this.applyVerticalPositioning())return;if(this.applyHorizontalPositioning())return}},initVerticalPositioning:function(){this.resetPositioning(),this.addClass("vertical");var e=this.getBoundingRect(this.node),t=this.getViewHeight();return this.floating?this.activatorOffset.top<t/2?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height,bottom:"auto"}),this.addClass("below")):(this.applyPosition({top:this.activatorOffset.top-e.height,bottom:"auto"}),this.addClass("above")):e.top+e.height>t&&t-e.bottom<e.top-e.height?this.addClass("above"):this.addClass("below"),e=this.getBoundingRect(this.node),e.top+e.height>t||e.top<0?!1:!0},applyVerticalPositioning:function(){if(!this.initVerticalPositioning())return!1;var e=this.getBoundingRect(this.node),t=this.getViewWidth();if(this.floating){var n=this.activatorOffset.left+this.activatorOffset.width/2-e.width/2;n+e.width>t?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-e.width}),this.addClass("left")):n<0?(this.applyPosition({left:this.activatorOffset.left}),this.addClass("right")):this.applyPosition({left:n})}else{var r=this.activatorOffset.left+this.activatorOffset.width/2-e.left-e.width/2;e.right+r>t?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width-e.right}),this.addRemoveClass("left",!0)):e.left+r<0?this.addRemoveClass("right",!0):this.applyPosition({left:r})}return!0},applyVerticalFlushPositioning:function(e,t){if(!this.initVerticalPositioning())return!1;var n=this.getBoundingRect(this.node),r=this.getViewWidth();return this.activatorOffset.left+this.activatorOffset.width/2<e?(this.activatorOffset.left+this.activatorOffset.width/2<this.horizBuffer?this.applyPosition({left:this.horizBuffer+(this.floating?0:-n.left)}):this.applyPosition({left:this.activatorOffset.width/2+(this.floating?this.activatorOffset.left:0)}),this.addClass("right"),this.addClass("corner"),!0):this.activatorOffset.left+this.activatorOffset.width/2>t?(this.activatorOffset.left+this.activatorOffset.width/2>r-this.horizBuffer?this.applyPosition({left:r-this.horizBuffer-n.right}):this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width/2-n.right}),this.addClass("left"),this.addClass("corner"),!0):!1},initHorizontalPositioning:function(){this.resetPositioning();var e=this.getBoundingRect(this.node),t=this.getViewWidth();return this.floating?this.activatorOffset.left+this.activatorOffset.width<t/2?(this.applyPosition({left:this.activatorOffset.left+this.activatorOffset.width}),this.addRemoveClass("left",!0)):(this.applyPosition({left:this.activatorOffset.left-e.width}),this.addRemoveClass("right",!0)):this.activatorOffset.left-e.width>0?(this.applyPosition({left:this.activatorOffset.left-e.left-e.width}),this.addRemoveClass("right",!0)):(this.applyPosition({left:this.activatorOffset.width}),this.addRemoveClass("left",!0)),this.addRemoveClass("horizontal",!0),e=this.getBoundingRect(this.node),e.left<0||e.left+e.width>t?!1:!0},applyHorizontalPositioning:function(){if(!this.initHorizontalPositioning())return!1;var e=this.getBoundingRect(this.node),t=this.getViewHeight(),n=this.activatorOffset.top+this.activatorOffset.height/2;return this.floating?n>=t/2-.05*t&&n<=t/2+.05*t?this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-e.height/2,bottom:"auto"}):this.activatorOffset.top+this.activatorOffset.height<t/2?(this.applyPosition({top:this.activatorOffset.top-this.activatorOffset.height,bottom:"auto"}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top-e.height+this.activatorOffset.height*2,bottom:"auto"}),this.addRemoveClass("low",!0)):n>=t/2-.05*t&&n<=t/2+.05*t?this.applyPosition({top:(this.activatorOffset.height-e.height)/2}):this.activatorOffset.top+this.activatorOffset.height<t/2?(this.applyPosition({top:-this.activatorOffset.height}),this.addRemoveClass("high",!0)):(this.applyPosition({top:e.top-e.height-this.activatorOffset.top+this.activatorOffset.height}),this.addRemoveClass("low",!0)),!0},applyHorizontalFlushPositioning:function(e,t){if(!this.initHorizontalPositioning())return!1;var n=this.getBoundingRect(this.node),r=this.getViewHeight();return this.floating?this.activatorOffset.top<r/2?(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2}),this.addRemoveClass("high",!0)):(this.applyPosition({top:this.activatorOffset.top+this.activatorOffset.height/2-n.height}),this.addRemoveClass("low",!0)):n.top+n.height>r&&r-n.bottom<n.top-n.height?(this.applyPosition({top:n.top-n.height-this.activatorOffset.top-this.activatorOffset.height/2}),this.addRemoveClass("low",!0)):(this.applyPosition({top:this.activatorOffset.height/2}),this.addRemoveClass("high",!0)),this.activatorOffset.left+this.activatorOffset.width<e?(this.addClass("left"),this.addClass("corner"),!0):this.activatorOffset.left>t?(this.addClass("right"),this.addClass("corner"),!0):!1},getBoundingRect:function(e){var t=e.getBoundingClientRect();return!t.width||!t.height?{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.right-t.left,height:t.bottom-t.top}:t},getViewHeight:function(){return window.innerHeight===undefined?document.documentElement.clientHeight:window.innerHeight},getViewWidth:function(){return window.innerWidth===undefined?document.documentElement.clientWidth:window.innerWidth},resetPositioning:function(){this.removeClass("right"),this.removeClass("left"),this.removeClass("high"),this.removeClass("low"),this.removeClass("corner"),this.removeClass("below"),this.removeClass("above"),this.removeClass("vertical"),this.removeClass("horizontal"),this.applyPosition({left:"auto"}),this.applyPosition({top:"auto"})},resizeHandler:function(){this.inherited(arguments),this.adjustPosition()},requestHide:function(){this.setShowing(!1)}});function enyoAlert(e,t,n){var r=t.createComponent({});r.render();var i=(new onyx.AlertInfo).renderInto(r.node);i.setMessage(e),i.setOwner(t);if(n!=null){i.setDoCancel(typeof n.onCancel=="function"||typeof n.cancelText=="string");for(var s in n)i[s]=n[s];i.setDynamic(!0)}return i.setShowing(!0),i}enyo.kind({name:"onyx.AlertInfo",kind:"onyx.Popup",layoutKind:"FittableRowsLayout",classes:"enyo-fit enyo-center onyx-alert",centered:!0,modal:!0,floating:!0,autoDismiss:!1,scrim:!0,published:{message:"",confirmText:"YES",cancelText:"NO",doCancel:!1,dynamic:!1,onCancel:function(e){},onConfirm:function(e){}},components:[{name:"message",style:"margin-bottom:30px",allowHtml:!0,fit:!0},{layoutKind:"FittableColumnsLayout",components:[{name:"confirm",kind:"onyx.Button",ontap:"confirm",classes:"onyx-blue",content:this.confirmText,fit:!0},{name:"cancel",kind:"onyx.Button",style:"width: 50% !important;margin-left:10px;",ontap:"cancel",showing:!1,content:this.cancelText}]}],create:function(){this.inherited(arguments),this.messageChanged(),this.dynamicChanged()},dynamicChanged:function(e){this.onCancelTextChanged(),this.onConfirmTextChanged(),this.onDoCancelChanged()},onCancelTextChanged:function(e){this.$.cancel.setContent(this.cancelText)},onConfirmTextChanged:function(e){this.$.confirm.setContent(this.confirmText)},onDoCancelChanged:function(e){this.$.cancel.setShowing(this.doCancel)},messageChanged:function(e){this.$.message.setContent(this.message)},confirm:function(e,t){this.setShowing(!1),this.onConfirm(this.owner),this.destroy()},cancel:function(e,t){this.onCancel(this.owner),this.setShowing(!1),this.destroy()}});enyo.kind({name:"enyo.Color",kind:enyo.Object,published:{rgba:null},rgbaChanged:function(){this.r=this.clamp(0,parseInt(this.rgba[0]),255),this.g=this.clamp(0,parseInt(this.rgba[1]),255),this.b=this.clamp(0,parseInt(this.rgba[2]),255),this.a=this.clamp(0,parseInt(this.rgba[3]),1)},clamp:function(e,t,n){return t<e?e:t>n?n:t},add:function(e,t){for(var n=0;n<e.length;n++)this[e.charAt(n)]+=t;return this.rgbaChanged(),this},scale:function(e,t){for(var n=0;n<e.length;n++)this[e.charAt(n)]*=t;return this.rgbaChanged(),this},toString:function(){return this.a>=1?"rgb("+[this.r,this.g,this.b].join(",")+")":"rgba("+[this.r,this.g,this.b,this.a].join(",")+")"},statics:{extract:function(e,t){var n;do{enyo.platform.ie<9&&e.hasNode()&&e.hasNode().currentStyle?n=e.hasNode().currentStyle.backgroundColor:n=e.getComputedStyleValue(t,null);if(n!=undefined&&n.length>0&&n!="transparent"&&n!="rgba(0, 0, 0, 0)"){n=n.toLowerCase();break}e=e.parent}while(e.parent);if(n==null||n=="rgba(0, 0, 0, 0)")n="transparent";return enyo.Color.parse(n)},parse:function(e){var t;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return new enyo.Color(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return new enyo.Color(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return new enyo.Color(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return new enyo.Color(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return new enyo.Color(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return new enyo.Color(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var n=e.replace(/^\s+|\s+$/g,"").toLowerCase();if(n=="transparent"){var r=new enyo.Color;return r.setRgba(t),r}t=enyo.Color[n]||[0,0,0];var r=new enyo.Color;return r.setRgba(t),r},parseByName:function(e){var t=enyo.Color.colors[e];t[3]=1;var n=new enyo.Color;return n.setRgba(t),n},colors:{aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgray:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],grey:[128,128,128],gray:[128,128,128],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightgray:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}});enyo.kind({name:"onyx.ColorItem",kind:"enyo.Button",classes:"onyx-color",published:{color:null},colorChanged:function(e){if(this.color){this.applyStyle("background-color",this.color.toString());var t=enyo.Color.parseByName(this.color),n=t.add("rgb",-48);this.applyStyle("border-color",n.toString())}},events:{onSelect:""},create:function(){this.silence(),this.inherited(arguments),this.unsilence(),this.active&&this.bubble("onActivate")},rendered:function(){this.inherited(arguments),this.colorChanged()},tap:function(e){this.inherited(arguments),this.bubble("onRequestHideMenu"),this.doSelect({selected:this,color:this.color})}}),enyo.kind({name:"onyx.ColorPickerButton",kind:"onyx.Button",published:{color:null},colorChanged:function(e){if(this.color){this.$.colorBox.applyStyle("background-color",this.color.toString());var t=enyo.Color.parseByName(this.color),n=t.add("rgb",-48);this.$.colorBox.applyStyle("border-color",n.toString())}},components:[{name:"colorBox",classes:"onyx-color-box"}],handlers:{onChange:"change"},change:function(e,t){t.color!==undefined&&this.setColor(t.color)}}),enyo.kind({name:"onyx.ColorPicker",kind:"onyx.Picker",defaultKind:"onyx.ColorItem",classes:"onyx-colorpicker",published:{color:null,type:"middle",width:null},handlers:{onRequestShowMenu:"requestMenuShow"},colorChanged:function(e){var t=this.getClientControls(),n=t.length;for(var r=0;r<n;r++)if(this.color===t[r].color){this.setSelected(t[r]);break}this.getSelected()||this.setSelected(t[0])},requestMenuShow:function(e,t){if(this.floating){var n=t.activator.hasNode();if(n){var r=this.activatorOffset=this.getPageOffset(n);this.applyPosition({top:r.top+(this.showOnTop?0:r.height),left:r.left,width:this.width?this.width:r.width})}}return this.show(),!0},create:function(){this.inherited(arguments),this.typeChanged(),this.colorChanged()},typeChanged:function(e){this.destroyClientControls(),this.type=="small"?(this.createComponent({color:"red"}),this.createComponent({color:"blue"}),this.createComponent({color:"green"}),this.createComponent({color:"orange"}),this.createComponent({color:"gray"}),this.createComponent({color:"darkcyan"}),this.createComponent({color:"brown"}),this.createComponent({color:"darkorchid"}),this.createComponent({color:"indigo"}),this.width=135):this.type=="middle"?(this.createComponent({color:"black"}),this.createComponent({color:"blue"}),this.createComponent({color:"brown"}),this.createComponent({color:"gold"}),this.createComponent({color:"gray"}),this.createComponent({color:"green"}),this.createComponent({color:"indigo"}),this.createComponent({color:"lime"}),this.createComponent({color:"magenta"}),this.createComponent({color:"orange"}),this.createComponent({color:"pink"}),this.createComponent({color:"purple"}),this.createComponent({color:"red"}),this.createComponent({color:"silver"}),this.createComponent({color:"yellow"}),this.createComponent({color:"white"}),this.width=195):this.type=="large"&&(this.createComponent({color:"aqua"}),this.createComponent({color:"azure"}),this.createComponent({color:"beige"}),this.createComponent({color:"black"}),this.createComponent({color:"blue"}),this.createComponent({color:"brown"}),this.createComponent({color:"cyan"}),this.createComponent({color:"darkblue"}),this.createComponent({color:"darkcyan"}),this.createComponent({color:"darkgrey"}),this.createComponent({color:"darkgray"}),this.createComponent({color:"darkgreen"}),this.createComponent({color:"darkkhaki"}),this.createComponent({color:"darkmagenta"}),this.createComponent({color:"darkolivegreen"}),this.createComponent({color:"darkorange"}),this.createComponent({color:"darkorchid"}),this.createComponent({color:"darkred"}),this.createComponent({color:"darksalmon"}),this.createComponent({color:"darkviolet"}),this.createComponent({color:"fuchsia"}),this.createComponent({color:"gold"}),this.createComponent({color:"grey"}),this.createComponent({color:"gray"}),this.createComponent({color:"green"}),this.createComponent({color:"indigo"}),this.createComponent({color:"khaki"}),this.createComponent({color:"lightblue"}),this.createComponent({color:"lightcyan"}),this.createComponent({color:"lightgreen"}),this.createComponent({color:"lightgrey"}),this.createComponent({color:"lightgray"}),this.createComponent({color:"lightpink"}),this.createComponent({color:"lightyellow"}),this.createComponent({color:"lime"}),this.createComponent({color:"magenta"}),this.createComponent({color:"maroon"}),this.createComponent({color:"navy"}),this.createComponent({color:"olive"}),this.createComponent({color:"orange"}),this.createComponent({color:"pink"}),this.createComponent({color:"purple"}),this.createComponent({color:"violet"}),this.createComponent({color:"red"}),this.createComponent({color:"silver"}),this.createComponent({color:"white"}),this.createComponent({color:"yellow"}),this.width=270),this.render()},selectedChanged:function(e){e&&e.removeClass("selected"),this.selected&&(this.selected.addClass("selected"),this.doChange({selected:this.selected,color:this.selected.color})),this.color=this.selected.color}});enyo.kind({name:"enyo.FileInputDecorator",published:{type:"image",mime:undefined,capture:!1,multiple:!1,inputName:undefined,disabled:!1},events:{onSelect:""},tag:"span",handlers:{ontap:"browse"},components:[{style:"width: 0px; height: 0px; overflow: hidden;",components:[{name:"fileInput",kind:"enyo.Input",type:"file",onchange:"filesSelected"}]},{name:"client",tag:"span"}],defaultClient:[{kind:window.onyx?"onyx.Button":"enyo.Button",content:"Browse..."}],create:function(){this.inherited(arguments),(!this.$.client.children||this.$.client.children.length==0)&&this.$.client.createComponents(this.defaultClient),this.updateFileInputAttr(),this.disabledChanged()},updateFileInputAttr:function(){this.mime?(this.$.fileInput.setAttribute("accept",this.mime),this.$.fileInput.setAttribute("capture","filesystem")):this.type=="audio"?(this.$.fileInput.setAttribute("accept","audio/*"),this.capture?this.$.fileInput.setAttribute("capture","microphone"):this.$.fileInput.setAttribute("capture","filesystem")):this.type=="image"?(this.$.fileInput.setAttribute("accept","image/*"),this.capture?this.$.fileInput.setAttribute("capture","camera"):this.$.fileInput.setAttribute("capture","filesystem")):this.type=="video"?(this.$.fileInput.setAttribute("accept","video/*"),this.capture?this.$.fileInput.setAttribute("capture","camcorder"):this.$.fileInput.setAttribute("capture","filesystem")):(this.$.fileInput.setAttribute("accept","*/*"),this.$.fileInput.setAttribute("capture","filesystem")),this.multiple?this.$.fileInput.setAttribute("multiple","multiple"):this.$.fileInput.setAttribute("multiple",null),this.inputName?this.$.fileInput.setAttribute("name",this.inputName):this.$.fileInput.setAttribute("name",null)},typeChanged:function(){this.updateFileInputAttr()},captureChanged:function(){this.updateFileInputAttr()},multipleChanged:function(){this.updateFileInputAttr()},inputNameChanged:function(){this.updateFileInputAttr()},disabledChanged:function(){this.$.fileInput.setDisabled(this.disabled)},browse:function(){var e=this.$.fileInput.hasNode();e&&e.click&&e.click()},filesSelected:function(e,t){this.doSelect({value:this.$.fileInput.getValue(),files:t.target.files})}});enyo.kind({name:"onyx.FiveStar",kind:"enyo.Control",classes:"enyo-unselectable onyx-fivestar",published:{warning:4,critical:2,value:0,type:"middle",editable:!0},handlers:{ontap:"tap"},events:{onChange:""},margin:4,components:[{kind:"enyo.Control",allowHtml:!0,classes:"onyx-fivestar-star",content:"*",value:1},{kind:"enyo.Control",allowHtml:!0,classes:"onyx-fivestar-star",content:"*",value:2},{kind:"enyo.Control",allowHtml:!0,classes:"onyx-fivestar-star",content:"*",value:3},{kind:"enyo.Control",allowHtml:!0,classes:"onyx-fivestar-star",content:"*",value:4},{kind:"enyo.Control",allowHtml:!0,classes:"onyx-fivestar-star",content:"*",value:5}],create:function(){this.inherited(arguments),this.editableChanged(),enyo.asyncMethod(this,"redraw",!0)},rendered:function(){this.inherited(arguments),this.editableChanged()},contentChanged:function(){this.redraw()},warningChanged:function(){this.redraw()},criticalChanged:function(){this.redraw()},valueChanged:function(){this.value<0&&(this.value=0),this.value>5&&(this.value=5),this.redraw()},typeChanged:function(){this.redraw()},editableChanged:function(){this.editable||this.addClass("disabled")},redraw:function(){var e=this.getComponents(),t=e.length,n=0;for(;n<t;n++){var r=e[n].value,i=r<=this.value;e[n].setContent(this.content),e[n].addRemoveClass("normal",i&&this.value>this.warning),e[n].addRemoveClass("warning",i&&this.value>this.critical),e[n].addRemoveClass("critical",i&&this.value<=this.critical),e[n].addRemoveClass(this.type,this.type),e[n].addRemoveClass("off",!i)}},tap:function(e,t){if(!this.editable)return!1;this.setValue(e.value),this.doChange({value:this.value})}});enyo.kind({name:"Rainfu.Frontia",kind:"Panels",draggable:!1,arrangerKind:"CardSlideInArranger",published:{appKey:null,description:null,mediaType:null,loginType:"sns",showType:"login",shareObj:null},components:[{name:"mediaSelectPanel",kind:"FittableRows",components:[{allowHtml:!0,classes:"descrip",name:"mediaDescription",content:"无需注册，通过第三方平台账号登录!"},{tag:"br"},{kind:"onyx.Groupbox",name:"mediaGroup"}]},{name:"mediaFramePanel",frameborder:"0",marginwidth:"0",marginheight:"0",tag:"iframe",src:"about:blank"},{name:"mediaSharePanel",layoutKind:"FittableRowsLayout",components:[{kind:"FittableRows",classes:"onyx-popup-content mainContent",components:[{kind:"onyx.Groupbox",style:"border:none;",components:[{kind:"onyx.InputDecorator",style:"border:none;",components:[{name:"shareContent",classes:"shareContent",kind:"onyx.TextArea",classes:"shareContent",placeholder:"分享内容",onchange:"contentChanged"}]}]},{fit:!0,name:"sharePic",classes:"sharePic",kind:"ImageView"}]},{classes:"footerBar",components:[{kind:"onyx.Button",name:"btnShare",classes:"onyx-blue",style:"margin-right:10px",content:"分享",ontap:"shareSns"}]}]}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments),this.appKeyChanged(),this.descriptionChanged(),this.mediaTypeChanged(),this.showTypeChanged()},loginTypeChanged:function(){this.loginType},showTypeChanged:function(){this.showType!="login"&&this.showType=="share"&&this.setIndex(2)},appKeyChanged:function(){this.appKey&&baidu.frontia.init(this.appKey)},descriptionChanged:function(){this.description&&this.$.mediaDescription.setContent(this.description)},shareObjChanged:function(){this.shareObj&&(this.$.shareContent.setContent(this.shareObj.content),this.shareObj.pic?(this.$.sharePic.setSrc(this.shareObj.pic),this.$.sharePic.show()):this.$.sharePic.hide())},mediaTypeChanged:function(){if(this.mediaType){var e=this;e.$.mediaGroup.destroyClientControls(),_.each(e.mediaType,function(t){e.$.mediaGroup.createComponent({kind:"FittableColumns",name:t.name,ontap:"showLoginView",components:[{content:t.title,classes:"label"},{fit:!0},{content:"<i class='icon-angle-right icon-large'></i>",classes:"label",allowHtml:!0}]},{owner:e})}),e.$.mediaGroup.render()}},showLoginView:function(e,t){var n=app.settings.get("baidRedirectUrl"),r=this.$.mediaFramePanel;(window.cordova||window.PhoneGap)&&device.platform!="windows8"?(n=app.settings.get("baiduRedirectUrlCordova"),r=null):(this.$.mediaFramePanel.applyStyle("width",this.getBounds().width+"px"),this.setIndex(1));var i={response_type:"token",media_type:e.name,redirect_uri:n,client_type:"web",iframe:r};e.name=="baidu"&&(i.scope="netdisk"),baidu.frontia.social.login(i)},login:function(e,t,n){var r=this,i=ciiat.Utils.getQueryParams(e);baidu.frontia.social.setLoginCallback({params:i,success:function(e){console.log("login..ok"),r.getUserInfo(e.accessToken,t)},error:function(e){console.log("login error "+JSON.stringify(e)),err&&n(err)}})},shareSns:function(e,t){this.share(this.shareObj,function(){console.log("hsare ok..")})},share:function(e,t){if(!e)return;if(!baidu.frontia.getCurrentAccount())return;var n="https://openapi.baidu.com/social/api/2.0/share";e.access_token=baidu.frontia.getCurrentAccount().getAccessToken();if(!e.access_token)return;var r=new enyo.JsonpRequest({url:n,method:"POST",callbackName:"callback"});r.go(e);var i=this;r.response(this,function(e,n){t&&t(n)})},getUserInfo:function(e,t){var n="https://openapi.baidu.com/social/api/2.0/user/info";params={access_token:e};var r=new enyo.JsonpRequest({url:n,callbackName:"callback"});r.go(params);var i=this;r.response(this,function(e,n){t&&t(n)})},list:function(e,t,n,r,i){if(n){if(!baidu.frontia.getCurrentAccount())return}else if(!baidu.frontia.getCurrentAccount()){var s=new baidu.frontia.Role("persist19s");baidu.frontia.setCurrentAccount(s)}var o=new baidu.frontia.storage.Query,u=e+"."+t.key;o.on(u).greaterThan(t.value),baidu.frontia.storage.findData(o,{success:function(e){var t=e.result||[];console.log("success.."+JSON.stringify(t)),r&&r(t)},error:function(e){console.log("error.."+JSON.stringify(e)),i&&i(i)}})},insert:function(e,t,n,r){if(!baidu.frontia.getCurrentAccount())return;var i=new baidu.frontia.ACL;i.setReadAccess(baidu.frontia.getCurrentAccount(),!0),i.setWriteAccess(baidu.frontia.getCurrentAccount(),!0),i.setPublicReadAccess(!0);var s=new baidu.frontia.Data(t);s.setAcl(i),baidu.frontia.storage.insertData(s,{success:function(e){console.log("insertData success.."+JSON.stringify(e)),n&&n(e)},error:function(e){console.log("insertData error.."+JSON.stringify(e)),r&&r(r)}})},update:function(e,t,n,r,i){var s=this;if(!baidu.frontia.getCurrentAccount())return;var o=new baidu.frontia.ACL;o.setReadAccess(baidu.frontia.getCurrentAccount(),!0),o.setWriteAccess(baidu.frontia.getCurrentAccount(),!0),o.setPublicReadAccess(!0);var u=new baidu.frontia.Data(t);u.setAcl(o);var a=new baidu.frontia.storage.Query,f=e+"."+n.key;a.on(f).equal(n.value),baidu.frontia.storage.updateData(a,u,{success:function(n){console.log("response..."+n);var o=n.response_params.count||0;console.log("count.."+JSON.stringify(n)),o===0?s.insert(e,t,r,i):r&&r(o)},error:function(e){console.log("error.."+JSON.stringify(e)),i&&i(i)}})},del:function(e,t,n,r){if(!baidu.frontia.getCurrentAccount()){var i=new baidu.frontia.Role("persist19s");baidu.frontia.setCurrentAccount(i)}var s=new baidu.frontia.storage.Query,o=e+"."+t.key;s.on(o).equal(t.value),baidu.frontia.storage.deleteData(s,{success:function(e){var t=e.response_params.count||0;console.log("count.."+JSON.stringify(e)),n&&n(t)},error:function(e){console.log("error.."+e),r&&r(r)}})}});function notify(e,t,n,r){var i=n.createComponent({});i.render();var s=(new Notify).renderInto(i.node);s.setCount(e),s.setType(t),s.setOwner(n);if(r!=null)for(var o in r)s[o]=r[o];return s.show(),s.$.showCornerAnimation.play(),s}enyo.kind({name:"Notify",kind:"onyx.Popup",classes:"notify",modal:!1,floating:!0,scrim:!1,autoDismiss:!1,published:{count:0,type:null,onCancel:function(e){},onConfirm:function(e){}},components:[{kind:"enyo.Animator",duration:1e3,startValue:0,endValue:1,onStep:"stepCornerShow",onEnd:"animationEnd",name:"showCornerAnimation"},{kind:"enyo.Control",ontap:"confirm",name:"notifymain",classes:"notifymain",components:[{kind:"enyo.Control",name:"count",content:"0",classes:"notify-count"}]}],create:function(){this.inherited(arguments),this.countChanged()},countChanged:function(e){this.$.count.setContent(this.count)},typeChanged:function(e){e&&this.$.count.removeClass(e),this.$.count.addClass(this.type)},confirm:function(e,t){this.setShowing(!1),this.onConfirm(this.owner),this.destroy()},stepCornerShow:function(e){var t={x:-150,y:-120},n={x:115,y:120};this.applyStyle("right",t.x+n.x*e.value+"px"),this.applyStyle("top",t.y+n.y*e.value+"px")},animationEnd:function(e){this.cornerVisible=!0},cancel:function(e,t){this.onCancel(this.owner),this.setShowing(!1),this.destroy()}});enyo.kind({name:"onyx.PasswordItem",kind:"onyx.Button",classes:"onyx-password",create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments)}}),enyo.kind({name:"onyx.PasswordPopup",kind:"onyx.Popup",maxHeight:300,handlers:{onHide:"hidePop"},published:{title:"Input Password",type:"digital",action:"new",md5Password:"",password:""},create:function(){this.inherited(arguments),this.typeChanged(),this.titleChanged(),this.passwordChanged(),this.md5PasswordChanged()},hidePop:function(){(!this.password||this.password.length!=4)&&this.setPassword("")},tapHandler:function(e,t){name=t.originator.getName(),name=="exit"?this.exit():name=="reset"?this.reset():name.indexOf("N")==0&&this.changePassword(t.originator.content)},titleChanged:function(e){this.$.title.setContent(this.title)},md5PasswordChanged:function(){},passwordChanged:function(e){this.password?this.password.length==3?(this.$.V1.setValue("*"),this.$.V2.setValue("*"),this.$.V3.setValue("*"),this.$.V4.setValue(" ")):this.password.length==4?(this.$.V1.setValue("*"),this.$.V2.setValue("*"),this.$.V3.setValue("*"),this.$.V4.setValue("*"),this.action=="new"?this.hide():hex_md5(this.password)==this.md5Password?this.hide():this.password=""):this.password.length==2?(this.$.V1.setValue("*"),this.$.V2.setValue("*"),this.$.V3.setValue(" "),this.$.V4.setValue(" ")):this.password.length==1&&(this.$.V1.setValue("*"),this.$.V2.setValue(" "),this.$.V3.setValue(" "),this.$.V4.setValue(" ")):(this.$.V1.setValue(""),this.$.V2.setValue(""),this.$.V3.setValue(""),this.$.V4.setValue(""))},typeChanged:function(e){this.destroyClientControls(),this.createComponent({name:"title",classes:"onyx-passwordpicker-title",content:this.title}),this.createComponent({name:"V1",disabled:!0,classes:"onyx-password-input",kind:"onyx.Input"}),this.createComponent({name:"V2",disabled:!0,classes:"onyx-password-input",kind:"onyx.Input"}),this.createComponent({name:"V3",disabled:!0,classes:"onyx-password-input",kind:"onyx.Input"}),this.createComponent({name:"V4",disabled:!0,classes:"onyx-password-input",kind:"onyx.Input"}),this.type=="digital"?(this.createComponent({name:"N1",content:"1",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"N2",content:"2",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"N3",content:"3",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"N4",content:"4",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"N5",content:"5",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"N6",content:"6",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"N7",content:"7",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"N8",content:"8",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"N9",content:"9",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"reset",content:"C",classes:"onyx-blue",kind:"onyx.PasswordItem",ontap:"reset"}),this.createComponent({name:"N0",content:"0",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"exit",content:"X",kind:"onyx.PasswordItem",classes:"onyx-negative",ontap:"exit"})):this.type=="letter"&&(this.applyStyle("min-width","400px"),this.createComponent({tag:"br"}),this.createComponent({name:"Na",content:"a",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nb",content:"b",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nc",content:"c",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nd",content:"d",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Ne",content:"e",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nf",content:"f",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Ng",content:"g",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nh",content:"h",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Ni",content:"i",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nj",content:"j",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nk",content:"k",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nl",content:"l",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nm",content:"m",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nn",content:"n",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"No",content:"o",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Np",content:"p",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nq",content:"q",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nr",content:"r",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Ns",content:"s",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nt",content:"t",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nu",content:"u",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nv",content:"v",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nw",content:"w",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nx",content:"x",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Ny",content:"y",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"Nz",content:"z",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({tag:"br"}),this.createComponent({name:"reset",content:"C",ontap:"reset",classes:"onyx-blue",kind:"onyx.PasswordItem"}),this.createComponent({name:"NA",content:"A",kind:"onyx.PasswordItem",ontap:"changePassword"}),this.createComponent({name:"exit",content:"X",ontap:"exit",classes:"onyx-negative",kind:"onyx.PasswordItem"})),this.render()},reset:function(){this.setPassword("")},exit:function(){this.setPassword(""),this.hide()},changePassword:function(e,t){name=t.originator.content,this.password.length>=4&&(this.password=""),this.setPassword(this.password+name)}}),enyo.kind({name:"onyx.PasswordPicker",kind:"Control",components:[{name:"toggle",kind:"onyx.ToggleButton",onChange:"showPopup",popup:"popup"},{name:"popup",classes:"onyx-passwordpicker",centered:!0,action:"new",type:"digistal",onHide:"hidePop",kind:"onyx.PasswordPopup",floating:!0}],published:{onContent:"On",offContent:"Off",title:"Input Password",type:"digital",centered:!0,password:"",md5Password:""},events:{onChangePass:""},create:function(){this.inherited(arguments),this.typeChanged(),this.passwordChanged(),this.md5PasswordChanged(),this.onContentChanged(),this.offContentChanged(),this.titleChanged(),this.centeredChanged()},showPopup:function(e,t){var n=e.parent.getBounds();if(t.value){var r=this.$[e.popup];r&&(!r.centered&&n?(n.left=n.left+80,n.top=n.top-80,r.showAtPosition(n)):r.show())}else this.password="",this.doChangePass({password:this.password})},hidePop:function(){this.$.popup.password&&this.$.popup.password.length==4?(this.password=this.$.popup.password,this.$.toggle.setValue(!0)):(this.password="",this.$.toggle.setValue(!1)),this.doChangePass({password:this.password})},centeredChanged:function(){this.$.popup.setCentered(this.centered)},md5PasswordChanged:function(e){this.md5Password?this.$.toggle.setValue(!0):this.$.toggle.setValue(!1),this.$.popup.setMd5Password(this.md5Password)},passwordChanged:function(e){this.password?this.$.toggle.setValue(!0):this.$.toggle.setValue(!1),this.$.popup.setPassword(this.password)},typeChanged:function(e){this.$.popup.setType(this.type)},titleChanged:function(){this.$.popup.setTitle(this.title)},onContentChanged:function(){this.$.toggle.setOnContent(this.onContent)},offContentChanged:function(){this.$.toggle.setOffContent(this.offContent)}});enyo.ready(function(){window.applicationCache!=undefined&&window.applicationCache!=null&&document.addEventListener("applicationcache",function(e){var t=["cached","checking","downloading","progress","error","noupdate","obsolete","updateready"];for(var n=0,r;r=t[n];n++)document.addEventListener(r,enyo.bind(enyo.Signals,"send","on"+r),!1);enyo.Signals.send("onapplicationcache",e)},!1)});ciiatSettingsModel=Backbone.Model.extend({defaults:function(){return{softversion:"1.0.0",softname:"enyojs-socketstream",softdescripiton:"fast enyojs dev framework",softdev:"rain.fu",softdevweibo:"http://weibo.com/rainfuling",softweb:"http://www.weifudao.com",debug:!0,isFirst:!0,messageSound:!0,usePassword:!1}}}),ciiatSettingsCollection=Backbone.Collection.extend({model:ciiatSettingsModel,localStorage:new Backbone.LocalStorage("APP_Settings")}),ciiatUserModel=Backbone.Model.extend({idAttribute:"uid",defaults:{uid:"default"}}),ciiatUserCollection=Backbone.Collection.extend({model:ciiatUserModel,localStorage:new Backbone.LocalStorage("APP_Users"),loadDefault:function(){return this.create(new ciiatUserModel)}});enyo.kind({name:"ciiat.GuideItem",kind:"FittableRows",published:{item:null},classes:"ciiat-adv",components:[{fit:!0,name:"advContent",kind:"FittableRows",classes:"ciiat-advContent",components:[{tag:"p",classes:"ciiat-adv-title",name:"title",allowHtml:!0},{fit:!0,kind:"Image",classes:"ciiat-adv-pic",allowHtml:!0,name:"pic"},{classes:"ciiat-adv-des",allowHtml:!0,name:"des"}]}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments),this.itemChanged()},itemChanged:function(){if(!this.item)return;this.$.title.setContent(this.item.title),this.$.title.setShowing(this.item.title),this.$.des.setContent(this.item.des),this.$.des.setShowing(this.item.des),this.$.pic.setSrc(this.item.pic),this.$.pic.setShowing(this.item.pic),this.reflow()}}),enyo.kind({name:"ciiat.GuidePanel",classes:"onyx ciiat-guide",kind:"FittableRows",published:{advs:[{pic:"images/ciiat/adv/1.png"},{pic:"images/ciiat/adv/2.png"},{pic:"images/ciiat/adv/3.png"}]},components:[{name:"advs",classes:"ciiat-advs",fit:!0,kind:"ciiat.RoutePanels",onTransitionFinish:"changeGuideNumber",arrangerKind:"CardSlideInArranger"},{classes:"ciiat-advs-dots",kind:"FittableColumns",components:[{fit:!0,name:"dots",classes:"ciiat-dots",style:"text-align:center;"}]},{classes:"ciiat-advs-button",kind:"FittableColumns",components:[{kind:"onyx.Button",classes:"onyx-blue",name:"btnMain",allowHtml:!0,content:"立即体验",ontap:"nav"}]}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments),this.advsChanged()},advsChanged:function(){this.$.advs.destroyClientControls(),this.$.dots.destroyClientControls();var e=this,t=this.$.advs.getBounds(),n=t.height>400?400:t.height,r=(t.height-n)/2,i=n>t.width-40?t.width-40:n;i+="px",r+="px",n+="px";for(var s=0;s<this.advs.length;s++){var o=new ciiat.GuideItem({route:"adv/adv"+s,item:this.advs[s],ontap:"tapItem"});o.setContainer(this.$.advs),o.setOwner(this),this.$.dots.createComponent({name:"dot"+s,classes:"ciiat-dot",content:"<i class='fa fa-circle'></i>",allowHtml:!0,ontap:"changeGuideTap"},{owner:this})}this.$.advs.render(),this.$.dot0&&this.$.dot0.addClass("active"),this.$.dots.render()},changeGuideNumber:function(e,t){var n=this.$.advs.getIndex();this.changeGuideTo(n)},changeGuideTap:function(e,t){var n=e.name.replace("dot","");this.$.advs.setIndex(n)},changeGuideTo:function(e){var t=this.$.dots.getClientControls();for(var n=0;n<t.length;n++){var r=t[n];r.removeClass("active"),r.name=="dot"+e&&r.addClass("active")}},tapItem:function(e,t){},nav:function(){app.router.navigate("login",{trigger:!0})}});enyo.kind({name:"ciiat.LoginPanel",kind:"FittableRows",classes:"onyx  onyx-lightblue ciiat-login",components:[{kind:"FittableRows",components:[{fit:!0,style:"margin:80px auto;max-width:300px;padding:25px;text-align:center;",components:[{name:"qqdenglu",classes:"onyx-affirmative btnLogin",kind:"onyx.Button",content:"QQ账号登录",ontap:"openLogin",allowHtml:!0},{name:"sinaweibo",classes:"onyx-blue btnLogin",kind:"onyx.Button",content:"微博账号登录",ontap:"openLogin",allowHtml:!0},{name:"offLine",classes:"onyx-light btnLogin",kind:"onyx.Button",content:"离线浏览",ontap:"offLine",allowHtml:!0}]}]}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments)},openLogin:function(e,t){var n=app.settings.get("baidRedirectUrl"),r=null;if(window.cordova||window.PhoneGap)n=app.settings.get("baiduRedirectUrlCordova");var i={response_type:"token",media_type:e.name,redirect_uri:n,client_type:"web",iframe:r};e.name=="baidu"&&(i.scope="netdisk"),baidu.frontia.social.login(i)},loginWithParams:function(e,t,n){var r=this;baidu.frontia.social.setLoginCallback({params:e,success:function(e){var n=baidu.frontia.getCurrentAccount();app.currentUser.save({snsUser:n}),r.getUserInfo(e.accessToken,t)},error:function(e){console.log("login error "+JSON.stringify(rtt)),e&&n(e)}})},getUserInfo:function(e,t){var n="https://openapi.baidu.com/social/api/2.0/user/info";params={access_token:e};var r=new enyo.JsonpRequest({url:n,callbackName:"callback"});r.go(params);var i=this;r.response(this,function(e,n){app.currentUser.save({snsUserInfo:n});if(window.cordova||window.PhoneGap){location.reload();return}t&&t(n)})},offLine:function(){app.router.navigate("main",{trigger:!0}),app.offLine()},snsLogin:function(e,t){if(!e||_.isObject(e)){t();return}var n=ciiat.Utils.getQueryParams(e);if(n){this.loginWithParams(n,t);return}t()}});enyo.kind({name:"ciiat.NavPanel",kind:"FittableRows",classes:"onyx ciiat-nav",published:{hasAccount:!0,menus:null,currentMenu:null},events:{onSelectMenu:""},components:[{kind:"Image",name:"userPic",classes:"item-menu-top",allowHtml:!0,ontap:"userTap"},{name:"userName",classes:"item-menu-name",allowHtml:!0,content:"匿名"},{kind:"List",fit:!0,touch:!0,reorderable:!0,onSetupItem:"setupItem",name:"navList",classes:"ciiat-list",components:[{name:"item",classes:"item-menu",ontap:"itemTap",components:[{name:"icon",allowHtml:!0,classes:"item-picture"},{name:"title",allowHtml:!0,classes:"item-title"},{name:"count",allowHtml:!0,classes:"item-count"}]}]},{name:"settings",classes:"onyx-simple item-menu-bottom",kind:"onyx.Button",content:"<i class='fa fa-cogs'></i>",allowHtml:!0,ontap:"settingsTap"}],create:function(){this.inherited(arguments),this.menus||(this.menus=[{id:"nav1",title:"菜单一",icon:"fa fa-book"},{id:"nav2",title:"菜单二",icon:"fa fa-envelope"},{id:"nav3",title:"菜单三",icon:"fa fa-group"}])},rendered:function(){this.inherited(arguments),this.menusChanged(),this.currentMenuChanged(),this.hasAccountChanged()},menusChanged:function(){this.$.navList.setCount(this.menus.length),this.$.navList.reset()},hasAccountChanged:function(){this.$.userPic.setShowing(this.hasAccount),this.$.userName.setShowing(this.hasAccount),this.hasAccount||this.applyStyle("padding-top","57px")},currentMenuChanged:function(e){if(this.currentMenu=="account")this.$.navList.select(null),this.$.settings.removeClass("active"),this.$.userPic.addClass("active");else if(this.currentMenu=="settings")this.$.navList.select(null),this.$.userPic.removeClass("active"),this.$.settings.addClass("active");else{var t=_.findWhere(this.menus,{id:this.currentMenu});if(t){var n=_.indexOf(this.menus,t);this.$.navList.select(n)}}this.doSelectMenu({currentMenu:this.currentMenu})},setupItem:function(e,t){var n=t.index,r=this.menus[n];r&&(this.$.item.addRemoveClass("active",e.isSelected(n)),this.$.title.setContent(r.title),this.$.icon.setContent('<i class="'+r.icon+'"></i>'),this.$.count.setContent(r.count),r.icon?(this.$.title.setShowing(e.isSelected(n)),this.$.icon.setShowing(!e.isSelected(n))):(this.$.title.setShowing(!0),this.$.icon.setShowing(!1)),this.$.count.setShowing(r.count))},itemTap:function(e,t){var n=t.index,r=this.menus[n];this.setCurrentMenu(r.id)},userTap:function(e,t){this.setCurrentMenu("account")},settingsTap:function(e,t){this.setCurrentMenu("settings")}});enyo.kind({name:"ciiat.RootPanel",kind:"ciiat.RoutePanels",classes:"onyx ciiat-root",published:{pushState:!0,usePushState:!0,hashChange:!0,hasGuide:!0,root:"",snsLogin:!0,currentUser:null,currentPage:null,settings:null},create:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.initSettings(),this.initCurrentUser(),this.initData(),this.settings.get("debug")?enyo.logging.level=30:enyo.logging.level=10;if(document.URL.indexOf("access_token")>0)this.accessUrl=document.URL;else if(document.URL.indexOf("reguid")>0){var t=ciiat.Utils.getQueryParams(document.URL);t.reguid&&this.settings.save("reguid",t.reguid)}else{var n=ciiat.Utils.getQueryPaths(document.URL);n&&(this.sourcePaths=n)}window.cordova||window.PhoneGap?(this.setRoot(""),this.setPushState(!1)):document.URL.indexOf("file")>=0?(this.setRoot(""),this.setPushState(!1)):this.usePushState?(this.setRoot("/"),this.setPushState(!0)):(this.setRoot(""),this.setPushState(!1)),Backbone.history.start({pushState:this.pushState,hashChange:this.hashChange,root:this.root})}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments),this.applyData();var t=this;if(t.settings.get("isFirst")){t.settings.save({isFirst:!1});if(t.hasGuide){app.router.navigate("guide",{trigger:!0});return}}this.snsLogin?app.router.navigate("login",{trigger:!0}):app.router.navigate("main",{trigger:!0}),this.start()}}),initCurrentUser:function(){var e=new ciiatUserCollection;e.fetch(),e.length?this.setCurrentUser(e.at(0)):this.setCurrentUser(e.loadDefault()),this.applyUser()},initSettings:function(){var e=new ciiatSettingsCollection;e.fetch();if(!e.length){var t=new ciiatSettingsModel;e.create(t)}this.setSettings(e.at(0)),this.applySettings()},applySettings:function(){},applyUser:function(){},initData:function(){},applyData:function(){},start:function(){}});enyo.kind({name:"ciiat.RoutePanels",kind:"enyo.Panels",classes:"onyx",create:enyo.inherit(function(e){return function(){e.apply(this,arguments)}}),rendered:enyo.inherit(function(e){return function(){e.apply(this,arguments);if(!window.app)return;var t=this;_.each(this.getPanels(),function(e){e.route&&window.app.router.route(e.route,e.rname?e.rname:e.route,function(n){window.app.setCurrentPage(e.route);var r=ciiat.Utils.getQueryPaths("p#"+e.route);t.initParams(t,r);var i=t.selectPanelByRoute(e.route);typeof i.afterRoute=="function"&&i.afterRoute(n)})})}}),initParams:function(e,t){var n=e.parent;n&&((n.kind=="ciiat.RoutePanels"||n.name=="rootView")&&_.each(t,function(e){var t=n.selectPanelByRoute(e);t}),this.initParams(n,t))},selectPanelByRoute:function(e){if(!e)return;var t=0,n=this.getPanels(),r=n.length;for(;t<r;++t)if(e===n[t].route)return this.getArrangerKind()=="CollapsingArranger"?!enyo.Panels.isScreenNarrow()||this.setIndex(t):this.setIndex(t),n[t]},indexChanged:function(e){this.inherited(arguments)}});enyo.kind({name:"ciiat.Utils",statics:{subString:function(e,t,n){var r=0,i="",s=/[^\x00-\xff]/g,o="",u=e.replace(s,"**").length;for(var a=0;a<u;a++){o=e.charAt(a).toString(),o.match(s)!=null?r+=2:r++;if(r>t)break;i+=o}return n&&u>t&&(i+="..."),i},formatTime:function(e){var t=Date.parse(new Date),n=Math.floor((t-e)/1e3);if(n<60)return n<0&&(n=1),n+" 秒前";var r=Math.floor(n/60);if(r<60)return r+" 分钟前";var i=Math.floor(r/60);if(i<24)return i+" 小时前";var s=Math.floor(i/24);return s+" 天前"},formatDate:function(e){var t=e*1e3;return date=new Date(t*1e3),datevalues=[date.getFullYear(),date.getMonth()+1,date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds()],datevalues[0]+"-"+datevalues[1]+"-"+datevalues[2]},formatDay:function(e){var t=(new Date).getTime(),n=new Date(e),r=n.getDate(),i=n.getMonth()+1,s=n.getFullYear();return s+"-"+i+"-"+r},formatSmallDate:function(e){var t=new Date(e),n=t.getDate(),r=t.getMonth()+1;return r+"-"+n},getQueryParams:function(e){if(!e)return;var t={};if(e.indexOf("#")>=0){paramsStr=e.split("#")[1];var n=paramsStr.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(!i[0])continue;t[i[0]]=i[1]||!0}}return t},getQueryPaths:function(e){if(!e)return;var t=[];if(e.indexOf("#")>=0){paramsStr=e.split("#")[1];var n=paramsStr.split("/"),r="";for(var i=0;i<n.length;i++)n[i]&&(t[i]=r+n[i],r=t[i]+"/")}else{var s=window.location.pathname.substring(1);s&&(t[0]=s)}return t},toQueryString:function(e){var t=Object.keys(e),n="";for(var r=0;r<t.length;r++)n+=t[r]+"="+encodeURIComponent(e[t[r]]),r!=t.length-1&&(n+="&");return n},toHtml:function(e){return e?e.replace(/\r?\n/g,"<br/>"):""},centerScreen:function(e){var t=($(window).height()-e.outerHeight())/2,n=($(window).width()-e.outerWidth())/2;$("#load-screen").css({top:t,left:n})},loadImage:function(e,t){if(!e){t&&t(!1,"");return}var n=new enyo.Ajax({cacheBust:!1,url:e,handleAs:"text",contentType:"text/plain",method:"GET"});n.go();var r=this;n.response(this,function(e,n){t&&t(!0,n)}),n.error(this,function(e,n){enyo.log("loadImage error."+n),t&&t(!1,n)})},openUrl:function(e,t,n){t||(t="_blank"),n||(n="yes");if(window.cordova||window.PhoneGap)if(device.platform=="windows8")var r=window.open(e,"_system","location="+n);else var r=window.open(e,"_blank","location="+n);else window.client&&window.client=="clientapp"?winObj.callNavigate(e):window.open(e,t)},playAudio:function(e,t,n){if(app.settings.get("messageSound")){if(window.cordova||window.PhoneGap){enyo.platform.android?src=n:src=t;var r=new Media(src,function(){},function(e){});return r.play(),r}window.client&&window.client=="clientapp"&&(t=t.replace(".mp3",".wav")),e.getSrc()||e.setSrc(t),e.play()}},stopAudio:function(e,t,n){app.settings.get("messageSound")&&(window.cordova||window.PhoneGap?app.bgMedia&&app.bgMedia.stop():(window.client&&window.client=="clientapp"&&(t=t.replace(".mp3",".wav")),e.getSrc()||e.setSrc(t),e.pause()))},isEmail:function(e){return e.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)!=-1?!0:!1}}});var Kinetic={};(function(e){var t=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:undefined,dragDistance:0,angleDeg:!0,UA:function(){var t=e.navigator&&e.navigator.userAgent||"",n=t.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[],i=!!t.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:r[1]||"",version:r[2]||"0",mobile:i}}(),Filters:{},Node:function(e){this._init(e)},Shape:function(e){this.__init(e)},Container:function(e){this.__init(e)},Stage:function(e){this.___init(e)},BaseLayer:function(e){this.___init(e)},Layer:function(e){this.____init(e)},FastLayer:function(e){this.____init(e)},Group:function(e){this.___init(e)},isDragging:function(){var e=Kinetic.DD;return e?e.isDragging:!1},isDragReady:function(){var e=Kinetic.DD;return e?!!e.node:!1},_addId:function(e,t){t!==undefined&&(this.ids[t]=e)},_removeId:function(e){e!==undefined&&delete this.ids[e]},_addName:function(e,t){t!==undefined&&(this.names[t]===undefined&&(this.names[t]=[]),this.names[t].push(e))},_removeName:function(e,t){if(e!==undefined){var n=this.names[e];if(n!==undefined){for(var r=0;r<n.length;r++){var i=n[r];i._id===t&&n.splice(r,1)}n.length===0&&delete this.names[e]}}},getAngle:function(e){return this.angleDeg?e*t:e}}})(this),function(e,t){if(typeof exports=="object"){var n=require("canvas"),r=require("jsdom").jsdom,i=r("<!DOCTYPE html><html><head></head><body></body></html>"),s=t();Kinetic.document=i,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=n.Image,Kinetic.root=e,Kinetic._nodeCanvas=n,module.exports=s;return}typeof define=="function"&&define.amd&&define(t),Kinetic.document=document,Kinetic.window=window,Kinetic.root=e}((1,eval)("this"),function(){return Kinetic}),function(){Kinetic.Collection=function(){var e=[].slice.call(arguments),t=e.length,n=0;this.length=t;for(;n<t;n++)this[n]=e[n];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(e){for(var t=0;t<this.length;t++)e(this[t],t)},Kinetic.Collection.prototype.toArray=function(){var e=[],t=this.length,n;for(n=0;n<t;n++)e.push(this[n]);return e},Kinetic.Collection.toCollection=function(e){var t=new Kinetic.Collection,n=e.length,r;for(r=0;r<n;r++)t.push(e[r]);return t},Kinetic.Collection._mapMethod=function(e){Kinetic.Collection.prototype[e]=function(){var t=this.length,n,r=[].slice.call(arguments);for(n=0;n<t;n++)this[n][e].apply(this[n],r);return this}},Kinetic.Collection.mapMethods=function(e){var t=e.prototype;for(var n in t)Kinetic.Collection._mapMethod(n)},Kinetic.Transform=function(e){this.m=e&&e.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}},translate:function(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this},scale:function(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m[0]*t+this.m[2]*n,i=this.m[1]*t+this.m[3]*n,s=this.m[0]*-n+this.m[2]*t,o=this.m[1]*-n+this.m[3]*t;return this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(e,t){var n=this.m[0]+this.m[2]*t,r=this.m[1]+this.m[3]*t,i=this.m[2]+this.m[0]*e,s=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this},multiply:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],s=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o,this},invert:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,r=-this.m[2]*e,i=this.m[0]*e,s=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o,this},getMatrix:function(){return this.m},setAbsolutePosition:function(e,t){var n=this.m[0],r=this.m[1],i=this.m[2],s=this.m[3],o=this.m[4],u=this.m[5],a=(n*(t-u)-r*(e-o))/(n*s-r*i),f=(e-o-i*a)/n;return this.translate(f,a)}};var e="canvas",t="2d",n="[object Array]",r="[object Number]",i="[object String]",s=Math.PI/180,o=180/Math.PI,u="#",a="",f="0",l="Kinetic warning: ",c="Kinetic error: ",h="rgb(",p={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},d=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(e){return!!e&&e.nodeType==1},_isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isObject:function(e){return!!e&&e.constructor==Object},_isArray:function(e){return Object.prototype.toString.call(e)==n},_isNumber:function(e){return Object.prototype.toString.call(e)==r},_isString:function(e){return Object.prototype.toString.call(e)==i},_throttle:function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:(new Date).getTime(),o=null,s=e.apply(r,i),r=i=null};return function(){var f=(new Date).getTime();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),r=i=null):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},_hasMethods:function(e){var t=[],n;for(n in e)this._isFunction(e[n])&&t.push(n);return t.length>0},createCanvasElement:function(){var e=Kinetic.document.createElement("canvas");return e.style=e.style||{},e},isBrowser:function(){return typeof exports!="object"},_isInDocument:function(e){while(e=e.parentNode)if(e==Kinetic.document)return!0;return!1},_simplifyArray:function(e){var t=[],n=e.length,r=Kinetic.Util,i,s;for(i=0;i<n;i++)s=e[i],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s.toString()),t.push(s);return t},_getImage:function(e,n){var r,i;if(!e)n(null);else if(this._isElement(e))n(e);else if(this._isString(e))r=new Kinetic.window.Image,r.onload=function(){n(r)},r.src=e;else if(e.data){i=Kinetic.Util.createCanvasElement(),i.width=e.width,i.height=e.height;var s=i.getContext(t);s.putImageData(e,0,0),this._getImage(i.toDataURL(),n)}else n(null)},_getRGBAString:function(e){var t=e.red||0,n=e.green||0,r=e.blue||0,i=e.alpha||1;return["rgba(",t,",",n,",",r,",",i,")"].join(a)},_rgbToHex:function(e,t,n){return((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb:function(e){e=e.replace(u,a);var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor:function(){var e=(Math.random()*16777215<<0).toString(16);while(e.length<6)e=f+e;return u+e},get:function(e,t){return e===undefined?t:e},getRGB:function(e){var t;return e in p?(t=p[e],{r:t[0],g:t[1],b:t[2]}):e[0]===u?this._hexToRgb(e.substring(1)):e.substr(0,4)===h?(t=d.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},_merge:function(e,t){var n=this._clone(t);for(var r in e)this._isObject(e[r])?n[r]=this._merge(e[r],n[r]):n[r]=e[r];return n},cloneObject:function(e){var t={};for(var n in e)this._isObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:function(e){return e.slice(0)},_degToRad:function(e){return e*s},_radToDeg:function(e){return e*o},_capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},error:function(e){throw new Error(c+e)},warn:function(e){Kinetic.root.console&&console.warn&&console.warn(l+e)},extend:function(e,t){for(var n in t.prototype)n in e.prototype||(e.prototype[n]=t.prototype[n])},addMethods:function(e,t){var n;for(n in t)e.prototype[n]=t[n]},_getControlPoints:function(e,t,n,r,i,s,o){var u=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2)),a=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),f=o*u/(u+a),l=o*a/(u+a),c=n-f*(i-e),h=r-f*(s-t),p=n+l*(i-e),d=r+l*(s-t);return[c,h,p,d]},_expandPoints:function(e,t){var n=e.length,r=[],i,s;for(i=2;i<n-2;i+=2)s=Kinetic.Util._getControlPoints(e[i-2],e[i-1],e[i],e[i+1],e[i+2],e[i+3],t),r.push(s[0]),r.push(s[1]),r.push(e[i]),r.push(e[i+1]),r.push(s[2]),r.push(s[3]);return r},_removeLastLetter:function(e){return e.substring(0,e.length-1)}}}(),function(){var e=Kinetic.Util.createCanvasElement(),t=e.getContext("2d"),n=Kinetic.UA.mobile?function(){var e=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return e/n}():1;Kinetic.Canvas=function(e){this.init(e)},Kinetic.Canvas.prototype={init:function(e){e=e||{};var t=e.pixelRatio||Kinetic.pixelRatio||n;this.pixelRatio=t,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(e){this.pixelRatio=e,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px"},setHeight:function(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(e,t){this.setWidth(e),this.setHeight(t)},toDataURL:function(e,t){try{return this._canvas.toDataURL(e,t)}catch(n){try{return this._canvas.toDataURL()}catch(r){return Kinetic.Util.warn("Unable to get data URL. "+r.message),""}}}},Kinetic.SceneCanvas=function(e){e=e||{};var t=e.width||0,n=e.height||0;Kinetic.Canvas.call(this,e),this.context=new Kinetic.SceneContext(this),this.setSize(t,n)},Kinetic.SceneCanvas.prototype={setWidth:function(e){var t=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,e),n.scale(t,t)},setHeight:function(e){var t=this.pixelRatio,n=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,e),n.scale(t,t)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(e){e=e||{};var t=e.width||0,n=e.height||0;Kinetic.Canvas.call(this,e),this.context=new Kinetic.HitContext(this),this.setSize(t,n)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var e=",",t="(",n=")",r="([",i="])",s=";",o="()",u="=",a=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(e){this.init(e)},Kinetic.Context.prototype={init:function(e){this.canvas=e,this._context=e._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(e){e.getFillEnabled()&&this._fill(e)},strokeShape:function(e){e.getStrokeEnabled()&&this._stroke(e)},fillStrokeShape:function(e){var t=e.getFillEnabled();t&&this._fill(e),e.getStrokeEnabled()&&this._stroke(e)},getTrace:function(a){var f=this.traceArr,l=f.length,c="",h,p,d,v;for(h=0;h<l;h++)p=f[h],d=p.method,d?(v=p.args,c+=d,a?c+=o:Kinetic.Util._isArray(v[0])?c+=r+v.join(e)+i:c+=t+v.join(e)+n):(c+=p.property,a||(c+=u+p.val)),c+=s;return c},clearTrace:function(){this.traceArr=[]},_trace:function(e){var t=this.traceArr,n;t.push(e),n=t.length,n>=Kinetic.traceArrMax&&t.shift()},reset:function(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)},getCanvas:function(){return this.canvas},clear:function(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth(),t.getHeight())},_applyLineCap:function(e){var t=e.getLineCap();t&&this.setAttr("lineCap",t)},_applyOpacity:function(e){var t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)},_applyLineJoin:function(e){var t=e.getLineJoin();t&&this.setAttr("lineJoin",t)},setAttr:function(e,t){this._context[e]=t},arc:function(){var e=arguments;this._context.arc(e[0],e[1],e[2],e[3],e[4],e[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var e=arguments;this._context.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])},clearRect:function(){var e=arguments;this._context.clearRect(e[0],e[1],e[2],e[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var e=arguments;if(e.length===2)return this._context.createImageData(e[0],e[1]);if(e.length===1)return this._context.createImageData(e[0])},createLinearGradient:function(){var e=arguments;return this._context.createLinearGradient(e[0],e[1],e[2],e[3])},createPattern:function(){var e=arguments;return this._context.createPattern(e[0],e[1])},createRadialGradient:function(){var e=arguments;return this._context.createRadialGradient(e[0],e[1],e[2],e[3],e[4],e[5])},drawImage:function(){var e=arguments,t=this._context;e.length===3?t.drawImage(e[0],e[1],e[2]):e.length===5?t.drawImage(e[0],e[1],e[2],e[3],e[4]):e.length===9&&t.drawImage(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},fill:function(){this._context.fill()},fillText:function(){var e=arguments;this._context.fillText(e[0],e[1],e[2])},getImageData:function(){var e=arguments;return this._context.getImageData(e[0],e[1],e[2],e[3])},lineTo:function(){var e=arguments;this._context.lineTo(e[0],e[1])},moveTo:function(){var e=arguments;this._context.moveTo(e[0],e[1])},rect:function(){var e=arguments;this._context.rect(e[0],e[1],e[2],e[3])},putImageData:function(){var e=arguments;this._context.putImageData(e[0],e[1],e[2])},quadraticCurveTo:function(){var e=arguments;this._context.quadraticCurveTo(e[0],e[1],e[2],e[3])},restore:function(){this._context.restore()},rotate:function(){var e=arguments;this._context.rotate(e[0])},save:function(){this._context.save()},scale:function(){var e=arguments;this._context.scale(e[0],e[1])},setLineDash:function(){var e=arguments,t=this._context;this._context.setLineDash?t.setLineDash(e[0]):"mozDash"in t?t.mozDash=e[0]:"webkitLineDash"in t&&(t.webkitLineDash=e[0])},setTransform:function(){var e=arguments;this._context.setTransform(e[0],e[1],e[2],e[3],e[4],e[5])},stroke:function(){this._context.stroke()},strokeText:function(){var e=arguments;this._context.strokeText(e[0],e[1],e[2])},transform:function(){var e=arguments;this._context.transform(e[0],e[1],e[2],e[3],e[4],e[5])},translate:function(){var e=arguments;this._context.translate(e[0],e[1])},_enableTrace:function(){var e=this,t=a.length,n=Kinetic.Util._simplifyArray,r=this.setAttr,i,s,o=function(t){var r=e[t],i;e[t]=function(){return s=n(Array.prototype.slice.call(arguments,0)),i=r.apply(e,arguments),e._trace({method:t,args:s}),i}};for(i=0;i<t;i++)o(a[i]);e.setAttr=function(){r.apply(e,arguments),e._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(e){Kinetic.Context.call(this,e)},Kinetic.SceneContext.prototype={_fillColor:function(e){var t=e.fill()||Kinetic.Util._getRGBAString({red:e.fillRed(),green:e.fillGreen(),blue:e.fillBlue(),alpha:e.fillAlpha()});this.setAttr("fillStyle",t),e._fillFunc(this)},_fillPattern:function(e){var t=e.getFillPatternImage(),n=e.getFillPatternX(),r=e.getFillPatternY(),i=e.getFillPatternScale(),s=Kinetic.getAngle(e.getFillPatternRotation()),o=e.getFillPatternOffset(),u=e.getFillPatternRepeat();(n||r)&&this.translate(n||0,r||0),s&&this.rotate(s),i&&this.scale(i.x,i.y),o&&this.translate(-1*o.x,-1*o.y),this.setAttr("fillStyle",this.createPattern(t,u||"repeat")),this.fill()},_fillLinearGradient:function(e){var t=e.getFillLinearGradientStartPoint(),n=e.getFillLinearGradientEndPoint(),r=e.getFillLinearGradientColorStops(),i=this.createLinearGradient(t.x,t.y,n.x,n.y);if(r){for(var s=0;s<r.length;s+=2)i.addColorStop(r[s],r[s+1]);this.setAttr("fillStyle",i),this.fill()}},_fillRadialGradient:function(e){var t=e.getFillRadialGradientStartPoint(),n=e.getFillRadialGradientEndPoint(),r=e.getFillRadialGradientStartRadius(),i=e.getFillRadialGradientEndRadius(),s=e.getFillRadialGradientColorStops(),o=this.createRadialGradient(t.x,t.y,r,n.x,n.y,i);for(var u=0;u<s.length;u+=2)o.addColorStop(s[u],s[u+1]);this.setAttr("fillStyle",o),this.fill()},_fill:function(e){var t=e.fill()||e.fillRed()||e.fillGreen()||e.fillBlue(),n=e.getFillPatternImage(),r=e.getFillLinearGradientColorStops(),i=e.getFillRadialGradientColorStops(),s=e.getFillPriority();t&&s==="color"?this._fillColor(e):n&&s==="pattern"?this._fillPattern(e):r&&s==="linear-gradient"?this._fillLinearGradient(e):i&&s==="radial-gradient"?this._fillRadialGradient(e):t?this._fillColor(e):n?this._fillPattern(e):r?this._fillLinearGradient(e):i&&this._fillRadialGradient(e)},_stroke:function(e){var t=e.dash(),n=e.getStrokeScaleEnabled();e.hasStroke()&&(n||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(e),t&&e.dashEnabled()&&this.setLineDash(t),this.setAttr("lineWidth",e.strokeWidth()),this.setAttr("strokeStyle",e.stroke()||Kinetic.Util._getRGBAString({red:e.strokeRed(),green:e.strokeGreen(),blue:e.strokeBlue(),alpha:e.strokeAlpha()})),e._strokeFunc(this),n||this.restore())},_applyShadow:function(e){var t=Kinetic.Util,n=e.getAbsoluteOpacity(),r=t.get(e.getShadowColor(),"black"),i=t.get(e.getShadowBlur(),5),s=t.get(e.getShadowOpacity(),1),o=t.get(e.getShadowOffset(),{x:0,y:0});s&&this.setAttr("globalAlpha",s*n),this.setAttr("shadowColor",r),this.setAttr("shadowBlur",i),this.setAttr("shadowOffsetX",o.x),this.setAttr("shadowOffsetY",o.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(e){Kinetic.Context.call(this,e)},Kinetic.HitContext.prototype={_fill:function(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()},_stroke:function(e){e.hasStroke()&&(this._applyLineCap(e),this.setAttr("lineWidth",e.strokeWidth()),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var e="absoluteOpacity",t="absoluteTransform",n="add",r="b",i="before",s="black",o="Change",u="children",a="Deg",f=".",l="",c="g",h="get",p="#",d="id",v="kinetic",m="listening",g="mouseenter",y="mouseleave",b="name",w="off",E="on",S="_get",x="r",T="RGB",N="set",C="Shape",k=" ",L="Stage",A="transform",O="B",M="G",_="Height",D="R",P="Width",H="X",B="Y",j="visible",F="x",I="y";Kinetic.Factory={addGetterSetter:function(e,t,n,r,i){this.addGetter(e,t,n),this.addSetter(e,t,r,i),this.addOverloadedGetterSetter(e,t)},addGetter:function(e,t,n){var r=h+Kinetic.Util._capitalize(t);e.prototype[r]=function(){var e=this.attrs[t];return e===undefined?n:e}},addSetter:function(e,t,n,r){var i=N+Kinetic.Util._capitalize(t);e.prototype[i]=function(e){return n&&(e=n.call(this,e)),this._setAttr(t,e),r&&r.call(this),this}},addComponentsGetterSetter:function(e,t,n,r,i){var s=n.length,o=Kinetic.Util._capitalize,u=h+o(t),a=N+o(t),f,l;e.prototype[u]=function(){var e={};for(f=0;f<s;f++)l=n[f],e[l]=this.getAttr(t+o(l));return e},e.prototype[a]=function(e){var n=this.attrs[t],s;r&&(e=r.call(this,e));for(s in e)this._setAttr(t+o(s),e[s]);return this._fireChangeEvent(t,n,e),i&&i.call(this),this},this.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter:function(e,t){var n=Kinetic.Util._capitalize(t),r=N+n,i=h+n;e.prototype[t]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},backCompat:function(e,t){var n;for(n in t)e.prototype[n]=e.prototype[t[n]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(e){return e>255?255:e<0?0:Math.round(e)},alphaComponent:function(e){return e>1?1:e<1e-4?1e-4:e}}}(),function(){var e="absoluteOpacity",t="absoluteTransform",n="before",r="Change",i="children",s=".",o="",u="get",a="id",f="kinetic",l="listening",c="mouseenter",h="mouseleave",p="name",d="set",v="Shape",m=" ",g="stage",y="transform",b="Stage",w="visible",E=["id"],S=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(m);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(n){var r=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(n),this.on(S,function(){this._clearCache(y),r._clearSelfAndDescendantCache(t)}),this.on("visibleChange.kinetic",function(){r._clearSelfAndDescendantCache(w)}),this.on("listeningChange.kinetic",function(){r._clearSelfAndDescendantCache(l)}),this.on("opacityChange.kinetic",function(){r._clearSelfAndDescendantCache(e)})},_clearCache:function(e){e?delete this._cache[e]:this._cache={}},_getCache:function(e,t){var n=this._cache[e];return n===undefined&&(this._cache[e]=t.call(this)),this._cache[e]},_clearSelfAndDescendantCache:function(e){this._clearCache(e),this.children&&this.getChildren().each(function(t){t._clearSelfAndDescendantCache(e)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(e){var t=e||{},n=t.x||0,r=t.y||0,i=t.width||this.width(),s=t.height||this.height(),o=t.drawBorder||!1,u=this.getLayer();if(i===0||s===0){Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");return}var a=new Kinetic.SceneCanvas({pixelRatio:1,width:i,height:s}),f=new Kinetic.SceneCanvas({pixelRatio:1,width:i,height:s}),l=new Kinetic.HitCanvas({width:i,height:s}),c=this.transformsEnabled(),h=this.x(),p=this.y(),d=a.getContext(),v=l.getContext();return this.clearCache(),d.save(),v.save(),o&&(d.save(),d.beginPath(),d.rect(0,0,i,s),d.closePath(),d.setAttr("strokeStyle","red"),d.setAttr("lineWidth",5),d.stroke(),d.restore()),d.translate(n*-1,r*-1),v.translate(n*-1,r*-1),this.nodeType==="Shape"&&(d.translate(this.x()*-1,this.y()*-1),v.translate(this.x()*-1,this.y()*-1)),this.drawScene(a,this),this.drawHit(l,this),d.restore(),v.restore(),this._cache.canvas={scene:a,filter:f,hit:l},this},_drawCachedSceneCanvas:function(e){e.save(),this.getLayer()._applyTransform(this,e),e.drawImage(this._getCachedSceneCanvas()._canvas,0,0),e.restore()},_getCachedSceneCanvas:function(){var e=this.filters(),t=this._cache.canvas,n=t.scene,r=t.filter,i=r.getContext(),s,o,u,a;if(e){if(!this._filterUpToDate){try{s=e.length,i.clear(),i.drawImage(n._canvas,0,0),o=i.getImageData(0,0,r.getWidth(),r.getHeight());for(u=0;u<s;u++)a=e[u],a.call(this,o),i.putImageData(o,0,0)}catch(f){Kinetic.Util.warn("Unable to apply filter. "+f.message)}this._filterUpToDate=!0}return r}return n},_drawCachedHitCanvas:function(e){var t=this._cache.canvas,n=t.hit;e.save(),this.getLayer()._applyTransform(this,e),e.drawImage(n._canvas,0,0),e.restore()},on:function(e,t){var n=e.split(m),r=n.length,i,u,a,f,l;for(i=0;i<r;i++)u=n[i],a=u.split(s),f=a[0],l=a[1]||o,this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:l,handler:t});return this},off:function(e){var t=e.split(m),n=t.length,r,i,o,u,a,f;for(r=0;r<n;r++){o=t[r],u=o.split(s),a=u[0],f=u[1];if(a)this.eventListeners[a]&&this._off(a,f);else for(i in this.eventListeners)this._off(i,f)}return this},dispatchEvent:function(e){var t={target:this,type:e.type,evt:e};this.fire(e.type,t)},addEventListener:function(e,t){this.on(e,function(e){t.call(this,e.evt)})},remove:function(){var n=this.getParent();return n&&n.children&&(n.children.splice(this.index,1),n._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(t),this._clearSelfAndDescendantCache(w),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(e),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(e){var t=u+Kinetic.Util._capitalize(e);return Kinetic.Util._isFunction(this[t])?this[t]():this.attrs[e]},getAncestors:function(){var e=this.getParent(),t=new Kinetic.Collection;while(e)t.push(e),e=e.getParent();return t},getAttrs:function(){return this.attrs||{}},setAttrs:function(e){var t,n;if(e)for(t in e)t!==i&&(n=d+Kinetic.Util._capitalize(t),Kinetic.Util._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]));return this},isListening:function(){return this._getCache(l,this._isListening)},_isListening:function(){var e=this.getListening(),t=this.getParent();return e==="inherit"?t?t.isListening():!0:e},isVisible:function(){return this._getCache(w,this._isVisible)},_isVisible:function(){var e=this.getVisible(),t=this.getParent();return e==="inherit"?t?t.isVisible():!0:e},shouldDrawHit:function(){var e=this.getLayer();return e&&e.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function u(a){r=[],i=a.length;for(s=0;s<i;s++)o=a[s],n++,o.nodeType!==v&&(r=r.concat(o.getChildren().toArray())),o._id===t._id&&(s=i);r.length>0&&r[0].getDepth()<=e&&u(r)}var e=this.getDepth(),t=this,n=0,r,i,s,o;return t.nodeType!==b&&u(t.getStage().getChildren()),n},getDepth:function(){var e=0,t=this.parent;while(t)e++,t=t.parent;return e},setPosition:function(e){return this.setX(e.x),this.setY(e.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var e=this.getAbsoluteTransform().getMatrix(),t=new Kinetic.Transform,n=this.offset();return t.m=e.slice(),t.translate(n.x,n.y),t.getTranslation()},setAbsolutePosition:function(e){var t=this._clearTransform(),n;return this.attrs.x=t.x,this.attrs.y=t.y,delete t.x,delete t.y,n=this.getAbsoluteTransform(),n.invert(),n.translate(e.x,e.y),e={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this.setPosition({x:e.x,y:e.y}),this._setTransform(t),this},_setTransform:function(e){var n;for(n in e)this.attrs[n]=e[n];this._clearCache(y),this._clearSelfAndDescendantCache(t)},_clearTransform:function(){var e={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(y),this._clearSelfAndDescendantCache(t),e},move:function(e){var t=e.x,n=e.y,r=this.getX(),i=this.getY();return t!==undefined&&(r+=t),n!==undefined&&(i+=n),this.setPosition({x:r,y:i}),this},_eachAncestorReverse:function(e,t){var n=[],r=this.getParent(),i,s;if(t&&t._id===this._id)return e(this),!0;n.unshift(this);while(r&&(!t||r._id!==t._id))n.unshift(r),r=r.parent;i=n.length;for(s=0;s<i;s++)e(n[s])},rotate:function(e){return this.setRotation(this.getRotation()+e),this},moveToTop:function(){if(!this.parent){Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");return}var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent){Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");return}var e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent){Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");return}var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent){Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");return}var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(e){if(!this.parent){Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");return}var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(e,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var e=this.getOpacity();return this.getParent()&&(e*=this.getParent().getAbsoluteOpacity()),e},moveTo:function(e){return Kinetic.Node.prototype.remove.call(this),e.add(this),this},toObject:function(){var e=Kinetic.Util,t={},n=this.getAttrs(),r,i,s,o;t.attrs={};for(r in n)i=n[r],!e._isFunction(i)&&!e._isElement(i)&&(!e._isObject(i)||!e._hasMethods(i))&&(s=this[r],delete n[r],o=s?s.call(this):null,n[r]=i,o!==i&&(t.attrs[r]=i));return t.className=this.getClassName(),t},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var e=this.getParent();return e?e.getLayer():null},getStage:function(){return this._getCache(g,this._getStage)},_getStage:function(){var e=this.getParent();return e?e.getStage():undefined},fire:function(e,t,n){return n?this._fireAndBubble(e,t||{}):this._fire(e,t||{}),this},getAbsoluteTransform:function(e){return e?this._getAbsoluteTransform(e):this._getCache(t,this._getAbsoluteTransform)},_getAbsoluteTransform:function(e){var t=new Kinetic.Transform,n,r;return this._eachAncestorReverse(function(e){n=e.transformsEnabled(),r=e.getTransform(),n==="all"?t.multiply(r):n==="position"&&t.translate(e.x(),e.y())},e),t},getTransform:function(){return this._getCache(y,this._getTransform)},_getTransform:function(){var e=new Kinetic.Transform,t=this.getX(),n=this.getY(),r=Kinetic.getAngle(this.getRotation()),i=this.getScaleX(),s=this.getScaleY(),o=this.getSkewX(),u=this.getSkewY(),a=this.getOffsetX(),f=this.getOffsetY();return(t!==0||n!==0)&&e.translate(t,n),r!==0&&e.rotate(r),(o!==0||u!==0)&&e.skew(o,u),(i!==1||s!==1)&&e.scale(i,s),(a!==0||f!==0)&&e.translate(-1*a,-1*f),e},clone:function(e){var t=this.getClassName(),n=Kinetic.Util.cloneObject(this.attrs),r,i,s,o,u;for(var a in E){var l=E[a];delete n[l]}for(r in e)n[r]=e[r];var c=new Kinetic[t](n);for(r in this.eventListeners){i=this.eventListeners[r],s=i.length;for(o=0;o<s;o++)u=i[o],u.name.indexOf(f)<0&&(c.eventListeners[r]||(c.eventListeners[r]=[]),c.eventListeners[r].push(u))}return c},toDataURL:function(e){e=e||{};var t=e.mimeType||null,n=e.quality||null,r=this.getStage(),i=e.x||0,s=e.y||0,o=new Kinetic.SceneCanvas({width:e.width||this.getWidth()||(r?r.getWidth():0),height:e.height||this.getHeight()||(r?r.getHeight():0),pixelRatio:1}),u=o.getContext();return u.save(),(i||s)&&u.translate(-1*i,-1*s),this.drawScene(o),u.restore(),o.toDataURL(t,n)},toImage:function(e){Kinetic.Util._getImage(this.toDataURL(e),function(t){e.callback(t)})},setSize:function(e){return this.setWidth(e.width),this.setHeight(e.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return this.attrs.dragDistance!==undefined?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(e){return this.nodeType===e?[this]:[]},_off:function(e,t){var n=this.eventListeners[e],r,i;for(r=0;r<n.length;r++){i=n[r].name;if((i!=="kinetic"||t==="kinetic")&&(!t||i===t)){n.splice(r,1);if(n.length===0){delete this.eventListeners[e];break}r--}}},_fireChangeEvent:function(e,t,n){this._fire(e+r,{oldVal:t,newVal:n})},setId:function(e){var t=this.getId();return Kinetic._removeId(t),Kinetic._addId(this,e),this._setAttr(a,e),this},setName:function(e){var t=this.getName();return Kinetic._removeName(t,this._id),Kinetic._addName(this,e),this._setAttr(p,e),this},setAttr:function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1],r=d+Kinetic.Util._capitalize(t),i=this[r];return Kinetic.Util._isFunction(i)?i.call(this,n):this._setAttr(t,n),this},_setAttr:function(e,t){var n;t!==undefined&&(n=this.attrs[e],this.attrs[e]=t,this._fireChangeEvent(e,n,t))},_setComponentAttr:function(e,t,n){var r;n!==undefined&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,r,n))},_fireAndBubble:function(e,t,n){var r=!0;t&&this.nodeType===v&&(t.target=this),e===c&&n&&this._id===n._id?r=!1:e===h&&n&&this._id===n._id&&(r=!1),r&&(this._fire(e,t),t&&!t.cancelBubble&&this.parent&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n.parent):this._fireAndBubble.call(this.parent,e,t)))},_fire:function(e,t){var n=this.eventListeners[e],r;t.type=e;if(n)for(r=0;r<n.length;r++)n[r].handler.call(this,t)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(e,t){return this._createNode(JSON.parse(e),t)},Kinetic.Node._createNode=function(e,t){var n=Kinetic.Node.prototype.getClassName.call(e),r=e.children,i,s,o;t&&(e.attrs.container=t),i=new Kinetic[n](e.attrs);if(r){s=r.length;for(o=0;o<s;o++)i.add(this._createNode(r[o]))}return i},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",undefined,function(e){return this._filterUpToDate=!1,e}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(e){var t=e.data,n=t.length,r,i;for(r=0;r<n;r+=4)i=.34*t[r]+.5*t[r+1]+.16*t[r+2],t[r]=i,t[r+1]=i,t[r+2]=i}}(),function(){Kinetic.Filters.Brighten=function(e){var t=this.brightness()*255,n=e.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=t,n[i+1]+=t,n[i+2]+=t},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(e){var t=e.data,n=t.length,r;for(r=0;r<n;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]}}(),function(){function e(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function r(r,i){var s=r.data,o=r.width,u=r.height,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_=i+i+1,D=o-1,P=u-1,H=i+1,B=H*(H+1)/2,j=new e,F=null,I=j,q=null,R=null,U=t[i],z=n[i];for(l=1;l<_;l++)I=I.next=new e,l==H&&(F=I);I.next=j,d=p=0;for(f=0;f<u;f++){x=T=N=C=v=m=g=y=0,b=H*(k=s[p]),w=H*(L=s[p+1]),E=H*(A=s[p+2]),S=H*(O=s[p+3]),v+=B*k,m+=B*L,g+=B*A,y+=B*O,I=j;for(l=0;l<H;l++)I.r=k,I.g=L,I.b=A,I.a=O,I=I.next;for(l=1;l<H;l++)c=p+((D<l?D:l)<<2),v+=(I.r=k=s[c])*(M=H-l),m+=(I.g=L=s[c+1])*M,g+=(I.b=A=s[c+2])*M,y+=(I.a=O=s[c+3])*M,x+=k,T+=L,N+=A,C+=O,I=I.next;q=j,R=F;for(a=0;a<o;a++)s[p+3]=O=y*U>>z,O!==0?(O=255/O,s[p]=(v*U>>z)*O,s[p+1]=(m*U>>z)*O,s[p+2]=(g*U>>z)*O):s[p]=s[p+1]=s[p+2]=0,v-=b,m-=w,g-=E,y-=S,b-=q.r,w-=q.g,E-=q.b,S-=q.a,c=d+((c=a+i+1)<D?c:D)<<2,x+=q.r=s[c],T+=q.g=s[c+1],N+=q.b=s[c+2],C+=q.a=s[c+3],v+=x,m+=T,g+=N,y+=C,q=q.next,b+=k=R.r,w+=L=R.g,E+=A=R.b,S+=O=R.a,x-=k,T-=L,N-=A,C-=O,R=R.next,p+=4;d+=o}for(a=0;a<o;a++){T=N=C=x=m=g=y=v=0,p=a<<2,b=H*(k=s[p]),w=H*(L=s[p+1]),E=H*(A=s[p+2]),S=H*(O=s[p+3]),v+=B*k,m+=B*L,g+=B*A,y+=B*O,I=j;for(l=0;l<H;l++)I.r=k,I.g=L,I.b=A,I.a=O,I=I.next;h=o;for(l=1;l<=i;l++)p=h+a<<2,v+=(I.r=k=s[p])*(M=H-l),m+=(I.g=L=s[p+1])*M,g+=(I.b=A=s[p+2])*M,y+=(I.a=O=s[p+3])*M,x+=k,T+=L,N+=A,C+=O,I=I.next,l<P&&(h+=o);p=a,q=j,R=F;for(f=0;f<u;f++)c=p<<2,s[c+3]=O=y*U>>z,O>0?(O=255/O,s[c]=(v*U>>z)*O,s[c+1]=(m*U>>z)*O,s[c+2]=(g*U>>z)*O):s[c]=s[c+1]=s[c+2]=0,v-=b,m-=w,g-=E,y-=S,b-=q.r,w-=q.g,E-=q.b,S-=q.a,c=a+((c=f+H)<P?c:P)*o<<2,v+=x+=q.r=s[c],m+=T+=q.g=s[c+1],g+=N+=q.b=s[c+2],y+=C+=q.a=s[c+3],q=q.next,b+=k=R.r,w+=L=R.g,E+=A=R.b,S+=O=R.a,x-=k,T-=L,N-=A,C-=O,R=R.next,p+=o}}var t=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(e){var t=Math.round(this.blurRadius());t>0&&r(e,t)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function e(e,t,n){var r=(n*e.width+t)*4,i=[];return i.push(e.data[r++],e.data[r++],e.data[r++],e.data[r++]),i}function t(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function n(e){var t=[0,0,0];for(var n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function r(r,i){var s=e(r,0,0),o=e(r,r.width-1,0),u=e(r,0,r.height-1),a=e(r,r.width-1,r.height-1),f=i||10;if(t(s,o)<f&&t(o,a)<f&&t(a,u)<f&&t(u,s)<f){var l=n([o,s,a,u]),c=[];for(var h=0;h<r.width*r.height;h++){var p=t(l,[r.data[h*4],r.data[h*4+1],r.data[h*4+2]]);c[h]=p<f?0:255}return c}}function i(e,t){for(var n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function s(e,t,n){var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[];for(var u=0;u<n;u++)for(var a=0;a<t;a++){var f=u*t+a,l=0;for(var c=0;c<i;c++)for(var h=0;h<i;h++){var p=u+c-s,d=a+h-s;if(p>=0&&p<n&&d>=0&&d<t){var v=p*t+d,m=r[c*i+h];l+=e[v]*m}}o[f]=l===2040?255:0}return o}function o(e,t,n){var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[];for(var u=0;u<n;u++)for(var a=0;a<t;a++){var f=u*t+a,l=0;for(var c=0;c<i;c++)for(var h=0;h<i;h++){var p=u+c-s,d=a+h-s;if(p>=0&&p<n&&d>=0&&d<t){var v=p*t+d,m=r[c*i+h];l+=e[v]*m}}o[f]=l>=1020?255:0}return o}function u(e,t,n){var r=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[];for(var u=0;u<n;u++)for(var a=0;a<t;a++){var f=u*t+a,l=0;for(var c=0;c<i;c++)for(var h=0;h<i;h++){var p=u+c-s,d=a+h-s;if(p>=0&&p<n&&d>=0&&d<t){var v=p*t+d,m=r[c*i+h];l+=e[v]*m}}o[f]=l}return o}Kinetic.Filters.Mask=function(e){var t=this.threshold(),n=r(e,t);return n&&(n=s(n,e.width,e.height),n=o(n,e.width,e.height),n=u(n,e.width,e.height),i(e,n)),e},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(e){var t=e.data,n=t.length,r=this.red(),i=this.green(),s=this.blue(),o,u;for(o=0;o<n;o+=4)u=(.34*t[o]+.5*t[o+1]+.16*t[o+2])/255,t[o]=u*r,t[o+1]=u*i,t[o+2]=u*s,t[o+3]=t[o+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(e){var t=e.data,n=t.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o,u=r*i*Math.cos(s*Math.PI/180),a=r*i*Math.sin(s*Math.PI/180),f=.299*r+.701*u+.167*a,l=.587*r-.587*u+.33*a,c=.114*r-.114*u-.497*a,h=.299*r-.299*u-.328*a,p=.587*r+.413*u+.035*a,d=.114*r-.114*u+.293*a,v=.299*r-.3*u+1.25*a,m=.587*r-.586*u-1.05*a,g=.114*r+.886*u-.2*a,y,b,w,E;for(o=0;o<n;o+=4)y=t[o+0],b=t[o+1],w=t[o+2],E=t[o+3],t[o+0]=f*y+l*b+c*w,t[o+1]=h*y+p*b+d*w,t[o+2]=v*y+m*b+g*w,t[o+3]=E},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(e){var t=e.data,n=t.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o=this.luminance()*127,u,a=r*i*Math.cos(s*Math.PI/180),f=r*i*Math.sin(s*Math.PI/180),l=.299*r+.701*a+.167*f,c=.587*r-.587*a+.33*f,h=.114*r-.114*a-.497*f,p=.299*r-.299*a-.328*f,d=.587*r+.413*a+.035*f,v=.114*r-.114*a+.293*f,m=.299*r-.3*a+1.25*f,g=.587*r-.586*a-1.05*f,y=.114*r+.886*a-.2*f,b,w,E,S;for(u=0;u<n;u+=4)b=t[u+0],w=t[u+1],E=t[u+2],S=t[u+3],t[u+0]=l*b+c*w+h*E+o,t[u+1]=p*b+d*w+v*E+o,t[u+2]=m*b+g*w+y*E+o,t[u+3]=S}}(),function(){Kinetic.Filters.Emboss=function(e){var t=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=0,o=0,u=e.data,a=e.width,f=e.height,l=a*4,c=f;switch(r){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1}do{var h=(c-1)*l,p=s;c+p<1&&(p=0),c+p>f&&(p=0);var d=(c-1+p)*a*4,v=a;do{var m=h+(v-1)*4,g=o;v+g<1&&(g=0),v+g>a&&(g=0);var y=d+(v-1+g)*4,b=u[m]-u[y],w=u[m+1]-u[y+1],E=u[m+2]-u[y+2],S=b,x=S>0?S:-S,T=w>0?w:-w,N=E>0?E:-E;T>x&&(S=w),N>x&&(S=E),S*=t;if(i){var C=u[m]+S,k=u[m+1]+S,L=u[m+2]+S;u[m]=C>255?255:C<0?0:C,u[m+1]=k>255?255:k<0?0:k,u[m+2]=L>255?255:L<0?0:L}else{var A=n-S;A<0?A=0:A>255&&(A=255),u[m]=u[m+1]=u[m+2]=A}}while(--v)}while(--c)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function e(e,t,n,r,i){var s=n-t,o=i-r,u;return s===0?r+o/2:o===0?r:(u=(e-t)/s,u=o*u+r,u)}Kinetic.Filters.Enhance=function(t){var n=t.data,r=n.length,i=n[0],s=i,o,u=n[1],a=u,f,l=n[2],c=l,h,p=n[3],d=p,v,m=this.enhance();if(m===0)return;for(v=0;v<r;v+=4)o=n[v+0],o<i?i=o:o>s&&(s=o),f=n[v+1],f<u?u=f:f>a&&(a=f),h=n[v+2],h<l?l=h:h>c&&(c=h);s===i&&(s=255,i=0),a===u&&(a=255,u=0),c===l&&(c=255,l=0),d===p&&(d=255,p=0);var g,y,b,w,E,S,x,T,N,C,k,L;m>0?(y=s+m*(255-s),b=i-m*(i-0),E=a+m*(255-a),S=u-m*(u-0),T=c+m*(255-c),L=l-m*(l-0),k=d+m*(255-d),N=p-m*(p-0)):(g=(s+i)*.5,y=s+m*(s-g),b=i+m*(i-g),w=(a+u)*.5,E=a+m*(a-w),S=u+m*(u-w),x=(c+l)*.5,T=c+m*(c-x),L=l+m*(l-x),C=(d+p)*.5,k=d+m*(d-C),N=p+m*(p-C));for(v=0;v<r;v+=4)n[v+0]=e(n[v+0],i,s,b,y),n[v+1]=e(n[v+1],u,a,S,E),n[v+2]=e(n[v+2],l,c,L,T)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(e){var t=Math.round(this.levels()*254)+1,n=e.data,r=n.length,i=255/t,s;for(s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(e){var t=this.noise()*255,n=e.data,r=n.length,i=t/2,s;for(s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(e){var t=Math.ceil(this.pixelSize()),n=e.width,r=e.height,i,s,o,u,a,f,l,c=Math.ceil(n/t),h=Math.ceil(r/t),p,d,v,m,g,y,b;e=e.data;for(g=0;g<c;g+=1)for(y=0;y<h;y+=1){u=0,a=0,f=0,l=0,p=g*t,d=p+t,v=y*t,m=v+t,b=0;for(i=p;i<d;i+=1){if(i>=n)continue;for(s=v;s<m;s+=1){if(s>=r)continue;o=(n*s+i)*4,u+=e[o+0],a+=e[o+1],f+=e[o+2],l+=e[o+3],b+=1}}u/=b,a/=b,f/=b;for(i=p;i<d;i+=1){if(i>=n)continue;for(s=v;s<m;s+=1){if(s>=r)continue;o=(n*s+i)*4,e[o+0]=u,e[o+1]=a,e[o+2]=f,e[o+3]=l}}}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(e){var t=this.threshold()*255,n=e.data,r=n.length,i;for(i=0;i<r;i+=1)n[i]=n[i]<t?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(e){var t=e.data,n=e.width,r=e.height,i=n*4,s,o,u,a,f,l,c,h,p;do{s=(r-1)*i,o=n;do u=s+(o-1)*4,a=t[u],f=t[u+1],l=t[u+2],c=a*.393+f*.769+l*.189,h=a*.349+f*.686+l*.168,p=a*.272+f*.534+l*.131,t[u]=c>255?255:c,t[u+1]=h>255?255:h,t[u+2]=p>255?255:p,t[u+3]=t[u+3];while(--o)}while(--r)}}(),function(){Kinetic.Filters.Solarize=function(e){var t=e.data,n=e.width,r=e.height,i=n*4,s=r;do{var o=(s-1)*i,u=n;do{var a=o+(u-1)*4,f=t[a],l=t[a+1],c=t[a+2];f>127&&(f=255-f),l>127&&(l=255-l),c>127&&(c=255-c),t[a]=f,t[a+1]=l,t[a+2]=c}while(--u)}while(--s)}}(),function(){var e=function(e,t,n){var r=e.data,i=t.data,s=e.width,o=e.height,u=n.polarCenterX||s/2,a=n.polarCenterY||o/2,f,l,c,h=0,p=0,d=0,v=0,m,g=Math.sqrt(u*u+a*a);l=s-u,c=o-a,m=Math.sqrt(l*l+c*c),g=m>g?m:g;var y=o,b=s,w,E,S=360/b*Math.PI/180,x,T;for(E=0;E<b;E+=1){x=Math.sin(E*S),T=Math.cos(E*S);for(w=0;w<y;w+=1)l=Math.floor(u+g*w/y*T),c=Math.floor(a+g*w/y*x),f=(c*s+l)*4,h=r[f+0],p=r[f+1],d=r[f+2],v=r[f+3],f=(E+w*s)*4,i[f+0]=h,i[f+1]=p,i[f+2]=d,i[f+3]=v}},t=function(e,t,n){var r=e.data,i=t.data,s=e.width,o=e.height,u=n.polarCenterX||s/2,a=n.polarCenterY||o/2,f,l,c,h,p,d=0,v=0,m=0,g=0,y,b=Math.sqrt(u*u+a*a);l=s-u,c=o-a,y=Math.sqrt(l*l+c*c),b=y>b?y:b;var w=o,E=s,S,x,T=n.polarRotation||0,N,C;for(l=0;l<s;l+=1)for(c=0;c<o;c+=1)h=l-u,p=c-a,S=Math.sqrt(h*h+p*p)*w/b,x=(Math.atan2(p,h)*180/Math.PI+360+T)%360,x=x*E/360,N=Math.floor(x),C=Math.floor(S),f=(C*s+N)*4,d=r[f+0],v=r[f+1],m=r[f+2],g=r[f+3],f=(c*s+l)*4,i[f+0]=d,i[f+1]=v,i[f+2]=m,i[f+3]=g},n=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(r){var i=r.width,s=r.height,o,u,a,f,l,c,h,p,d,v,m=Math.round(this.kaleidoscopePower()),g=Math.round(this.kaleidoscopeAngle()),y=Math.floor(i*(g%360)/360);if(m<1)return;n.width=i,n.height=s;var b=n.getContext("2d").getImageData(0,0,i,s);e(r,b,{polarCenterX:i/2,polarCenterY:s/2});var w=i/Math.pow(2,m);while(w<=8)w*=2,m-=1;w=Math.ceil(w);var E=w,S=0,x=E,T=1;y+w>i&&(S=E,x=0,T=-1);for(u=0;u<s;u+=1)for(o=S;o!==x;o+=T)a=Math.round(o+y)%i,d=(i*u+a)*4,l=b.data[d+0],c=b.data[d+1],h=b.data[d+2],p=b.data[d+3],v=(i*u+o)*4,b.data[v+0]=l,b.data[v+1]=c,b.data[v+2]=h,b.data[v+3]=p;for(u=0;u<s;u+=1){E=Math.floor(w);for(f=0;f<m;f+=1){for(o=0;o<E+1;o+=1)d=(i*u+o)*4,l=b.data[d+0],c=b.data[d+1],h=b.data[d+2],p=b.data[d+3],v=(i*u+E*2-o-1)*4,b.data[v+0]=l,b.data[v+1]=c,b.data[v+2]=h,b.data[v+3]=p;E*=2}}t(b,r,{polarRotation:0})},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function r(e){Kinetic.root.setTimeout(e,1e3/60)}function i(){return n.apply(Kinetic.root,arguments)}var e=500,t=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),n=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||r}();Kinetic.Animation=function(e,n){var r=Kinetic.Animation;this.func=e,this.setLayers(n),this.id=r.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:t()}},Kinetic.Animation.prototype={setLayers:function(e){var t=[];e?e.length>0?t=e:t=[e]:t=[],this.layers=t},getLayers:function(){return this.layers},addLayer:function(e){var t=this.layers,n,r;if(t){n=t.length;for(r=0;r<n;r++)if(t[r]._id===e._id)return!1}else this.layers=[];return this.layers.push(e),!0},isRunning:function(){var e=Kinetic.Animation,t=e.animations,n=t.length,r;for(r=0;r<n;r++)if(t[r].id===this.id)return!0;return!1},start:function(){var e=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=t(),e._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(e){this.animations.push(e),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(e){var t=e.id,n=this.animations,r=n.length,i;for(i=0;i<r;i++)if(n[i].id===t){this.animations.splice(i,1);break}},Kinetic.Animation._runFrames=function(){var e={},n=this.animations,r,i,s,o,u,a,f,l;for(o=0;o<n.length;o++){r=n[o],i=r.layers,s=r.func,r._updateFrameObject(t()),a=i.length;for(u=0;u<a;u++)f=i[u],f._id!==undefined&&(e[f._id]=f);s&&s.call(r,r.frame)}for(l in e)e[l].draw()},Kinetic.Animation._animationLoop=function(){var e=Kinetic.Animation;e.animations.length?(i(e._animationLoop),e._runFrames()):e.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var e=this;this.animRunning||(this.animRunning=!0,e._animationLoop())};var s=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(e){s.call(this,e)},Kinetic.Layer.prototype.batchDraw=function(){var n=this,r=Kinetic.Animation;this.batchAnim||(this.batchAnim=new r(function(){n.lastBatchDrawTime&&t()-n.lastBatchDrawTime>e&&n.batchAnim.stop()},this)),this.lastBatchDrawTime=t(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(e){e.batchDraw()})}}((1,eval)("this")),function(){var e={node:1,duration:1,easing:1,onFinish:1,yoyo:1},t=1,n=2,r=3,i=0;Kinetic.Tween=function(t){var n=this,r=t.node,o=r._id,u=t.duration||1,a=t.easing||Kinetic.Easings.Linear,f=!!t.yoyo,l;this.node=r,this._id=i++,this.anim=new Kinetic.Animation(function(){n.tween.onEnterFrame()},r.getLayer()),this.tween=new s(l,function(e){n._tweenFunc(e)},a,0,1,u*1e3,f),this._addListeners(),Kinetic.Tween.attrs[o]||(Kinetic.Tween.attrs[o]={}),Kinetic.Tween.attrs[o][this._id]||(Kinetic.Tween.attrs[o][this._id]={}),Kinetic.Tween.tweens[o]||(Kinetic.Tween.tweens[o]={});for(l in t)e[l]===undefined&&this._addAttr(l,t[l]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(e,t){var n=this.node,r=n._id,i,s,o,u,a;o=Kinetic.Tween.tweens[r][e],o&&delete Kinetic.Tween.attrs[r][o][e],i=n.getAttr(e);if(Kinetic.Util._isArray(t)){s=[],a=t.length;for(u=0;u<a;u++)s.push(t[u]-i[u])}else s=t-i;Kinetic.Tween.attrs[r][this._id][e]={start:i,diff:s},Kinetic.Tween.tweens[r][e]=this._id},_tweenFunc:function(e){var t=this.node,n=Kinetic.Tween.attrs[t._id][this._id],r,i,s,o,u,a,f;for(r in n){i=n[r],s=i.start,o=i.diff;if(Kinetic.Util._isArray(s)){u=[],f=s.length;for(a=0;a<f;a++)u.push(s[a]+o[a]*e)}else u=s+o*e;t.setAttr(r,u)}},_addListeners:function(){var e=this;this.tween.onPlay=function(){e.anim.start()},this.tween.onReverse=function(){e.anim.start()},this.tween.onPause=function(){e.anim.stop()},this.tween.onFinish=function(){e.onFinish&&e.onFinish()},this.tween.onReset=function(){e.onReset&&e.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){var e=this.node;return this.tween.reset(),this},seek:function(e){var t=this.node;return this.tween.seek(e*1e3),this},pause:function(){return this.tween.pause(),this},finish:function(){var e=this.node;return this.tween.finish(),this},destroy:function(){var e=this.node._id,t=this._id,n=Kinetic.Tween.tweens[e],r;this.pause();for(r in n)delete Kinetic.Tween.tweens[e][r];delete Kinetic.Tween.attrs[e][t]}};var s=function(e,t,n,r,i,s,o){this.prop=e,this.propFunc=t,this.begin=r,this._pos=r,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=i-this.begin,this.pause()};s.prototype={fire:function(e){var t=this[e];t&&t()},setTime:function(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())},getTime:function(){return this._time},setPosition:function(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e},getPosition:function(e){return e===undefined&&(e=this._time),this.func(e,this.begin,this._change,this.duration)},play:function(){this.state=n,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=r,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var e=this.getTimer()-this._startTime;this.state===n?this.setTime(e):this.state===r&&this.setTime(this.duration-e)},pause:function(){this.state=t,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(e,t,n,r){var i=1.70158;return n*(e/=r)*e*((i+1)*e-i)+t},BackEaseOut:function(e,t,n,r){var i=1.70158;return n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},BackEaseInOut:function(e,t,n,r){var i=1.70158;return(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},ElasticEaseIn:function(e,t,n,r,i,s){var o=0;return e===0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},ElasticEaseOut:function(e,t,n,r,i,s){var o=0;return e===0?t:(e/=r)==1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},ElasticEaseInOut:function(e,t,n,r,i,s){var o=0;return e===0?t:(e/=r/2)==2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},BounceEaseOut:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn:function(e,t,n,r){return n-Kinetic.Easings.BounceEaseOut(r-e,0,n,r)+t},BounceEaseInOut:function(e,t,n,r){return e<r/2?Kinetic.Easings.BounceEaseIn(e*2,0,n,r)*.5+t:Kinetic.Easings.BounceEaseOut(e*2-r,0,n,r)*.5+n*.5+t},EaseIn:function(e,t,n,r){return n*(e/=r)*e+t},EaseOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},EaseInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},StrongEaseIn:function(e,t,n,r){return n*(e/=r)*e*e*e*e+t},StrongEaseOut:function(e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},StrongEaseInOut:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},Linear:function(e,t,n,r){return n*e/r+t}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(e){var t=Kinetic.DD,n=t.node;if(n){if(!t.isDragging){var r=n.getStage().getPointerPosition(),i=n.dragDistance(),s=Math.max(Math.abs(r.x-t.startPointerPos.x),Math.abs(r.y-t.startPointerPos.y));if(s<i)return}n._setDragPosition(e),t.isDragging||(t.isDragging=!0,n.fire("dragstart",{type:"dragstart",target:n,evt:e},!0)),n.fire("dragmove",{type:"dragmove",target:n,evt:e},!0)}},_endDragBefore:function(e){var t=Kinetic.DD,n=t.node,r,i;n&&(r=n.nodeType,i=n.getLayer(),t.anim.stop(),t.isDragging&&(t.isDragging=!1,Kinetic.listenClickTap=!1,e&&(e.dragEndNode=n)),delete t.node,(i||n).draw())},_endDragAfter:function(e){e=e||{};var t=e.dragEndNode;e&&t&&t.fire("dragend",{type:"dragend",target:t,evt:e},!0)}},Kinetic.Node.prototype.startDrag=function(){var e=Kinetic.DD,t=this.getStage(),n=this.getLayer(),r=t.getPointerPosition(),i=this.getAbsolutePosition();r&&(e.node&&e.node.stopDrag(),e.node=this,e.startPointerPos=r,e.offset.x=r.x-i.x,e.offset.y=r.y-i.y,e.anim.setLayers(n||this.getLayers()),e.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(e){var t=Kinetic.DD,n=this.getStage().getPointerPosition(),r=this.getDragBoundFunc();if(!n)return;var i={x:n.x-t.offset.x,y:n.y-t.offset.y};r!==undefined&&(i=r.call(this,i,e)),this.setAbsolutePosition(i)},Kinetic.Node.prototype.stopDrag=function(){var e=Kinetic.DD,t={};e._endDragBefore(t),e._endDragAfter(t)},Kinetic.Node.prototype.setDraggable=function(e){this._setAttr("draggable",e),this._dragChange()};var e=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var t=Kinetic.DD;t.node&&t.node._id===this._id&&this.stopDrag(),e.call(this)},Kinetic.Node.prototype.isDragging=function(){var e=Kinetic.DD;return e.node&&e.node._id===this._id&&e.isDragging},Kinetic.Node.prototype._listenDrag=function(){var e=this;this._dragCleanup(),this.getClassName()==="Stage"?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(t){Kinetic.DD.node||e.startDrag(t)}):this.on("mousedown.kinetic touchstart.kinetic",function(t){Kinetic.DD.node||e.startDrag(t)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage(),t=Kinetic.DD;e&&t.node&&t.node._id===this._id&&t.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){this.getClassName()==="Stage"?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var t=Kinetic.document.documentElement;t.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),t.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),t.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),t.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(e){this.children=new Kinetic.Collection,Kinetic.Node.call(this,e)},getChildren:function(e){if(!e)return this.children;var t=new Kinetic.Collection;return this.children.each(function(n){e(n)&&t.push(n)}),t},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){var e=Kinetic.Collection.toCollection(this.children),t;for(var n=0;n<e.length;n++)t=e[n],delete t.parent,t.index=0,t.hasChildren()&&t.removeChildren(),t.remove();return e=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){var e=Kinetic.Collection.toCollection(this.children),t;for(var n=0;n<e.length;n++)t=e[n],delete t.parent,t.index=0,t.destroy();return e=null,this.children=new Kinetic.Collection,this},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return}if(e.getParent()){e.moveTo(this);return}var n=this.children;return this._validateAdd(e),e.index=n.length,e.parent=this,n.push(e),this._fire("add",{child:e}),this},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(e){var t=[],n=e.replace(/ /g,"").split(","),r=n.length,i,s,o,u,a,f,l;for(i=0;i<r;i++){o=n[i];if(o.charAt(0)==="#")a=this._getNodeById(o.slice(1)),a&&t.push(a);else if(o.charAt(0)===".")u=this._getNodesByName(o.slice(1)),t=t.concat(u);else{f=this.getChildren(),l=f.length;for(s=0;s<l;s++)t=t.concat(f[s]._get(o))}}return Kinetic.Collection.toCollection(t)},_getNodeById:function(e){var t=Kinetic.ids[e];return t!==undefined&&this.isAncestorOf(t)?t:null},_getNodesByName:function(e){var t=Kinetic.names[e]||[];return this._getDescendants(t)},_get:function(e){var t=Kinetic.Node.prototype._get.call(this,e),n=this.getChildren(),r=n.length;for(var i=0;i<r;i++)t=t.concat(n[i]._get(e));return t},toObject:function(){var e=Kinetic.Node.prototype.toObject.call(this);e.children=[];var t=this.getChildren(),n=t.length;for(var r=0;r<n;r++){var i=t[r];e.children.push(i.toObject())}return e},_getDescendants:function(e){var t=[],n=e.length;for(var r=0;r<n;r++){var i=e[r];this.isAncestorOf(i)&&t.push(i)}return t},isAncestorOf:function(e){var t=e.getParent();while(t){if(t._id===this._id)return!0;t=t.getParent()}return!1},clone:function(e){var t=Kinetic.Node.prototype.clone.call(this,e);return this.getChildren().each(function(e){t.add(e.clone())}),t},getAllIntersections:function(e){var t=[];return this.find("Shape").each(function(n){n.isVisible()&&n.intersects(e)&&t.push(n)}),t},_setChildrenIndices:function(){this.children.each(function(e,t){e.index=t})},drawScene:function(e,t){var n=this.getLayer(),r=e||n&&n.getCanvas(),i=r&&r.getContext(),s=this._cache.canvas,o=s&&s.scene;return this.isVisible()&&(o?this._drawCachedSceneCanvas(i):this._drawChildren(r,"drawScene",t)),this},drawHit:function(e,t){var n=this.getLayer(),r=e||n&&n.hitCanvas,i=r&&r.getContext(),s=this._cache.canvas,o=s&&s.hit;return this.shouldDrawHit()&&(o?this._drawCachedHitCanvas(i):this._drawChildren(r,"drawHit",t)),this},_drawChildren:function(e,t,n){var r=this.getLayer(),i=e&&e.getContext(),s=this.getClipWidth(),o=this.getClipHeight(),u=s&&o,a,f;u&&r&&(a=this.getClipX(),f=this.getClipY(),i.save(),r._applyTransform(this,i),i.beginPath(),i.rect(a,f,s,o),i.clip(),i.reset()),this.children.each(function(r){r[t](e,n)}),u&&i.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function t(e){e.fill()}function n(e){e.stroke()}function r(e){e.fill()}function i(e){e.stroke()}function s(){this._clearCache(e)}var e="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(e){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=n,this._fillFuncHit=r,this._strokeFuncHit=i;var o=Kinetic.shapes,u;for(;;){u=Kinetic.Util.getRandomColor();if(u&&!(u in o))break}this.colorKey=u,o[u]=this,Kinetic.Node.call(this,e),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",s)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(e,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&this.getShadowOpacity()!==0&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(e){return this.className===e||this.nodeType===e?[this]:[]},intersects:function(e){var t=this.getStage(),n=t.bufferHitCanvas,r;return n.getContext().clear(),this.drawScene(n),r=n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,r[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||this.getAbsoluteOpacity()!==1)&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(e,t){var n=this.getLayer(),r=e||n.getCanvas(),i=r.getContext(),s=this._cache.canvas,o=this.sceneFunc(),u=this.hasShadow(),a,f,l;return this.isVisible()&&(s?this._drawCachedSceneCanvas(i):o&&(i.save(),this._useBufferCanvas()?(a=this.getStage(),f=a.bufferCanvas,l=f.getContext(),l.clear(),l.save(),l._applyLineJoin(this),n._applyTransform(this,l,t),o.call(this,l),l.restore(),u&&(i.save(),i._applyShadow(this),i.drawImage(f._canvas,0,0),i.restore()),i._applyOpacity(this),i.drawImage(f._canvas,0,0)):(i._applyLineJoin(this),n._applyTransform(this,i,t),u&&(i.save(),i._applyShadow(this),o.call(this,i),i.restore()),i._applyOpacity(this),o.call(this,i)),i.restore())),this},drawHit:function(e,t){var n=this.getLayer(),r=e||n.hitCanvas,i=r.getContext(),s=this.hitFunc()||this.sceneFunc(),o=this._cache.canvas,u=o&&o.hit;return this.shouldDrawHit()&&(u?this._drawCachedHitCanvas(i):s&&(i.save(),i._applyLineJoin(this),n._applyTransform(this,i,t),s.call(this,i),i.restore())),this},drawHitFromCache:function(e){var t=e||0,n=this._cache.canvas,r=this._getCachedSceneCanvas(),i=r.getContext(),s=n.hit,o=s.getContext(),u=r.getWidth(),a=r.getHeight(),f,l,c,h,p,d,v,m;o.clear();try{f=i.getImageData(0,0,u,a),l=f.data,c=o.getImageData(0,0,u,a),h=c.data,p=l.length,d=Kinetic.Util._hexToRgb(this.colorKey);for(v=0;v<p;v+=4)m=l[v+3],m>t&&(h[v]=d.r,h[v+1]=d.g,h[v+2]=d.b,h[v+3]=255);o.putImageData(c,0,0)}catch(g){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+g.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function R(e,t){e.content.addEventListener(t,function(n){e[B+t](n)},!1)}var e="Stage",t="string",n="px",r="mouseout",i="mouseleave",s="mouseover",o="mouseenter",u="mousemove",a="mousedown",f="mouseup",l="click",c="dblclick",h="touchstart",p="touchend",d="tap",v="dbltap",m="touchmove",g="contentMouseout",y="contentMouseleave",b="contentMouseover",w="contentMouseenter",E="contentMousemove",S="contentMousedown",x="contentMouseup",T="contentClick",N="contentDblclick",C="contentTouchstart",k="contentTouchend",L="contentTap",A="contentDbltap",O="contentTouchmove",M="div",_="relative",D="inline-block",P="kineticjs-content",H=" ",B="_",j="container",F="",I=[a,u,f,r,h,m,p,s],q=I.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType=e,Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(e){e.getType()!=="Layer"&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(e){if(typeof e===t){var n=e;e=Kinetic.document.getElementById(e);if(!e)throw"Can not find container in document with id "+n}return this._setAttr(j,e),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(e){return Kinetic.Node.prototype.setHeight.call(this,e),this._resizeDOM(),this},setWidth:function(e){return Kinetic.Node.prototype.setWidth.call(this,e),this._resizeDOM(),this},clear:function(){var e=this.children,t=e.length,n;for(n=0;n<t;n++)e[n].clear();return this},clone:function(e){return e||(e={}),e.container=Kinetic.document.createElement(M),Kinetic.Container.prototype.clone.call(this,e)},destroy:function(){var e=this.content;Kinetic.Container.prototype.destroy.call(this),e&&Kinetic.Util._isInDocument(e)&&this.getContainer().removeChild(e);var t=Kinetic.stages.indexOf(this);t>-1&&Kinetic.stages.splice(t,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(e){function a(r){var i=u[r],f=i.toDataURL(),l=new Kinetic.window.Image;l.onload=function(){o.drawImage(l,0,0),r<u.length-1?a(r+1):e.callback(s.toDataURL(t,n))},l.src=f}e=e||{};var t=e.mimeType||null,n=e.quality||null,r=e.x||0,i=e.y||0,s=new Kinetic.SceneCanvas({width:e.width||this.getWidth(),height:e.height||this.getHeight(),pixelRatio:1}),o=s.getContext()._context,u=this.children;(r||i)&&o.translate(-1*r,-1*i),a(0)},toImage:function(e){var t=e.callback;e.callback=function(e){Kinetic.Util._getImage(e,function(e){t(e)})},this.toDataURL(e)},getIntersection:function(e){var t=this.getChildren(),n=t.length,r=n-1,i,s;for(i=r;i>=0;i--){s=t[i].getIntersection(e);if(s)return s}return null},_resizeDOM:function(){if(this.content){var e=this.getWidth(),t=this.getHeight(),r=this.getChildren(),i=r.length,s,o;this.content.style.width=e+n,this.content.style.height=t+n,this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t);for(s=0;s<i;s++)o=r[s],o.getCanvas().setSize(e,t),o.hitCanvas.setSize(e,t),o.draw()}},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return}return Kinetic.Container.prototype.add.call(this,e),e._setCanvasSize(this.width(),this.height()),e.draw(),this.content.appendChild(e.canvas._canvas),this},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var e=0;e<q;e++)R(this,I[e])},_mouseover:function(e){Kinetic.UA.mobile||(this._setPointerPosition(e),this._fire(b,{evt:e}))},_mouseout:function(e){if(!Kinetic.UA.mobile){this._setPointerPosition(e);var t=this.targetShape;t&&!Kinetic.isDragging()&&(t._fireAndBubble(r,{evt:e}),t._fireAndBubble(i,{evt:e}),this.targetShape=null),this.pointerPos=undefined,this._fire(g,{evt:e})}},_mousemove:function(e){if(!Kinetic.UA.mobile){this._setPointerPosition(e);var t=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?!Kinetic.isDragging()&&(!this.targetShape||this.targetShape._id!==n._id)?(this.targetShape&&(this.targetShape._fireAndBubble(r,{evt:e},n),this.targetShape._fireAndBubble(i,{evt:e},n)),n._fireAndBubble(s,{evt:e},this.targetShape),n._fireAndBubble(o,{evt:e},this.targetShape),this.targetShape=n):n._fireAndBubble(u,{evt:e}):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(r,{evt:e}),this.targetShape._fireAndBubble(i,{evt:e}),this.targetShape=null),this._fire(E,{evt:e}),t&&t._drag(e)}e.preventDefault&&e.preventDefault()},_mousedown:function(e){if(!Kinetic.UA.mobile){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,t&&t.isListening()&&(this.clickStartShape=t,t._fireAndBubble(a,{evt:e})),this._fire(S,{evt:e})}e.preventDefault&&e.preventDefault()},_mouseup:function(e){if(!Kinetic.UA.mobile){this._setPointerPosition(e);var t=this,n=this.getIntersection(this.getPointerPosition()),r=this.clickStartShape,i=!1;Kinetic.inDblClickWindow?(i=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),n&&n.isListening()&&(n._fireAndBubble(f,{evt:e}),Kinetic.listenClickTap&&r&&r._id===n._id&&(n._fireAndBubble(l,{evt:e}),i&&n._fireAndBubble(c,{evt:e}))),this._fire(x,{evt:e}),Kinetic.listenClickTap&&(this._fire(T,{evt:e}),i&&this._fire(N,{evt:e})),Kinetic.listenClickTap=!1}e.preventDefault&&e.preventDefault()},_touchstart:function(e){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,t&&t.isListening()&&(this.tapStartShape=t,t._fireAndBubble(h,{evt:e}),t.isListening()&&e.preventDefault&&e.preventDefault()),this._fire(C,{evt:e})},_touchend:function(e){this._setPointerPosition(e);var t=this.getIntersection(this.getPointerPosition()),n=!1;Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),t&&t.isListening()&&(t._fireAndBubble(p,{evt:e}),Kinetic.listenClickTap&&t._id===this.tapStartShape._id&&(t._fireAndBubble(d,{evt:e}),n&&t._fireAndBubble(v,{evt:e})),t.isListening()&&e.preventDefault&&e.preventDefault()),Kinetic.listenClickTap&&(this._fire(k,{evt:e}),n&&this._fire(A,{evt:e})),Kinetic.listenClickTap=!1},_touchmove:function(e){this._setPointerPosition(e);var t=Kinetic.DD,n=this.getIntersection(this.getPointerPosition());n&&n.isListening()&&(n._fireAndBubble(m,{evt:e}),n.isListening()&&e.preventDefault&&e.preventDefault()),this._fire(O,{evt:e}),t&&t._drag(e)},_setPointerPosition:function(e){var t=this._getContentPosition(),n=e.offsetX,r=e.clientX,i=null,s=null,o;e=e?e:window.event,e.touches!==undefined?e.touches.length>0&&(o=e.touches[0],i=o.clientX-t.left,s=o.clientY-t.top):n!==undefined?(i=n,s=e.offsetY):Kinetic.UA.browser==="mozilla"?(i=e.layerX,s=e.layerY):r!==undefined&&t&&(i=r-t.left,s=e.clientY-t.top),i!==null&&s!==null&&(this.pointerPos={x:i,y:s})},_getContentPosition:function(){var e=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:e.top,left:e.left}},_buildDOM:function(){var e=this.getContainer();if(!e){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";e=Kinetic.document.createElement(M)}e.innerHTML=F,this.content=Kinetic.document.createElement(M),this.content.style.position=_,this.content.style.display=D,this.content.className=P,this.content.setAttribute("role","presentation"),e.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(e,t){var n=e.split(H),r=n.length,i,s;for(i=0;i<r;i++)s=n[i],this.content.addEventListener(s,t,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.");return},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(e){this.nodeType="Layer",Kinetic.Container.call(this,e)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this},setZIndex:function(e){Kinetic.Node.prototype.setZIndex.call(this,e);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),e<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[e+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var e=this.getStage();e&&(e.content.removeChild(this.getCanvas()._canvas),e.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var e=this.getStage();e&&(e.content.removeChild(this.getCanvas()._canvas),this.index<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var e=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),e&&e.parentNode&&Kinetic.Util._isInDocument(e)&&e.parentNode.removeChild(e),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var e="#",t="beforeDraw",n="draw",r=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],i=r.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(e){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,e)},_setCanvasSize:function(e,t){this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t)},_validateAdd:function(e){var t=e.getType();t!=="Group"&&t!=="Shape"&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(e){var t,n,s,o;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(n=0;n<i;n++){s=r[n],t=this._getIntersection({x:e.x+s.x,y:e.y+s.y}),o=t.shape;if(o)return o;if(!t.antialiased)return null}},_getIntersection:function(t){var n=this.hitCanvas.context._context.getImageData(t.x,t.y,1,1).data,r=n[3],i,s;return r===255?(i=Kinetic.Util._rgbToHex(n[0],n[1],n[2]),s=Kinetic.shapes[e+i],{shape:s}):r>0?{antialiased:!0}:{}},drawScene:function(e,r){var i=this.getLayer(),s=e||i&&i.getCanvas();return this._fire(t,{node:this}),this.getClearBeforeDraw()&&s.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,s,r),this._fire(n,{node:this}),this},_applyTransform:function(e,t,n){var r=e.getAbsoluteTransform(n).getMatrix();t.transform(r[0],r[1],r[2],r[3],r[4],r[5])},drawHit:function(e,t){var n=this.getLayer(),r=e||n&&n.hitCanvas;return n&&n.getClearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,r,t),this},clear:function(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this},setVisible:function(e){return Kinetic.Node.prototype.setVisible.call(this,e),e?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){var e="#",t="beforeDraw",n="draw";Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(e){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,e)},_validateAdd:function(e){var t=e.getType();t!=="Shape"&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(e,t){this.canvas.setSize(e,t)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(e){var t=this.getLayer(),n=e||t&&t.getCanvas();return this.getClearBeforeDraw()&&n.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,n),this},_applyTransform:function(e,t,n){if(!n||n._id!==this._id){var r=e.getTransform().getMatrix();t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}},draw:function(){return this.drawScene(),this},clear:function(e){return this.getContext().clear(e),this},setVisible:function(e){return Kinetic.Node.prototype.setVisible.call(this,e),e?this.getCanvas()._canvas.style.display="block":this.getCanvas()._canvas.style.display="none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(e){this.nodeType="Group",Kinetic.Container.call(this,e)},_validateAdd:function(e){var t=e.getType();t!=="Group"&&t!=="Shape"&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(e){this.___init(e)},Kinetic.Rect.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.getCornerRadius(),n=this.getWidth(),r=this.getHeight();e.beginPath(),t?(e.moveTo(t,0),e.lineTo(n-t,0),e.arc(n-t,t,t,Math.PI*3/2,0,!1),e.lineTo(n,r-t),e.arc(n-t,r-t,t,0,Math.PI/2,!1),e.lineTo(t,r),e.arc(t,r-t,t,Math.PI/2,Math.PI,!1),e.lineTo(0,t),e.arc(t,t,t,Math.PI,Math.PI*3/2,!1)):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var e=Math.PI*2-1e-4,t="Circle";Kinetic.Circle=function(e){this.___init(e)},Kinetic.Circle.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,e,!1),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return this.getRadius()*2},getHeight:function(){return this.getRadius()*2},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setRadius(e/2)},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setRadius(e/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var e=Math.PI*2-1e-4,t="Ellipse";Kinetic.Ellipse=function(e){this.___init(e)},Kinetic.Ellipse.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var n=this.getRadius(),r=n.x,i=n.y;t.beginPath(),t.save(),r!==i&&t.scale(1,i/r),t.arc(0,0,r,0,e,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return this.getRadius().x*2},getHeight:function(){return this.getRadius().y*2},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setRadius({x:e/2})},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setRadius({y:e/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var e=Math.PI*2-1e-4;Kinetic.Ring=function(e){this.___init(e)},Kinetic.Ring.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getInnerRadius(),0,e,!1),t.moveTo(this.getOuterRadius(),0),t.arc(0,0,this.getOuterRadius(),e,0,!0),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){return this.getOuterRadius()*2},getHeight:function(){return this.getOuterRadius()*2},setWidth:function(e){Kinetic.Node.prototype.setWidth.call(this,e),this.setOuterRadius(e/2)},setHeight:function(e){Kinetic.Node.prototype.setHeight.call(this,e),this.setOuterRadius(e/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(e){this.___init(e)},Kinetic.Wedge.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){var e=Math.PI/180;Kinetic.Arc=function(e){this.___init(e)},Kinetic.Arc.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=Kinetic.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.getOuterRadius(),0,t,n),e.arc(0,0,this.getInnerRadius(),t,0,!n),e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var e="Image";Kinetic.Image=function(e){this.___init(e)},Kinetic.Image.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||this.getAbsoluteOpacity()!==1)&&this.hasStroke()},_sceneFunc:function(e){var t=this.getWidth(),n=this.getHeight(),r=this.getImage(),i,s,o,u;r&&(i=this.getCrop(),s=i.width,o=i.height,s&&o?u=[r,i.x,i.y,s,o,0,0,t,n]:u=[r,0,0,t,n]),e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this),r&&e.drawImage.apply(e,u)},_hitFunc:function(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){var e=this.getImage();return this.attrs.width||(e?e.width:0)},getHeight:function(){var e=this.getImage();return this.attrs.height||(e?e.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function w(e){e.fillText(this.partialText,0,0)}function E(e){e.strokeText(this.partialText,0,0)}var e="auto",t="center",n="Change.kinetic",r="2d",i="-",s="",o="left",u="text",a="Text",f="middle",l="normal",c="px ",h=" ",p="right",d="word",v="char",m="none",g=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],y=g.length,b=Kinetic.Util.createCanvasElement().getContext(r);Kinetic.Text=function(e){this.___init(e)},Kinetic.Text.prototype={___init:function(t){var r=this;t.width===undefined&&(t.width=e),t.height===undefined&&(t.height=e),Kinetic.Shape.call(this,t),this._fillFunc=w,this._strokeFunc=E,this.className=a;for(var i=0;i<y;i++)this.on(g[i]+n,r._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(e){var n=this.getPadding(),r=this.getTextHeight(),i=this.getLineHeight()*r,s=this.textArr,u=s.length,a=this.getWidth(),l;e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",f),e.setAttr("textAlign",o),e.save(),e.translate(n,0),e.translate(0,n+r/2);for(l=0;l<u;l++){var c=s[l],h=c.text,d=c.width;e.save(),this.getAlign()===p?e.translate(a-d-n*2,0):this.getAlign()===t&&e.translate((a-d-n*2)/2,0),this.partialText=h,e.fillStrokeShape(this),e.restore(),e.translate(0,i)}e.restore()},_hitFunc:function(e){var t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)},setText:function(e){var t=Kinetic.Util._isString(e)?e:e.toString();return this._setAttr(u,t),this},getWidth:function(){return this.attrs.width===e?this.getTextWidth()+this.getPadding()*2:this.attrs.width},getHeight:function(){return this.attrs.height===e?this.getTextHeight()*this.textArr.length*this.getLineHeight()+this.getPadding()*2:this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(e){var t=b,n=this.getFontSize(),r;return t.save(),t.font=this._getContextFont(),r=t.measureText(e),t.restore(),{width:r.width,height:parseInt(n,10)}},_getContextFont:function(){return this.getFontStyle()+h+this.getFontVariant()+h+this.getFontSize()+c+this.getFontFamily()},_addTextLine:function(e,t){return this.textArr.push({text:e,width:t})},_getTextWidth:function(e){return b.measureText(e).width},_setTextData:function(){var t=this.getText().split("\n"),n=+this.getFontSize(),r=0,s=this.getLineHeight()*n,o=this.attrs.width,u=this.attrs.height,a=o!==e,f=u!==e,l=this.getPadding(),c=o-l*2,p=u-l*2,d=0,g=this.getWrap(),y=g!==m,w=g!==v&&y;this.textArr=[],b.save(),b.font=this._getContextFont();for(var E=0,S=t.length;E<S;++E){var x=t[E],T=this._getTextWidth(x);if(a&&T>c)while(x.length>0){var N=0,C=x.length,k="",L=0;while(N<C){var A=N+C>>>1,O=x.slice(0,A+1),M=this._getTextWidth(O);M<=c?(N=A+1,k=O,L=M):C=A}if(!k)break;if(w){var _=Math.max(k.lastIndexOf(h),k.lastIndexOf(i))+1;_>0&&(N=_,k=k.slice(0,N),L=this._getTextWidth(k))}this._addTextLine(k,L),r=Math.max(r,L),d+=s;if(!y||f&&d+s>p)break;x=x.slice(N);if(x.length>0){T=this._getTextWidth(x);if(T<=c){this._addTextLine(x,T),d+=s,r=Math.max(r,T);break}}}else this._addTextLine(x,T),d+=s,r=Math.max(r,T);if(f&&d+s>p)break}b.restore(),this.textHeight=n,this.textWidth=r}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",l),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",l),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",o),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",d),Kinetic.Factory.addGetter(Kinetic.Text,"text",s),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(e){this.___init(e)},Kinetic.Line.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.getPoints(),n=t.length,r=this.getTension(),i=this.getClosed(),s,o,u;e.beginPath(),e.moveTo(t[0],t[1]);if(r!==0&&n>4){s=this.getTensionPoints(),o=s.length,u=i?0:4,i||e.quadraticCurveTo(s[0],s[1],s[2],s[3]);while(u<o-2)e.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]);i||e.quadraticCurveTo(s[o-2],s[o-1],t[n-2],t[n-1])}else for(u=2;u<n;u+=2)e.lineTo(t[u],t[u+1]);i?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var e=this.getPoints(),t=e.length,n=this.getTension(),r=Kinetic.Util,i=r._getControlPoints(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),s=r._getControlPoints(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),o=Kinetic.Util._expandPoints(e,n),u=[i[2],i[3]].concat(o).concat([s[0],s[1],e[t-2],e[t-1],s[2],s[3],i[0],i[1],e[0],e[1]]);return u}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(e){this.___init(e)},Kinetic.Sprite.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameRateChange.kinetic",function(){if(!this.anim.isRunning())return;clearInterval(this.interval),this._setInterval()}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(e){var t=this.getAnimation(),n=this.frameIndex(),r=n*4,i=this.getAnimations()[t],s=i[r+0],o=i[r+1],u=i[r+2],a=i[r+3],f=this.getImage();f&&e.drawImage(f,s,o,u,a,0,0,u,a)},_hitFunc:function(e){var t=this.getAnimation(),n=this.frameIndex(),r=n*4,i=this.getAnimations()[t],s=i[r+2],o=i[r+3];e.beginPath(),e.rect(0,0,s,o),e.closePath(),e.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||this.getAbsoluteOpacity()!==1)&&this.hasStroke()},_setInterval:function(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.getFrameRate())},start:function(){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var e=this.frameIndex(),t=this.getAnimation(),n=this.getAnimations(),r=n[t],i=r.length/4;e<i-1?this.frameIndex(e+1):this.frameIndex(0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(e){this.___init(e)},Kinetic.Path.prototype={___init:function(e){this.dataArray=[];var t=this;Kinetic.Shape.call(this,e),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){t.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.dataArray,n=!1;e.beginPath();for(var r=0;r<t.length;r++){var i=t[r].command,s=t[r].points;switch(i){case"L":e.lineTo(s[0],s[1]);break;case"M":e.moveTo(s[0],s[1]);break;case"C":e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var o=s[0],u=s[1],a=s[2],f=s[3],l=s[4],c=s[5],h=s[6],p=s[7],d=a>f?a:f,v=a>f?1:a/f,m=a>f?f/a:1;e.translate(o,u),e.rotate(h),e.scale(v,m),e.arc(0,0,d,l,l+c,1-p),e.scale(1/v,1/m),e.rotate(-h),e.translate(-o,-u);break;case"z":e.closePath(),n=!0}}n?e.fillStrokeShape(this):e.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))},Kinetic.Path.getPointOnLine=function(e,t,n,r,i,s,o){s===undefined&&(s=t),o===undefined&&(o=n);var u=(i-n)/(r-t+1e-8),a=Math.sqrt(e*e/(1+u*u));r<t&&(a*=-1);var f=u*a,l;if(r===t)l={x:s,y:o+f};else if((o-n)/(s-t+1e-8)===u)l={x:s+a,y:o+f};else{var c,h,p=this.getLineLength(t,n,r,i);if(p<1e-8)return undefined;var d=(s-t)*(r-t)+(o-n)*(i-n);d/=p*p,c=t+d*(r-t),h=n+d*(i-n);var v=this.getLineLength(s,o,c,h),m=Math.sqrt(e*e-v*v);a=Math.sqrt(m*m/(1+u*u)),r<t&&(a*=-1),f=u*a,l={x:c+a,y:h+f}}return l},Kinetic.Path.getPointOnCubicBezier=function(e,t,n,r,i,s,o,u,a){function f(e){return e*e*e}function l(e){return 3*e*e*(1-e)}function c(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}var p=u*f(e)+s*l(e)+r*c(e)+t*h(e),d=a*f(e)+o*l(e)+i*c(e)+n*h(e);return{x:p,y:d}},Kinetic.Path.getPointOnQuadraticBezier=function(e,t,n,r,i,s,o){function u(e){return e*e}function a(e){return 2*e*(1-e)}function f(e){return(1-e)*(1-e)}var l=s*u(e)+r*a(e)+t*f(e),c=o*u(e)+i*a(e)+n*f(e);return{x:l,y:c}},Kinetic.Path.getPointOnEllipticalArc=function(e,t,n,r,i,s){var o=Math.cos(s),u=Math.sin(s),a={x:n*Math.cos(i),y:r*Math.sin(i)};return{x:e+(a.x*o-a.y*u),y:t+(a.x*u+a.y*o)}},Kinetic.Path.parsePathData=function(e){if(!e)return[];var t=e,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var r=0;r<n.length;r++)t=t.replace(new RegExp(n[r],"g"),"|"+n[r]);var i=t.split("|"),s=[],o=0,u=0;for(r=1;r<i.length;r++){var a=i[r],f=a.charAt(0);a=a.slice(1),a=a.replace(new RegExp(",-","g"),"-"),a=a.replace(new RegExp("-","g"),",-"),a=a.replace(new RegExp("e,-","g"),"e-");var l=a.split(",");l.length>0&&l[0]===""&&l.shift();for(var c=0;c<l.length;c++)l[c]=parseFloat(l[c]);while(l.length>0){if(isNaN(l[0]))break;var h=null,p=[],d=o,v=u,m,g,y,b,w,E,S,x,T,N;switch(f){case"l":o+=l.shift(),u+=l.shift(),h="L",p.push(o,u);break;case"L":o=l.shift(),u=l.shift(),p.push(o,u);break;case"m":var C=l.shift(),k=l.shift();o+=C,u+=k,h="M";if(s.length>2&&s[s.length-1].command==="z")for(var L=s.length-2;L>=0;L--)if(s[L].command==="M"){o=s[L].points[0]+C,u=s[L].points[1]+k;break}p.push(o,u),f="l";break;case"M":o=l.shift(),u=l.shift(),h="M",p.push(o,u),f="L";break;case"h":o+=l.shift(),h="L",p.push(o,u);break;case"H":o=l.shift(),h="L",p.push(o,u);break;case"v":u+=l.shift(),h="L",p.push(o,u);break;case"V":u=l.shift(),h="L",p.push(o,u);break;case"C":p.push(l.shift(),l.shift(),l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"c":p.push(o+l.shift(),u+l.shift(),o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"S":g=o,y=u,m=s[s.length-1],m.command==="C"&&(g=o+(o-m.points[2]),y=u+(u-m.points[3])),p.push(g,y,l.shift(),l.shift()),o=l.shift(),u=l.shift(),h="C",p.push(o,u);break;case"s":g=o,y=u,m=s[s.length-1],m.command==="C"&&(g=o+(o-m.points[2]),y=u+(u-m.points[3])),p.push(g,y,o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="C",p.push(o,u);break;case"Q":p.push(l.shift(),l.shift()),o=l.shift(),u=l.shift(),p.push(o,u);break;case"q":p.push(o+l.shift(),u+l.shift()),o+=l.shift(),u+=l.shift(),h="Q",p.push(o,u);break;case"T":g=o,y=u,m=s[s.length-1],m.command==="Q"&&(g=o+(o-m.points[0]),y=u+(u-m.points[1])),o=l.shift(),u=l.shift(),h="Q",p.push(g,y,o,u);break;case"t":g=o,y=u,m=s[s.length-1],m.command==="Q"&&(g=o+(o-m.points[0]),y=u+(u-m.points[1])),o+=l.shift(),u+=l.shift(),h="Q",p.push(g,y,o,u);break;case"A":b=l.shift(),w=l.shift(),E=l.shift(),S=l.shift(),x=l.shift(),T=o,N=u,o=l.shift(),u=l.shift(),h="A",p=this.convertEndpointToCenterParameterization(T,N,o,u,S,x,b,w,E);break;case"a":b=l.shift(),w=l.shift(),E=l.shift(),S=l.shift(),x=l.shift(),T=o,N=u,o+=l.shift(),u+=l.shift(),h="A",p=this.convertEndpointToCenterParameterization(T,N,o,u,S,x,b,w,E)}s.push({command:h||f,points:p,start:{x:d,y:v},pathLength:this.calcLength(d,v,h||f,p)})}(f==="z"||f==="Z")&&s.push({command:"z",points:[],start:undefined,pathLength:0})}return s},Kinetic.Path.calcLength=function(e,t,n,r){var i,s,o,u,a=Kinetic.Path;switch(n){case"L":return a.getLineLength(e,t,r[0],r[1]);case"C":i=0,s=a.getPointOnCubicBezier(0,e,t,r[0],r[1],r[2],r[3],r[4],r[5]);for(u=.01;u<=1;u+=.01)o=a.getPointOnCubicBezier(u,e,t,r[0],r[1],r[2],r[3],r[4],r[5]),i+=a.getLineLength(s.x,s.y,o.x,o.y),s=o;return i;case"Q":i=0,s=a.getPointOnQuadraticBezier(0,e,t,r[0],r[1],r[2],r[3]);for(u=.01;u<=1;u+=.01)o=a.getPointOnQuadraticBezier(u,e,t,r[0],r[1],r[2],r[3]),i+=a.getLineLength(s.x,s.y,o.x,o.y),s=o;return i;case"A":i=0;var f=r[4],l=r[5],c=r[4]+l,h=Math.PI/180;Math.abs(f-c)<h&&(h=Math.abs(f-c)),s=a.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],f,0);if(l<0)for(u=f-h;u>c;u-=h)o=a.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),i+=a.getLineLength(s.x,s.y,o.x,o.y),s=o;else for(u=f+h;u<c;u+=h)o=a.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),i+=a.getLineLength(s.x,s.y,o.x,o.y),s=o;return o=a.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],c,0),i+=a.getLineLength(s.x,s.y,o.x,o.y),i}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(e,t,n,r,i,s,o,u,a){var f=a*(Math.PI/180),l=Math.cos(f)*(e-n)/2+Math.sin(f)*(t-r)/2,c=-1*Math.sin(f)*(e-n)/2+Math.cos(f)*(t-r)/2,h=l*l/(o*o)+c*c/(u*u);h>1&&(o*=Math.sqrt(h),u*=Math.sqrt(h));var p=Math.sqrt((o*o*u*u-o*o*c*c-u*u*l*l)/(o*o*c*c+u*u*l*l));i===s&&(p*=-1),isNaN(p)&&(p=0);var d=p*o*c/u,v=p*-u*l/o,m=(e+n)/2+Math.cos(f)*d-Math.sin(f)*v,g=(t+r)/2+Math.sin(f)*d+Math.cos(f)*v,y=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},b=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(y(e)*y(t))},w=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(b(e,t))},E=w([1,0],[(l-d)/o,(c-v)/u]),S=[(l-d)/o,(c-v)/u],x=[(-1*l-d)/o,(-1*c-v)/u],T=w(S,x);return b(S,x)<=-1&&(T=Math.PI),b(S,x)>=1&&(T=0),s===0&&T>0&&(T-=2*Math.PI),s===1&&T<0&&(T+=2*Math.PI),[m,g,o,u,E,T,f,s]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function n(e){e.fillText(this.partialText,0,0)}function r(e){e.strokeText(this.partialText,0,0)}var e="",t="normal";Kinetic.TextPath=function(e){this.___init(e)},Kinetic.TextPath.prototype={___init:function(e){var t=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,e),this._fillFunc=n,this._strokeFunc=r,this._fillFuncHit=n,this._strokeFuncHit=r,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){t.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",t._setTextData),t._setTextData(),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline","middle"),e.setAttr("textAlign","left"),e.save();var t=this.glyphInfo;for(var n=0;n<t.length;n++){e.save();var r=t[n].p0;e.translate(r.x,r.y),e.rotate(t[n].rotation),this.partialText=t[n].text,e.fillStrokeShape(this),e.restore()}e.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(e){Kinetic.Text.prototype.setText.call(this,e)},_getTextSize:function(e){var t=this.dummyCanvas,n=t.getContext("2d");n.save(),n.font=this._getContextFont();var r=n.measureText(e);return n.restore(),{width:r.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var e=this,t=this._getTextSize(this.attrs.text);this.textWidth=t.width,this.textHeight=t.height,this.glyphInfo=[];var n=this.attrs.text.split(""),r,i,s,o=-1,u=0,a=function(){u=0;var t=e.dataArray;for(var n=o+1;n<t.length;n++){if(t[n].pathLength>0)return o=n,t[n];t[n].command=="M"&&(r={x:t[n].points[0],y:t[n].points[1]})}return{}},f=function(t){var n=e._getTextSize(t).width,o=0,f=0;i=undefined;while(Math.abs(n-o)/n>.01&&f<25){f++;var l=o;while(s===undefined)s=a(),s&&l+s.pathLength<n&&(l+=s.pathLength,s=undefined);if(s==={}||r===undefined)return undefined;var c=!1;switch(s.command){case"L":Kinetic.Path.getLineLength(r.x,r.y,s.points[0],s.points[1])>n?i=Kinetic.Path.getPointOnLine(n,r.x,r.y,s.points[0],s.points[1],r.x,r.y):s=undefined;break;case"A":var h=s.points[4],p=s.points[5],d=s.points[4]+p;u===0?u=h+1e-8:n>o?u+=Math.PI/180*p/Math.abs(p):u-=Math.PI/360*p/Math.abs(p);if(p<0&&u<d||p>=0&&u>d)u=d,c=!0;i=Kinetic.Path.getPointOnEllipticalArc(s.points[0],s.points[1],s.points[2],s.points[3],u,s.points[6]);break;case"C":u===0?n>s.pathLength?u=1e-8:u=n/s.pathLength:n>o?u+=(n-o)/s.pathLength:u-=(o-n)/s.pathLength,u>1&&(u=1,c=!0),i=Kinetic.Path.getPointOnCubicBezier(u,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3],s.points[4],s.points[5]);break;case"Q":u===0?u=n/s.pathLength:n>o?u+=(n-o)/s.pathLength:u-=(o-n)/s.pathLength,u>1&&(u=1,c=!0),i=Kinetic.Path.getPointOnQuadraticBezier(u,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3])}i!==undefined&&(o=Kinetic.Path.getLineLength(r.x,r.y,i.x,i.y)),c&&(c=!1,s=undefined)}};for(var l=0;l<n.length;l++){f(n[l]);if(r===undefined||i===undefined)break;var c=Kinetic.Path.getLineLength(r.x,r.y,i.x,i.y),h=0,p=Kinetic.Path.getPointOnLine(h+c/2,r.x,r.y,i.x,i.y),d=Math.atan2(i.y-r.y,i.x-r.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:n[l],rotation:d,p0:r,p1:i}),r=i}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",t),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant",t),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",e),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(e){this.___init(e)},Kinetic.RegularPolygon.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.attrs.sides,n=this.attrs.radius,r,i,s;e.beginPath(),e.moveTo(0,0-n);for(r=1;r<t;r++)i=n*Math.sin(r*2*Math.PI/t),s=-1*n*Math.cos(r*2*Math.PI/t),e.lineTo(i,s);e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(e){this.___init(e)},Kinetic.Star.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.innerRadius(),n=this.outerRadius(),r=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(var i=1;i<r*2;i++){var s=i%2===0?n:t,o=s*Math.sin(i*Math.PI/r),u=-1*s*Math.cos(i*Math.PI/r);e.lineTo(o,u)}e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var e=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],t="Change.kinetic",n="none",r="up",i="right",s="down",o="left",u="Label",a=e.length;Kinetic.Label=function(e){this.____init(e)},Kinetic.Label.prototype={____init:function(e){var t=this;this.className=u,Kinetic.Group.call(this,e),this.on("add.kinetic",function(e){t._addListeners(e.child),t._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(n){var r=this,i,s=function(){r._sync()};for(i=0;i<a;i++)n.on(e[i]+t,s)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var e=this.getText(),t=this.getTag(),n,u,a,f,l,c,h;if(e&&t){n=e.getWidth(),u=e.getHeight(),a=t.getPointerDirection(),f=t.getPointerWidth(),h=t.getPointerHeight(),l=0,c=0;switch(a){case r:l=n/2,c=-1*h;break;case i:l=n+f,c=u/2;break;case s:l=n/2,c=u+h;break;case o:l=-1*f,c=u/2}t.setAttrs({x:-1*l,y:-1*c,width:n,height:u}),e.setAttrs({x:-1*l,y:-1*c})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(e){this.___init(e)},Kinetic.Tag.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var t=this.getWidth(),n=this.getHeight(),u=this.getPointerDirection(),a=this.getPointerWidth(),f=this.getPointerHeight();e.beginPath(),e.moveTo(0,0),u===r&&(e.lineTo((t-a)/2,0),e.lineTo(t/2,-1*f),e.lineTo((t+a)/2,0)),e.lineTo(t,0),u===i&&(e.lineTo(t,(n-f)/2),e.lineTo(t+a,n/2),e.lineTo(t,(n+f)/2)),e.lineTo(t,n),u===s&&(e.lineTo((t+a)/2,n),e.lineTo(t/2,n+f),e.lineTo((t-a)/2,n)),e.lineTo(0,n),u===o&&(e.lineTo(0,(n+f)/2),e.lineTo(-1*a,n/2),e.lineTo(0,(n-f)/2)),e.closePath(),e.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",n),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}();require.define("/entry.js",function(e,t,n,r,i){e("/views/RootView"),window.app=app=new App.RootView,enyo.ready(function(){app.renderInto("main")})});require.define("/views/Data.js",function(e,t,n,r,i){SettingsModel=Backbone.Model.extend({defaults:{softversion:"1.3.0",softname:"Kineticjs animation demo",softdescripiton:"",softdev:"Rain Fu",softweb:"http://www.cejia.com",softdevweibo:"http://weibo.com/rainfuling",debug:!1,isFirst:!0,isBgSound:!1,isSoundEffect:!0,messageSound:!0,animate:"animation",timeDiff:20}}),SettingsCollection=Backbone.Collection.extend({model:SettingsModel,localStorage:new Backbone.LocalStorage("KAD_Settings")}),UserModel=Backbone.Model.extend({idAttribute:"uid",defaults:{online:!1,uid:"current"}}),UserCollection=Backbone.Collection.extend({model:UserModel,localStorage:new Backbone.LocalStorage("KAD_Users"),loadDefault:function(){return this.create(new UserModel)}}),BackgroundModel=Backbone.Model.extend({}),ColorThemeModel=Backbone.Model.extend({}),BackgroundCollection=Backbone.Collection.extend({model:BackgroundModel}),ColorThemeCollection=Backbone.Collection.extend({model:ColorThemeModel,localStorage:new Store("ATA_ColorThemes"),load:function(){this.fetch({reset:!0}),this.length||this.reset(this.loadDefault().models)},loadDefault:function(){var e=new ColorThemeCollection;return e.create({color1:"black",color2:"red",color3:"blue",borderColor:"white",borderWidth:"2"}),e.create({color1:"blue",color2:"yellow",color3:"black",borderColor:"white",borderWidth:"2"}),e.create({color1:"green",color2:"orange",color3:"black",borderColor:"white",borderWidth:"2"}),e.create({color1:"pink",color2:"gray",color3:"black",borderColor:"yellow",borderWidth:"1"}),e.create({color1:"darkred",color2:"darkblue",color3:"black",borderColor:"pink",borderWidth:"1"}),e}}),GameModel=Backbone.Model.extend({defaults:{score:0,level:1,speed:0,maxSpeed:3,maxLevel:5,isFinished:!1,bgType:"random",bgSubType:"random",colorTheme:"random"}}),GameCollection=Backbone.Collection.extend({model:GameModel,localStorage:new Store("KAD_Games"),load:function(){this.fetch({reset:!0}),this.reset(this.loadDefault().models)},loadDefault:function(){var e=new GameCollection;return e.create({id:"rotationDigital",name:"Rotation digital",description:"Clicking the rotation numbers order by small to large",tag:"Visual discrimination",start:0,end:4,isOpen:1,time:30}),e}}),ImageModel=Backbone.Model.extend({}),ImageCollection=Backbone.Collection.extend({model:ImageModel}),BgModel=Backbone.Model.extend({}),BgCollection=Backbone.Collection.extend({model:BgModel})});require.define("/views/RootView.js",function(e,t,n,r,i){e("/views/Data"),e("/views/main/MenuView"),e("/views/main/GameView"),e("/views/settings/SettingsPopupView"),enyo.kind({name:"App.RootView",classes:"onyx enyo-fit enyo-unselectable appView",kind:"ciiat.RootPanel",draggable:!1,hasGuide:!1,pushState:!1,usePushState:!1,snsLogin:!1,router:new Backbone.Router,arrangerKind:"CardSlideInArranger",create:function(){this.inherited(arguments),this.setPushState(!1)},rendered:function(){this.inherited(arguments)},published:{bgMedia:null},components:[{name:"mainView",route:"main",kind:"FittableRows",components:[{fit:!0,kind:"ciiat.RoutePanels",draggable:!1,arrangerKind:"CardSlideInArranger",components:[{name:"menuView",route:"main/menu",kind:"MainView.MenuView"},{name:"gameView",route:"main/game/:name",kind:"MainView.GameView"},{name:"others",components:[{name:"spinnerPopup",classes:"onyx-dark",kind:"onyx.Popup",centered:!0,floating:!0,scrim:!0,autoDismiss:!0,components:[{kind:"onyx.Spinner"}]},{kind:"Audio",name:"clickSound"},{kind:"Audio",name:"bgSound",loop:!0},{kind:"Audio",name:"successSound"},{kind:"Audio",name:"wrongSound"},{kind:"Audio",name:"victorySound"},{kind:"Audio",name:"sclickSound"}]}]}]}],initSettings:function(){var e=new SettingsCollection;e.fetch();if(!e.length){var t=new SettingsModel;e.create(t)}this.settings=e.at(0),this.applySettings()},initData:function(){this.colorThemeCollection=new ColorThemeCollection,this.gameCollection=new GameCollection,this.imageCollection=new ImageCollection,this.initImages()},applySettings:function(){var e=this.settings.get("softversion");this.settings.save({softversion:"1.4.1",debug:!1}),this.settings.set({todayScore:0,todayTime:0})},applyUser:function(){},applyData:function(){app.gameCollection.load(),app.colorThemeCollection.load(),app.loadImages()},loadImages:function(e){var t=0;app.imageCollection.each(function(e){var n=new Image;n.onload=function(){e.image=n,++t>=app.imageCollection.length&&console.log("load image ok")},n.src=app.getRoot()+"kad/"+e.get("tag")+"/"+e.get("name")+".png"})},initImages:function(){},start:function(){var e=this;app.router.navigate("main/menu",{trigger:!0})},showSpinner:function(){this.$.spinnerPopup.show()},hideSpinner:function(){this.$.spinnerPopup.hide()},playAudio:function(e){if(e=="bg"){if(app.settings.get("isBgSound")){var t=ciiat.Utils.playAudio(this.$.bgSound,app.getRoot()+"kad/audios/gamebg.mp3","/android_asset/www/kad/audios/gamebg.mp3");app.setBgMedia(t)}}else app.settings.get("isSoundEffect")&&(e=="click"?ciiat.Utils.playAudio(this.$.clickSound,app.getRoot()+"kad/audios/click.mp3","/android_asset/www/kad/audios/click.mp3"):e=="success"?ciiat.Utils.playAudio(this.$.successSound,app.getRoot()+"kad/audios/success.mp3","/android_asset/www/kad/audios/success.mp3"):e=="wrong"?ciiat.Utils.playAudio(this.$.wrongSound,app.getRoot()+"kad/audios/wrong.mp3","/android_asset/www/kad/audios/wrong.mp3"):e=="victory"?ciiat.Utils.playAudio(this.$.victorySound,app.getRoot()+"kad/audios/victory.mp3","/android_asset/www/kad/audios/victory.mp3"):e=="sclick"&&ciiat.Utils.playAudio(this.$.sclickSound,app.getRoot()+"kad/audios/sclick.mp3","/android_asset/www/kad/audios/sclick.mp3"))},stopAudio:function(e){e=="bg"&&ciiat.Utils.stopAudio(this.$.bgSound,app.getRoot()+"kad/audios/gamebg.mp3","/android_asset/www/kad/audios/gamebg.mp3")}})});require.define("/views/main/GameView.js",function(e,t,n,r,i){enyo.kind({name:"MainView.GameView",kind:"FittableRows",classes:"onyx",published:{game:null},components:[{fit:!0,name:"gameMain",classes:"gameMain",id:"gameMain"}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments)},refreshGame:function(t){if(!this.cView){var n=e("/views/main/bb/Treatment");this.cView=new n.Treatment({el:this.$.gameMain}),this.cView.initCanvas(this.$.gameMain.getBounds().width,this.$.gameMain.getBounds().height)}this.cView.setGame(t)},getColorTheme:function(e){return e=="random"?app.colorThemeCollection.shuffle()[0]:app.colorThemeCollection.findWhere({name:e})},afterRoute:function(e){var t=app.gameCollection.findWhere({id:e});this.setGame(t),this.refreshGame(t)}})});require.define("/views/main/MenuView.js",function(e,t,n,r,i){enyo.kind({name:"MainView.MenuView",kind:"FittableRows",classes:"onyx",published:{country:null,hasShowWizard:!1},components:[{fit:!0,name:"btnView",classes:"onyx bntView",kind:"FittableRows",components:[{tag:"br"},{kind:"onyx.Button",name:"btnStart",classes:"onyx-blue mainBtn",content:$L("Grid Animation"),ontap:"grid"},{tag:"br"},{kind:"onyx.Button",classes:"onyx-gray mainBtn",content:$L("Circle Animation"),ontap:"circle"},{tag:"br"},{kind:"onyx.Button",classes:"onyx-affirmative mainBtn",content:$L("Grating Animation"),ontap:"grating"},{tag:"br"},{kind:"onyx.Button",classes:"onyx-light mainBtn",content:$L("Settings"),ontap:"showSettings"},{name:"settingsPopupView",onHide:"onSettingsHide",kind:"SettingsView.SettingsPopupView"}]}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments),this.start()},start:function(){var e=(app.getBounds().height-200)/2;this.$.btnView.applyStyle("padding-top",e+"px")},grid:function(){app.playAudio("click"),this.startGame("grid")},circle:function(){app.playAudio("click"),this.startGame("circle")},grating:function(){app.playAudio("click"),this.startGame("grating")},startGame:function(e){var t=app.gameCollection.at(0);t.set({score:0,level:1,speed:0,bgType:e}),app.router.navigate("main/game/"+t.get("id"),{trigger:!0})},showSettings:function(){app.playAudio("click"),this.$.settingsPopupView.show()}})});require.define("/views/main/bb/Treatment.js",function(e,t,n,r,i){n.Treatment=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","initBgLayer","initForeLayer","updateSpeed","updateScore","clear","changeGame","gameOver","updateScoreGroup"),this.padding=10,this.imgWidth=64,this.paused=!1},initCanvas:function(e,t){this.stage=new Kinetic.Stage({container:"gameMain",width:e,height:t,draggable:!1}),this.bgLayer=new Kinetic.Layer,this.foreLayer=new Kinetic.Layer,this.stage.add(this.bgLayer),this.stage.add(this.foreLayer),this.initControlLayer(),this.initScoreLayer()},setGame:function(e){this.model=e,this.listenTo(this.model,"change:speed",this.updateSpeed),this.listenTo(this.model,"change:score",this.updateScore),this.listenTo(this.model,"change:isFinished",this.changeGame),this.render();var t=this;this.remainTime=t.model.get("time"),this.timeInterval=setInterval(function(){t.timeText.setText(t.remainTime),t.timeText.getLayer().draw(),t.remainTime--,t.remainTime<0&&t.gameOver()},1e3),this.scoreText.setText($L("Score")+": "+this.model.get("score")),this.minTotalScoreText.setText($L("Total")+": "+(this.model.get("score")+app.settings.get("todayScore"))),this.minTotalScoreText.getLayer().draw(),this.applyImages()},applyImages:function(){},changeGame:function(){},updateScore:function(){var e=this;this.scoreText.setText($L("Score")+": "+this.model.get("score")),this.minTotalScoreText.setText($L("Total")+": "+(this.model.get("score")+app.settings.get("todayScore"))),this.scoreLabel.setAttrs({x:this.model.get("mousex"),y:this.model.get("mousey"),fontSize:30,text:"+"+this.model.get("winScore"),visible:!0,opacity:1});var t=new Kinetic.Tween({node:this.scoreLabel,duration:1,opacity:0,easing:Kinetic.Easings.EaseOut,onFinish:function(){e.scoreLabel.setAttrs({visible:!1}),e.foreView.checkGameOver()&&(e.model.get("speed")>=e.model.get("maxSpeed")?e.model.get("level")>=e.model.get("maxLevel")?e.model.set({level:e.model.get("maxLevel"),speed:0}):e.model.set({level:e.model.get("level")+1,speed:0}):e.model.set({speed:e.model.get("speed")+1}))}});t.play()},updateSpeed:function(){this.foreView&&this.foreView.init()},updateLevel:function(){this.bgView&&this.bgView.init(),this.foreView&&this.foreView.init()},gameOver:function(){clearInterval(this.timeInterval),app.playAudio("victory"),this.bgView&&(this.bgView.stopAnimate(),this.bgView.bgGroup.setOpacity(.1),this.bgView.bgGroup.getLayer().draw()),this.foreView&&(this.foreView.stopAnimate(),this.foreView.foreGroup.setOpacity(.3),this.foreView.foreGroup.setListening(!1),this.foreView.foreGroup.getLayer().draw());var e=this;e.controlLayer.setVisible(!1),e.scoreGroup.setVisible(!0);var t=new Kinetic.Tween({node:e.scoreGroup,duration:1,opacity:1,easing:Kinetic.Easings.EaseIn,onFinish:function(){e.updateScoreGroup()}});t.play()},updateScoreGroup:function(){this.baseScoreText.setText($L("Win score: ")+this.model.get("score")),this.awardScoreText.setText($L("Award score: ")+0),this.totalScoreText.setText($L("Total score: ")+(this.model.get("score")+app.settings.get("todayScore"))),this.scoreLayer.draw();var e=this,t=50+Math.floor(this.model.get("score")/4),n=0;this.anim=new Kinetic.Animation(function(r){var i=Math.floor(Math.random()*5);n+=i,e.awardScoreText.setText($L("Award score: ")+n),e.totalScoreText.setText($L("Total score: ")+(n+(e.model.get("score")+app.settings.get("todayScore")))),n>t&&(e.anim.stop(),e.backButton.setOpacity(1),app.settings.set({todayScore:app.settings.get("todayScore")+n+e.model.get("score")}),app.settings.set({todayTime:app.settings.get("todayTime")+e.model.get("time")}))},e.scoreLayer),this.anim.start()},initScoreLayer:function(){this.scoreLabel=new Kinetic.Text({text:"+100",width:200,fill:"orange",x:190,y:15,opacity:0}),this.scoreRect=new Kinetic.Rect({fill:"#555",width:400,height:350,stroke:"#666",strokeWidth:2,opacity:.8}),this.scoreGroup=new Kinetic.Group({x:(this.stage.getWidth()-this.scoreRect.getWidth())/2,y:(this.stage.getHeight()-this.scoreRect.getHeight())/2,opacity:.01,visible:!1}),this.titleText=new Kinetic.Text({text:$L("Your Score"),width:this.scoreRect.getWidth(),x:0,y:30,fontSize:28,align:"center",fill:"white"}),this.baseScoreText=this.titleText.clone({text:$L("Win score: "),x:0,y:this.titleText.getY()+this.titleText.getTextHeight()+50,fontSize:20}),this.awardScoreText=this.titleText.clone({text:$L("Award score: "),x:0,y:this.baseScoreText.getY()+this.baseScoreText.getTextHeight()+20,fontSize:20}),this.totalScoreText=this.titleText.clone({text:$L("Total score: "),x:0,y:this.awardScoreText.getY()+this.awardScoreText.getTextHeight()+20,fontSize:20});var e=this;this.backButton=new Kinetic.Label({opacity:0,x:this.scoreRect.getWidth()*2/4,y:this.totalScoreText.getY()+this.totalScoreText.getTextHeight()+50}),this.backButton.add(new Kinetic.Tag({fill:"#eee",lineJoin:"round",cornerRadius:5})),this.backButton.add(new Kinetic.Text({text:$L("Back"),fontSize:20,align:"center",fill:"#666",padding:15})),this.backButton.setX(this.scoreRect.getWidth()/2-70);var e=this;this.backButton.on("click tap",function(){app.playAudio("sclick");var t=new Kinetic.Tween({node:e.scoreGroup,duration:1,opacity:0,easing:Kinetic.Easings.EaseOut,onFinish:function(){e.backButton.setOpacity(0),e.controlLayer.setVisible(!0),e.scoreGroup.setVisible(!1),app.router.navigate("main/menu",{trigger:!0})}});t.play()}),this.scoreGroup.add(this.scoreRect),this.scoreGroup.add(this.titleText),this.scoreGroup.add(this.baseScoreText),this.scoreGroup.add(this.awardScoreText),this.scoreGroup.add(this.totalScoreText),this.scoreGroup.add(this.backButton),this.scoreLayer=new Kinetic.Layer,this.scoreLayer.add(this.scoreLabel),this.scoreLayer.add(this.scoreGroup),this.stage.add(this.scoreLayer),this.scoreLayer.draw()},initControlLayer:function(){this.controlGroup=new Kinetic.Group,this.controlPanelGroup=new Kinetic.Group({x:this.stage.getWidth()-175,y:30,opacity:.5});var e=this;this.controlPanelGrab=new Kinetic.Wedge({x:25,y:45,angleDeg:180,rotationDeg:90,radius:25,stroke:"white",strokeWidth:1,fill:"lightgreen"}),this.controlPanelGrab.on("click tap",function(){app.playAudio("click");if(e.controlPanelGroup.getX()==e.stage.getWidth()-25){var t=new Kinetic.Tween({node:e.controlPanelGroup,x:e.stage.getWidth()-175,duration:1,easing:Kinetic.Easings.EaseOut});t.play()}else{var t=new Kinetic.Tween({node:e.controlPanelGroup,x:e.stage.getWidth()-25,duration:1,easing:Kinetic.Easings.EaseIn});t.play()}}),this.controlPanel=new Kinetic.Rect({x:25,y:0,height:260,width:150,fill:"lightgreen",stroke:"white",strokeWidth:1,cornerRadius:3}),this.timeText=new Kinetic.Text({x:50,y:30,fontSize:40,align:"center",fill:"white",text:"0"}),this.minTotalScoreText=this.timeText.clone({x:50,fontSize:20,y:this.timeText.getY()+this.timeText.getHeight()+20,text:$L("Total")}),this.scoreText=this.timeText.clone({x:50,fontSize:20,y:this.minTotalScoreText.getY()+this.minTotalScoreText.getHeight()+20,text:$L("Score")}),this.desText=this.timeText.clone({x:50,fontSize:14,y:this.scoreText.getY()+50,text:$L("Click the smallest")}),this.des2Text=this.timeText.clone({x:50,fontSize:14,y:this.desText.getY()+20,text:$L("digital to start!")}),this.controlPanelGroup.add(this.controlPanel),this.controlPanelGroup.add(this.controlPanelGrab),this.controlPanelGroup.add(this.scoreText),this.controlPanelGroup.add(this.minTotalScoreText),this.controlPanelGroup.add(this.timeText),this.controlPanelGroup.add(this.desText),this.controlPanelGroup.add(this.des2Text),this.controlGroup.add(this.controlPanelGroup),this.controlLayer=new Kinetic.Layer,this.controlLayer.add(this.controlGroup),this.stage.add(this.controlLayer),this.controlLayer.draw()},initBgLayer:function(){this.bgView&&(this.bgView.bgGroup.destroy(),this.bgView=null);var t="none";if(this.model.get("bgType")=="none")t=="none";else if(this.model.get("bgType")=="random"){var n=["circle","grid","grating"];t=_.shuffle(n)[0]}else t=this.model.get("bgType");app.settings.get("debug")&&(t="circle");switch(t){case"circle":var r=e("/views/main/bb/bg/CircleBg");this.bgView=new r.CircleBg({model:this.model});break;case"grid":var r=e("/views/main/bb/bg/GridBg");this.bgView=new r.GridBg({model:this.model});break;case"grating":var r=e("/views/main/bb/bg/GratingBg");this.bgView=new r.GratingBg({model:this.model});break;case"image":var r=e("/views/main/bb/bg/ImageBg");this.bgView=new r.ImageBg({model:this.model});break;default:this.bgView=null}this.bgView&&(this.bgLayer.add(this.bgView.bgGroup),this.bgView.init())},initForeLayer:function(){this.foreView&&(this.foreView.foreGroup.destroy(),this.foreView=null);switch(this.model.get("id")){case"findLetter":var t=e("/views/main/bb/games/FindLetter");this.foreView=new t.FindLetter({model:this.model});break;case"drawWord":var t=e("/views/main/bb/games/DrawWord");this.foreView=new t.DrawWord({model:this.model});break;case"drawLine":var t=e("/views/main/bb/games/DrawLine");this.foreView=new t.DrawLine({model:this.model});break;case"drawGraph":var t=e("/views/main/bb/games/DrawGraph");this.foreView=new t.DrawGraph({model:this.model});break;case"hitMonster":var t=e("/views/main/bb/games/HitMonster");this.foreView=new t.HitMonster({model:this.model});break;case"rotationDigital":var t=e("/views/main/bb/games/RotationDigital");this.foreView=new t.RotationDigital({model:this.model});break;case"findFruit":var t=e("/views/main/bb/games/FindFruit");this.foreView=new t.FindFruit({model:this.model});break;case"animalStickers":var t=e("/views/main/bb/games/AnimalStickers");this.foreView=new t.AnimalStickers({model:this.model});break;case"hitMonster":var t=e("/views/main/bb/games/HitMonster");this.foreView=new t.HitMonster({model:this.model});break;case"fillDigital":var t=e("/views/main/bb/games/FillDigital");this.foreView=new t.FillDigital({model:this.model});break;case"crazyBallon":var t=e("/views/main/bb/games/CrazyBallon");this.foreView=new t.CrazyBallon({model:this.model});break;case"catMouse":var t=e("/views/main/bb/games/CatMouse");this.foreView=new t.CatMouse({model:this.model});break;default:}this.foreView&&(this.foreLayer.add(this.foreView.foreGroup),this.foreView.init())},clear:function(){this.bgView&&this.bgView.clear(),this.foreView&&this.foreView.clear()},render:function(){this.initBgLayer(),this.initForeLayer()},pauseGame:function(){this.paused=!this.paused,this.paused?(this.bgView.stopAnimate(),this.bgView.bgGroup.setOpacity(.1),this.bgView.bgGroup.getLayer().draw()):(this.bgView.bgGroup.setOpacity(1),this.bgView.bgGroup.getLayer().draw(),this.bgView.startAnimate());if(this.paused)clearInterval(this.timeInterval),this.foreView&&(this.foreView.stopAnimate(),this.foreView.bgGroup.setOpacity(.3),this.foreView.bgGroup.setListening(!1),this.foreView.bgGroup.getLayer().draw());else{this.foreView&&(this.foreView.bgGroup.setOpacity(1),this.foreView.bgGroup.setListening(!0),this.foreView.bgGroup.getLayer().draw(),this.foreView.animate());var e=this;this.timeInterval=setInterval(function(){e.timeText.setText($("Time")+": "+e.remainTime),e.timeText.getLayer().draw(),e.remainTime--,e.remainTime<0&&e.gameOver()},1e3)}}})});require.define("/views/main/bb/bg/CircleBg.js",function(e,t,n,r,i){n.CircleBg=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","startAnimate","stopAnimate","animateLoop","clear","changeSpeed","init","getTotalNum","getBgSubType"),this.bgGroup=new Kinetic.Group,this.longWidth=300,this.period=1e4,this.usedTime=0,this.timeDiff=80},changeSpeed:function(){this.period=Math.max(1e3*(10-2*this.model.get("speed")),2e3),this.bgGroup.getStage()&&this.init()},init:function(){this.longWidth=Math.max(this.bgGroup.getStage().width(),this.bgGroup.getStage().height()),this.listenTo(this.model,"change:speed",this.changeSpeed),this.bgSubType=this.getBgSubType(),this.bgGroup.setX(this.bgGroup.getStage().width()/2),this.bgGroup.setY(this.bgGroup.getStage().height()/2);var e=this.getTotalNum(this.model.get("level"));this.bgSubType=="onewedge"&&(e=1);var t=maxRadius=this.bgGroup.getStage().width()*.6;this.maxRadius=t,this.totalNum=e,this.colorTheme=app.$.gameView.getColorTheme(this.model.get("colorTheme"));var n=60;this.bgGroup.destroyChildren(),this.nodes=[];for(var r=0;r<e;r++){switch(this.bgSubType){case"circle":var i=new Kinetic.Circle({x:0,y:0,radius:this.maxRadius*(e-r)/e,fill:r%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),stroke:r%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),strokeWidth:this.colorTheme.get("borderWidth"),offsetX:0,offsetY:0,scaleX:1,scaleY:1,opacity:1});break;case"wedge":n=360/e;var i=new Kinetic.Wedge({x:0,y:0,radius:t,fill:r%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),stroke:r%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),strokeWidth:this.colorTheme.get("borderWidth"),offsetX:0,offsetY:0,angleDeg:n,rotationDeg:n*r,scaleX:1,scaleY:1,opacity:1});break;case"onewedge":var i=new Kinetic.Wedge({x:0,y:0,radius:t,fill:r%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),stroke:r%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),strokeWidth:this.colorTheme.get("borderWidth"),offsetX:0,offsetY:0,angleDeg:n,rotationDeg:n*r,scaleX:1,scaleY:1,opacity:1});break;case"color":var i=new Kinetic.Wedge({x:0,y:0,radius:t,fill:r%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),stroke:r%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),strokeWidth:this.colorTheme.get("borderWidth"),offsetX:0,offsetY:0,angleDeg:n,rotationDeg:n*r,scaleX:1,scaleY:1,opacity:1})}this.nodes.push(i),this.bgGroup.add(i)}this.bgGroup.getLayer().draw(),this.startAnimate()},startAnimate:function(){var e=this;e.stopAnimate(),e.usedTime=0;try{app.settings.get("anim")=="animation"?(this.anim=new Kinetic.Animation(function(t){e.usedTime+=e.timeDiff,e.usedTime>e.period&&(e.usedTime=0),e.animateLoop()},e.bgGroup.getLayer()),this.anim.start()):e.isMainLoopRunning||(e.isMainLoopRunning=!0,e.animInterval=setInterval(function(){e.usedTime+=e.timeDiff,e.usedTime>e.period&&(e.usedTime=0),e.animateLoop(),e.bgGroup&&e.bgGroup.getLayer()&&e.bgGroup.getLayer().batchDraw()},e.timeDiff))}catch(t){console.log("animat wrong"),e.stopAnimate()}},animateLoop:function(){var e=this;if(e.bgGroup.getStage())if(e.bgSubType=="wedge"){var t=360*e.usedTime/e.period;_.each(e.nodes,function(e){e.setAttrs({rotationDeg:e.getRotationDeg()+t})})}else if(e.bgSubType=="circle"){var n=1+e.usedTime/e.period;_.each(e.nodes,function(e){e.setAttrs({scaleX:n,scaleY:n})})}else if(e.bgSubType=="onewedge"){var t=360*e.usedTime/e.period;_.each(e.nodes,function(e){e.setAttrs({rotationDeg:t,opacity:.4+.6*Math.random()})})}else e.bgSubType=="color"&&e.usedTime/e.period>.05&&(e.usedTime=0,_.each(e.nodes,function(t){var n=e.colorTheme.get("color2");t.getFill()==e.colorTheme.get("color2")&&(n=e.colorTheme.get("color1")),t.setAttrs({fill:n})}))},stopAnimate:function(){app.settings.get("anim")=="animation"?this.anim&&this.anim.isRunning()&&(this.anim.stop(),this.anim=null):(clearInterval(this.animInterval),this.isMainLoopRunning=!1),this.off(this.model,"change:speed",this.changeSpeed)},clear:function(){this.stopAnimate()},render:function(){},getTotalNum:function(e){return 5+e*2},getBgSubType:function(){var e=this.model.get("bgSubType");if(e=="random"){var t=["circle","wedge","onewedge","color"];e=_.shuffle(t)[0]}return e}})});require.define("/views/main/bb/bg/GratingBg.js",function(e,t,n,r,i){n.GratingBg=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","startAnimate","stopAnimate","animateLoop","clear","changeSpeed","init","getTotalNum","getBgSubType"),this.bgGroup=new Kinetic.Group,this.longWidth=300,this.period=1e4,this.usedTime=0,this.timeDiff=80},changeSpeed:function(){this.period=Math.max(1e3*(10-2*this.model.get("speed")),2e3),this.bgGroup.getStage()&&this.init()},init:function(){this.longWidth=Math.max(this.bgGroup.getStage().width(),this.bgGroup.getStage().height()),this.listenTo(this.model,"change:speed",this.changeSpeed);var e=this.getTotalNum(this.model.get("level")),t=this.bgGroup.getStage().width()/e,n=this.bgGroup.getStage().height()*3;this.bgSubType=this.getBgSubType(),this.colorTheme=app.$.gameView.getColorTheme(this.model.get("colorTheme"));var r=45*Math.random();this.bgGroup.destroyChildren(),this.nodes=[];for(var i=0;i<3*e;i++){var s=new Kinetic.Rect({x:i*t,y:-this.bgGroup.getStage().height(),width:t,height:n,fill:i%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),stroke:this.colorTheme.get("borderColor"),strokeWidth:this.colorTheme.get("borderWidth"),rotationDeg:r,offsetX:0,offsetY:0,scaleX:1,scaleY:1,opacity:1});this.nodes.push(s),this.bgGroup.add(s)}this.bgGroup.setX(-this.longWidth),this.bgGroup.getLayer().draw(),this.startAnimate()},startAnimate:function(){var e=this;e.stopAnimate(),e.usedTime=0;try{app.settings.get("anim")=="animation"?(this.anim=new Kinetic.Animation(function(t){e.usedTime+=e.timeDiff,e.usedTime>e.period&&(e.usedTime=0),e.animateLoop()},e.bgGroup.getLayer()),this.anim.start()):e.isMainLoopRunning||(e.isMainLoopRunning=!0,e.animInterval=setInterval(function(){e.usedTime+=e.timeDiff,e.usedTime>e.period&&(e.usedTime=0),e.animateLoop(),e.bgGroup&&e.bgGroup.getLayer()&&e.bgGroup.getLayer().batchDraw()},e.timeDiff))}catch(t){console.log("animat wrong"),e.stopAnimate()}},animateLoop:function(){var e=this;if(e.bgGroup.getStage())if(e.bgSubType=="move"){var t=e.bgGroup.getStage().getWidth()*e.usedTime/e.period;e.bgGroup.setX(-e.longWidth+t),_.each(e.nodes,function(e){e.setAttrs({opacity:Math.random()})})}else if(e.bgSubType=="rotate"){var n=360*e.usedTime/e.period;_.each(e.nodes,function(e){e.setAttrs({offsetX:e.width()/2,offsetY:e.height()/2,rotationDeg:n,opacity:Math.random()})})}else if(e.bgSubType=="scale"){var r=Math.sin(e.usedTime*2*Math.PI/e.period)+.001;_.each(e.nodes,function(e){e.setAttrs({scaleX:r,scaleY:1,opacity:Math.random()})})}},stopAnimate:function(){app.settings.get("anim")=="animation"?this.anim&&this.anim.isRunning()&&(this.anim.stop(),this.anim=null):(clearInterval(this.animInterval),this.isMainLoopRunning=!1),this.off(this.model,"change:speed",this.changeSpeed)},clear:function(){this.stopAnimate()},render:function(){},getTotalNum:function(e){return 5+e*2},getBgSubType:function(){var e=this.model.get("bgSubType");if(e=="random"){var t=["move","scale"];e=_.shuffle(t)[0]}return e}})});require.define("/views/main/bb/bg/GridBg.js",function(e,t,n,r,i){n.GridBg=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","startAnimate","stopAnimate","animateLoop","clear","changeSpeed","init","getTotalNum","getBgSubType"),this.bgGroup=new Kinetic.Group,this.longWidth=300,this.period=1e4,this.usedTime=0,this.timeDiff=80},changeSpeed:function(){this.period=Math.max(1e3*(10-2*this.model.get("speed")),2e3),this.bgGroup.getStage()&&this.init()},init:function(){this.longWidth=Math.max(this.bgGroup.getStage().width(),this.bgGroup.getStage().height()),this.listenTo(this.model,"change:speed",this.changeSpeed);var e=this.getTotalNum(this.model.get("level")),t=this.bgGroup.getStage().width()/e,n=t,r=Math.floor(this.bgGroup.getStage().height()/n);this.bgSubType=this.getBgSubType(),this.colorTheme=app.$.gameView.getColorTheme(this.model.get("colorTheme"));var i=0;this.bgGroup.destroyChildren(),this.nodes=[];for(var s=0;s<3*r;s++)for(var o=0;o<3*e;o++){var u=new Kinetic.Rect({x:o*t,y:s*n,width:t,height:n,fill:(o+s)%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),rotationDeg:i,offsetX:0,offsetY:0,scaleX:1,scaleY:1,opacity:1});this.nodes.push(u),this.bgGroup.add(u)}this.bgGroup.setX(-this.longWidth),this.bgGroup.getLayer().draw(),this.startAnimate()},startAnimate:function(){var e=this;e.stopAnimate(),e.usedTime=0;try{app.settings.get("anim")=="animation"?(this.anim=new Kinetic.Animation(function(t){e.usedTime+=e.timeDiff,e.usedTime>e.period&&(e.usedTime=0),e.animateLoop()},e.bgGroup.getLayer()),this.anim.start()):e.isMainLoopRunning||(e.isMainLoopRunning=!0,e.animInterval=setInterval(function(){e.usedTime+=e.timeDiff,e.usedTime>e.period&&(e.usedTime=0),e.animateLoop(),e.bgGroup&&e.bgGroup.getLayer()&&e.bgGroup.getLayer().batchDraw()},e.timeDiff))}catch(t){console.log("animat wrong"),e.stopAnimate()}},animateLoop:function(){var e=this;if(e.bgGroup.getStage())if(e.bgSubType=="move"){var t=e.bgGroup.getStage().getWidth()*e.usedTime/e.period;e.bgGroup.setX(-e.longWidth+t)}else if(e.bgSubType=="rotate"){var n=360*e.usedTime/e.period;_.each(e.nodes,function(e){e.setAttrs({offsetX:e.width()/2,offsetY:e.height()/2,rotationDeg:n,opacity:Math.random()})})}else if(e.bgSubType=="scale"){var r=Math.sin(e.usedTime*2*Math.PI/e.period)+.001;_.each(e.nodes,function(e){e.setAttrs({scaleX:r,scaleY:1})})}else e.bgSubType=="color"&&e.usedTime/e.period>.1&&(e.usedTime=0,_.each(e.nodes,function(t){var n=e.colorTheme.get("color2");t.getFill()==e.colorTheme.get("color2")&&(n=e.colorTheme.get("color1")),t.setAttrs({fill:n})}))},stopAnimate:function(){app.settings.get("anim")=="animation"?this.anim&&this.anim.isRunning()&&(this.anim.stop(),this.anim=null):(clearInterval(this.animInterval),this.isMainLoopRunning=!1),this.off(this.model,"change:speed",this.changeSpeed)},clear:function(){this.stopAnimate()},render:function(){},getTotalNum:function(e){return 5+e*2},getBgSubType:function(){var e=this.model.get("bgSubType");if(e=="random"){var t=["move","scale","color","rotate"];e=_.shuffle(t)[0]}return e}})});require.define("/views/main/bb/games/RotationDigital.js",function(e,t,n,r,i){var s=Backbone.Model.extend({defaults:function(){return{name:"0",posid:0}}}),o=Backbone.Collection.extend({model:s}),u=Backbone.View.extend({initialize:function(){_.bindAll(this,"render"),this.numberShape=new Kinetic.Group,this.numberPolygon=new Kinetic.RegularPolygon,this.numberText=new Kinetic.Text({text:"0",fontSize:50,fontFamily:"Calibri",fill:"red"}),this.numberShape.add(this.numberPolygon),this.numberShape.add(this.numberText);var e=this;this.listenTo(this.model,"change",this.change)},render:function(){this.numberPolygon.setSides(this.model.get("sides")),this.numberPolygon.setRadius(this.model.get("radius")),this.numberPolygon.setFill(this.model.get("fill")),this.numberPolygon.setStroke(this.model.get("stroke")),this.numberPolygon.setStrokeWidth(this.model.get("strokeWidth")),this.numberText.setFill(this.model.get("stroke")),this.model.get("isAnswered")?this.numberText.setText(""):this.numberText.setText(this.model.get("name")),this.numberShape.setX(this.model.get("x")),this.numberShape.setY(this.model.get("y")),this.numberShape.setOffset({x:-this.model.get("offsetx"),y:-this.model.get("offsety")}),this.numberPolygon.setOpacity(this.model.get("opacity")),this.numberShape.setRotation(this.model.get("arc")),this.numberPolygon.setRotation(-this.model.get("arc")),this.numberText.setOffset({x:this.numberText.getTextWidth()/2,y:this.numberText.getTextHeight()/2}),this.numberText.setRotation(-this.model.get("arc"))},change:function(){this.render(),this.numberShape.getLayer().draw()}});n.RotationDigital=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","addOne","addAll","init","animate","clear","stopAnimate","getTotalNum","caculateScore","checkGameOver","action"),this.numberCollection=new o,this.listenTo(this.numberCollection,"add",this.addOne),this.listenTo(this.numberCollection,"reset",this.addAll),this.listenTo(this.numberCollection,"all",this.render),this.currentAnswer=1,this.foreGroup=new Kinetic.Group,this.numberGroup=new Kinetic.Group,this.foreGroup.add(this.numberGroup),this.maxRadius=300},init:function(){this.maxRadius=Math.min(this.foreGroup.getStage().getWidth(),this.foreGroup.getStage().getHeight())/2,this.totalNum=this.getTotalNum(this.model.get("level")),this.foreGroup.setX(this.foreGroup.getStage().getWidth()/2),this.foreGroup.setY(this.foreGroup.getStage().getHeight()/2),this.foreGroup.setOffset([this.maxRadius,this.maxRadius]),this.foreGroup.setRotation(0),this.numberGroup.setOffset([-this.maxRadius,-this.maxRadius]),this.colorTheme=app.$.gameView.getColorTheme(this.model.get("colorTheme"));var e=new Array;for(var t=1;t<=this.totalNum;t++)e.push(t);var n=_.shuffle(e),r=this.maxRadius*2/((2*this.model.get("level")+1)*Math.sqrt(3)),i=[];for(var t=0;t<this.totalNum;t++){var o=new s,u=0,a=0,f=0;t<6?(f=60*t,u=-Math.sqrt(3)/2*r,a=-1.5*r):t<18?(f=30*t,u=-Math.sqrt(3)*r,a=-3*r):t<36?(f=20*t,u=-1.5*Math.sqrt(3)*r,a=-4.5*r):t<60?(f=15*t,u=-2*Math.sqrt(3)*r,a=-6*r):t<90&&(f=12*t,u=-2.5*Math.sqrt(3)*r,a=-7.5*r),o.set({name:n[t],isAnswered:!1,posid:t,sides:6,radius:r,offsetx:u,offsety:a,fill:t%2==0?this.colorTheme.get("color1"):this.colorTheme.get("color2"),stroke:this.colorTheme.get("borderColor"),strokeWidth:this.colorTheme.get("borderWidth"),fontSize:30,arc:f,opacity:.4+Math.random()*.4}),i.push(o)}this.numberCollection.reset(i)},animate:function(){this.stopAnimate();if(this.model.get("speed")>0){var e=30;this.model.get("speed")==1?e=30:this.model.get("speed")==2?e=45:this.model.get("speed")==3?e=60:this.model.get("speed")==4?e=90:this.model.get("speed")==5&&(e=180);var t=this;this.anim=new Kinetic.Animation(function(n){var r=n.timeDiff*e/1e3;t.foreGroup.rotate(r)},t.foreGroup.getLayer()),this.anim.start()}},render:function(){},addOne:function(e){var t=new u({model:e});this.numberGroup.add(t.numberShape),t.render();var n=this;t.numberShape.on("click tap",function(t){n.action(t,e)})},addAll:function(){this.numberGroup.destroyChildren(),this.numberCollection.each(this.addOne),this.foreGroup.getLayer().draw(),this.animate()},action:function(e,t){t.get("isAnswered")||(t.get("name")==this.currentAnswer?(t.set({isAnswered:!0}),this.currentAnswer++,app.playAudio("success"),this.caculateScore(e)):app.playAudio("wrong"))},checkGameOver:function(){var e=this.numberCollection.where({isAnswered:!1});return e.length==0?(this.currentAnswer=1,!0):!1},getTotalNum:function(e){switch(e){case 1:totalNum=6;break;case 2:totalNum=18;break;case 3:totalNum=36;break;case 4:totalNum=60;break;case 5:totalNum=90;break;default:totalNum=6}return totalNum},clear:function(){this.stopAnimate()},stopAnimate:function(){this.anim&&this.anim.isRunning()&&(this.anim.stop(),this.anim=null)},caculateScore:function(e){var t=5*this.model.get("level"),n=this.foreGroup.getStage().getPointerPosition();this.model.set({mousex:n.x,mousey:n.y-20,winScore:t,score:this.model.get("score")+t})}})});require.define("/views/settings/SettingsAboutView.js",function(e,t,n,r,i){enyo.kind({name:"SettingsView.SettingsAboutView",kind:"FittableRows",components:[{fit:!0,name:"aboutMainView",kind:"Panels",draggable:!1,arrangerKind:"CardSlideInArranger",components:[{kind:"FittableRows",classes:"onyx-popup-content",components:[{kind:"onyx.Groupbox",components:[{kind:"FittableColumns",components:[{content:$L("Name"),classes:"label"},{fit:!0},{name:"softname",classes:"label"}]},{kind:"FittableColumns",components:[{content:$L("Version"),classes:"label"},{fit:!0},{name:"softversion",classes:"label"}]},{kind:"FittableColumns",components:[{content:$L("Home"),classes:"label"},{fit:!0},{name:"softweb",ontap:"openWeb",content:"<i class='fa fa-home fa-lg'></i>",style:"margin-right:10px;",allowHtml:!0,classes:"label"}]},{kind:"FittableColumns",components:[{content:$L("Developer"),classes:"label"},{fit:!0},{name:"softdev",style:"margin-right:10px;",classes:"label"},{name:"softdevweibo",sytle:"color:red",ontap:"openDevWeibo",allowHtml:!0,content:"<i class='fa fa-weibo'></i>",classes:"label"}]}]}]}]}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments),this.$.softname.setContent($L(app.settings.get("softname"))),this.$.softversion.setContent($L(app.settings.get("softversion"))),this.$.softdev.setContent($L(app.settings.get("softdev")))},switchView:function(e,t){var n=t.originator.getName();switch(n){case"feedback":this.switchPage(1);break;case"aboutus":this.switchPage(2);break;case"award":this.switchPage(3)}},switchPage:function(e){this.$.aboutMainView.setIndex(e)},back:function(){this.switchPage(0)},openWeb:function(){ciiat.Utils.openUrl(app.settings.get("softweb"))},openWeibo:function(){ciiat.Utils.openUrl(app.settings.get("softweibo"))},openDevWeibo:function(){ciiat.Utils.openUrl(app.settings.get("softdevweibo"))}})});require.define("/views/settings/SettingsBaseView.js",function(e,t,n,r,i){enyo.kind({name:"SettingsView.SettingsBaseView",kind:"FittableRows",classes:"onyx-popup-content",components:[{kind:"onyx.Groupbox",components:[{kind:"FittableColumns",components:[{content:$L("Music"),classes:"label"},{fit:!0},{name:"isBgSound",style:"width:100px",onChange:"isBgSoundChanged",kind:"onyx.ToggleButton",onContent:$L("Yes"),offContent:$L("No")}]},{kind:"FittableColumns",components:[{content:$L("Sound"),classes:"label"},{fit:!0},{name:"isSoundEffect",style:"width:100px",onChange:"isSoundEffectChanged",kind:"onyx.ToggleButton",onContent:$L("Yes"),offContent:$L("No")}]}]},{kind:"onyx.Groupbox",components:[{kind:"FittableColumns",style:"border-bottom:none",components:[{content:$L("Reset to default"),classes:"label"},{fit:!0},{name:"submit",ontap:"clearData",style:"width:100px",kind:"onyx.Button",content:$L("Reset")}]}]}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments);var e=this;this.$.isSoundEffect.setValue(app.settings.get("isSoundEffect")?app.settings.get("isSoundEffect"):!1),this.$.isBgSound.setValue(app.settings.get("isBgSound")?app.settings.get("isBgSound"):!1)},isBgSoundChanged:function(){app.playAudio("click");var e=this.$.isBgSound.getValue();app.settings.save({isBgSound:e}),e?window.cordova||window.PhoneGap?(app.bgMedia&&app.bgMedia.stop(),app.playAudio("bg")):app.playAudio("bg"):app.stopAudio("bg")},isSoundEffectChanged:function(){app.playAudio("click");var e=this.$.isSoundEffect.getValue();app.settings.save({isSoundEffect:e})},clearData:function(){app.playAudio("click");var e=this;enyoAlert($L("Are you sure?<br>All data will be reset!"),app.$.menuView,{cancelText:$L("Cancel"),confirmText:$L("Confirm"),onConfirm:function(e){window.localStorage.clear(),window.cordova||window.PhoneGap?location.reload():(enyo.log("refersh local"),location.reload())}})}})});require.define("/views/settings/SettingsPopupView.js",function(e,t,n,r,i){e("/views/settings/SettingsBaseView"),e("/views/settings/SettingsAboutView"),enyo.kind({name:"SettingsView.SettingsPopupView",kind:"onyx.Popup",centered:!0,floating:!0,modal:!0,scrim:!0,classes:"onyx-popup-user",style:"height:380px;opacity:.9",published:{type:null},components:[{name:"mainView",layoutKind:"FittableRowsLayout",components:[{name:"headerbar",classes:"onyx-popup-title button",kind:"FittableColumns",components:[{fit:!0,classes:"center",components:[{kind:"onyx.RadioGroup",controlClasses:"onyx-tabbutton",onActivate:"switchView",components:[{name:"btnBase",active:!0,content:$L("Settings")},{name:"btnAbout",content:$L("About")}]}]}]},{name:"panelView",kind:"Panels",fit:!0,draggable:!1,arrangerKind:"CardSlideInArranger",classes:"mainContent",style:"min-height:320px;",components:[{name:"settingsBaseView",kind:"SettingsView.SettingsBaseView"},{name:"settingsAboutView",kind:"SettingsView.SettingsAboutView"}]}]}],create:function(){this.inherited(arguments)},rendered:function(){this.inherited(arguments)},typeChanged:function(){this.type&&(this.type=="base"?this.$.btnBase.setActive(!0):this.type=="about"&&this.$.btnAbout.setActive(!0))},switchView:function(e,t){if(t.originator.getActive()){var n=t.originator.getName();switch(n){case"btnBase":this.$.panelView.setIndex(0);break;case"btnAbout":this.$.panelView.setIndex(1)}}}})});require('/entry');